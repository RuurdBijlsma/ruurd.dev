(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d6d05b6"],{"17b6":function(e,t,i){"use strict";i("2deb")},"2deb":function(e,t,i){},6062:function(e,t,i){"use strict";var n=i("6d61"),a=i("6566");e.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),a)},"6ec5":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"media-photo"},[i("div",{staticClass:"left-pane"},[i("div",{staticClass:"controls"},[i("div",{staticClass:"control-top"},[i("div",{staticClass:"control-top-left"},[i("v-btn",{attrs:{large:"",icon:"",dark:""},on:{click:e.close}},[i("v-icon",[e._v("mdi-arrow-left")])],1)],1),i("div",{staticClass:"control-top-right"},[i("v-btn",{attrs:{large:"",icon:"",dark:""},on:{click:function(t){e.showInfo=!e.showInfo}}},[i("v-icon",[e._v("mdi-information-outline")])],1)],1)]),i("div",{staticClass:"control-mid"},[i("v-btn",{attrs:{fab:"",dark:"",disabled:!e.canSkipLeft},on:{click:e.previous}},[i("v-icon",[e._v("mdi-chevron-left")])],1),i("v-btn",{attrs:{fab:"",dark:"",disabled:!e.canSkipRight},on:{click:e.next}},[i("v-icon",[e._v("mdi-chevron-right")])],1)],1)]),e.media&&"photo"===e.media.type?i("v-img",{key:e.media.id,staticClass:"media-item",attrs:{"lazy-src":e.api+"/photos/tiny/"+e.media.id+".webp",src:e.api+"/photos/big/"+e.media.id+".webp",contain:""}}):e.media?i("video",{ref:"video"+e.media.id,staticClass:"media-item",attrs:{poster:e.api+"/photos/big/"+e.media.id+".webp",controls:"",autoplay:"",src:e.api+"/photos/webm/"+e.media.id+".webm"}}):e._e()],1),i("v-sheet",{staticClass:"right-pane",style:{marginRight:e.showInfo?"0":"-400px"}},[i("div",{staticClass:"info-header"},[i("v-btn",{attrs:{icon:""},on:{click:function(t){e.showInfo=!1}}},[i("v-icon",[e._v("mdi-close")])],1),i("span",[e._v("Info")])],1),i("v-subheader",{staticClass:"subheader-caption"},[e._v("DETAILS")]),e.media?i("div",{staticClass:"info-content"},[i("div",[e._v(e._s(e.media.createDate))]),e.media.filename?i("div",[e._v(e._s(e.media.filename))]):e._e(),i("div",[e._v(e._s(e.media.width)+" Ã— "+e._s(e.media.height))]),e.media.classifications&&e.media.classifications.length>0?i("div",[e._v(" "+e._s(e.media.classifications[0].levels[0])+" ")]):e._e(),e.media.location?i("div",[e._v(e._s(e.media.location))]):e._e()]):e._e()],1)],1)},a=[],o=i("2909"),s=i("1da1"),r=(i("96cf"),i("d3b7"),i("6062"),i("3ca3"),i("ddb0"),i("7db0"),i("4de4"),i("ac1f"),i("1276"),i("a15b"),i("fb6a"),i("5319"),i("99af"),i("c740"),i("2b0e")),d=i("1a43"),c=i("b0d1"),u=r["a"].extend({name:"Photo",props:{},data:function(){return{api:d["a"],media:null,showInfo:!0,isLoading:new Set}},beforeDestroy:function(){document.removeEventListener("keydown",this.handleKey)},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.media=null!==(i=e.queue.find((function(t){return t.id===e.id})))&&void 0!==i?i:null,t.next=3,e.fullMediaLoad();case 3:e.$store.commit("keepInView",e.media),document.addEventListener("keydown",e.handleKey,!1);case 5:case"end":return t.stop()}}),t)})))()},methods:{handleKey:function(e){switch(!0){case"ArrowRight"===e.key:this.next();break;case"ArrowLeft"===e.key:this.previous();break}},close:function(){var e=this.$route.path.split("/").filter((function(e){return 0!==e.length}));console.log(e);var t="/"+e.slice(0,e.length-2).join("/");this.$router.push(t)},previous:function(){var e=this.queue[this.index-1];if(e){this.media=e,this.$store.commit("keepInView",this.media),this.fullMediaLoad();var t=this.$route.path.split("/");this.$router.replace([].concat(Object(o["a"])(t.slice(0,t.length-1)),[e.id]).join("/"))}},next:function(){var e=this.queue[this.index+1];if(e){this.media=e,this.$store.commit("keepInView",this.media),this.fullMediaLoad();var t=this.$route.path.split("/");this.$router.replace([].concat(Object(o["a"])(t.slice(0,t.length-1)),[e.id]).join("/"))}},fullMediaLoad:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i,n,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=null!==(i=null===(n=e.media)||void 0===n?void 0:n.id)&&void 0!==i?i:e.id,!e.isLoading.has(o)){t.next=3;break}return t.abrupt("return");case 3:return e.isLoading.add(o),t.next=6,e.$store.dispatch("apiRequest",{url:"photos/".concat(o)}).then(c["a"].fromObject);case 6:s=t.sent,null!==e.media&&o!==(null===(a=e.media)||void 0===a?void 0:a.id)||(console.log(s),e.media=s),e.isLoading.delete(o);case 9:case"end":return t.stop()}}),t)})))()},waitSleep:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(t){return setTimeout(t,e)}))}},computed:{canSkipLeft:function(){return this.index>0},canSkipRight:function(){return this.index+1<this.queue.length},index:function(){var e=this;return this.queue.findIndex((function(t){return t.id===e.id}))},queue:function(){return this.$store.state.viewerQueue},id:function(){return this.$route.params.id}},watch:{id:function(){this.fullMediaLoad()}}}),l=u,h=(i("17b6"),i("2877")),v=i("6544"),f=i.n(v),m=i("8336"),p=i("132d"),b=i("adda"),w=i("8dd9"),g=i("e0c7"),k=Object(h["a"])(l,n,a,!1,null,"3e832aed",null);t["default"]=k.exports;f()(k,{VBtn:m["a"],VIcon:p["a"],VImg:b["a"],VSheet:w["a"],VSubheader:g["a"]})}}]);
//# sourceMappingURL=chunk-2d6d05b6.3da9d72f.js.map