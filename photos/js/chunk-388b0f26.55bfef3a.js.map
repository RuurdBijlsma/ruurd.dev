{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.set.js","webpack:///./src/views/Photo.vue?8114","webpack:///./src/views/Photo.vue","webpack:///./src/views/Photo.vue?1049","webpack:///./src/views/Photo.vue?4b28","webpack:///./src/views/Photo.vue?1860"],"names":["collection","collectionStrong","module","exports","init","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","close","_v","$event","showInfo","canSkipLeft","previous","canSkipRight","next","media","type","key","id","api","ref","_e","style","marginRight","_s","createDate","filename","width","height","classifications","levels","location","staticRenderFns","extend","name","props","data","isLoading","Set","beforeDestroy","mounted","queue","find","i","fullMediaLoad","methods","path","$route","split","filter","p","console","log","newPath","slice","join","$router","push","prev","index","replace","has","add","keptInView","$store","commit","dispatch","url","then","Media","fromObject","delete","waitSleep","ms","Promise","resolve","setTimeout","computed","findIndex","state","viewerQueue","params","watch","component","VBtn","VIcon","VImg","VSheet","VSubheader"],"mappings":"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","file":"js/chunk-388b0f26.55bfef3a.js","sourcesContent":["'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Set` constructor\n// https://tc39.es/ecma262/#sec-set-objects\nmodule.exports = collection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"media-photo\"},[_c('div',{staticClass:\"left-pane\"},[_c('div',{staticClass:\"controls\"},[_c('div',{staticClass:\"control-top\"},[_c('div',{staticClass:\"control-top-left\"},[_c('v-btn',{attrs:{\"large\":\"\",\"icon\":\"\",\"dark\":\"\"},on:{\"click\":_vm.close}},[_c('v-icon',[_vm._v(\"mdi-arrow-left\")])],1)],1),_c('div',{staticClass:\"control-top-right\"},[_c('v-btn',{attrs:{\"large\":\"\",\"icon\":\"\",\"dark\":\"\"},on:{\"click\":function($event){_vm.showInfo = !_vm.showInfo}}},[_c('v-icon',[_vm._v(\"mdi-information-outline\")])],1)],1)]),_c('div',{staticClass:\"control-mid\"},[_c('v-btn',{attrs:{\"fab\":\"\",\"dark\":\"\",\"disabled\":!_vm.canSkipLeft},on:{\"click\":_vm.previous}},[_c('v-icon',[_vm._v(\"mdi-chevron-left\")])],1),_c('v-btn',{attrs:{\"fab\":\"\",\"dark\":\"\",\"disabled\":!_vm.canSkipRight},on:{\"click\":_vm.next}},[_c('v-icon',[_vm._v(\"mdi-chevron-right\")])],1)],1)]),(_vm.media && _vm.media.type === 'photo')?_c('v-img',{key:_vm.media.id,staticClass:\"media-item\",attrs:{\"lazy-src\":(_vm.api + \"/photos/tiny/\" + (_vm.media.id) + \".webp\"),\"src\":(_vm.api + \"/photos/big/\" + (_vm.media.id) + \".webp\"),\"contain\":\"\"}}):(_vm.media)?_c('video',{ref:(\"video\" + (_vm.media.id)),staticClass:\"media-item\",attrs:{\"poster\":(_vm.api + \"/photos/big/\" + (_vm.media.id) + \".webp\"),\"controls\":\"\",\"autoplay\":\"\",\"src\":(_vm.api + \"/photos/webm/\" + (_vm.media.id) + \".webm\")}}):_vm._e()],1),_c('v-sheet',{staticClass:\"right-pane\",style:({\n        marginRight: _vm.showInfo ? '0' : '-400px',\n    })},[_c('div',{staticClass:\"info-header\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.showInfo = false}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1),_c('span',[_vm._v(\"Info\")])],1),_c('v-subheader',{staticClass:\"subheader-caption\"},[_vm._v(\"DETAILS\")]),(_vm.media)?_c('div',{staticClass:\"info-content\"},[_c('div',[_vm._v(_vm._s(_vm.media.createDate))]),(_vm.media.filename)?_c('div',[_vm._v(_vm._s(_vm.media.filename))]):_vm._e(),_c('div',[_vm._v(_vm._s(_vm.media.width)+\" Ã— \"+_vm._s(_vm.media.height))]),(_vm.media.classifications && _vm.media.classifications.length > 0)?_c('div',[_vm._v(\" \"+_vm._s(_vm.media.classifications[0].levels[0])+\" \")]):_vm._e(),(_vm.media.location)?_c('div',[_vm._v(_vm._s(_vm.media.location))]):_vm._e()]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport {api} from \"@/ts/constants\"\nimport {Media} from \"@/ts/Media\";\n\nexport default Vue.extend({\n    name: 'Photo',\n    props: {},\n    data: () => ({\n        api,\n        media: null as Media | null,\n        showInfo: true,\n        isLoading: new Set(),\n    }),\n    beforeDestroy() {\n    },\n    async mounted() {\n        this.media = this.queue.find(i => i.id === this.id) ?? null;\n        await this.fullMediaLoad();\n    },\n    methods: {\n        close() {\n            let path = this.$route.path.split('/').filter(p => p.length !== 0);\n            console.log(path);\n            let newPath = '/' + path.slice(0, path.length - 2).join('/');\n            this.$router.push(newPath);\n        },\n        previous() {\n            let prev = this.queue[this.index - 1];\n            if (!prev) return;\n            this.media = prev;\n            this.fullMediaLoad();\n            let path = this.$route.path.split('/');\n            this.$router.replace([...path.slice(0, path.length - 1), prev.id].join('/'));\n        },\n        next() {\n            let next = this.queue[this.index + 1];\n            if (!next) return;\n            this.media = next;\n            this.fullMediaLoad();\n            let path = this.$route.path.split('/');\n            this.$router.replace([...path.slice(0, path.length - 1), next.id].join('/'));\n        },\n        async fullMediaLoad() {\n            let id = this.media?.id ?? this.id;\n            if (this.isLoading.has(id))\n                return;\n            this.isLoading.add(id);\n\n            let keptInView = false;\n            if (this.media?.id === id) {\n                keptInView = true;\n                this.$store.commit('keepInView', this.media);\n            }\n\n            let media = await this.$store.dispatch('apiRequest', {url: `photos/${id}`}).then(Media.fromObject);\n            if (this.media === null || id === this.media?.id) {\n                console.log(media);\n                if (!keptInView) {\n                    this.$store.commit('keepInView', media);\n                }\n                this.media = media;\n            }\n            this.isLoading.delete(id);\n        },\n        waitSleep(ms = 1000) {\n            return new Promise(resolve => setTimeout(resolve, ms));\n        }\n    },\n    computed: {\n        canSkipLeft(): boolean {\n            return this.index > 0;\n        },\n        canSkipRight(): boolean {\n            return this.index + 1 < this.queue.length - 1;\n        },\n        index(): number {\n            return this.queue.findIndex(i => i.id === this.id);\n        },\n        queue(): Media[] {\n            return this.$store.state.viewerQueue;\n        },\n        id() {\n            return this.$route.params.id;\n        },\n    },\n    watch: {\n        id() {\n            this.fullMediaLoad();\n        },\n    },\n})\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Photo.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Photo.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Photo.vue?vue&type=template&id=46b93eb1&scoped=true&\"\nimport script from \"./Photo.vue?vue&type=script&lang=ts&\"\nexport * from \"./Photo.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Photo.vue?vue&type=style&index=0&id=46b93eb1&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"46b93eb1\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VSheet } from 'vuetify/lib/components/VSheet';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\ninstallComponents(component, {VBtn,VIcon,VImg,VSheet,VSubheader})\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Photo.vue?vue&type=style&index=0&id=46b93eb1&scoped=true&lang=css&\""],"sourceRoot":""}