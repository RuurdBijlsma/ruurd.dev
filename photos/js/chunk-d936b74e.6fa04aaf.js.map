{"version":3,"sources":["webpack:///./src/views/Search.vue?73de","webpack:///./src/views/Search.vue?36f0","webpack:///./src/views/Search.vue","webpack:///./src/views/Search.vue?a745","webpack:///./src/views/Search.vue?230a","webpack:///./src/components/PhotoMap.vue?5ed4","webpack:///./node_modules/vue2-leaflet/dist/components/LRectangle.js","webpack:///./src/components/PhotoMap.vue","webpack:///./src/components/PhotoMap.vue?2538","webpack:///./src/components/PhotoMap.vue?e5ca"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","style","maxHeight","$vuetify","application","top","bottom","padding","pagePadding","on","homeScroll","isPlace","loading","allResults","length","_v","_s","query","_e","isLabel","glossary","bounds","height","margin","width","attrs","mapWidth","placeName","breakpoint","directives","name","rawName","value","highResults","expression","usableWidth","highSlice","endIndex","lowResults","lowSlice","staticRenderFns","extend","components","PhotoMap","PhotoGrid","data","api","prevScroll","searchElement","photoGridLow","photoGridHigh","mounted","$refs","search","console","log","updateSearch","methods","$store","dispatch","url","minCorner","latLng","minlat","minlng","maxCorner","maxlat","maxlng","latLngBounds","pad","scrollTop","Math","abs","scrollBottom","scrollHeight","clientHeight","computed","mobile","left","right","$route","params","slice","state","searchResults","high","low","concat","searchType","watch","commit","keepInView","scrollMediaIntoView","component","VIcon","VProgressCircular","leaflet","center","zoom","options","mapPanned","addMarkers","tileOptions","attribution","startBounds","capitalizeFirstLetter","string","charAt","toUpperCase","propsBinder","vueElement","leafletElement","props","loop","key","setMethodName","deepValue","type","Object","Array","isArray","custom","$watch","newVal","oldVal","deep","collectionCleaner","result","undefined","optionsMerger","instance","constructor","defaultProps","$options","def","default","call","Symbol","isEqual","JSON","stringify","warn","findRealParent","firstVueParent","found","mapObject","$parent","Layer","pane","String","layerType","visible","Boolean","layerOptions","beforeDestroy","unbindPopup","unbindTooltip","parentContainer","removeLayer","setAttribution","val","old","attributionControl","removeAttribution","addAttribution","setName","addLayer","setLayerType","setVisible","isVisible","hideLayer","tooltip","getTooltip","popup","getPopup","updateVisibleProp","$emit","InteractiveLayer","interactive","bubblingMouseEvents","interactiveLayerOptions","Path","mixins","lStyle","stroke","color","weight","Number","opacity","lineCap","lineJoin","dashArray","dashOffset","fill","fillColor","fillOpacity","fillRule","className","pathOptions","assign","error","setLStyle","setStyle","setStroke","setColor","setWeight","setOpacity","setLineCap","setLineJoin","setDashArray","setDashOffset","setFill","setFillColor","setFillOpacity","setFillRule","setClassName","Polyline","smoothFactor","noClip","ready","polyLineOptions","setSmoothFactor","setNoClip","addLatLng","Polygon","polygonOptions","getGeoJSONData","toGeoJSON","Options","script","validator","isValid","this$1","$listeners","$nextTick","normalizeComponent","template","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","hook","_compiled","functional","_scopeId","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","$root","shadowRoot","originalRender","h","existing","beforeCreate","__vue_script__","__vue_render__","staticStyle","_t","__vue_staticRenderFns__","__vue_inject_styles__","__vue_scope_id__","__vue_module_identifier__","__vue_is_functional_template__","__vue_component__","LMap","LTileLayer","LMarker","LRectangle","required","LatLngBounds","photosInBounds","mapRef","maxWidth","zoomSnap","id","accessToken","markers","panTimeout","theme","dark","mapboxKey","getCenter","getBoundsZoomLevel","updateFromBounds","b","clearTimeout","setTimeout","body","minLat","getSouth","maxLat","getNorth","minLng","getWest","maxLng","getEast","map","isDark","themes","primary","secondary","forEach","m","remove","photo","marker","circleMarker","MediaLocation","latitude","longitude","radius","ratio","mediaHeight","addTo","e","content","latlng","lat","lng","setLatLng","setContent","location","pathname","openOn","push","mapDim","WORLD_DIM","ZOOM_MAX","latRad","sin","PI","radX2","max","min","mapPx","worldPx","fraction","floor","LN2","ne","getNorthEast","sw","getSouthWest","latFraction","lngDiff","lngFraction","latZoom","lngZoom"],"mappings":"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","file":"js/chunk-d936b74e.6fa04aaf.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=a347b2a2&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"search\",staticClass:\"search\",style:({\n        maxHeight: (\"calc(100vh - \" + (_vm.$vuetify.application.top + _vm.$vuetify.application.bottom) + \"px)\"),\n        padding: _vm.pagePadding + 'px',\n     }),on:{\"scroll\":_vm.homeScroll}},[_c('router-view'),(!_vm.isPlace && !_vm.loading && _vm.allResults.length > 0)?_c('h1',{staticClass:\"search-query\"},[_vm._v(\"‟\"+_vm._s(_vm.query)+\"”\")]):_vm._e(),(!_vm.loading && _vm.allResults.length > 0 && _vm.isLabel)?_c('p',{staticClass:\"search-glossary\"},[_vm._v(_vm._s(_vm.glossary))]):_vm._e(),(_vm.isPlace && _vm.bounds !== null)?_c('photo-map',{staticClass:\"map-leaflet\",style:({\n                    height: 450 + 'px',\n                    margin: (\"-\" + _vm.pagePadding + \"px -\" + _vm.pagePadding + \"px 0\"),\n                    width: (\"calc(100% + \" + (_vm.pagePadding * 2) + \"px);\"),\n               }),attrs:{\"width\":_vm.mapWidth,\"height\":450,\"start-bounds\":_vm.bounds}}):_vm._e(),(_vm.isPlace && !_vm.loading && _vm.allResults.length > 0)?_c('h1',{staticClass:\"search-query search-place\"},[_vm._v(\"‟\"+_vm._s(_vm.placeName)+\"”\")]):(!_vm.loading && _vm.isPlace)?_c('div',{staticClass:\"placeholder-map\",style:({height: 450 + 'px'})}):_vm._e(),(_vm.loading)?_c('div',{staticClass:\"progress-center\"},[_c('v-progress-circular',{attrs:{\"color\":\"primary\",\"size\":_vm.$vuetify.breakpoint.width / 4,\"indeterminate\":\"\"}})],1):(_vm.allResults.length === 0)?_c('div',{staticClass:\"no-results\"},[_c('div',{staticClass:\"no-results-center\"},[_c('v-icon',{staticClass:\"icon\",attrs:{\"x-large\":\"\"}},[_vm._v(\"mdi-cloud-search-outline\")]),_c('div',{staticClass:\"res-caption\"},[_vm._v(\"No results found for \\\"\"+_vm._s(_vm.query)+\"\\\"\")])],1)]):_vm._e(),(!_vm.loading)?_c('photo-grid',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.highResults.length > 0),expression:\"highResults.length > 0\"}],ref:\"photoGridHigh\",attrs:{\"usable-width\":_vm.usableWidth,\"photos\":_vm.highSlice}}):_vm._e(),(_vm.endIndex >= _vm.highResults.length && _vm.highResults.length !== 0 && _vm.lowResults.length !== 0)?_c('h2',{staticClass:\"mt-5 mb-5\"},[_vm._v(\" Less related results \")]):_vm._e(),(!_vm.loading)?_c('photo-grid',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.lowResults.length > 0),expression:\"lowResults.length > 0\"}],ref:\"photoGridLow\",attrs:{\"usable-width\":_vm.usableWidth,\"photos\":_vm.lowSlice}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport PhotoGrid from \"@/components/PhotoGrid.vue\";\r\nimport {Media} from \"@/ts/Media\";\r\nimport {api, scrollBarWidth} from \"@/ts/constants\";\r\nimport PhotoMap from \"@/components/PhotoMap.vue\";\r\nimport L from \"leaflet\";\r\n\r\nexport default Vue.extend({\r\n    name: 'Search',\r\n    components: {PhotoMap, PhotoGrid},\r\n    data: () => ({\r\n        api,\r\n        loading: false,\r\n        endIndex: 100,\r\n        prevScroll: -10000,\r\n        searchElement: {} as HTMLDivElement,\r\n        photoGridLow: null as any,\r\n        photoGridHigh: null as any,\r\n        bounds: null as L.LatLngBounds | null,\r\n    }),\r\n    async mounted() {\r\n        this.searchElement = this.$refs.search as HTMLDivElement;\r\n\r\n        console.log(this.$vuetify);\r\n\r\n        await this.updateSearch();\r\n    },\r\n    methods: {\r\n        async updateSearch() {\r\n            this.loading = true;\r\n            this.bounds = null;\r\n            await this.$store.dispatch('search', this.query);\r\n            if (this.isPlace) {\r\n                let bounds = await this.$store.dispatch('apiRequest', {url: `photos/boundingBox/${this.placeName}`});\r\n                let minCorner = L.latLng(bounds.minlat, bounds.minlng, 0);\r\n                let maxCorner = L.latLng(bounds.maxlat, bounds.maxlng, 0);\r\n                this.bounds = L.latLngBounds(minCorner, maxCorner).pad(0.1);\r\n            }\r\n            this.loading = false;\r\n        },\r\n        async homeScroll() {\r\n            let scrollTop = this.searchElement.scrollTop;\r\n            // If we haven't scrolled more than 180px since last scroll fire just return\r\n            if (Math.abs(this.prevScroll - scrollTop) < 180)\r\n                return;\r\n            this.prevScroll = scrollTop;\r\n\r\n            let scrollBottom = this.searchElement.scrollHeight - scrollTop - this.searchElement.clientHeight;\r\n            if (scrollBottom < 3000 && this.endIndex < this.allResults.length)\r\n                this.endIndex += 100;\r\n        },\r\n    },\r\n    computed: {\r\n        pagePadding(): number {\r\n            return this.$vuetify.breakpoint.mobile ? 0 : 10;\r\n        },\r\n        usableWidth(): number {\r\n            return this.$vuetify.breakpoint.width -\r\n                this.$vuetify.application.left - this.$vuetify.application.right -\r\n                this.pagePadding * 2 - scrollBarWidth;\r\n        },\r\n        mapWidth(): number {\r\n            return this.$vuetify.breakpoint.width - this.$vuetify.application.left - this.$vuetify.application.right;\r\n        },\r\n        query(): string {\r\n            return this.$route.params.query;\r\n        },\r\n        highSlice(): Media[] {\r\n            return this.highResults.slice(0, this.endIndex);\r\n        },\r\n        lowSlice(): Media[] {\r\n            return this.lowResults.slice(0, this.endIndex - this.lowResults.length);\r\n        },\r\n        highResults(): Media[] {\r\n            return this.$store.state.searchResults.high;\r\n        },\r\n        lowResults(): Media[] {\r\n            return this.$store.state.searchResults.low;\r\n        },\r\n        allResults(): Media[] {\r\n            return this.highResults.concat(this.lowResults);\r\n        },\r\n        isLabel(): boolean {\r\n            return this.$store.state.searchResults.searchType === 'label';\r\n        },\r\n        isPlace(): boolean {\r\n            return this.$store.state.searchResults.searchType === 'place';\r\n        },\r\n        placeName(): string {\r\n            return this.$store.state.searchResults.placeName;\r\n        },\r\n        glossary(): boolean {\r\n            return this.$store.state.searchResults.glossary;\r\n        },\r\n    },\r\n    watch: {\r\n        query() {\r\n            this.updateSearch();\r\n        },\r\n        allResults() {\r\n            this.$store.commit('viewerQueue', this.allResults);\r\n        },\r\n        '$store.state.keepInView'() {\r\n            if (this.$store.state.keepInView !== null) {\r\n                let photoGridLow: any = this.$refs.photoGridLow;\r\n                let photoGridHigh: any = this.$refs.photoGridHigh;\r\n                photoGridLow.scrollMediaIntoView(this.$store.state.keepInView);\r\n                photoGridHigh.scrollMediaIntoView(this.$store.state.keepInView);\r\n            }\r\n        },\r\n    }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=a347b2a2&scoped=true&\"\nimport script from \"./Search.vue?vue&type=script&lang=ts&\"\nexport * from \"./Search.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&id=a347b2a2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a347b2a2\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\ninstallComponents(component, {VIcon,VProgressCircular})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.leaflet.center && _vm.leaflet.zoom)?_c('l-map',{ref:\"map\",attrs:{\"zoom\":_vm.leaflet.zoom,\"center\":_vm.leaflet.center,\"options\":_vm.leaflet.options},on:{\"update:bounds\":_vm.mapPanned,\"ready\":_vm.addMarkers}},[_c('l-tile-layer',{attrs:{\"options\":_vm.leaflet.tileOptions,\"url\":_vm.leaflet.url,\"attribution\":_vm.leaflet.attribution}}),(_vm.startBounds !== null)?_c('l-rectangle',{attrs:{\"bounds\":_vm.startBounds,\"color\":\"red\",\"fill-color\":\"red\",\"weight\":_vm.leaflet.zoom / 6,\"fill-opacity\":0.01}}):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { setOptions, latLngBounds, rectangle, DomEvent } from 'leaflet';\n\nvar capitalizeFirstLetter = function (string) {\n  if (!string || typeof string.charAt !== 'function') {\n    return string;\n  }\n  return string.charAt(0).toUpperCase() + string.slice(1);\n};\n\nvar propsBinder = function (vueElement, leafletElement, props, options) {\n  var loop = function ( key ) {\n    var setMethodName = 'set' + capitalizeFirstLetter(key);\n    var deepValue =\n      props[key].type === Object ||\n      props[key].type === Array ||\n      Array.isArray(props[key].type);\n    if (props[key].custom && vueElement[setMethodName]) {\n      vueElement.$watch(\n        key,\n        function (newVal, oldVal) {\n          vueElement[setMethodName](newVal, oldVal);\n        },\n        {\n          deep: deepValue,\n        }\n      );\n    } else if (setMethodName === 'setOptions') {\n      vueElement.$watch(\n        key,\n        function (newVal, oldVal) {\n          setOptions(leafletElement, newVal);\n        },\n        {\n          deep: deepValue,\n        }\n      );\n    } else if (leafletElement[setMethodName]) {\n      vueElement.$watch(\n        key,\n        function (newVal, oldVal) {\n          leafletElement[setMethodName](newVal);\n        },\n        {\n          deep: deepValue,\n        }\n      );\n    }\n  };\n\n  for (var key in props) loop( key );\n};\n\nvar collectionCleaner = function (options) {\n  var result = {};\n  for (var key in options) {\n    var value = options[key];\n    if (value !== null && value !== undefined) {\n      result[key] = value;\n    }\n  }\n  return result;\n};\n\nvar optionsMerger = function (props, instance) {\n  var options =\n    instance.options && instance.options.constructor === Object\n      ? instance.options\n      : {};\n  props = props && props.constructor === Object ? props : {};\n  var result = collectionCleaner(options);\n  props = collectionCleaner(props);\n  var defaultProps = instance.$options.props;\n  for (var key in props) {\n    var def = defaultProps[key]\n      ? defaultProps[key].default &&\n        typeof defaultProps[key].default === 'function'\n        ? defaultProps[key].default.call()\n        : defaultProps[key].default\n      : Symbol('unique');\n    var isEqual = false;\n    if (Array.isArray(def)) {\n      isEqual = JSON.stringify(def) === JSON.stringify(props[key]);\n    } else {\n      isEqual = def === props[key];\n    }\n    if (result[key] && !isEqual) {\n      console.warn(\n        (key + \" props is overriding the value passed in the options props\")\n      );\n      result[key] = props[key];\n    } else if (!result[key]) {\n      result[key] = props[key];\n    }\n  }\n  return result;\n};\n\nvar findRealParent = function (firstVueParent) {\n  var found = false;\n  while (firstVueParent && !found) {\n    if (firstVueParent.mapObject === undefined) {\n      firstVueParent = firstVueParent.$parent;\n    } else {\n      found = true;\n    }\n  }\n  return firstVueParent;\n};\n\nvar Layer = {\n  props: {\n    pane: {\n      type: String,\n      default: 'overlayPane',\n    },\n    attribution: {\n      type: String,\n      default: null,\n      custom: true,\n    },\n    name: {\n      type: String,\n      custom: true,\n      default: undefined,\n    },\n    layerType: {\n      type: String,\n      custom: true,\n      default: undefined,\n    },\n    visible: {\n      type: Boolean,\n      custom: true,\n      default: true,\n    },\n  },\n  mounted: function mounted() {\n    this.layerOptions = {\n      attribution: this.attribution,\n      pane: this.pane,\n    };\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.unbindPopup();\n    this.unbindTooltip();\n    this.parentContainer.removeLayer(this);\n  },\n  methods: {\n    setAttribution: function setAttribution(val, old) {\n      var attributionControl = this.$parent.mapObject.attributionControl;\n      attributionControl.removeAttribution(old).addAttribution(val);\n    },\n    setName: function setName() {\n      this.parentContainer.removeLayer(this);\n      if (this.visible) {\n        this.parentContainer.addLayer(this);\n      }\n    },\n    setLayerType: function setLayerType() {\n      this.parentContainer.removeLayer(this);\n      if (this.visible) {\n        this.parentContainer.addLayer(this);\n      }\n    },\n    setVisible: function setVisible(isVisible) {\n      if (this.mapObject) {\n        if (isVisible) {\n          this.parentContainer.addLayer(this);\n        } else {\n          if (this.parentContainer.hideLayer) {\n            this.parentContainer.hideLayer(this);\n          } else {\n            this.parentContainer.removeLayer(this);\n          }\n        }\n      }\n    },\n    unbindTooltip: function unbindTooltip() {\n      var tooltip = this.mapObject ? this.mapObject.getTooltip() : null;\n      if (tooltip) {\n        tooltip.unbindTooltip();\n      }\n    },\n    unbindPopup: function unbindPopup() {\n      var popup = this.mapObject ? this.mapObject.getPopup() : null;\n      if (popup) {\n        popup.unbindPopup();\n      }\n    },\n    updateVisibleProp: function updateVisibleProp(value) {\n      /**\n       * Triggers when the visible prop needs to be updated\n       * @type {boolean}\n       * @property {boolean} value - value of the visible property\n       */\n      this.$emit('update:visible', value);\n    },\n  },\n};\n\nvar InteractiveLayer = {\n  props: {\n    interactive: {\n      type: Boolean,\n      default: true\n    },\n    bubblingMouseEvents: {\n      type: Boolean,\n      default: true\n    }\n  },\n  mounted: function mounted () {\n    this.interactiveLayerOptions = {\n      interactive: this.interactive,\n      bubblingMouseEvents: this.bubblingMouseEvents\n    };\n  }\n};\n\nvar Path = {\n  mixins: [Layer, InteractiveLayer],\n  props: {\n    lStyle: {\n      type: Object,\n      custom: true,\n      default: null\n    },\n    stroke: {\n      type: Boolean,\n      custom: true,\n      default: true\n    },\n    color: {\n      type: String,\n      custom: true,\n      default: '#3388ff'\n    },\n    weight: {\n      type: Number,\n      custom: true,\n      default: 3\n    },\n    opacity: {\n      type: Number,\n      custom: true,\n      default: 1.0\n    },\n    lineCap: {\n      type: String,\n      custom: true,\n      default: 'round'\n    },\n    lineJoin: {\n      type: String,\n      custom: true,\n      default: 'round'\n    },\n    dashArray: {\n      type: String,\n      custom: true,\n      default: null\n    },\n    dashOffset: {\n      type: String,\n      custom: true,\n      default: null\n    },\n    fill: {\n      type: Boolean,\n      custom: true,\n      default: false\n    },\n    fillColor: {\n      type: String,\n      custom: true,\n      default: '#3388ff'\n    },\n    fillOpacity: {\n      type: Number,\n      custom: true,\n      default: 0.2\n    },\n    fillRule: {\n      type: String,\n      custom: true,\n      default: 'evenodd'\n    },\n    className: {\n      type: String,\n      custom: true,\n      default: null\n    }\n  },\n  mounted: function mounted () {\n    this.pathOptions = Object.assign({}, this.layerOptions,\n      this.interactiveLayerOptions,\n      {stroke: this.stroke,\n      color: this.color,\n      weight: this.weight,\n      opacity: this.opacity,\n      lineCap: this.lineCap,\n      lineJoin: this.lineJoin,\n      dashArray: this.dashArray,\n      dashOffset: this.dashOffset,\n      fill: this.fill,\n      fillColor: this.fillColor,\n      fillOpacity: this.fillOpacity,\n      fillRule: this.fillRule,\n      className: this.className});\n\n    if (this.lStyle) {\n      console.warn('lStyle is deprecated and is going to be removed in the next major version');\n      for (var style in this.lStyle) {\n        this.pathOptions[style] = this.lStyle[style];\n      }\n    }\n  },\n  beforeDestroy: function beforeDestroy () {\n    if (this.parentContainer) {\n      this.parentContainer.removeLayer(this);\n    } else {\n      console.error('Missing parent container');\n    }\n  },\n  methods: {\n    setLStyle: function setLStyle (newVal) {\n      this.mapObject.setStyle(newVal);\n    },\n    setStroke: function setStroke (newVal) {\n      this.mapObject.setStyle({ stroke: newVal });\n    },\n    setColor: function setColor (newVal) {\n      this.mapObject.setStyle({ color: newVal });\n    },\n    setWeight: function setWeight (newVal) {\n      this.mapObject.setStyle({ weight: newVal });\n    },\n    setOpacity: function setOpacity (newVal) {\n      this.mapObject.setStyle({ opacity: newVal });\n    },\n    setLineCap: function setLineCap (newVal) {\n      this.mapObject.setStyle({ lineCap: newVal });\n    },\n    setLineJoin: function setLineJoin (newVal) {\n      this.mapObject.setStyle({ lineJoin: newVal });\n    },\n    setDashArray: function setDashArray (newVal) {\n      this.mapObject.setStyle({ dashArray: newVal });\n    },\n    setDashOffset: function setDashOffset (newVal) {\n      this.mapObject.setStyle({ dashOffset: newVal });\n    },\n    setFill: function setFill (newVal) {\n      this.mapObject.setStyle({ fill: newVal });\n    },\n    setFillColor: function setFillColor (newVal) {\n      this.mapObject.setStyle({ fillColor: newVal });\n    },\n    setFillOpacity: function setFillOpacity (newVal) {\n      this.mapObject.setStyle({ fillOpacity: newVal });\n    },\n    setFillRule: function setFillRule (newVal) {\n      this.mapObject.setStyle({ fillRule: newVal });\n    },\n    setClassName: function setClassName (newVal) {\n      this.mapObject.setStyle({ className: newVal });\n    }\n  }\n};\n\nvar Polyline = {\n  mixins: [Path],\n  props: {\n    smoothFactor: {\n      type: Number,\n      custom: true,\n      default: 1.0\n    },\n    noClip: {\n      type: Boolean,\n      custom: true,\n      default: false\n    }\n  },\n  data: function data () {\n    return {\n      ready: false\n    };\n  },\n  mounted: function mounted () {\n    this.polyLineOptions = Object.assign({}, this.pathOptions,\n      {smoothFactor: this.smoothFactor,\n      noClip: this.noClip});\n  },\n  methods: {\n    setSmoothFactor: function setSmoothFactor (newVal) {\n      this.mapObject.setStyle({ smoothFactor: newVal });\n    },\n    setNoClip: function setNoClip (newVal) {\n      this.mapObject.setStyle({ noClip: newVal });\n    },\n    addLatLng: function addLatLng (value) {\n      this.mapObject.addLatLng(value);\n    }\n  }\n};\n\nvar Polygon = {\n  mixins: [Polyline],\n  props: {\n    fill: {\n      type: Boolean,\n      custom: true,\n      default: true\n    }\n  },\n  mounted: function mounted () {\n    this.polygonOptions = this.polyLineOptions;\n  },\n  methods: {\n    getGeoJSONData: function getGeoJSONData () {\n      return this.mapObject.toGeoJSON();\n    }\n  }\n};\n\nvar Options = {\n  props: {\n    /**\n     * Leaflet options to pass to the component constructor\n     */\n    options: {\n      type: Object,\n      default: function () { return ({}); }\n    }\n  }\n};\n\n//\n\n/**\n * Easily draw a rectangle on the map\n */\nvar script = {\n  name: 'LRectangle',\n  mixins: [Polygon, Options],\n  props: {\n    bounds: {\n      default: function () { return [[0,0],[0,0]]; },\n      validator: function (value) { return value && latLngBounds(value).isValid(); },\n    },\n  },\n  data: function data() {\n    return {\n      ready: false,\n    };\n  },\n  mounted: function mounted() {\n    var this$1 = this;\n\n    var options = optionsMerger(this.polygonOptions, this);\n    this.mapObject = rectangle(this.bounds, options);\n    DomEvent.on(this.mapObject, this.$listeners);\n    propsBinder(this, this.mapObject, this.$options.props);\n    this.ready = true;\n    this.parentContainer = findRealParent(this.$parent);\n    this.parentContainer.addLayer(this, !this.visible);\n    this.$nextTick(function () {\n      /**\n       * Triggers when the component is ready\n       * @type {object}\n       * @property {object} mapObject - reference to leaflet map object\n       */\n      this$1.$emit('ready', this$1.mapObject);\n    });\n  },\n};\n\nfunction normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n    if (typeof shadowMode !== 'boolean') {\r\n        createInjectorSSR = createInjector;\r\n        createInjector = shadowMode;\r\n        shadowMode = false;\r\n    }\r\n    // Vue.extend constructor export interop.\r\n    var options = typeof script === 'function' ? script.options : script;\r\n    // render functions\r\n    if (template && template.render) {\r\n        options.render = template.render;\r\n        options.staticRenderFns = template.staticRenderFns;\r\n        options._compiled = true;\r\n        // functional template\r\n        if (isFunctionalTemplate) {\r\n            options.functional = true;\r\n        }\r\n    }\r\n    // scopedId\r\n    if (scopeId) {\r\n        options._scopeId = scopeId;\r\n    }\r\n    var hook;\r\n    if (moduleIdentifier) {\r\n        // server build\r\n        hook = function (context) {\r\n            // 2.3 injection\r\n            context =\r\n                context || // cached call\r\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n            // 2.2 with runInNewContext: true\r\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                context = __VUE_SSR_CONTEXT__;\r\n            }\r\n            // inject component styles\r\n            if (style) {\r\n                style.call(this, createInjectorSSR(context));\r\n            }\r\n            // register component module identifier for async chunk inference\r\n            if (context && context._registeredComponents) {\r\n                context._registeredComponents.add(moduleIdentifier);\r\n            }\r\n        };\r\n        // used by ssr in case component is cached and beforeCreate\r\n        // never gets called\r\n        options._ssrRegister = hook;\r\n    }\r\n    else if (style) {\r\n        hook = shadowMode\r\n            ? function (context) {\r\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n            }\r\n            : function (context) {\r\n                style.call(this, createInjector(context));\r\n            };\r\n    }\r\n    if (hook) {\r\n        if (options.functional) {\r\n            // register for functional component in vue file\r\n            var originalRender = options.render;\r\n            options.render = function renderWithStyleInjection(h, context) {\r\n                hook.call(context);\r\n                return originalRender(h, context);\r\n            };\r\n        }\r\n        else {\r\n            // inject component registration as beforeCreate hook\r\n            var existing = options.beforeCreate;\r\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n        }\r\n    }\r\n    return script;\r\n}\n\n/* script */\nvar __vue_script__ = script;\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"none\"}},[(_vm.ready)?_vm._t(\"default\"):_vm._e()],2)};\nvar __vue_staticRenderFns__ = [];\n\n  /* style */\n  var __vue_inject_styles__ = undefined;\n  /* scoped */\n  var __vue_scope_id__ = undefined;\n  /* module identifier */\n  var __vue_module_identifier__ = undefined;\n  /* functional template */\n  var __vue_is_functional_template__ = false;\n  /* style inject */\n  \n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  var __vue_component__ = /*#__PURE__*/normalizeComponent(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    undefined,\n    undefined,\n    undefined\n  );\n\nexport default __vue_component__;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport {LMap, LMarker, LTileLayer, LRectangle} from 'vue2-leaflet';\nimport L from \"leaflet\";\nimport {api} from \"@/ts/constants\";\n\nexport default Vue.extend({\n    name: 'PhotoMap',\n    components: {LMap, LTileLayer, LMarker, LRectangle},\n    props: {\n        width: {type: Number, required: true},\n        height: {type: Number, required: true},\n        startBounds: {type: L.LatLngBounds},\n    },\n    data: () => ({\n        photosInBounds: null as Promise<any> | null,\n        mapRef: null as any,\n        // @ts-ignore\n        popup: L.popup({maxWidth: 'auto'}),\n        leaflet: {\n            zoom: 12,\n            center: null as L.LatLng | null,\n            url: 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}',\n            attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n            options: {\n                zoomSnap: 0.5,\n            },\n            tileOptions: {\n                id: 'mapbox/streets-v11',\n                accessToken: '',\n            },\n            bounds: null as L.LatLngBounds | null,\n            markers: [] as L.CircleMarker[],\n        },\n        panTimeout: -1,\n    }),\n    async mounted() {\n        this.leaflet.tileOptions.id = this.$vuetify.theme.dark ? 'mapbox/dark-v10' : 'mapbox/streets-v11';\n        this.leaflet.tileOptions.accessToken = this.$store.state.mapboxKey;\n        if (this.startBounds) {\n            this.leaflet.bounds = this.startBounds;\n        } else {\n            let bounds = await this.$store.dispatch('apiRequest', {url: 'photos/totalBounds'});\n            let minCorner = L.latLng(bounds.minlat, bounds.minlng, 0);\n            let maxCorner = L.latLng(bounds.maxlat, bounds.maxlng, 0);\n            this.leaflet.bounds = L.latLngBounds(minCorner, maxCorner).pad(0.05);\n        }\n        if (this.leaflet.bounds) {\n            this.leaflet.center = this.leaflet.bounds.getCenter();\n            this.leaflet.zoom = this.getBoundsZoomLevel(this.leaflet.bounds, {\n                width: this.width,\n                height: this.height,\n            });\n            this.photosInBounds = this.updateFromBounds();\n        }\n    },\n    methods: {\n        mapPanned(b: L.LatLngBounds) {\n            clearTimeout(this.panTimeout);\n            this.panTimeout = setTimeout(async () => {\n                this.leaflet.bounds = b;\n                this.photosInBounds = this.updateFromBounds();\n                await this.addMarkers();\n            }, 200);\n        },\n        async updateFromBounds() {\n            if (!this.leaflet.bounds) return;\n            return this.$store.dispatch('apiRequest', {\n                url: 'photos/photosInBounds', body: {\n                    minLat: this.leaflet.bounds.getSouth(),\n                    maxLat: this.leaflet.bounds.getNorth(),\n                    minLng: this.leaflet.bounds.getWest(),\n                    maxLng: this.leaflet.bounds.getEast(),\n                },\n            });\n        },\n        async addMarkers() {\n            this.mapRef = this.$refs.map;\n\n            let photosInBounds = await this.photosInBounds;\n            let isDark = this.$vuetify.theme.dark;\n            let color = this.$vuetify.theme.themes[isDark ? 'dark' : 'light'];\n            let primary = color.primary as string;\n            let secondary = color.secondary as string;\n\n            this.leaflet.markers.forEach(m => m.remove());\n            this.leaflet.markers = [];\n            console.log('zoom', this.leaflet.zoom);\n            for (let photo of photosInBounds) {\n                let marker = L.circleMarker(\n                    [photo.MediaLocation.latitude, photo.MediaLocation.longitude],\n                    {\n                        radius: 8,\n                        color: photo.type === 'image' ? primary : secondary,\n                        opacity: 0.6,\n                        weight: 2,\n                        fillColor: photo.type === 'image' ? primary : secondary,\n                        fillOpacity: 0.2,\n                    }\n                );\n                let ratio = photo.width / photo.height;\n                const mediaHeight = 200;\n                marker.addTo(this.mapRef.mapObject);\n                marker.on('click', (e: any) => {\n                    const content = photo.type === 'image' ?\n                        `<img height=\"${mediaHeight}\" width=\"${mediaHeight * ratio}\" src=\"${api}/photo/tiny/${photo.id}.webp\" alt=\"Image at ${e.latlng.lat}, ${e.latlng.lng}\">` :\n                        `<video height=\"${mediaHeight}\" width=\"${mediaHeight * ratio}\" src=\"${api}/photo/webm/${photo.id}.webm\" autoplay controls loop>`;\n                    this.popup\n                        .setLatLng(e.latlng)\n                        .setContent(`<a href=\"${location.pathname}#/photo/${photo.id}\">${content}</a>`)\n                        .openOn(this.mapRef.mapObject);\n                });\n                this.leaflet.markers.push(marker);\n            }\n        },\n        getBoundsZoomLevel: function (bounds: L.LatLngBounds, mapDim: { width: number, height: number }) {\n            const WORLD_DIM = {height: 256, width: 256};\n            const ZOOM_MAX = 21;\n\n            const latRad = (lat: number) => {\n                const sin = Math.sin(lat * Math.PI / 180);\n                const radX2 = Math.log((1 + sin) / (1 - sin)) / 2;\n                return Math.max(Math.min(radX2, Math.PI), -Math.PI) / 2;\n            }\n\n            const zoom = (mapPx: number, worldPx: number, fraction: number) =>\n                Math.floor(Math.log(mapPx / worldPx / fraction) / Math.LN2)\n\n            const ne = bounds.getNorthEast();\n            const sw = bounds.getSouthWest();\n\n            const latFraction = (latRad(ne.lat) - latRad(sw.lat)) / Math.PI;\n\n            const lngDiff = ne.lng - sw.lng;\n            const lngFraction = ((lngDiff < 0) ? (lngDiff + 360) : lngDiff) / 360;\n\n            const latZoom = zoom(mapDim.height, WORLD_DIM.height, latFraction);\n            const lngZoom = zoom(mapDim.width, WORLD_DIM.width, lngFraction);\n\n            return Math.min(latZoom, lngZoom, ZOOM_MAX);\n        },\n    },\n    computed: {},\n    watch: {},\n})\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhotoMap.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhotoMap.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PhotoMap.vue?vue&type=template&id=55861d56&scoped=true&\"\nimport script from \"./PhotoMap.vue?vue&type=script&lang=ts&\"\nexport * from \"./PhotoMap.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"55861d56\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}