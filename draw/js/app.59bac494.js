(function(t){function e(e){for(var a,o,c=e[0],r=e[1],l=e[2],h=0,d=[];h<c.length;h++)o=c[h],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,c=1;c<n.length;c++){var r=n[c];0!==s[r]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},s={app:0},i=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/draw/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),s=n.n(a);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("draw-canvas",{staticClass:"my-dc"})],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"draw-canvas"},[n("div",{staticClass:"canvas-container",on:{keypress:t.handleKey}},[n("canvas",{ref:"canvas",staticClass:"canvas",attrs:{width:t.canvasWidth,height:t.canvasHeight},on:{touchstart:t.startTouch,touchmove:t.moveTouch,touchend:t.endTouch,mousedown:t.startMove,mousemove:t.move,mouseup:t.endMove,resize:t.canvasResize}},[t._v("Canvas is not supported ")])]),n("div",{staticClass:"controls"},[n("div",{staticClass:"selected-color",style:"background-color: "+t.activeRgb}),n("div",{staticClass:"colors"},t._l(t.colors,(function(e,a){return n("div",{key:a,staticClass:"color-row"},t._l(e,(function(e){var a=e[0],s=e[1],i=e[2];return n("div",{key:a+s+i,staticClass:"single-color",style:"background-color: rgb("+a+","+s+","+i+")",on:{click:function(e){return t.selectColor(a,s,i)}}})})),0)})),0),n("div",{staticClass:"tools"},[n("div",{staticClass:"brush",attrs:{active:"brush"===this.activeTool},on:{click:function(e){return t.selectTool("brush")}}}),n("div",{staticClass:"fill",attrs:{active:"fill"===this.activeTool},on:{click:function(e){return t.selectTool("fill")}}}),n("div",{staticClass:"erase",attrs:{active:"erase"===this.activeTool},on:{click:function(e){return t.selectTool("erase")}}})]),n("div",{staticClass:"brush-sizes"},t._l(t.brushSizes,(function(e){return n("div",{key:e,style:"\n                    height: "+e+"px;\n                    width: "+e+"px;\n                    background-color: "+t.activeRgb+";\n                    margin-top: "+(30-e/2)+"px;\n                ",attrs:{active:t.activeBrush===e},on:{click:function(n){return t.selectBrush(e)}}})})),0),n("div",{staticClass:"clear-canvas",on:{click:t.clearCanvas}})])])},c=[],r=(n("99af"),n("2909")),l=n("3835"),u=n("b85c"),h=(n("a434"),n("d4ec")),d=n("bee2"),f=function(){function t(){Object(h["a"])(this,t),this.reset()}return Object(d["a"])(t,[{key:"addCommand",value:function(t){this.commands.splice(this.stackPosition+1,this.commands.length),this.commands.push(t),this.stackPosition=this.commands.length-1}},{key:"executeCommand",value:function(t){this.addCommand(t),t.execute()}},{key:"undo",value:function(){this.commands.length>0&&this.stackPosition>=0?this.commands[this.stackPosition--].undo():console.log("Cant undo")}},{key:"redo",value:function(){this.stackPosition+1<this.commands.length?this.commands[++this.stackPosition].execute():console.log("Cant redo")}},{key:"reset",value:function(){this.commands=[],this.stackPosition=-1}}]),t}(),v=new f,b=(n("c975"),n("262e")),p=n("2caf"),m=function(){function t(){Object(h["a"])(this,t)}return Object(d["a"])(t,[{key:"undo",value:function(){}},{key:"execute",value:function(){}}]),t}(),y=function(t){Object(b["a"])(n,t);var e=Object(p["a"])(n);function n(t,a){var s;return Object(h["a"])(this,n),s=e.call(this),s.drawables=t,s.drawable=a,s}return Object(d["a"])(n,[{key:"undo",value:function(){this.drawables.splice(this.drawables.indexOf(this.drawable),1)}},{key:"execute",value:function(){this.drawables.push(this.drawable)}}]),n}(m),g=function(t){Object(b["a"])(n,t);var e=Object(p["a"])(n);function n(t){var a;return Object(h["a"])(this,n),a=e.call(this),a.drawables=t,a.drawablesBackup=Object(r["a"])(t),a}return Object(d["a"])(n,[{key:"undo",value:function(){var t;(t=this.drawables).push.apply(t,Object(r["a"])(this.drawablesBackup))}},{key:"execute",value:function(){this.drawables.splice(0,this.drawables.length)}}]),n}(m),w={name:"DrawCanvas",props:{},data:function(){return{activeTool:"brush",activeColor:[0,0,0],activeBrush:13,colors:[[[255,255,255],[193,193,193],[239,19,11],[255,113,0],[255,228,0],[0,204,0],[0,178,255],[35,31,211],[163,0,186],[211,124,170],[160,82,45]],[[0,0,0],[76,76,76],[116,11,7],[194,56,0],[232,162,0],[0,85,16],[0,86,158],[14,8,101],[85,0,105],[167,85,116],[99,48,13]]],brushSizes:[7,13,25,50],fingers:{},context:null,drawables:[],animationId:-1,canvasWidth:10,canvasHeight:10,commands:[],commandIndex:0}},mounted:function(){var t=this.$refs.canvas;this.context=t.getContext("2d"),this.canvasResize(),window.addEventListener("resize",this.canvasResize,!1),this.animationId=requestAnimationFrame(this.render),console.log(v),document.addEventListener("keypress",this.handleKey,!1)},beforeDestroy:function(){console.log("Destroying"),window.removeEventListener("resize",this.canvasResize),document.removeEventListener("keypress",this.handleKey),cancelAnimationFrame(this.animationId),v.reset()},methods:{render:function(){var t;this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.lineCap="round",this.context.lineJoin="round";var e,n=Object(u["a"])(this.drawables);try{for(n.s();!(e=n.n()).done;){var a=e.value;switch(a.type){case"line":this.context.beginPath(),this.context.strokeStyle=a.color,this.context.lineWidth=a.brush;var s,i=Object(u["a"])(a.line);try{for(i.s();!(s=i.n()).done;){var o=Object(l["a"])(s.value,2),c=o[0],h=o[1];this.context.lineTo(c,h)}}catch(d){i.e(d)}finally{i.f()}this.context.stroke();break;case"square":this.context.fillStyle=a.color,(t=this.context).fillRect.apply(t,Object(r["a"])(a.position).concat(Object(r["a"])(a.shape)));break;default:console.warn("No case set");break}}}catch(d){n.e(d)}finally{n.f()}this.animationId=requestAnimationFrame(this.render)},startTool:function(t,e,n){var a=[[t,e]],s={type:"line",brush:this.activeBrush,color:this.activeRgb,line:a};n.drawable=s,this.drawables.push(s)},moveTool:function(t,e,n){n.drawable.line.push([t,e])},endTool:function(t,e,n){n.drawable.line.push([t,e]),v.addCommand(new y(this.drawables,n.drawable)),delete n.drawable},clearCanvas:function(){v.executeCommand(new g(this.drawables))},selectColor:function(t,e,n){this.activeColor=[t,e,n]},selectTool:function(t){this.activeTool=t},selectBrush:function(t){this.activeBrush=t},handleKey:function(t){t.preventDefault(),"KeyZ"===t.code&&t.ctrlKey&&t.shiftKey?v.redo():"KeyZ"===t.code&&t.ctrlKey&&v.undo()},startMove:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.fingers[e]||(this.fingers[e]={});var n=this.fingers[e];n.down=!0;var a=t.pageX-this.$refs.canvas.offsetLeft,s=t.pageY-this.$refs.canvas.offsetTop;this.startTool(a,s,n)},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.fingers[e]&&this.fingers[e].down){var n=t.pageX-this.$refs.canvas.offsetLeft,a=t.pageY-this.$refs.canvas.offsetTop;this.moveTool(n,a,this.fingers[e])}},endMove:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.pageX-this.$refs.canvas.offsetLeft,a=t.pageY-this.$refs.canvas.offsetTop;this.endTool(n,a,this.fingers[e]),this.fingers[e]&&(this.fingers[e].down=!1)},startTouch:function(t){var e,n=Object(u["a"])(t.touches);try{for(n.s();!(e=n.n()).done;){var a=e.value;this.startMove(a,a.identifier)}}catch(s){n.e(s)}finally{n.f()}},moveTouch:function(t){var e,n=Object(u["a"])(t.touches);try{for(n.s();!(e=n.n()).done;){var a=e.value;this.startMove(a,a.identifier)}}catch(s){n.e(s)}finally{n.f()}},endTouch:function(t){var e,n=Object(u["a"])(t.touches);try{for(n.s();!(e=n.n()).done;){var a=e.value;this.startMove(a,a.identifier)}}catch(s){n.e(s)}finally{n.f()}},canvasResize:function(){console.log("resize");var t=this.$refs.canvas,e=t.getBoundingClientRect(),n=e.width,a=e.height;this.canvasWidth=n,this.canvasHeight=a}},computed:{activeRgb:function(){var t=Object(l["a"])(this.activeColor,3),e=t[0],n=t[1],a=t[2];return"rgb(".concat(e,",").concat(n,",").concat(a,")")}}},k=w,O=(n("75f7"),n("2877")),C=Object(O["a"])(k,o,c,!1,null,"6aa80cec",null),j=C.exports,x={name:"App",components:{DrawCanvas:j}},T=x,P=(n("034f"),Object(O["a"])(T,s,i,!1,null,null,null)),_=P.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(_)}}).$mount("#app")},6729:function(t,e,n){},"75f7":function(t,e,n){"use strict";var a=n("6729"),s=n.n(a);s.a},"85ec":function(t,e,n){}});
//# sourceMappingURL=app.59bac494.js.map