(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[0],{

/***/ "../pkg sync recursive":
/*!*******************!*\
  !*** ../pkg sync ***!
  \*******************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"../pkg sync recursive\";\n\n//# sourceURL=webpack:///../pkg_sync?");

/***/ }),

/***/ "../pkg/shirtboy.js":
/*!**************************!*\
  !*** ../pkg/shirtboy.js ***!
  \**************************/
/*! exports provided: __wbg_error_4bb6c2a97407129a, __wbg_new_59cb74e423758ede, __wbg_stack_558ba5917b466edd, __wbg_newwithlength_26cbc80f31ee7086, __wbg_newwithbyteoffsetandlength_0698a177016b8f67, __wbg_new_3a746f2619705add, __wbg_call_f54d3a6dadb199ca, __wbg_self_ac379e780a0d8b94, __wbg_crypto_1e4302b85d4f64a2, __wbg_getRandomValues_1b4ba144162a5c9e, __wbg_getRandomValues_1ef11e888e5228e9, __wbg_require_6461b1e9a0d7c34a, __wbg_randomFillSync_1b52c8482374c55b, __wbg_buffer_0b401f8e593a961e, __wbindgen_is_undefined, __wbindgen_jsval_eq, __wbindgen_memory, __wbindgen_throw, Game, __wbindgen_object_drop_ref */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_error_4bb6c2a97407129a\", function() { return __wbg_error_4bb6c2a97407129a; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_new_59cb74e423758ede\", function() { return __wbg_new_59cb74e423758ede; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_stack_558ba5917b466edd\", function() { return __wbg_stack_558ba5917b466edd; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_newwithlength_26cbc80f31ee7086\", function() { return __wbg_newwithlength_26cbc80f31ee7086; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_newwithbyteoffsetandlength_0698a177016b8f67\", function() { return __wbg_newwithbyteoffsetandlength_0698a177016b8f67; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_new_3a746f2619705add\", function() { return __wbg_new_3a746f2619705add; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_call_f54d3a6dadb199ca\", function() { return __wbg_call_f54d3a6dadb199ca; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_self_ac379e780a0d8b94\", function() { return __wbg_self_ac379e780a0d8b94; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_crypto_1e4302b85d4f64a2\", function() { return __wbg_crypto_1e4302b85d4f64a2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_getRandomValues_1b4ba144162a5c9e\", function() { return __wbg_getRandomValues_1b4ba144162a5c9e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_getRandomValues_1ef11e888e5228e9\", function() { return __wbg_getRandomValues_1ef11e888e5228e9; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_require_6461b1e9a0d7c34a\", function() { return __wbg_require_6461b1e9a0d7c34a; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_randomFillSync_1b52c8482374c55b\", function() { return __wbg_randomFillSync_1b52c8482374c55b; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_buffer_0b401f8e593a961e\", function() { return __wbg_buffer_0b401f8e593a961e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_is_undefined\", function() { return __wbindgen_is_undefined; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_jsval_eq\", function() { return __wbindgen_jsval_eq; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_memory\", function() { return __wbindgen_memory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_throw\", function() { return __wbindgen_throw; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Game\", function() { return Game; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_object_drop_ref\", function() { return __wbindgen_object_drop_ref; });\n/* harmony import */ var _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shirtboy_bg */ \"../pkg/shirtboy_bg.wasm\");\n\n\nconst heap = new Array(32);\n\nheap.fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nfunction getObject(idx) { return heap[idx]; }\n\nlet heap_next = heap.length;\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n\nlet cachedTextDecoder = new TextDecoder('utf-8');\n\nlet cachegetUint8Memory = null;\nfunction getUint8Memory() {\n    if (cachegetUint8Memory === null || cachegetUint8Memory.buffer !== _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer) {\n        cachegetUint8Memory = new Uint8Array(_shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer);\n    }\n    return cachegetUint8Memory;\n}\n\nfunction getStringFromWasm(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory().subarray(ptr, ptr + len));\n}\n\nfunction __wbg_error_4bb6c2a97407129a(arg0, arg1) {\n    let varg0 = getStringFromWasm(arg0, arg1);\n\n    varg0 = varg0.slice();\n    _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_free\"](arg0, arg1 * 1);\n\n    console.error(varg0);\n}\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nfunction __wbg_new_59cb74e423758ede() {\n    return addHeapObject(new Error());\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nlet cachedTextEncoder = new TextEncoder('utf-8');\n\nlet passStringToWasm;\nif (typeof cachedTextEncoder.encodeInto === 'function') {\n    passStringToWasm = function(arg) {\n\n\n        let size = arg.length;\n        let ptr = _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_malloc\"](size);\n        let offset = 0;\n        {\n            const mem = getUint8Memory();\n            for (; offset < arg.length; offset++) {\n                const code = arg.charCodeAt(offset);\n                if (code > 0x7F) break;\n                mem[ptr + offset] = code;\n            }\n        }\n\n        if (offset !== arg.length) {\n            arg = arg.slice(offset);\n            ptr = _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_realloc\"](ptr, size, size = offset + arg.length * 3);\n            const view = getUint8Memory().subarray(ptr + offset, ptr + size);\n            const ret = cachedTextEncoder.encodeInto(arg, view);\n\n            offset += ret.written;\n        }\n        WASM_VECTOR_LEN = offset;\n        return ptr;\n    };\n} else {\n    passStringToWasm = function(arg) {\n\n\n        let size = arg.length;\n        let ptr = _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_malloc\"](size);\n        let offset = 0;\n        {\n            const mem = getUint8Memory();\n            for (; offset < arg.length; offset++) {\n                const code = arg.charCodeAt(offset);\n                if (code > 0x7F) break;\n                mem[ptr + offset] = code;\n            }\n        }\n\n        if (offset !== arg.length) {\n            const buf = cachedTextEncoder.encode(arg.slice(offset));\n            ptr = _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_realloc\"](ptr, size, size = offset + buf.length);\n            getUint8Memory().set(buf, ptr + offset);\n            offset += buf.length;\n        }\n        WASM_VECTOR_LEN = offset;\n        return ptr;\n    };\n}\n\nlet cachegetUint32Memory = null;\nfunction getUint32Memory() {\n    if (cachegetUint32Memory === null || cachegetUint32Memory.buffer !== _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer) {\n        cachegetUint32Memory = new Uint32Array(_shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer);\n    }\n    return cachegetUint32Memory;\n}\n\nfunction __wbg_stack_558ba5917b466edd(ret, arg0) {\n\n    const retptr = passStringToWasm(getObject(arg0).stack);\n    const retlen = WASM_VECTOR_LEN;\n    const mem = getUint32Memory();\n    mem[ret / 4] = retptr;\n    mem[ret / 4 + 1] = retlen;\n\n}\n\nfunction __wbg_newwithlength_26cbc80f31ee7086(arg0) {\n    return addHeapObject(new Float64Array(arg0 >>> 0));\n}\n\nfunction __wbg_newwithbyteoffsetandlength_0698a177016b8f67(arg0, arg1, arg2) {\n    return addHeapObject(new Float64Array(getObject(arg0), arg1 >>> 0, arg2 >>> 0));\n}\n\nfunction __wbg_new_3a746f2619705add(arg0, arg1) {\n    let varg0 = getStringFromWasm(arg0, arg1);\n    return addHeapObject(new Function(varg0));\n}\n\nfunction __wbg_call_f54d3a6dadb199ca(arg0, arg1) {\n    return addHeapObject(getObject(arg0).call(getObject(arg1)));\n}\n\nfunction __wbg_self_ac379e780a0d8b94(arg0) {\n    return addHeapObject(getObject(arg0).self);\n}\n\nfunction __wbg_crypto_1e4302b85d4f64a2(arg0) {\n    return addHeapObject(getObject(arg0).crypto);\n}\n\nfunction __wbg_getRandomValues_1b4ba144162a5c9e(arg0) {\n    return addHeapObject(getObject(arg0).getRandomValues);\n}\n\nfunction getArrayU8FromWasm(ptr, len) {\n    return getUint8Memory().subarray(ptr / 1, ptr / 1 + len);\n}\n\nfunction __wbg_getRandomValues_1ef11e888e5228e9(arg0, arg1, arg2) {\n    let varg1 = getArrayU8FromWasm(arg1, arg2);\n    getObject(arg0).getRandomValues(varg1);\n}\n\nfunction __wbg_require_6461b1e9a0d7c34a(arg0, arg1) {\n    let varg0 = getStringFromWasm(arg0, arg1);\n    return addHeapObject(__webpack_require__(\"../pkg sync recursive\")(varg0));\n}\n\nfunction __wbg_randomFillSync_1b52c8482374c55b(arg0, arg1, arg2) {\n    let varg1 = getArrayU8FromWasm(arg1, arg2);\n    getObject(arg0).randomFillSync(varg1);\n}\n\nfunction __wbg_buffer_0b401f8e593a961e(arg0) {\n    return addHeapObject(getObject(arg0).buffer);\n}\n\nfunction __wbindgen_is_undefined(i) { return getObject(i) === undefined ? 1 : 0; }\n\nfunction __wbindgen_jsval_eq(a, b) { return getObject(a) === getObject(b) ? 1 : 0; }\n\nfunction __wbindgen_memory() { return addHeapObject(_shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"memory\"]); }\n\nfunction __wbindgen_throw(ptr, len) {\n    throw new Error(getStringFromWasm(ptr, len));\n}\n\nfunction freeGame(ptr) {\n\n    _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_game_free\"](ptr);\n}\n/**\n*/\nclass Game {\n\n    free() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n        freeGame(ptr);\n    }\n\n    /**\n    * @param {number} size\n    * @returns {}\n    */\n    constructor(size) {\n        this.ptr = _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_new\"](size);\n    }\n    /**\n    * @param {number} delta_t\n    * @returns {void}\n    */\n    tick(delta_t) {\n        return _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_tick\"](this.ptr, delta_t);\n    }\n    /**\n    * @param {number} x\n    * @param {number} y\n    * @returns {void}\n    */\n    update_mouse_position(x, y) {\n        return _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_update_mouse_position\"](this.ptr, x, y);\n    }\n    /**\n    * @param {boolean} state\n    * @returns {void}\n    */\n    set_mouse_down(state) {\n        return _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_set_mouse_down\"](this.ptr, state);\n    }\n    /**\n    * @param {number} key\n    * @returns {void}\n    */\n    add_key(key) {\n        return _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_add_key\"](this.ptr, key);\n    }\n    /**\n    * @param {number} key\n    * @returns {void}\n    */\n    remove_key(key) {\n        return _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_remove_key\"](this.ptr, key);\n    }\n    /**\n    * @returns {number}\n    */\n    n_projectiles() {\n        return _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_n_projectiles\"](this.ptr) >>> 0;\n    }\n    /**\n    * @param {number} i\n    * @returns {any}\n    */\n    get_projectile(i) {\n        return takeObject(_shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_get_projectile\"](this.ptr, i));\n    }\n    /**\n    * @returns {number}\n    */\n    n_opponents() {\n        return _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_n_opponents\"](this.ptr) >>> 0;\n    }\n    /**\n    * @param {number} i\n    * @returns {any}\n    */\n    get_opponent(i) {\n        return takeObject(_shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_get_opponent\"](this.ptr, i));\n    }\n    /**\n    * @returns {void}\n    */\n    spawn_opponent() {\n        return _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_spawn_opponent\"](this.ptr);\n    }\n    /**\n    * @returns {any}\n    */\n    get_player() {\n        return takeObject(_shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_get_player\"](this.ptr));\n    }\n    /**\n    * @returns {number}\n    */\n    player_rotation() {\n        return _shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_player_rotation\"](this.ptr);\n    }\n    /**\n    * @returns {any}\n    */\n    opponent_bb_min() {\n        return takeObject(_shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_opponent_bb_min\"](this.ptr));\n    }\n    /**\n    * @returns {any}\n    */\n    opponent_bb_max() {\n        return takeObject(_shirtboy_bg__WEBPACK_IMPORTED_MODULE_0__[\"game_opponent_bb_max\"](this.ptr));\n    }\n}\n\nfunction __wbindgen_object_drop_ref(i) { dropObject(i); }\n\n\n\n//# sourceURL=webpack:///../pkg/shirtboy.js?");

/***/ }),

/***/ "../pkg/shirtboy_bg.wasm":
/*!*******************************!*\
  !*** ../pkg/shirtboy_bg.wasm ***!
  \*******************************/
/*! exports provided: memory, __wbg_game_free, game_new, game_tick, game_update_mouse_position, game_set_mouse_down, game_add_key, game_remove_key, game_n_projectiles, game_get_projectile, game_n_opponents, game_get_opponent, game_spawn_opponent, game_get_player, game_player_rotation, game_opponent_bb_min, game_opponent_bb_max, __wbindgen_malloc, __wbindgen_realloc, __wbindgen_free */
/***/ (function(module, exports, __webpack_require__) {

eval("\"use strict\";\n// Instantiate WebAssembly module\nvar wasmExports = __webpack_require__.w[module.i];\n__webpack_require__.r(exports);\n// export exports from WebAssembly module\nfor(var name in wasmExports) if(name != \"__webpack_init__\") exports[name] = wasmExports[name];\n// exec imports from WebAssembly module (for esm order)\n/* harmony import */ var m0 = __webpack_require__(/*! ./shirtboy */ \"../pkg/shirtboy.js\");\n\n\n// exec wasm module\nwasmExports[\"__webpack_init__\"]()\n\n//# sourceURL=webpack:///../pkg/shirtboy_bg.wasm?");

/***/ }),

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var shirtboy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! shirtboy */ \"../pkg/shirtboy.js\");\n\r\n\r\nconst SIZE = 800;\r\n\r\nconst BLACK = \"#000000\";\r\nconst WHITE = \"#FFFFFF\";\r\nconst RED = \"#FF0000\";\r\n\r\nconst FPS = 60;\r\nconst INTERVAL = 1000 / FPS;\r\n\r\nlet lastTime = (new Date()).getTime();\r\n\r\nconst canvas = document.getElementById(\"shirtboy-canvas\");\r\ncanvas.height = SIZE;\r\ncanvas.width = SIZE;\r\n\r\nconst stats = document.getElementById(\"stats\");\r\n\r\nconst ctx = canvas.getContext('2d');\r\n\r\nconst game = new shirtboy__WEBPACK_IMPORTED_MODULE_0__[\"Game\"](SIZE);\r\n\r\nconst renderLoop = () => {\r\n    window.requestAnimationFrame(renderLoop);\r\n\r\n    let currentTime = (new Date()).getTime();\r\n    let delta = (currentTime-lastTime);\r\n\r\n    if (delta > INTERVAL) {\r\n        // Tick with delta in seconds\r\n        game.tick(delta / 1000);\r\n\r\n        // Draw all elements\r\n        drawBackground();\r\n        drawPlayer(game);\r\n        drawProjectiles(game);\r\n        drawOpponents(game);\r\n\r\n        stats.innerHTML = `projectiles:\\t${game.n_projectiles()}<br>emenies:\\t${game.n_opponents()}`;\r\n    }\r\n\r\n    lastTime = currentTime - (delta % INTERVAL);\r\n};\r\n\r\nrequestAnimationFrame(renderLoop);\r\n\r\nfunction drawBackground() {\r\n    ctx.fillStyle = BLACK;\r\n    ctx.fillRect(0, 0, SIZE, SIZE);\r\n}\r\n\r\nfunction drawPlayer(game) {\r\n    const PLAYER_SIZE = 20;\r\n\r\n    let [x, y] = game.get_player();\r\n\r\n    ctx.fillStyle = BLACK;\r\n\r\n    let playerShape = size => {\r\n        ctx.beginPath();\r\n        ctx.moveTo(size / 2, 0);\r\n        ctx.lineTo(-size / 2, -size / 2);\r\n        ctx.lineTo(-size / 2, size / 2);\r\n        ctx.fill();\r\n    };\r\n\r\n    drawRotated(game.player_rotation(), x, y, () => {\r\n        ctx.fillStyle = WHITE;\r\n        playerShape(PLAYER_SIZE + 2);\r\n        ctx.fillStyle = BLACK;\r\n        playerShape(PLAYER_SIZE);\r\n    });\r\n}\r\n\r\nfunction drawProjectiles(game) {\r\n    const SIZE = 2;\r\n\r\n    ctx.fillStyle = WHITE;\r\n\r\n    for (let i = 0; i < game.n_projectiles(); ++i) {\r\n        let projectile = game.get_projectile(i);\r\n        ctx.fillRect(projectile[0] - SIZE / 2, projectile[1] - SIZE / 2, SIZE, SIZE)\r\n    }\r\n}\r\n\r\nfunction drawOpponents(game) {\r\n    let RADIUS = 10;\r\n\r\n    let opponentShape = (size, x, y) => {\r\n        ctx.beginPath();\r\n        ctx.arc(x, y, size, 0, Math.PI * 2);\r\n        ctx.fill();\r\n    };\r\n\r\n    ctx.fillStyle = WHITE;\r\n    for (let i = 0; i < game.n_opponents(); ++i) {\r\n        let [x,y] = game.get_opponent(i);\r\n        opponentShape(RADIUS, x, y);\r\n    }\r\n}\r\n\r\nfunction drawRotated(rotation, x, y, drawFun) {\r\n    ctx.translate(x, y);\r\n    ctx.rotate(rotation);\r\n\r\n    drawFun();\r\n\r\n    ctx.rotate(-rotation);\r\n    ctx.translate(-x, -y);\r\n}\r\n\r\n\r\nfunction updateMousePosition(e) {\r\n    game.update_mouse_position(e.clientX, e.clientY)\r\n}\r\n\r\nwindow.addEventListener('mousemove', updateMousePosition);\r\n\r\nwindow.addEventListener('keydown', event => {\r\n    const key = event.keyCode;\r\n    game.add_key(key);\r\n});\r\n\r\nwindow.addEventListener('keyup', event => {\r\n    const key = event.keyCode;\r\n    game.remove_key(key);\r\n});\r\n\r\nwindow.addEventListener('mousedown', e => {\r\n    if (e.button === 0) {\r\n        game.set_mouse_down(true)\r\n    }\r\n    else if (e.button === 1) {\r\n        game.spawn_opponent()\r\n    }\r\n});\r\n\r\nwindow.addEventListener('mouseup', e => {\r\n    if (e.button === 0) {\r\n        game.set_mouse_down(false)\r\n    }\r\n});\n\n//# sourceURL=webpack:///./index.js?");

/***/ })

}]);