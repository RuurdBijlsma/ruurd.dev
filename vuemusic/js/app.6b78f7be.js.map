{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?5b85","webpack:///./src/components/MediaPlayerView.vue?fa36","webpack:///./src/App.vue?8b93","webpack:///./src/App.vue","webpack:///./src/views/Home.vue?bdae","webpack:///./src/js/Token.js","webpack:///./src/js/Utils.js","webpack:///./src/js/FileStorage.js","webpack:///./src/js/Track.js","webpack:///./src/js/Playlist.js","webpack:///./src/js/SpotifyApi.js","webpack:///./src/components/PlaylistView.vue?d76e","webpack:///./src/js/SongCacher.js","webpack:///src/components/PlaylistView.vue","webpack:///./src/components/PlaylistView.vue?7282","webpack:///./src/components/PlaylistView.vue","webpack:///./src/components/MediaPlayerView.vue?7068","webpack:///src/components/MediaPlayerView.vue","webpack:///./src/components/MediaPlayerView.vue?9f20","webpack:///./src/components/MediaPlayerView.vue","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?2db0","webpack:///./src/views/Home.vue","webpack:///./src/router.js","webpack:///./src/registerServiceWorker.js","webpack:///./src/main.js","webpack:///./src/views/Home.vue?a432","webpack:///./src/components/PlaylistView.vue?d923"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","script","component","staticClass","_e","likedTracks","on","playMedia","ref","Token","accessToken","expires","type","json","JSON","parse","e","console","warn","Utils","isLocal","location","href","includes","seconds","isNaN","undefined","Math","round","h","floor","toString","padStart","array","random","FileStorage","isReady","requestSize","events","getFileSystem","then","async","fileSystem","fs","requestMoreQuota","log","fire","Promise","resolve","root","fileName","directory","file","getFileByName","files","getDirectoryFiles","find","f","error","reader","createReader","readEntries","webkitRequestFileSystem","PERSISTENT","size","navigator","webkitPersistentStorage","requestQuota","webkitTemporaryStorage","queryUsageAndQuota","usedBytes","grantedBytes","blob","fileEntry","createFile","writeToFile","getFile","exclusive","createWriter","writer","onwriteend","onerror","write","event","callback","indexOf","cb","id","title","artists","albumArt","durationMs","addedAt","duration","durationHms","secondsToHms","offline","caching","getCachedOfflineStatus","rawTrack","track","map","a","join","album","images","url","duration_ms","Date","added_at","localStorage","getItem","awaitReady","exists","tracks","activeTrack","empty","shuffledTracks","reshuffle","stringify","forEach","getOfflineStatus","rawTracks","fromRawTrack","shuffleArray","token","requestPaginatedResource","fromRawTracks","getToken","results","fetch","method","headers","next","concat","items","unixSeconds","secondsUntilExpiration","verifyToken","fromJson","getTokenFromApi","reject","clientId","redirectUrl","scopes","state","encodeURIComponent","spotifyWindow","open","hashChecker","setInterval","hash","close","clearInterval","split","tokenType","tokenExpires","tokenState","message","_v","_s","playlist","cacheAll","progressString","scopedSlots","_u","fn","item","$event","$emit","style","progressCallback","concurrentDownload","countCachedSongs","offlineCounter","count","synchronousRecursiveCache","reduce","b","syncCache","cacheIfNotCached","cache","getServer","query","response","audioBlob","createFileFromBlob","getMetadata","metadata","setOffline","currentPlaylist","seekDown","touches","utils","trackProgress","shuffle","skipPrevious","pause","play","skipNext","repeat","use","routes","path","Home","config","productionTip","router","App","$mount"],"mappings":"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","file":"js/app.6b78f7be.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/vuemusic/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaPlayerView.vue?vue&type=style&index=0&id=dd5701f0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaPlayerView.vue?vue&type=style&index=0&id=dd5701f0&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=203508ad&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[(_vm.loadingFs)?_c('md-progress-bar',{attrs:{\"md-mode\":\"indeterminate\"}}):_vm._e(),_c('md-content',[_c('playlist-view',{staticClass:\"playlist-view\",attrs:{\"playlist\":_vm.likedTracks},on:{\"play\":_vm.playMedia}})],1),_c('media-player-view',{ref:\"mediaPlayer\",staticClass:\"media-player\",attrs:{\"current-playlist\":_vm.likedTracks}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default class Token {\r\n    constructor(accessToken, expires, type) {\r\n        this.accessToken = accessToken;\r\n        this.expires = expires;\r\n        this.type = type;\r\n    }\r\n\r\n    static fromJson(json) {\r\n        if (!json)\r\n            return false;\r\n        try {\r\n            let object = JSON.parse(json);\r\n            return new Token(object.accessToken, object.expires, object.type);\r\n        } catch (e) {\r\n            console.warn(\"Token parse error\", e);\r\n            return false;\r\n        }\r\n    }\r\n}","export default class Utils {\r\n    static getServer() {\r\n        return this.isLocal() ? 'http://localhost:3000' : 'https://ruurd.dev:3000';\r\n    }\r\n\r\n    static isLocal() {\r\n        return location.href.includes('localhost') ||\r\n            location.href.includes('127.0.0.1') ||\r\n            location.href.includes('192.168.0');\r\n    }\r\n\r\n    static secondsToHms(seconds) {\r\n        if (isNaN(seconds) || seconds === undefined)\r\n            return '0:00';\r\n\r\n        seconds = Math.round(seconds);\r\n        let h = Math.floor(seconds / 3600);\r\n        let m = Math.floor((seconds % 3600) / 60);\r\n        let s = seconds % 60;\r\n        h = h.toString();\r\n        m = m.toString();\r\n        s = s.toString();\r\n        if (h !== '0') {\r\n            m = m.padStart(2, '0');\r\n            s = s.padStart(2, '0');\r\n        }\r\n        s = s.padStart(2, '0');\r\n\r\n        if (h === '0')\r\n            return `${m}:${s}`;\r\n        else return `${h}:${m}:${s}`;\r\n    }\r\n\r\n    static shuffleArray(array) {\r\n        for (let i = array.length - 1; i > 0; i--) {\r\n            const j = Math.floor(Math.random() * (i + 1));\r\n            [array[i], array[j]] = [array[j], array[i]];\r\n        }\r\n        return array;\r\n    }\r\n}","class FileStorage {\r\n    constructor() {\r\n        this.isReady = false;\r\n        this.requestSize = 512 * 1024 ** 2; // 512MB\r\n        this.events = {};\r\n\r\n        this.getFileSystem().then(async fs => {\r\n            this.fileSystem = fs;\r\n            await this.requestMoreQuota(this.requestSize);\r\n            this.isReady = true;\r\n            console.log(\"File storage loaded!\");\r\n            this.fire('ready');\r\n        });\r\n    }\r\n\r\n    async awaitReady() {\r\n        return new Promise(resolve => {\r\n            if (this.isReady)\r\n                resolve();\r\n            this.on('ready', () => {\r\n                // console.log(\"resolving ready here\");\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n\r\n    get root() {\r\n        return this.fileSystem.root;\r\n    }\r\n\r\n    async exists(fileName, directory = this.root) {\r\n        let file = await this.getFileByName(fileName, directory);\r\n        return (file) !== undefined;\r\n    }\r\n\r\n    async getFileByName(fileName, directory = this.root) {\r\n        let files = await this.getDirectoryFiles(directory);\r\n        return files.find(f => f.name === fileName);\r\n    }\r\n\r\n    async getDirectoryFiles(directory = this.root) {\r\n        return new Promise((resolve, error) => {\r\n            let reader = directory.createReader();\r\n            reader.readEntries(r => resolve(r), e => error(e));\r\n        });\r\n    }\r\n\r\n    async getFileSystem() {\r\n        return new Promise((resolve, error) => {\r\n            window.webkitRequestFileSystem(window.PERSISTENT, 0, r => resolve(r), e => error(e));\r\n        });\r\n    }\r\n\r\n    async requestMoreQuota(size) {\r\n        return new Promise((resolve, error) => {\r\n            navigator.webkitPersistentStorage.requestQuota(size, r => resolve(r), e => error(e));\r\n        });\r\n    }\r\n\r\n    async getCurrentQuota() {\r\n        return new Promise((resolve, error) => {\r\n            navigator.webkitTemporaryStorage.queryUsageAndQuota(\r\n                (usedBytes, grantedBytes) => resolve({usedBytes, grantedBytes}), e => error(e)\r\n            );\r\n        });\r\n    }\r\n\r\n    async createFileFromBlob(name, blob, directory = this.root) {\r\n        let fileEntry = await this.createFile(name, directory);\r\n        await this.writeToFile(blob, fileEntry);\r\n        return fileEntry;\r\n    }\r\n\r\n    async createFile(name, directory = this.root) {\r\n        console.log(\"file 1\");\r\n        return new Promise((resolve, error) => {\r\n            directory.getFile(name, {\r\n                create: true,\r\n                exclusive: false\r\n            }, r => resolve(r), e => error(e));\r\n        });\r\n    }\r\n\r\n    async writeToFile(blob, file) {\r\n        return new Promise((resolve, error) => {\r\n            file.createWriter(writer => {\r\n                writer.onwriteend = e => resolve(e);\r\n                writer.onerror = e => error(e);\r\n\r\n                writer.write(blob);\r\n            });\r\n        });\r\n    }\r\n\r\n    on(event, callback) {\r\n        if (!this.events[event])\r\n            this.events[event] = [];\r\n\r\n        this.events[event].push(callback);\r\n    }\r\n\r\n    off(event, callback) {\r\n        if (this.events[event])\r\n            this.events[event].splice(this.events.indexOf(callback), 1);\r\n    }\r\n\r\n    fire(event) {\r\n        if (this.events[event])\r\n            for (let cb of this.events[event]) {\r\n                cb();\r\n            }\r\n    }\r\n}\r\n\r\nexport default new FileStorage();\r\n","import fs from './FileStorage';\r\nimport Utils from \"@/js/Utils\";\r\n\r\nexport default class Track {\r\n    constructor(id, title, artists, albumArt, durationMs, addedAt) {\r\n        this.id = id;\r\n        this.title = title;\r\n        this.artists = artists;\r\n        this.albumArt = albumArt;\r\n        this.duration = durationMs / 1000;\r\n        this.durationHms = Utils.secondsToHms(this.duration);\r\n        this.addedAt = addedAt;\r\n        this.offline = false;\r\n        this.caching = false;\r\n        this.getCachedOfflineStatus();\r\n    }\r\n\r\n    static empty() {\r\n        return new Track('0', '', '', '', 0, 0)\r\n    }\r\n\r\n    static fromJson(json) {\r\n        if (!json) return;\r\n        try {\r\n            let object = JSON.parse(json);\r\n            return new Track(object.id, object.title, object.artists, object.albumArt, object.duration * 1000, object.addedAt);\r\n        } catch (e) {\r\n            console.error(\"Can't parse \", e, \"JSON:\", json);\r\n        }\r\n    }\r\n\r\n    static fromRawTrack(rawTrack) {\r\n        let track = rawTrack.track;\r\n        return new Track(track.id, track.name, track.artists.map(a => a.name).join(', '), track.album.images[0].url, track.duration_ms, new Date(rawTrack.added_at));\r\n    }\r\n\r\n    get query() {\r\n        return `${this.title} - ${this.artists}`;\r\n    }\r\n\r\n    setOffline() {\r\n        this.offline = true;\r\n        let key = 'offlineTrack' + this.id;\r\n        localStorage[key] = this.offline;\r\n    }\r\n\r\n    getCachedOfflineStatus() {\r\n        let key = 'offlineTrack' + this.id;\r\n        if (localStorage.getItem(key) !== null)\r\n            this.offline = localStorage[key] === 'true';\r\n    }\r\n\r\n    async getOfflineStatus() {\r\n        let key = 'offlineTrack' + this.id;\r\n        await fs.awaitReady();\r\n        this.offline = await fs.exists(this.id);\r\n        localStorage[key] = this.offline;\r\n    }\r\n}","import Utils from './Utils';\r\nimport fs from './FileStorage'\r\nimport Track from \"@/js/Track\";\r\n\r\nexport default class Playlist {\r\n    constructor(name, tracks) {\r\n        this.name = name;\r\n        this.tracks = tracks;\r\n        this.activeTrack = tracks.length > 0 ? tracks[0] : Track.empty();\r\n        this.shuffledTracks = [];\r\n        this.reshuffle();\r\n    }\r\n\r\n    exportJson() {\r\n        return JSON.stringify({name: this.name, tracks: this.tracks});\r\n    }\r\n\r\n    static importJson(json) {\r\n        if (!json)\r\n            return false;\r\n        try {\r\n            let object = JSON.parse(json);\r\n            let tracks = object.tracks.map(track =>\r\n                new Track(track.id, track.title, track.artists, track.albumArt, track.duration * 1000, track.addedAt)\r\n            );\r\n\r\n            fs.awaitReady().then(() => {\r\n                tracks.forEach(track => track.getOfflineStatus())\r\n            });\r\n\r\n            return new Playlist(object.name, tracks);\r\n        } catch (e) {\r\n            console.error(\"Cant parse playlist\", e, \"JSON\", json);\r\n        }\r\n    }\r\n\r\n    static fromRawTracks(name, rawTracks) {\r\n        let tracks = rawTracks.map(Track.fromRawTrack);\r\n        fs.awaitReady().then(() => {\r\n            tracks.forEach(track => track.getOfflineStatus())\r\n        });\r\n        return new Playlist(name, tracks);\r\n    }\r\n\r\n    reshuffle() {\r\n        this.shuffledTracks = Utils.shuffleArray([...this.tracks]);\r\n    }\r\n\r\n    static empty() {\r\n        return new Playlist('', []);\r\n    }\r\n}","import Token from \"./Token\";\r\nimport Playlist from \"@/js/Playlist\";\r\nimport Utils from \"@/js/Utils\";\r\n\r\nclass SpotifyApi {\r\n    constructor() {\r\n        this.token = false;\r\n    }\r\n\r\n    async getLikedTracks() {\r\n        let url = 'https://api.spotify.com/v1/me/tracks?limit=50';\r\n        let rawTracks = await this.requestPaginatedResource(url);\r\n        return Playlist.fromRawTracks('Liked songs', rawTracks);\r\n    }\r\n\r\n    async requestPaginatedResource(url) {\r\n        let token = await this.getToken();\r\n        let results = [];\r\n\r\n        while (url) {\r\n            let result = await (await fetch(url, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Authorization': 'Bearer ' + token.accessToken,\r\n                }\r\n            })).json();\r\n            url = result.next;\r\n            results = results.concat(result.items);\r\n        }\r\n\r\n        return results;\r\n    }\r\n\r\n    static verifyToken(token) {\r\n        if (!token)\r\n            return false;\r\n\r\n        let unixSeconds = Math.floor((+new Date()) / 1000);\r\n        let secondsUntilExpiration = token.expires - unixSeconds;\r\n        return secondsUntilExpiration > 60;\r\n    }\r\n\r\n    async getToken() {\r\n        if (SpotifyApi.verifyToken(this.token))\r\n            return this.token;\r\n\r\n        if (localStorage.getItem('token') !== null) {\r\n            let token = Token.fromJson(localStorage.token);\r\n            if (SpotifyApi.verifyToken(token)) {\r\n                console.log(\"using localStorage token\");\r\n                return token;\r\n            }\r\n        }\r\n\r\n        console.log(\"requesting new token\");\r\n        let token = await this.getTokenFromApi();\r\n        localStorage.token = JSON.stringify(token);\r\n        this.token = token;\r\n        return token;\r\n    }\r\n\r\n    async getTokenFromApi() {\r\n        return new Promise((resolve, reject) => {\r\n            const clientId = 'cd272aa2194c46c7a460e9a202f66002';\r\n            let redirectUrl = Utils.isLocal() ? 'http://localhost:8080/vuemusic/#/' : 'https://ruurd.dev/vuemusic/#/';\r\n            let scopes = 'user-library-read';\r\n            let state = Math.round(Math.random() * 10000000).toString();\r\n            let url = `https://accounts.spotify.com/authorize?response_type=token&state=${state}&client_id=${clientId}${scopes ? '&scope=' + encodeURIComponent(scopes) : ''}&redirect_uri=${encodeURIComponent(redirectUrl)}`;\r\n            let spotifyWindow = window.open(url);\r\n            console.log(spotifyWindow);\r\n            let hashChecker = setInterval(() => {\r\n                let hash = spotifyWindow.location.hash;\r\n                if (hash) {\r\n                    spotifyWindow.close();\r\n                    clearInterval(hashChecker);\r\n                    if (hash.includes('error')) {\r\n                        console.log(\"ERROR:\", hash);\r\n                        reject(hash);\r\n                    }\r\n                    if (hash.includes('access_token')) {\r\n                        console.log(\"TOKEN:\", hash);\r\n                        let accessToken = hash.split('access_token=')[1].split('&')[0];\r\n                        let tokenType = hash.split('token_type=')[1].split('&')[0];\r\n                        let tokenExpires = hash.split('expires_in=')[1].split('&')[0];\r\n                        let tokenState = hash.split('state=')[1].split('&')[0];\r\n\r\n                        let expires = Math.floor((+new Date) / 1000) + (+tokenExpires);\r\n                        let token = new Token(accessToken, expires, tokenType);\r\n\r\n                        if (tokenState !== state) {\r\n                            reject({message: `State doens't match: ${tokenState}, ${state}`, token});\r\n                            return;\r\n                        }\r\n\r\n                        resolve(token);\r\n                    }\r\n                }\r\n                console.log(spotifyWindow.location.hash);\r\n            }, 100)\r\n        });\r\n    }\r\n}\r\n\r\nexport default new SpotifyApi();","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"playlist-view\"},[_c('h2',{staticClass:\"playlist-name\"},[_vm._v(\"\\n        \"+_vm._s(_vm.playlist.name)+\"\\n    \")]),_c('div',{staticClass:\"cache-button-container\"},[_c('md-button',{on:{\"click\":_vm.cacheAll}},[_vm._v(\"Cache all songs\")]),_c('p',[_vm._v(_vm._s(_vm.progressString))])],1),_c('recycle-scroller',{staticClass:\"song-list\",attrs:{\"items\":_vm.playlist.tracks,\"item-size\":60,\"key-field\":\"id\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"song-view\",attrs:{\"active\":_vm.playlist.activeTrack.id === item.id},on:{\"click\":function($event){return _vm.$emit('play', item)}}},[(item.caching)?_c('md-icon',{staticClass:\"icon\"},[_vm._v(\"cached\")]):_c('md-icon',{staticClass:\"icon\",style:(item.offline ? 'opacity: 0.5' : 'opacity: 0')},[_vm._v(\"cloud_done\")]),_c('div',{staticClass:\"song-info\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_c('p',{staticClass:\"artists\"},[_vm._v(_vm._s(item.artists)+\" • \"+_vm._s(item.durationHms))])])],1)]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import fs from './FileStorage';\r\nimport Utils from \"@/js/Utils\";\r\n\r\nclass SongCacher {\r\n    cacheMultiple(tracks, progressCallback) {\r\n        let concurrentDownload = 5;\r\n\r\n        progressCallback(this.countCachedSongs(tracks));\r\n        let offlineCounter = setInterval(() => {\r\n            let count = this.countCachedSongs(tracks);\r\n\r\n            progressCallback(count);\r\n            if (count >= tracks.length)\r\n                clearInterval(offlineCounter);\r\n        }, 2000);\r\n\r\n        for (let i = 0; i < concurrentDownload; i++)\r\n            this.synchronousRecursiveCache(tracks);\r\n    }\r\n\r\n    countCachedSongs(tracks) {\r\n        let count = tracks.map(t => t.offline).reduce((a, b) => a + b);\r\n        return count;\r\n    }\r\n\r\n    synchronousRecursiveCache(tracks) {\r\n        for (let track of tracks)\r\n            if (!track.offline && !track.caching && !track.syncCache) {\r\n                track.syncCache = true;\r\n                this.cacheIfNotCached(track).then(() => this.synchronousRecursiveCache(tracks));\r\n                break;\r\n            }\r\n    }\r\n\r\n    async cacheIfNotCached(track) {\r\n        await fs.awaitReady();\r\n        if (!(await fs.exists(track.id)))\r\n            await this.cache(track);\r\n        else\r\n            console.log(\"not caching song\", track.title, \"already available offline\");\r\n    }\r\n\r\n    async cache(track) {\r\n        return new Promise(async (resolve, reject) => {\r\n            if (track.caching)\r\n                return;\r\n            track.caching = true;\r\n            console.log(\"Caching\", track.title, \"now\");\r\n\r\n            let url = Utils.getServer() + '/download/?query=' + encodeURIComponent(track.query);\r\n            console.log(\"Downloading url:\", url);\r\n            let response = await fetch(url);\r\n            let audioBlob = await response.blob();\r\n            let result = await fs.createFileFromBlob(track.id, audioBlob);\r\n\r\n            result.getMetadata(metadata => {\r\n                console.log(`Song ${track.title} caching complete: `, result, 'metadata', metadata);\r\n                track.caching = false;\r\n                track.setOffline();\r\n                resolve(track);\r\n            });\r\n        })\r\n    }\r\n}\r\n\r\nexport default new SongCacher();","<template>\r\n    <div class=\"playlist-view\">\r\n        <h2 class=\"playlist-name\">\r\n            {{playlist.name}}\r\n        </h2>\r\n        <div class=\"cache-button-container\">\r\n            <md-button @click=\"cacheAll\">Cache all songs</md-button>\r\n            <p>{{progressString}}</p>\r\n        </div>\r\n        <recycle-scroller\r\n                :items=\"playlist.tracks\"\r\n                class=\"song-list\"\r\n                :item-size=\"60\"\r\n                key-field=\"id\"\r\n                v-slot=\"{ item }\">\r\n            <div class=\"song-view\" :active=\"playlist.activeTrack.id === item.id\" @click=\"$emit('play', item)\">\r\n                <md-icon v-if=\"item.caching\" class=\"icon\">cached</md-icon>\r\n                <md-icon v-else :style=\"item.offline ? 'opacity: 0.5' : 'opacity: 0'\" class=\"icon\">cloud_done</md-icon>\r\n                <div class=\"song-info\">\r\n                    <p class=\"title\">{{item.title}}</p>\r\n                    <p class=\"artists\">{{item.artists}} • {{item.durationHms}}</p>\r\n                </div>\r\n            </div>\r\n        </recycle-scroller>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Playlist from \"@/js/Playlist\";\r\n    import SongCacher from \"@/js/SongCacher\";\r\n\r\n    export default {\r\n        name: \"PlaylistView\",\r\n        data() {\r\n            return {\r\n                progressString: '',\r\n            }\r\n        },\r\n        props: {\r\n            playlist: Playlist,\r\n        },\r\n        methods: {\r\n            cacheAll() {\r\n                SongCacher.cacheMultiple(this.playlist.tracks, progress => {\r\n                    this.progressString = `Downloaded ${progress} / ${this.playlist.tracks.length} songs`;\r\n                });\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .playlist-view {\r\n        text-align: left;\r\n        background: radial-gradient(circle at top left, rgba(75, 47, 250, 0.9) 0%, transparent 65%), radial-gradient(circle at top right, rgba(235, 255, 240, .6) 0%, transparent 35%);\r\n    }\r\n\r\n    .playlist-name {\r\n        margin-bottom: 40px;\r\n        text-align: center;\r\n    }\r\n\r\n    .cache-button-container {\r\n        width: 100%;\r\n        text-align: center;\r\n    }\r\n\r\n    .song-view {\r\n        padding: 8px;\r\n        border-radius: 5px;\r\n        cursor: pointer;\r\n        display: flex;\r\n        flex-direction: left;\r\n    }\r\n\r\n    .song-view p {\r\n        margin: 0;\r\n        padding: 0;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n\r\n    .song-view[active] {\r\n        background-color: rgba(255, 255, 255, 0.2);\r\n    }\r\n\r\n    .icon {\r\n        width: 40px;\r\n        height: 30px;\r\n        text-align: left !important;\r\n        margin-left: -5px;\r\n        opacity: 0.5;\r\n        font-size: 18px !important;\r\n    }\r\n\r\n    .song-info {\r\n        width: calc(100% - 40px);\r\n    }\r\n\r\n    .title {\r\n        font-size: 16px;\r\n    }\r\n\r\n    .artists {\r\n        font-size: 14px;\r\n        opacity: 0.7;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlaylistView.vue?vue&type=template&id=4d0b20b6&scoped=true&\"\nimport script from \"./PlaylistView.vue?vue&type=script&lang=js&\"\nexport * from \"./PlaylistView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlaylistView.vue?vue&type=style&index=0&id=4d0b20b6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d0b20b6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('md-content',{staticClass:\"media-player-view player-card md-primary\"},[_c('div',{staticClass:\"track-card\"},[_c('div',{staticClass:\"album-art\",style:({'background-image': (\"url(\" + (_vm.currentPlaylist.activeTrack.albumArt) + \")\")})}),_c('div',{staticClass:\"track-info\"},[_c('span',[_vm._v(_vm._s(_vm.currentPlaylist.activeTrack.title))]),_c('span',[_vm._v(_vm._s(_vm.currentPlaylist.activeTrack.artists))])])]),_c('div',{staticClass:\"seek-bar\",on:{\"mousedown\":_vm.seekDown,\"touchstart\":function($event){return _vm.seekDown($event.touches[0])}}},[_c('span',{staticClass:\"track-time\"},[_vm._v(_vm._s(_vm.utils.secondsToHms(_vm.trackProgress * _vm.currentPlaylist.activeTrack.duration)))]),_c('div',{ref:\"seekContainer\",staticClass:\"seek-container\"},[_c('div',{staticClass:\"seek-progress\",style:({'width':((Math.round(_vm.trackProgress * 100)) + \"%\")})}),_c('div',{staticClass:\"seek-thumb\",style:({'left':(\"calc(\" + (Math.round(_vm.trackProgress * 100)) + \"% - 16px / 2)\")})})]),_c('span',{staticClass:\"track-duration\"},[_vm._v(_vm._s(_vm.currentPlaylist.activeTrack.durationHms))])]),_c('div',{staticClass:\"music-controls\"},[_c('md-button',{staticClass:\"md-icon-button\",on:{\"click\":function($event){_vm.shuffle = !_vm.shuffle}}},[_c('md-icon',{style:(_vm.shuffle ? 'opacity: 1' : 'opacity: 0.6')},[_vm._v(\"shuffle\")])],1),_c('md-button',{staticClass:\"md-icon-button\",on:{\"click\":_vm.skipPrevious}},[_c('md-icon',[_vm._v(\"skip_previous\")])],1),(_vm.playing)?_c('md-button',{staticClass:\"md-icon-button md-raised\",on:{\"click\":function($event){return _vm.pause()}}},[_c('md-icon',[_vm._v(\"pause\")])],1):_c('md-button',{staticClass:\"md-icon-button md-raised\",on:{\"click\":function($event){return _vm.play()}}},[_c('md-icon',[_vm._v(\"play_arrow\")])],1),_c('md-button',{staticClass:\"md-icon-button\",on:{\"click\":_vm.skipNext}},[_c('md-icon',[_vm._v(\"skip_next\")])],1),_c('md-button',{staticClass:\"md-icon-button\",on:{\"click\":function($event){_vm.repeat = !_vm.repeat}}},[_c('md-icon',{style:(_vm.repeat ? 'opacity: 1' : 'opacity: 0.6')},[_vm._v(\"repeat\")])],1)],1),_c('audio',{ref:\"player\",staticClass:\"audio-player\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <md-content class=\"media-player-view player-card md-primary\">\r\n        <div class=\"track-card\">\r\n            <div class=\"album-art\" :style=\"{'background-image': `url(${currentPlaylist.activeTrack.albumArt})`}\"></div>\r\n            <div class=\"track-info\">\r\n                <span>{{currentPlaylist.activeTrack.title}}</span>\r\n                <span>{{currentPlaylist.activeTrack.artists}}</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"seek-bar\" @mousedown=\"seekDown\" @touchstart=\"seekDown($event.touches[0])\">\r\n            <span class=\"track-time\">{{utils.secondsToHms(trackProgress * currentPlaylist.activeTrack.duration)}}</span>\r\n            <div class=\"seek-container\" ref=\"seekContainer\">\r\n                <div class=\"seek-progress\" :style=\"{'width':`${Math.round(trackProgress * 100)}%`}\"></div>\r\n                <div class=\"seek-thumb\"\r\n                     :style=\"{'left':`calc(${Math.round(trackProgress * 100)}% - 16px / 2)`}\"></div>\r\n            </div>\r\n            <span class=\"track-duration\">{{currentPlaylist.activeTrack.durationHms}}</span>\r\n        </div>\r\n        <div class=\"music-controls\">\r\n            <md-button class=\"md-icon-button\" @click=\"shuffle = !shuffle\">\r\n                <md-icon :style=\"shuffle ? 'opacity: 1' : 'opacity: 0.6'\">shuffle</md-icon>\r\n            </md-button>\r\n            <md-button @click=\"skipPrevious\" class=\"md-icon-button\">\r\n                <md-icon>skip_previous</md-icon>\r\n            </md-button>\r\n            <md-button v-if=\"playing\" @click=\"pause()\" class=\"md-icon-button md-raised\">\r\n                <md-icon>pause</md-icon>\r\n            </md-button>\r\n            <md-button v-else @click=\"play()\" class=\"md-icon-button md-raised\">\r\n                <md-icon>play_arrow</md-icon>\r\n            </md-button>\r\n            <md-button @click=\"skipNext\" class=\"md-icon-button\">\r\n                <md-icon>skip_next</md-icon>\r\n            </md-button>\r\n            <md-button class=\"md-icon-button\" @click=\"repeat = !repeat\">\r\n                <md-icon :style=\"repeat ? 'opacity: 1' : 'opacity: 0.6'\">repeat</md-icon>\r\n            </md-button>\r\n        </div>\r\n        <audio ref=\"player\" class=\"audio-player\"></audio>\r\n    </md-content>\r\n</template>\r\n\r\n<script>\r\n    import Playlist from \"@/js/Playlist\";\r\n    import Utils from '@/js/Utils';\r\n    import fs from '@/js/FileStorage';\r\n    import SongCacher from '@/js/SongCacher';\r\n\r\n    export default {\r\n        name: \"media-player-view\",\r\n        data() {\r\n            return {\r\n                utils: Utils,\r\n                timeUpdater: -1,\r\n                shuffle: false,\r\n                repeat: true,\r\n                playing: false,\r\n                songProgress: 0,\r\n                seeking: false,\r\n                trackProgress: 0,\r\n                loadedLastPlayed: false\r\n            }\r\n        },\r\n        props: {\r\n            currentPlaylist: Playlist\r\n        },\r\n        mounted() {\r\n            if (localStorage.getItem('shuffle') !== null)\r\n                this.shuffle = JSON.parse(localStorage.shuffle);\r\n            if (localStorage.getItem('repeat') !== null)\r\n                this.repeat = JSON.parse(localStorage.repeat);\r\n\r\n            document.addEventListener('mousemove', e => this.mouseMove(e));\r\n            document.addEventListener('touchmove', e => this.mouseMove(e.touches[0]));\r\n            document.addEventListener('mouseup', e => this.mouseUp(e));\r\n            document.addEventListener('touchend', e => this.mouseUp(e.touches[0]));\r\n            this.timeUpdater = setInterval(() => {\r\n                let progress = this.$refs.player.currentTime / (this.currentPlaylist.activeTrack.duration);\r\n                progress = Math.max(Math.min(progress, 1), 0);\r\n                this.trackProgress = progress;\r\n            }, 100);\r\n        },\r\n        methods: {\r\n            async playTrack(track, pause = false, firstPlay = false) {\r\n                if (!firstPlay && track.id === this.currentPlaylist.activeTrack.id) {\r\n                    this.$refs.player.currentTime = 0;\r\n                    if (!pause)\r\n                        this.play();\r\n                    return;\r\n                }\r\n                localStorage.lastPlayed = track.id;\r\n                this.currentPlaylist.activeTrack = track;\r\n                this.setTrackMetaData(track);\r\n\r\n                let url;\r\n\r\n                await fs.awaitReady();\r\n                if (await fs.exists(track.id)) {\r\n                    url = (await fs.getFileByName(track.id)).toURL();\r\n                } else {\r\n                    url = Utils.getServer() + '/stream/?query=' + encodeURIComponent(track.query);\r\n                    SongCacher.cacheIfNotCached(track);\r\n                }\r\n\r\n\r\n                console.log(\"Playing\", track.title, \"URL:\", url);\r\n                let player = this.$refs.player;\r\n                player.src = url;\r\n                player.oncanplay = async () => {\r\n                    await this.play();\r\n                };\r\n                player.onended = () => this.skipNext();\r\n            },\r\n            async play() {\r\n                if (this.currentPlaylist.activeTrack.title === '') return;\r\n                this.playing = true;\r\n                await this.$refs.player.play();\r\n            },\r\n            pause() {\r\n                if (this.currentPlaylist.activeTrack.title === '') return;\r\n                this.playing = false;\r\n                this.$refs.player.pause();\r\n            },\r\n            skipNext() {\r\n                let currentIndex = this.currentPlaylist.tracks.indexOf(this.currentPlaylist.activeTrack);\r\n                if (currentIndex === this.currentPlaylist.tracks.length - 1)\r\n                    if (this.repeat)\r\n                        currentIndex = -1;\r\n                    else {\r\n                        console.log(\"Not skipping, repeat is off\");\r\n                        return;\r\n                    }\r\n                if (this.shuffle)\r\n                    this.playTrack(this.currentPlaylist.shuffledTracks[currentIndex + 1]);\r\n                else\r\n                    this.playTrack(this.currentPlaylist.tracks[currentIndex + 1]);\r\n\r\n            },\r\n            skipPrevious() {\r\n                let player = this.$refs.player;\r\n                if (player.currentTime < 5) {\r\n                    let currentIndex = this.currentPlaylist.tracks.indexOf(this.currentPlaylist.activeTrack);\r\n                    if (currentIndex === 0)\r\n                        currentIndex = this.currentPlaylist.tracks.length;\r\n                    if (this.shuffle)\r\n                        this.playTrack(this.currentPlaylist.shuffledTracks[currentIndex - 1]);\r\n                    else\r\n                        this.playTrack(this.currentPlaylist.tracks[currentIndex - 1]);\r\n                } else player.currentTime = 0;\r\n            },\r\n            mouseUp() {\r\n                if (this.seeking)\r\n                    this.seeking = false;\r\n            },\r\n            mouseMove(e) {\r\n                if (this.seeking)\r\n                    this.seekToEvent(e);\r\n            },\r\n            seekDown(e) {\r\n                this.seeking = true;\r\n                this.seekToEvent(e);\r\n            },\r\n            seekToEvent(e) {\r\n                let percent = (e.pageX - this.$refs.seekContainer.offsetLeft) / this.$refs.seekContainer.offsetWidth;\r\n                percent = Math.max(Math.min(percent, 1), 0);\r\n                this.trackProgress = percent;\r\n                let duration = this.currentPlaylist.activeTrack.duration;\r\n                this.$refs.player.currentTime = duration * percent;\r\n            },\r\n            setTrackMetaData(track) {\r\n                document.title = track.artists + ' - ' + track.title;\r\n                // document.querySelector('meta[name=\"theme-color\"').content = track.color;\r\n\r\n                if (!('mediaSession' in navigator))\r\n                    return;\r\n\r\n                navigator.mediaSession.metadata = new MediaMetadata({\r\n                    title: track.title,\r\n                    artist: track.artists,\r\n                    artwork: [\r\n                        {src: track.albumArt, type: 'image/png'},\r\n                    ]\r\n                });\r\n                navigator.mediaSession.setActionHandler('play', async () => {\r\n                    await this.play();\r\n                });\r\n                navigator.mediaSession.setActionHandler('pause', async () => {\r\n                    await this.pause();\r\n                });\r\n                navigator.mediaSession.setActionHandler('previoustrack', () => {\r\n                    this.skipNext();\r\n                });\r\n                navigator.mediaSession.setActionHandler('nexttrack', () => {\r\n                    this.skipPrevious();\r\n                });\r\n            },\r\n        },\r\n        watch: {\r\n            currentPlaylist() {\r\n                let lastPlayedTrack = this.currentPlaylist.tracks.find(t => t.id === localStorage.lastPlayed);\r\n                console.log(\"Last played track\", lastPlayedTrack);\r\n\r\n                if (lastPlayedTrack) {\r\n                    this.currentPlaylist.activeTrack = lastPlayedTrack;\r\n                    if (!this.loadedLastPlayed) {\r\n                        this.playTrack(lastPlayedTrack, true, true);\r\n                        this.loadedLastPlayed = true;\r\n                    }\r\n                }\r\n            },\r\n            shuffle() {\r\n                localStorage.shuffle = this.shuffle;\r\n            },\r\n            repeat() {\r\n                localStorage.repeat = this.repeat;\r\n            },\r\n        },\r\n        beforeDestroy() {\r\n            clearInterval(this.timeUpdater);\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n    .track-card {\r\n        display: flex;\r\n        flex-direction: row;\r\n        margin: 15px;\r\n    }\r\n\r\n    .album-art {\r\n        width: 55px;\r\n        height: 55px;\r\n        border-radius: 3px;\r\n        box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.3);\r\n        background-size: cover;\r\n        background-repeat: no-repeat;\r\n        background-position: center;\r\n        padding: 10px;\r\n    }\r\n\r\n    .track-info {\r\n        display: flex;\r\n        /*text-shadow: 0px 0px 20px black;*/\r\n        flex-direction: column;\r\n        text-align: left;\r\n        padding: 10px 15px;\r\n        max-width: calc(100% - 55px);\r\n    }\r\n\r\n    .track-info > span:first-child {\r\n        font-weight: 500;\r\n        font-size: 18px;\r\n    }\r\n\r\n    .track-info > span:nth-child(2) {\r\n        opacity: 0.7;\r\n    }\r\n\r\n    .track-info > span {\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n\r\n    .seek-bar {\r\n        display: flex;\r\n        margin: 30px 0;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .seek-bar > span {\r\n        font-size: 16px;\r\n        font-weight: 500;\r\n        opacity: 0.8;\r\n        pointer-events: none;\r\n        width: 100px;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n\r\n    .track-duration {\r\n        text-align: right;\r\n    }\r\n\r\n    .seek-container {\r\n        width: 100%;\r\n        height: 5px;\r\n        background-color: rgba(255, 255, 255, 0.5);\r\n        margin: 6px 12px;\r\n        border-radius: 2.5px;\r\n        pointer-events: none;\r\n    }\r\n\r\n    .seek-progress {\r\n        width: 50%;\r\n        height: 5px;\r\n        border-radius: 2.5px;\r\n        background-color: white;\r\n    }\r\n\r\n    .seek-thumb {\r\n        height: 16px;\r\n        width: 16px;\r\n        background-color: white;\r\n        border-radius: 50%;\r\n        position: relative;\r\n        top: calc(-16px / 2 - 2.5px);\r\n        left: calc(50% - 16px / 2);\r\n    }\r\n\r\n    .music-controls {\r\n        display: flex;\r\n        justify-content: space-evenly;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaPlayerView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaPlayerView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MediaPlayerView.vue?vue&type=template&id=dd5701f0&scoped=true&\"\nimport script from \"./MediaPlayerView.vue?vue&type=script&lang=js&\"\nexport * from \"./MediaPlayerView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MediaPlayerView.vue?vue&type=style&index=0&id=dd5701f0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dd5701f0\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"home\">\n        <md-progress-bar v-if=\"loadingFs\" md-mode=\"indeterminate\"></md-progress-bar>\n        <md-content>\n            <playlist-view @play=\"playMedia\" class=\"playlist-view\" :playlist=\"likedTracks\"></playlist-view>\n        </md-content>\n        <media-player-view class=\"media-player\" :current-playlist=\"likedTracks\" ref=\"mediaPlayer\"></media-player-view>\n    </div>\n</template>\n\n<script>\n    import SpotifyApi from '@/js/SpotifyApi'\n    import PlaylistView from \"@/components/PlaylistView\";\n    import Playlist from \"@/js/Playlist\";\n    import MediaPlayerView from '@/components/MediaPlayerView';\n    import fs from '@/js/FileStorage';\n    import SongCacher from \"@/js/SongCacher\";\n\n\n    export default {\n        name: 'home',\n        components: {PlaylistView, MediaPlayerView},\n        data() {\n            return {\n                loadingFs: true,\n                likedTracks: Playlist.empty()\n            }\n        },\n        async mounted() {\n            fs.awaitReady().then(() => this.loadingFs = false);\n            if (localStorage.getItem('likedTracks') !== null)\n                this.likedTracks = Playlist.importJson(localStorage.likedTracks);\n            SpotifyApi.getLikedTracks().then(tracks => {\n                this.likedTracks = tracks;\n                console.log(SongCacher, tracks);\n                localStorage.likedTracks = this.likedTracks.exportJson();\n            });\n        },\n        methods: {\n            playMedia(song) {\n                this.$refs.mediaPlayer.playTrack(song);\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .playlist-view {\n        max-height: calc(100% - 250px);\n        overflow-y: auto;\n        width: 100%;\n        position: absolute;\n        top: 0;\n        padding: 20px;\n    }\n\n    .media-player {\n        position: absolute;\n        height: 250px;\n        bottom: 0;\n        width: 100%;\n        z-index: 5;\n        box-shadow: 0 0 30px 0 rgba(0, 0, 0, 0.3);\n        padding: 20px;\n    }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=0be7a335&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=0be7a335&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0be7a335\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Home from './views/Home.vue'\n\nVue.use(Router);\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'home',\n      component: Home\n    },\n    // {\n    //   path: '/search',\n    //   name: 'search',\n    //   component: function () {\n    //     return import( './views/Search.vue')\n    //   }\n    // },\n  ]\n})\n","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker'\n\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready () {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n        'For more details, visit https://goo.gl/AFskqB'\n      )\n    },\n    registered () {\n      console.log('Service worker has been registered.')\n    },\n    cached () {\n      console.log('Content has been cached for offline use.')\n    },\n    updatefound () {\n      console.log('New content is downloading.')\n    },\n    updated () {\n      console.log('New content is available; please refresh.')\n    },\n    offline () {\n      console.log('No internet connection found. App is running in offline mode.')\n    },\n    error (error) {\n      console.error('Error during service worker registration:', error)\n    }\n  })\n}\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport './registerServiceWorker'\r\nimport { RecycleScroller } from 'vue-virtual-scroller';\r\n\r\nVue.config.productionTip = false;\r\nVue.component('RecycleScroller', RecycleScroller);\r\nimport 'vue-virtual-scroller/dist/vue-virtual-scroller.css'\r\n\r\nimport {MdButton, MdContent, MdList, MdIcon, MdSwitch, MdProgress} from 'vue-material/dist/components'\r\nimport 'vue-material/dist/vue-material.min.css'\r\nimport '../res/vm3-theme-primary-on-dark.css'\r\nVue.use(MdButton);\r\nVue.use(MdContent);\r\nVue.use(MdList);\r\nVue.use(MdIcon);\r\nVue.use(MdSwitch);\r\nVue.use(MdProgress);\r\n\r\nnew Vue({\r\n  router,\r\n  render: function (h) { return h(App) }\r\n}).$mount('#app');\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=0be7a335&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=0be7a335&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistView.vue?vue&type=style&index=0&id=4d0b20b6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistView.vue?vue&type=style&index=0&id=4d0b20b6&scoped=true&lang=css&\""],"sourceRoot":""}