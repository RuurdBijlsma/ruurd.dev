{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/MediaInfo.vue?88f4","webpack:///./src/components/SearchInput.vue","webpack:///src/components/SearchInput.vue","webpack:///./src/components/SearchInput.vue?791c","webpack:///./src/components/SearchInput.vue?2a6f","webpack:///./src/components/Logo.vue?ff64","webpack:///./src/components/TrackRow.vue","webpack:///src/components/TrackRow.vue","webpack:///./src/components/TrackRow.vue?a310","webpack:///./src/components/TrackRow.vue?c4c2","webpack:///./src/components/FollowMenuItem.vue","webpack:///src/components/FollowMenuItem.vue","webpack:///./src/components/FollowMenuItem.vue?7708","webpack:///./src/components/FollowMenuItem.vue?1b7a","webpack:///./src/views/ListenNow.vue?bc55","webpack:///./src/components/TrackItem.vue","webpack:///src/components/TrackItem.vue","webpack:///./src/components/TrackItem.vue?81a5","webpack:///./src/components/TrackItem.vue?6f00","webpack:///./src/components/NavContent.vue?e8a4","webpack:///./src/components/ItemSquare.vue?9d2b","webpack:///./src/js/music-downloader/MusicDownloader.js","webpack:///./src/components/QueueList.vue?66e6","webpack:///./src/components/ItemMenu.vue?57ad","webpack:///./src/App.vue","webpack:///./src/components/ToolBar.vue","webpack:///./src/components/MediaInfo.vue","webpack:///src/components/MediaInfo.vue","webpack:///./src/components/MediaInfo.vue?f394","webpack:///./src/components/MediaInfo.vue?01e9","webpack:///./src/components/Logo.vue","webpack:///src/components/Logo.vue","webpack:///./src/components/Logo.vue?5acd","webpack:///./src/components/Logo.vue?e356","webpack:///./src/components/QueueButton.vue","webpack:///src/components/QueueButton.vue","webpack:///./src/components/QueueButton.vue?3ca9","webpack:///./src/components/QueueButton.vue?e498","webpack:///src/components/ToolBar.vue","webpack:///./src/components/ToolBar.vue?ebe7","webpack:///./src/components/ToolBar.vue?bbe4","webpack:///./src/components/NavContent.vue","webpack:///src/components/NavContent.vue","webpack:///./src/components/NavContent.vue?5971","webpack:///./src/components/NavContent.vue?c3ee","webpack:///./src/components/MusicPlayer.vue","webpack:///src/components/MusicPlayer.vue","webpack:///./src/components/MusicPlayer.vue?e98a","webpack:///./src/components/MusicPlayer.vue?8750","webpack:///src/App.vue","webpack:///./src/App.vue?8fa6","webpack:///./src/App.vue?3746","webpack:///./src/registerServiceWorker.js","webpack:///./src/views/ListenNow.vue","webpack:///src/views/ListenNow.vue","webpack:///./src/views/ListenNow.vue?6767","webpack:///./src/views/ListenNow.vue?5cdd","webpack:///./src/plugins/router.js","webpack:///./src/plugins/vuex/media-module.js","webpack:///./src/plugins/vuex/search-module.js","webpack:///./src/plugins/vuetify.js","webpack:///./src/plugins/vuex/theme-module.js","webpack:///./src/plugins/vuex/store.js","webpack:///./src/main.js","webpack:///./src/components/ItemSquare.vue","webpack:///src/components/ItemSquare.vue","webpack:///./src/components/ItemSquare.vue?5f8b","webpack:///./src/components/ItemSquare.vue?7ea2","webpack:///./src/components/ShareMenuItem.vue","webpack:///src/components/ShareMenuItem.vue","webpack:///./src/components/ShareMenuItem.vue?2a79","webpack:///./src/components/ShareMenuItem.vue?ee1b","webpack:///./src/components/ArtistsSpan.vue?24ab","webpack:///./src/App.vue?3639","webpack:///./src/components/TrackItem.vue?cdeb","webpack:///./src/components/MediaControls.vue","webpack:///src/components/MediaControls.vue","webpack:///./src/components/MediaControls.vue?1c71","webpack:///./src/components/MediaControls.vue?23fc","webpack:///./src/components/ArtistsSpan.vue","webpack:///src/components/ArtistsSpan.vue","webpack:///./src/components/ArtistsSpan.vue?270d","webpack:///./src/components/ArtistsSpan.vue?35f9","webpack:///./src/components/MediaSeek.vue?9ebc","webpack:///./src/components/MediaControls.vue?94c0","webpack:///./src/components/ItemMenu.vue","webpack:///src/components/ItemMenu.vue","webpack:///./src/components/ItemMenu.vue?2967","webpack:///./src/components/ItemMenu.vue?4296","webpack:///./src/js/Utils.js","webpack:///./src/components/ItemRow.vue","webpack:///src/components/ItemRow.vue","webpack:///./src/components/ItemRow.vue?a100","webpack:///./src/components/ItemRow.vue?a2ea","webpack:///./src/js/music-downloader/NodeMusicDownloader.js","webpack:///./src/components/TrackRow.vue?04e6","webpack:///./src/js/Directories.js","webpack:///./src/plugins/vuex/electron-module.js","webpack:///./src/components/QueueButton.vue?ebd1","webpack:///./src/components/MediaSeek.vue","webpack:///src/components/MediaSeek.vue","webpack:///./src/components/MediaSeek.vue?4b63","webpack:///./src/components/MediaSeek.vue?a908","webpack:///./src/components/ItemRow.vue?9135","webpack:///./src/components/FollowButton.vue","webpack:///src/components/FollowButton.vue","webpack:///./src/components/FollowButton.vue?3c01","webpack:///./src/components/FollowButton.vue?beea","webpack:///./src/js/music-downloader/config.js","webpack:///./src/js/music-downloader/FetchInterceptor.js","webpack:///./src/js/music-downloader/XMLHttpRequestInterceptor.js","webpack:///./src/js/music-downloader/BrowserMusicDownloader.js","webpack:///./src/plugins/vuex/web-module.js","webpack:///./src/components/ToolBar.vue?9351","webpack:///./src/components/QueueList.vue","webpack:///src/components/QueueList.vue","webpack:///./src/components/QueueList.vue?338f","webpack:///./src/components/QueueList.vue?1f21"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","$event","preventDefault","goSearch","_vm","$store","expression","methods","term","watch","id","text","computed","component","staticRenderFns","_c","_self","ref","staticClass","class","attrs","activeTrack","theme","albumList","_s","track","components","ItemMenu","FollowMenuItem","ShareMenuItem","FollowButton","TrackItem","ArtistsSpan","props","default","contextItem","required","queueTrack","rowWidth","mounted","beforeDestroy","windowResize","play","rowClass","duration","_v","item","loading","typeCapitalized","isFollowed","style","backgroundImage","track_number","on","trackIsPlaying","menu","trackIsLoaded","MusicDownloader","EventEmitter","constructor","super","this","apiKey","searchCache","localStorage","getItem","cacheAge","Date","JSON","parse","waitForApiKey","interval","setInterval","clearInterval","getSearchString","artists","map","a","join","maxResults","cacheKey","toString","results","search","stringify","ytdl","getInfo","quality","filter","offlineUrl","isTrackOffline","local","url","searchTerm","cachedSearch","ids","getYtdlInfo","formats","qualities","sort","b","averageBitrate","audioBitrate","mimeType","startsWith","indexOf","audioQuality","format","progress","abortSignal","drawer","callback","state","windowWidth","snack","scopedSlots","_u","open","$set","$route","render","model","fn","dispatch","$vuetify","platform","directives","maxWidth","smallArtists","MediaControls","drag","dark","scrollToItem","_e","QueueList","TrackRow","intervals","clearIntervals","QueueButton","Logo","MediaSeek","MediaInfo","volume","prevVolume","mobile","compact","mountVolumeListener","removeVolumeListener","toggleMute","volumeScroll","volumeIcon","showPlaylistInput","playlistRules","playlistName","SearchInput","v","createLoading","timeInterval","navigator","playbackRate","position","handleVolume","audio","backupAudio","MusicPlayer","NavContent","ToolBar","cacheInterval","isCaching","electron","handleCode","otherTab","resizeListener","devListener","location","register","ready","log","registered","cached","updatefound","updated","offline","homePage","featured","title","replace","playlists","media","recentlyPlayed","personalized","newReleases","ItemRow","ItemSquare","Vue","use","VueRouter","routes","path","Home","router","currentTime","playing","queue","shuffledQueue","shuffle","repeat","downloads","playAfterLoad","trackLoading","shouldDownload","dontOverwriteTrackFromCache","mutations","setMediaStateValue","set","swapAudios","seekTo","percentage","audioElement","addDownload","download","existing","findIndex","downloadProgress","find","removeDownload","index","toggleShuffle","toggleRepeat","Utils","shuffleArray","unshift","tracks","playNext","queues","currentIndex","addToQueue","removeFromQueue","indexShuffle","clearQueue","getters","trackIndex","isTrackSet","currentQueue","durationHms","secondsToHms","currentTimeHms","actions","initializeMedia","async","commit","lsKeys","keys","getKvPair","lsKey","stateKey","substring","kvPairs","forEach","cacheMedia","cachedFields","field","isTrackAvailableOffline","rootState","downloader","removeCached","downloadTrackByUrl","abortController","AbortController","downloadTrack","signal","getTrackUrls","success","warn","initAudios","onloadedmetadata","onended","onplay","mediaSession","playbackState","onpause","pause","loadTimeout","canplayFired","oncanplay","paused","newIndex","setMetadata","artistsString","artwork","notFoundImage","sizes","album","images","width","height","metadata","MediaMetadata","artist","setActionHandler","defaultSkipTime","skipTime","seekOffset","Math","max","min","seekTime","playItem","startTrack","context","floor","random","liveTerm","recent","recentSearch","searchResult","includes","api","albums","items","Vuetify","darkTheme","themes","primary","foreground","primarySeek","navBackground","primaryLight","secondary","light","original","userPreset","color","fgLegible","currentTheme","framework","imgUrl","itemImage","bgLegible","isLegible","isDark","revertThemeColor","img","crossOrigin","canvas","getContext","drawImage","bins","imageData","getImageData","rgb","h","binKey","abs","values","indexOfMaxValue","reduce","iMax","x","arr","g","toHex","padStart","rgbToHsl","isElectron","process","require","querySelectorAll","manifestLink","querySelector","Vuex","Store","spotifyId","spotifySecret","youtube","requestedScopes","authUrl","isTouch","isTouchDevice","dontCache","events","innerWidth","snackbars","SpotifyWebApi","isRefreshing","playlist","auth","token","refresh","expiryDate","browse","categories","genres","userInfo","mail","country","followers","avatar","library","category","user","setStateValue","secret","youtubeKey","addSnackObject","removeSnack","loadCategory","extendCategory","loadPlaylist","extendPlaylist","loadAlbum","extendAlbum","loadInitialArtist","related","loadArtist","loadArtistRelated","loadArtistTracks","loadArtistAlbums","loadUser","extendUser","browseCategories","browseGenres","homeFeatured","homeRecent","homeNew","homePersonalized","addUserPlaylist","userPlaylists","addToLibrary","addAtStart","removeFromLibrary","setLibrary","server","isValidKeySet","isKeySet","notFoundUser","likedImage","icons","isLoggedIn","isAuthExpired","urlName","toEncode","toLowerCase","encoded","encodeURIComponent","relativeItemUrl","display_name","to","shareUrl","baseUrl","origin","pathname","spotifyShareUrl","isArtistFollowed","isTrackFollowed","isPlaylistFollowed","isAlbumFollowed","initialize","cacheAll","cacheState","clearCache","clear","reload","getAuthByRefreshToken","refreshToken","fetch","method","body","headers","getAuthByCode","redirectUrl","spotifyLogin","loginByRefreshToken","access_token","expires_in","spotifyLogout","addSnack","share","copy","urlType","Function","substr","toUpperCase","processAuth","now","setAccessToken","emit","msUntilExpire","waitFor","awaitAuth","getAccessToken","findPagination","getKeyPath","keyPath","concat","apiFunction","getData","pageObject","next","nextUrl","getGeneric","initializeSpotify","doneCount","libLoaded","checkDone","refreshUserInfo","me","getMe","email","refreshUserData","info","isInitial","retrieval","page","getUserPlaylists","limit","getMySavedAlbums","getFollowedArtists","getMySavedTracks","addToLib","batch","refreshHomePage","getFeaturedPlaylists","discoverNames","Array","_","owner","aI","bI","getNewReleases","refreshBrowsePage","getCategories","getAvailableGenreSeeds","genre","split","w","getPlaylist","getAlbum","getCategory","getCategoryPlaylists","getArtist","getArtistRelatedArtists","getArtistTopTracks","getArtistAlbums","getUser","loadTrack","getTrack","followPlaylist","unfollowPlaylist","followArtist","followArtists","unfollowArtist","unfollowArtists","followAlbum","addToMySavedAlbums","unfollowAlbum","removeFromMySavedAlbums","toggleFollowCurrentTrack","saved","containsMySavedTracks","followTrack","addToMySavedTracks","unfollowTrack","removeFromMySavedTracks","addToPlaylist","existingTracks","addTracksToPlaylist","uri","removeFromPlaylist","removeTracksFromPlaylist","createPlaylist","getRadioTracks","options","firstTrack","radioTracks","getRecommendations","getContextItem","completeItem","randomPlaylist","PerfectScrollbar","RecycleScroller","VueClipboard","config","productionTip","store","vuetify","App","$mount","big","small","borderRadius","playLoading","noTitle","textAlign","domProps","showYear","hideMenu","itemIsLoaded","itemIsPlaying","shareSpotify","loadingSpotify","large","full","_l","opacity","grey","_g","fab","remove","addLoading","removeLoading","addQueueLoading","nextQueueLoading","editablePlaylist","myPlaylists","maxTouchPoints","msMaxTouchPoints","release_date","duration_ms","is_local","disc_number","hexColor","background","contrastOnBg","hexContrast","contrastOnFg","hex","parseInt","hex1","hex2","contrast","hexToRgb","pow","rgb1","rgb2","lum1","luminance","lum2","brightest","darkest","seconds","isNaN","round","array","bytes","log10","toFixed","itemGroups","itemGroup","last","rows","groups","NodeMusicDownloader","musicDir","filesDir","tempDir","directories","music","files","temp","ffmpegPath","downloadingFfmpeg","fileName","fileNamify","filePath","fileExists","deleteFile","addEventListener","downloadedTrackFile","downloadFile","processedFile","ffmpegProcessing","trackInputFile","baseFileName","basename","tags","disc","year","getFullYear","hasImage","imageFile","outputFile","ffmpegMetadata","destinationFile","fs","rename","res","blob","writer","createWriteStream","write","Buffer","from","arrayBuffer","fileInput","fileOutput","coverImageFile","command","getFfmpegPath","tagsToString","waitForFileUnlock","aborted","child_process","exec","stdout","stderr","out","kill","part","unlink","access","F_OK","ms","startTime","performance","isFileLocked","waitSleep","fd","close","once","ffbinaries","downloadBinaries","destination","getBinaryFilename","detectPlatform","Directories","initializeDir","getDir","base","dir","fullDir","createDir","app","remote","getPath","existsSync","mkdirSync","importLSFile","localStorageFile","ls","readFileSync","exportLSToFile","localData","writeFileSync","express","playingIcons","pausedIcons","playIcons","playIcon","pauseIcon","prevIcon","nextIcon","initializePlatform","likeShortcut","globalShortcut","isRegistered","unregister","regResult","added","speech","voices","speechSynthesis","getVoices","voice","utterance","SpeechSynthesisUtterance","speak","tooltip","icon","__static","click","setPlatformPlaying","win","getCurrentWindow","setThumbarButtons","openDevTools","closeWindow","minimizeWindow","minimize","exportCache","resetSpotifyLogin","firstLogin","port","shell","openExternal","http","createServer","req","query","focus","refresh_token","send","listen","smallTime","noBackground","seeking","touchDown","touchMove","touchEnd","seekDown","seekMove","seekByEvent","left","seekUp","hideTooltip","follow","FetchInterceptor","_fetch","start","originalFetch","arguments","interceptUrls","interceptUrl","stop","XMLHttpRequestInterceptor","readyState","status","onreadystatechange","responseText","_XMLHttpRequest","XMLHttpRequest","postData","sendLive","response","abort","args","setRequestHeader","BrowserMusicDownloader","cacheName","json","trackString","cacheStorage","caches","delete","match","URL","createObjectURL","put","channel","endsWith","BroadcastChannel","onmessage","msg","scrollerHeight","calculateHeight"],"mappings":"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","file":"js/app.ce2c6c5d.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-15f16810\":\"e25042a8\",\"chunk-21538171\":\"02bbaed3\",\"chunk-219cc11a\":\"ee520517\",\"chunk-25990573\":\"a8285870\",\"chunk-2d0c8407\":\"b3bed717\",\"chunk-33193e4a\":\"b6086364\",\"chunk-3ba11879\":\"2d5acb28\",\"chunk-4792b7b1\":\"d7db9875\",\"chunk-48c79434\":\"9cd3005e\",\"chunk-598cfd62\":\"830ae918\",\"chunk-5c8329e8\":\"cc56a844\",\"chunk-5fda0c1d\":\"72bf7bef\",\"chunk-70566382\":\"bdda1910\",\"chunk-76968ffa\":\"f42807fb\",\"chunk-bade27a0\":\"cce67d37\",\"chunk-bc3b6bca\":\"a76898c0\",\"chunk-ef7b1fa2\":\"3573a2e0\",\"chunk-f3a67cdc\":\"470c0904\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-15f16810\":1,\"chunk-21538171\":1,\"chunk-219cc11a\":1,\"chunk-25990573\":1,\"chunk-33193e4a\":1,\"chunk-3ba11879\":1,\"chunk-4792b7b1\":1,\"chunk-48c79434\":1,\"chunk-598cfd62\":1,\"chunk-5c8329e8\":1,\"chunk-5fda0c1d\":1,\"chunk-70566382\":1,\"chunk-76968ffa\":1,\"chunk-bade27a0\":1,\"chunk-bc3b6bca\":1,\"chunk-ef7b1fa2\":1,\"chunk-f3a67cdc\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-15f16810\":\"a5b34b12\",\"chunk-21538171\":\"a85584f0\",\"chunk-219cc11a\":\"b6595e8e\",\"chunk-25990573\":\"010020c0\",\"chunk-2d0c8407\":\"31d6cfe0\",\"chunk-33193e4a\":\"50866f30\",\"chunk-3ba11879\":\"911807b8\",\"chunk-4792b7b1\":\"2ce46cd1\",\"chunk-48c79434\":\"9c3a68cd\",\"chunk-598cfd62\":\"92a746ee\",\"chunk-5c8329e8\":\"9580c93b\",\"chunk-5fda0c1d\":\"9874d078\",\"chunk-70566382\":\"f3c9fad7\",\"chunk-76968ffa\":\"2a76af22\",\"chunk-bade27a0\":\"b3eadc6c\",\"chunk-bc3b6bca\":\"66563f73\",\"chunk-ef7b1fa2\":\"50866f30\",\"chunk-f3a67cdc\":\"2c47cabc\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/vuemusic/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaInfo.vue?vue&type=style&index=0&id=0dc848f8&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.pushSearchTerm.apply(null, arguments)}}},[_c('v-text-field',{attrs:{\"clearable\":\"\",\"outlined\":\"\",\"label\":\"Search\",\"prepend-inner-icon\":\"mdi-magnify\",\"dense\":\"\"},on:{\"click:clear\":function($event){_vm.$store.state.search.liveTerm=''},\"click\":_vm.goSearch},model:{value:(_vm.$store.state.search.liveTerm),callback:function ($$v) {_vm.$set(_vm.$store.state.search, \"liveTerm\", $$v)},expression:\"$store.state.search.liveTerm\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-form @submit.prevent=\"pushSearchTerm\">\r\n        <v-text-field\r\n                clearable\r\n                v-model=\"$store.state.search.liveTerm\"\r\n                outlined\r\n                label=\"Search\"\r\n                prepend-inner-icon=\"mdi-magnify\"\r\n                dense\r\n                @click:clear=\"$store.state.search.liveTerm=''\"\r\n                @click=\"goSearch\"\r\n        ></v-text-field>\r\n    </v-form>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"SearchInput\",\r\n        methods: {\r\n            async goSearch() {\r\n                if (this.$route.name !== 'Search') {\r\n                    await this.pushSearchTerm();\r\n                }\r\n            },\r\n            async pushSearchTerm() {\r\n                let term = '';\r\n                if (this.term !== null && this.term !== '')\r\n                    term = `?term=${encodeURIComponent(this.term)}`;\r\n                await this.$router.push(`/search${term}`)\r\n            },\r\n        },\r\n        watch: {\r\n            async term() {\r\n                //https://open.spotify.com/track/7AVjkh7mhpeNa3iu3R9oyp?si=BGamcimjRt-WYX5weeaYhw\r\n                if (this.term && this.term.includes('open.spotify.com/')) {\r\n                    let term = this.term.split('spotify.com/')[1].split('?')[0];\r\n                    let [type, id] = term.split('/');\r\n                    await this.$router.push(this.$store.getters.relativeItemUrl({type, id, name: type[0],}));\r\n                    this.$store.dispatch('addSnack', {text: 'Navigated to Spotify™ link'}).then();\r\n                    this.$store.commit('liveTerm', '');\r\n                }\r\n            },\r\n        },\r\n        computed: {\r\n            term() {\r\n                return this.$store.state.search.liveTerm;\r\n            },\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchInput.vue?vue&type=template&id=0795f20a&scoped=true&\"\nimport script from \"./SearchInput.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0795f20a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Logo.vue?vue&type=style&index=0&id=16b6a68a&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.track !== null)?_c('v-sheet',{ref:\"trackRow\",staticClass:\"track-row\",class:_vm.rowClass,attrs:{\"color\":_vm.activeTrack ? 'primary darken-1' : 'transparent',\"dark\":_vm.activeTrack && (!_vm.$vuetify.theme.dark || _vm.$store.state.theme.fgLegible),\"light\":_vm.activeTrack && !(!_vm.$vuetify.theme.dark || _vm.$store.state.theme.fgLegible),\"rounded\":\"\"},on:{\"dblclick\":_vm.play}},[_c('track-item',{ref:\"trackItem\",staticClass:\"track-left\",attrs:{\"context-item\":_vm.contextItem,\"track\":_vm.track,\"album-list\":_vm.albumList}}),(!_vm.albumList)?_c('div',{staticClass:\"track-middle\",attrs:{\"title\":_vm.track.album.name}},[_c('router-link',{staticClass:\"album-link\",attrs:{\"tag\":\"span\",\"to\":_vm.$store.getters.relativeItemUrl(_vm.track.album)}},[_vm._v(\" \"+_vm._s(_vm.track.album.name)+\" \")])],1):_vm._e(),_c('div',{staticClass:\"track-right\"},[_c('div',{staticClass:\"track-duration\"},[_vm._v(_vm._s(_vm.duration))]),_c('item-menu',{attrs:{\"queue-track\":_vm.queueTrack,\"context-item\":_vm.contextItem,\"item\":_vm.track}})],1)],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-sheet :color=\"activeTrack ? 'primary darken-1' : 'transparent'\"\r\n             :dark=\"activeTrack && (!$vuetify.theme.dark || $store.state.theme.fgLegible)\"\r\n             :light=\"activeTrack && !(!$vuetify.theme.dark || $store.state.theme.fgLegible)\"\r\n             rounded\r\n             @dblclick=\"play\"\r\n             ref=\"trackRow\" class=\"track-row\" v-if=\"track !== null\" :class=\"rowClass\">\r\n        <track-item ref=\"trackItem\" :context-item=\"contextItem\" class=\"track-left\" :track=\"track\"\r\n                    :album-list=\"albumList\"></track-item>\r\n        <div class=\"track-middle\" :title=\"track.album.name\" v-if=\"!albumList\">\r\n            <router-link class=\"album-link\" tag=\"span\"\r\n                         :to=\"$store.getters.relativeItemUrl(track.album)\">\r\n                {{track.album.name}}\r\n            </router-link>\r\n        </div>\r\n        <div class=\"track-right\">\r\n            <div class=\"track-duration\">{{duration}}</div>\r\n            <item-menu :queue-track=\"queueTrack\" :context-item=\"contextItem\" :item=\"track\"></item-menu>\r\n        </div>\r\n    </v-sheet>\r\n</template>\r\n\r\n<script>\r\n    import ArtistsSpan from \"./ArtistsSpan\";\r\n    import Utils from \"../js/Utils\";\r\n    import TrackItem from \"./TrackItem\";\r\n    import FollowButton from \"./FollowButton\";\r\n    import ShareMenuItem from \"./ShareMenuItem\";\r\n    import FollowMenuItem from \"./FollowMenuItem\";\r\n    import ItemMenu from \"./ItemMenu\";\r\n\r\n    export default {\r\n        name: \"TrackRow\",\r\n        components: {ItemMenu, FollowMenuItem, ShareMenuItem, FollowButton, TrackItem, ArtistsSpan},\r\n        props: {\r\n            track: {\r\n                type: Object,\r\n                default: null,\r\n            },\r\n            albumList: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            contextItem: {\r\n                type: Object,\r\n                default: null,\r\n                required: true,\r\n            },\r\n            queueTrack: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n        },\r\n        data: () => ({\r\n            rowWidth: 0,\r\n        }),\r\n        mounted() {\r\n            this.windowResize();\r\n            window.addEventListener('resize', this.windowResize);\r\n        },\r\n        beforeDestroy() {\r\n            window.removeEventListener('resize', this.windowResize);\r\n        },\r\n        methods: {\r\n            windowResize() {\r\n                this.rowWidth = this.$refs.trackRow.$el.getBoundingClientRect().width;\r\n            },\r\n            play() {\r\n                this.$refs.trackItem.play();\r\n            },\r\n        },\r\n        computed: {\r\n            rowClass() {\r\n                if (this.rowWidth > 623) {\r\n                    return 'big';\r\n                }\r\n                return 'small';\r\n            },\r\n            duration() {\r\n                return Utils.secondsToHms(this.track.duration_ms / 1000);\r\n            },\r\n            activeTrack() {\r\n                if (!this.$store.getters.isTrackSet)\r\n                    return false;\r\n                return this.$store.state.media.track.id === this.track.id;\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .track-row {\r\n        display: flex;\r\n        padding: 5px;\r\n        font-size: 14px;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n    }\r\n\r\n    .track-left {\r\n        min-width: calc(50% - 47px + 50px);\r\n    }\r\n\r\n    .small .track-left {\r\n        min-width: calc(100% - 94px);\r\n    }\r\n\r\n    .track-middle {\r\n        opacity: 0.7;\r\n        text-overflow: ellipsis;\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n        font-weight: 500;\r\n        padding-left: 10px;\r\n        min-width: calc(50% - 47px - 50px);\r\n    }\r\n\r\n    .small .track-middle {\r\n        display: none;\r\n    }\r\n\r\n    .album-link {\r\n        cursor: pointer;\r\n    }\r\n\r\n    .album-link:hover {\r\n        text-decoration: underline;\r\n    }\r\n\r\n    .track-right {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: flex-end;\r\n        min-width: 94px;\r\n    }\r\n\r\n    .track-duration {\r\n        margin-right: 15px;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackRow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackRow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TrackRow.vue?vue&type=template&id=61538a80&scoped=true&\"\nimport script from \"./TrackRow.vue?vue&type=script&lang=js&\"\nexport * from \"./TrackRow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TrackRow.vue?vue&type=style&index=0&id=61538a80&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61538a80\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isFollowed)?_c('v-list-item',{on:{\"click\":_vm.unfollow}},[_c('v-list-item-icon',[(_vm.loading)?_c('v-progress-circular',{attrs:{\"size\":\"20\",\"indeterminate\":\"\",\"width\":\"1\"}}):_c('v-icon',{attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-heart\")])],1),_c('v-list-item-title',[_vm._v(\"Remove from library\")])],1):_c('v-list-item',{attrs:{\"dense\":\"\"},on:{\"click\":_vm.follow}},[_c('v-list-item-icon',[(_vm.loading)?_c('v-progress-circular',{attrs:{\"size\":\"20\",\"indeterminate\":\"\",\"width\":\"1\"}}):_c('v-icon',[_vm._v(\"mdi-heart-outline\")])],1),_c('v-list-item-title',[_vm._v(\"Add to library\")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-list-item v-if=\"isFollowed\" @click=\"unfollow\">\r\n        <v-list-item-icon>\r\n            <v-progress-circular size=\"20\" indeterminate width=\"1\" v-if=\"loading\"></v-progress-circular>\r\n            <v-icon color=\"primary\" v-else>mdi-heart</v-icon>\r\n        </v-list-item-icon>\r\n        <v-list-item-title>Remove from library</v-list-item-title>\r\n    </v-list-item>\r\n    <v-list-item v-else dense @click=\"follow\">\r\n        <v-list-item-icon>\r\n            <v-progress-circular size=\"20\" indeterminate width=\"1\" v-if=\"loading\"></v-progress-circular>\r\n            <v-icon v-else>mdi-heart-outline</v-icon>\r\n        </v-list-item-icon>\r\n        <v-list-item-title>Add to library</v-list-item-title>\r\n    </v-list-item>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"FollowMenuItem\",\r\n        props: {\r\n            item: {\r\n                type: Object,\r\n                default: null,\r\n            },\r\n        },\r\n        data: () => ({\r\n            loading: false,\r\n        }),\r\n        methods: {\r\n            async follow() {\r\n                this.loading = true;\r\n                await this.$store.dispatch('follow' + this.typeCapitalized, this.item);\r\n                this.loading = false;\r\n            },\r\n            async unfollow() {\r\n                this.loading = true;\r\n                await this.$store.dispatch('unfollow' + this.typeCapitalized, this.item);\r\n                this.loading = false;\r\n            },\r\n        },\r\n        computed: {\r\n            typeCapitalized() {\r\n                return this.item.type.substring(0, 1).toUpperCase() + this.item.type.substring(1);\r\n            },\r\n            isFollowed() {\r\n                return this.$store.getters[`is${this.typeCapitalized}Followed`](this.item);\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FollowMenuItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FollowMenuItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FollowMenuItem.vue?vue&type=template&id=795ad918&scoped=true&\"\nimport script from \"./FollowMenuItem.vue?vue&type=script&lang=js&\"\nexport * from \"./FollowMenuItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"795ad918\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListenNow.vue?vue&type=style&index=0&id=277d7cd1&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.track!==null)?_c('div',{staticClass:\"track-item\"},[_c('div',{staticClass:\"track-content\"},[_c('div',{staticClass:\"left-square\"},[(!_vm.albumList)?_c('div',{staticClass:\"album-art\",style:({backgroundImage: `url(${_vm.$store.getters.itemImage(_vm.track)})`})}):_c('div',{staticClass:\"album-number\"},[_vm._v(_vm._s(_vm.track.track_number))]),(_vm.albumList)?_c('v-card',{staticClass:\"play-button\",style:({opacity: _vm.trackIsLoaded ? '1' : '0'}),attrs:{\"flat\":\"\"}},[(_vm.trackIsPlaying)?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.pause}},[_c('v-icon',[_vm._v(\"mdi-pause\")])],1):_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.play}},[_c('v-icon',[_vm._v(\"mdi-play\")])],1)],1):_c('div',{staticClass:\"play-button art-button\",style:({opacity: _vm.trackIsLoaded ? '1' : '0'})},[(_vm.trackIsPlaying)?_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"white\"},on:{\"click\":_vm.pause}},[_c('v-icon',[_vm._v(\"mdi-pause\")])],1):_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"white\"},on:{\"click\":_vm.play}},[_c('v-icon',[_vm._v(\"mdi-play\")])],1)],1)],1),_c('div',{staticClass:\"track-info\"},[_c('div',{staticClass:\"track-title\",attrs:{\"title\":_vm.track.name}},[_vm._v(\" \"+_vm._s(_vm.track.name)+\" \")]),_c('div',{staticClass:\"track-artist\"},[_c('artists-span',{staticClass:\"artists-span\",attrs:{\"grey\":\"\",\"artists\":_vm.track.artists}})],1)])]),(_vm.menu)?_c('div',{staticClass:\"icons\"},[_c('follow-button',{attrs:{\"item\":_vm.track}}),_c('item-menu',{attrs:{\"context-item\":_vm.contextItem,\"item\":_vm.track}})],1):_vm._e()]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"track-item\" v-if=\"track!==null\">\r\n        <div class=\"track-content\">\r\n            <div class=\"left-square\">\r\n                <div v-if=\"!albumList\" class=\"album-art\"\r\n                     :style=\"{backgroundImage: `url(${$store.getters.itemImage(track)})`}\"></div>\r\n                <div v-else class=\"album-number\">{{track.track_number}}</div>\r\n                <v-card v-if=\"albumList\" class=\"play-button\" flat :style=\"{opacity: trackIsLoaded ? '1' : '0'}\">\r\n                    <v-btn icon @click=\"pause\" v-if=\"trackIsPlaying\">\r\n                        <v-icon>mdi-pause</v-icon>\r\n                    </v-btn>\r\n                    <v-btn icon @click=\"play\" v-else>\r\n                        <v-icon>mdi-play</v-icon>\r\n                    </v-btn>\r\n                </v-card>\r\n                <div v-else class=\"play-button art-button\" :style=\"{opacity: trackIsLoaded ? '1' : '0'}\">\r\n                    <v-btn @click=\"pause\" icon color=\"white\" v-if=\"trackIsPlaying\">\r\n                        <v-icon>mdi-pause</v-icon>\r\n                    </v-btn>\r\n                    <v-btn @click=\"play\" icon color=\"white\" v-else>\r\n                        <v-icon>mdi-play</v-icon>\r\n                    </v-btn>\r\n                </div>\r\n            </div>\r\n            <div class=\"track-info\">\r\n                <div class=\"track-title\" :title=\"track.name\">\r\n                    {{track.name}}\r\n                </div>\r\n                <div class=\"track-artist\">\r\n                    <artists-span grey class=\"artists-span\" :artists=\"track.artists\"></artists-span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"icons\" v-if=\"menu\">\r\n            <follow-button :item=\"track\"></follow-button>\r\n            <item-menu :context-item=\"contextItem\" :item=\"track\"></item-menu>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import ArtistsSpan from \"./ArtistsSpan\";\r\n    import ShareMenuItem from \"./ShareMenuItem\";\r\n    import FollowMenuItem from \"./FollowMenuItem\";\r\n    import FollowButton from \"./FollowButton\";\r\n    import ItemMenu from \"./ItemMenu\";\r\n\r\n    export default {\r\n        name: \"TrackItem\",\r\n        components: {ItemMenu, FollowButton, FollowMenuItem, ShareMenuItem, ArtistsSpan},\r\n        props: {\r\n            track: {\r\n                type: Object,\r\n                default: null,\r\n            },\r\n            albumList: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            menu: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            contextItem: {\r\n                type: Object,\r\n                default: null,\r\n            },\r\n        },\r\n        methods: {\r\n            async play() {\r\n                if (this.trackIsLoaded) {\r\n                    return this.$store.dispatch('play');\r\n                }\r\n\r\n                console.log('contextitem', this.contextItem);\r\n                this.$store.commit('playAfterLoad', true);\r\n                this.$store.commit('track', {\r\n                    track: this.track,\r\n                    contextItem: this.contextItem\r\n                });\r\n            },\r\n            async pause() {\r\n                await this.$store.dispatch('pause');\r\n            },\r\n        },\r\n        computed: {\r\n            trackIsLoaded() {\r\n                if (!this.$store.getters.isTrackSet)\r\n                    return false;\r\n                return this.$store.state.media.track.id === this.track.id;\r\n            },\r\n            trackIsPlaying() {\r\n                return this.trackIsLoaded && this.$store.state.media.playing;\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .track-item {\r\n        display: flex;\r\n        justify-content: space-between;\r\n    }\r\n\r\n    .track-content {\r\n        display: flex;\r\n        flex-grow: 10;\r\n        align-items: center;\r\n        width: 100%;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .left-square {\r\n        min-width: 40px;\r\n        height: 40px;\r\n        border-radius: 5px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n    }\r\n\r\n    .album-art {\r\n        min-height: 40px;\r\n        min-width: 40px;\r\n        background-size: cover;\r\n        background-position: center;\r\n        background-repeat: no-repeat;\r\n        border-radius: 5px;\r\n        pointer-events: none;\r\n        transition: opacity 0.2s;\r\n    }\r\n\r\n    .album-number {\r\n        height: 40px;\r\n        text-align: center;\r\n        line-height: 40px;\r\n        vertical-align: center;\r\n        font-weight: bold;\r\n        font-size: 14px;\r\n        opacity: 0.5;\r\n        pointer-events: none;\r\n        transition: opacity 0.2s;\r\n    }\r\n\r\n    .play-button:hover {\r\n        opacity: 1 !important;\r\n    }\r\n\r\n    .play-button {\r\n        border-radius: 5px;\r\n        min-width: 40px;\r\n        min-height: 40px;\r\n        position: relative;\r\n        top: -40px;\r\n        transition: opacity 0.2s;\r\n        opacity: 0;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n\r\n    .art-button {\r\n        background-color: rgba(0, 0, 0, 0.3);\r\n    }\r\n\r\n    .track-info {\r\n        margin-left: 15px;\r\n        line-height: 17px;\r\n        width: 100%;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .track-title {\r\n        font-weight: 400;\r\n        text-overflow: ellipsis;\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n        width: 100%;\r\n    }\r\n\r\n    .icons {\r\n        display: inline-flex;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TrackItem.vue?vue&type=template&id=4eda178f&scoped=true&\"\nimport script from \"./TrackItem.vue?vue&type=script&lang=js&\"\nexport * from \"./TrackItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TrackItem.vue?vue&type=style&index=0&id=4eda178f&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4eda178f\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavContent.vue?vue&type=style&index=0&id=ccbadd1e&prod&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemSquare.vue?vue&type=style&index=0&id=3a24db36&prod&scoped=true&lang=css&\"","import EventEmitter from \"events\";\r\nimport ytdl from 'ytdl-core';\r\nimport search from \"youtube-search\";\r\n\r\nexport default class MusicDownloader extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n\r\n        this.apiKey = null;\r\n        this.searchCache = localStorage.getItem('searchCache') === null ?\r\n            {cacheAge: +new Date()} : JSON.parse(localStorage.searchCache);\r\n    }\r\n\r\n    waitForApiKey() {\r\n        return new Promise(resolve => {\r\n            if (this.apiKey !== null)\r\n                return resolve();\r\n            let interval;\r\n            interval = setInterval(() => {\r\n                if (this.apiKey !== null) {\r\n                    clearInterval(interval);\r\n                    resolve();\r\n                }\r\n            }, 100);\r\n        })\r\n    }\r\n\r\n    getSearchString(track) {\r\n        return `${track.name} - ${track.artists.map(a => a.name).join(', ')}`;\r\n    }\r\n\r\n    async cachedSearch(term, maxResults = 3) {\r\n        let cacheKey = term + '|' + maxResults.toString();\r\n        if (this.searchCache[cacheKey])\r\n            return this.searchCache[cacheKey];\r\n\r\n        if (this.apiKey === null)\r\n            await this.waitForApiKey();\r\n\r\n        let {results} = await search(term, {maxResults, key: this.apiKey});\r\n        this.searchCache[cacheKey] = results;\r\n        localStorage.searchCache = JSON.stringify(this.searchCache);\r\n        return results;\r\n    }\r\n\r\n    async getYtdlInfo(id) {\r\n        return await ytdl.getInfo(id, {\r\n            quality: 'highestaudio',\r\n            filter: 'audioonly',\r\n        });\r\n    }\r\n\r\n    async* getTrackUrls(track) {\r\n        let offlineUrl = await this.isTrackOffline(track);\r\n        if (offlineUrl)\r\n            yield {local: true, url: offlineUrl};\r\n        let searchTerm = this.getSearchString(track);\r\n        let results = await this.cachedSearch(searchTerm);\r\n        let ids = results.map(r => r.id);\r\n\r\n        for (let id of ids) {\r\n            let result = await this.getYtdlInfo(id);\r\n            let formats = result.formats;\r\n            let qualities = [\"AUDIO_QUALITY_LOW\", \"AUDIO_QUALITY_MEDIUM\", \"AUDIO_QUALITY_HIGH\"];\r\n            formats = formats\r\n                .sort((a, b) => b.averageBitrate - a.averageBitrate)\r\n                .sort((a, b) => b.audioBitrate - a.audioBitrate)\r\n                .sort((a, b) => b.mimeType.startsWith('audio') - a.mimeType.startsWith('audio'))\r\n                .sort((a, b) => qualities.indexOf(b.audioQuality) - qualities.indexOf(a.audioQuality))\r\n            for (let format of formats.slice(0, 2)) {\r\n                yield {local: false, url: format.url};\r\n            }\r\n        }\r\n    }\r\n\r\n    async isTrackOffline(track) {\r\n        throw \"Not implemented\";\r\n    }\r\n\r\n    async removeCached(track) {\r\n        throw \"Not implemented\";\r\n    }\r\n\r\n    async downloadTrack(url, track, progress = () => 0, abortSignal = null) {\r\n        throw \"Not implemented\";\r\n    }\r\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueueList.vue?vue&type=style&index=0&id=262b5931&prod&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemMenu.vue?vue&type=style&index=0&id=3616c00e&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-app',{staticClass:\"app\"},[(_vm.$store.state.windowWidth > 680)?_c('v-navigation-drawer',{staticClass:\"navBar\",attrs:{\"color\":\"navBackground\",\"permanent\":true,\"app\":\"\",\"absolute\":\"\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('nav-content')],1):_vm._e(),_c('v-app-bar',{staticClass:\"toolbar\",attrs:{\"app\":\"\",\"elevation\":\"1\"}},[_c('tool-bar',{staticClass:\"toolbar-content\",attrs:{\"compact\":_vm.$store.state.windowWidth <= 1000,\"mobile\":_vm.$store.state.windowWidth <= 680}})],1),_c('v-main',[_c('div',{staticClass:\"perfect-scroller\"},[_c('router-view',{staticClass:\"router-view\"})],1)]),_vm._l((_vm.$store.state.snackbars),function(snack){return _c('v-snackbar',{attrs:{\"app\":\"\",\"timeout\":snack.timeout,\"outlined\":!_vm.$vuetify.theme.dark,\"color\":\"primary\"},scopedSlots:_vm._u([{key:\"action\",fn:function({ attrs }){return [_c('v-btn',_vm._b({attrs:{\"text\":\"\",\"color\":_vm.$vuetify.theme.dark ? 'default' : 'primary'},on:{\"click\":function($event){snack.open = false}}},'v-btn',attrs,false),[_vm._v(\" Dismiss \")])]}}],null,true),model:{value:(snack.open),callback:function ($$v) {_vm.$set(snack, \"open\", $$v)},expression:\"snack.open\"}},[_vm._v(\" \"+_vm._s(snack.text)+\" \")])}),(_vm.$store.state.windowWidth <= 1000 && _vm.$store.getters.isTrackSet)?_c('v-card',{staticClass:\"bottom-media-control\",class:{'medium-width': _vm.$store.state.windowWidth <= 1000},attrs:{\"flat\":\"\",\"color\":\"primaryLight\"}},[_c('div',{staticClass:\"info-pane\"},[_c('media-info',{staticClass:\"media-info\"}),_c('follow-button',{staticClass:\"button\",attrs:{\"item\":_vm.$store.state.media.track}}),_c('queue-button',{staticClass:\"button\"})],1),(_vm.$route.name !== 'NowPlaying')?_c('div',{staticClass:\"full-controls\"},[_c('media-controls',{attrs:{\"full\":_vm.$store.state.windowWidth > 430}}),_c('media-seek',{staticClass:\"seeker\"})],1):_vm._e()]):_vm._e(),(_vm.$store.state.windowWidth <= 680)?_c('v-bottom-navigation',{attrs:{\"color\":\"primary\",\"grow\":\"\",\"shift\":_vm.$store.state.windowWidth <= 430,\"app\":\"\"}},[_c('v-btn',{attrs:{\"value\":\"now\",\"to\":\"/\",\"exact\":\"\"}},[_c('span',[_vm._v(\"Listen Now\")]),_c('v-icon',[_vm._v(\"mdi-play-circle-outline\")])],1),_c('v-btn',{attrs:{\"value\":\"browse\",\"to\":\"/browse\",\"exact\":\"\"}},[_c('span',[_vm._v(\"Browse\")]),_c('v-icon',[_vm._v(\"mdi-grid-large\")])],1),_c('v-btn',{attrs:{\"value\":\"library\",\"to\":\"/library\"}},[_c('span',[_vm._v(\"Library\")]),_c('v-icon',[_vm._v(\"mdi-record-circle-outline\")])],1),_c('v-btn',{attrs:{\"value\":\"search\",\"to\":\"/search\"}},[_c('span',[_vm._v(\"Search\")]),_c('v-icon',[_vm._v(\"mdi-magnify\")])],1)],1):_vm._e(),_c('music-player')],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"toolbar\"},[(_vm.mobile)?_c('logo',{staticClass:\"logo\"}):_vm._e(),(!_vm.mobile && !_vm.compact)?_c('media-controls',{staticClass:\"controls\",attrs:{\"full\":\"\"}}):_vm._e(),((!_vm.compact && !_vm.mobile) && _vm.$store.getters.isTrackSet)?_c('div',{staticClass:\"media-container\"},[_c('div',{staticClass:\"media-info\"},[_c('media-seek',{staticClass:\"top-seeker\",attrs:{\"no-background\":\"\",\"small-time\":\"\"}}),_c('media-info',{staticClass:\"top-info\",attrs:{\"small-artists\":\"\",\"drag\":\"\"}})],1),_c('follow-button',{staticClass:\"favorite-button\",attrs:{\"hide-tooltip\":\"\",\"item\":_vm.$store.state.media.track}}),_c('queue-button',{staticClass:\"queue-button\"})],1):_vm._e(),(!_vm.mobile)?_c('div',{staticClass:\"volume\"},[_c('v-slider',{ref:\"volume\",attrs:{\"min\":0,\"max\":1,\"step\":0.01,\"prepend-icon\":_vm.volumeIcon},on:{\"click:prepend\":_vm.toggleMute},model:{value:(_vm.volume),callback:function ($$v) {_vm.volume=$$v},expression:\"volume\"}})],1):_vm._e(),_c('div',{staticClass:\"buttons\"},[_c('v-menu',{attrs:{\"offset-y\":\"\",\"close-on-content-click\":true},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({attrs:{\"color\":\"primary\",\"icon\":\"\"}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-account-circle\")])],1)]}}])},[_c('v-list',[(_vm.$store.getters.isLoggedIn)?_c('v-list-item',{attrs:{\"two-line\":\"\"}},[_c('router-link',{staticClass:\"list-link\",attrs:{\"tag\":\"div\",\"to\":`/user/${_vm.$store.getters.urlName(_vm.$store.state.userInfo.name)}/${_vm.$store.state.userInfo.id}`}},[_c('v-list-item-avatar',[_c('img',{attrs:{\"src\":_vm.$store.state.userInfo.avatar,\"alt\":\"User Avatar\"}})]),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(_vm.$store.state.userInfo.name))]),_c('v-list-item-subtitle',[_vm._v(_vm._s(_vm.$store.state.userInfo.mail))])],1)],1)],1):_vm._e(),_c('v-list-item',{attrs:{\"to\":\"/downloads\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-download\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Downloads\")])],1)],1),_c('v-list-item',{attrs:{\"to\":\"/settings\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-cog-outline\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Settings\")])],1)],1),(_vm.$store.getters.isLoggedIn)?_c('v-list-item',{attrs:{\"color\":\"primary\"},on:{\"click\":function($event){return _vm.$store.dispatch('spotifyLogout')}}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-logout\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Logout\")])],1)],1):(_vm.$store.getters.isKeySet)?_c('v-list-item',{attrs:{\"color\":\"primary\"},on:{\"click\":function($event){return _vm.$store.dispatch('spotifyLogin')}}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-login\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Login\")])],1)],1):_vm._e(),_c('v-list-item',{attrs:{\"color\":\"primary\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-brightness-6\")])],1),_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"theme-switch\"},[_c('span',[_vm._v(\"Dark theme\")])])],1),_c('v-list-item-action',[_c('v-switch',{attrs:{\"dense\":\"\",\"inset\":\"\"},model:{value:(_vm.$vuetify.theme.dark),callback:function ($$v) {_vm.$set(_vm.$vuetify.theme, \"dark\", $$v)},expression:\"$vuetify.theme.dark\"}})],1)],1)],1)],1),(_vm.$store.state.platform.type==='electron')?_c('v-btn',{staticClass:\"minimize-button\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.$store.dispatch('minimizeWindow')}}},[_c('v-icon',[_vm._v(\"mdi-minus\")])],1):_vm._e(),(_vm.$store.state.platform.type==='electron')?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.$store.dispatch('closeWindow')}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.$store.state.media.track)?_c('div',{staticClass:\"media-info\"},[_c('v-card',{staticClass:\"media-card\",attrs:{\"outlined\":\"\"}},[_c('div',{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],staticClass:\"media-album\",style:({\n                        backgroundImage: `url(${_vm.$store.getters.itemImage(_vm.$store.state.media.track)})`,\n                     }),on:{\"click\":function($event){return _vm.$router.push('/nowplaying')}}}),_c('div',{staticClass:\"white-part\"},[_c('div',{staticClass:\"media-text-info\"},[_c('div',{staticClass:\"media-title-artists\"},[_c('span',{staticClass:\"track-title\",attrs:{\"title\":_vm.$store.state.media.track.name}},[_vm._v(\" \"+_vm._s(_vm.$store.state.media.track.name)+\" \")]),_c('artists-span',{staticClass:\"track-artists\",style:({maxWidth: _vm.smallArtists?`calc(100% - 56px)`:''}),attrs:{\"grey\":\"\",\"artists\":_vm.$store.state.media.track.artists}})],1)]),_c('div',{staticClass:\"local-icon\"},[(_vm.$store.state.media.local)?_c('v-icon',{attrs:{\"small\":_vm.$store.state.windowWidth >= 1000}},[_vm._v(\" mdi-cloud-download-outline \")]):_c('v-icon',{attrs:{\"small\":_vm.$store.state.windowWidth >= 1000}},[_vm._v(\"mdi-radio-tower\")])],1)])])],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"media-info\" v-if=\"$store.state.media.track\">\r\n        <v-card outlined class=\"media-card\">\r\n            <div class=\"media-album\"\r\n                 @click=\"$router.push('/nowplaying')\"\r\n                 v-ripple\r\n                 :style=\"{\r\n                            backgroundImage: `url(${$store.getters.itemImage($store.state.media.track)})`,\r\n                         }\"/>\r\n            <div class=\"white-part\">\r\n                <div class=\"media-text-info\">\r\n                    <div class=\"media-title-artists\">\r\n                        <span :title=\"$store.state.media.track.name\"\r\n                              class=\"track-title\">\r\n                            {{$store.state.media.track.name}}\r\n                        </span>\r\n                        <artists-span :style=\"{maxWidth: smallArtists?`calc(100% - 56px)`:''}\"\r\n                                      grey class=\"track-artists\"\r\n                                      :artists=\"$store.state.media.track.artists\"></artists-span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"local-icon\">\r\n                    <v-icon :small=\"$store.state.windowWidth >= 1000\" v-if=\"$store.state.media.local\">\r\n                        mdi-cloud-download-outline\r\n                    </v-icon>\r\n                    <v-icon :small=\"$store.state.windowWidth >= 1000\" v-else>mdi-radio-tower</v-icon>\r\n                </div>\r\n            </div>\r\n        </v-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import MediaControls from \"./MediaControls\";\r\n    import ArtistsSpan from \"./ArtistsSpan\";\r\n\r\n    export default {\r\n        name: \"MediaInfo\",\r\n        components: {ArtistsSpan, MediaControls},\r\n        props: {\r\n            drag: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            smallArtists: {\r\n                type: Boolean,\r\n                default: false,\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .media-info {\r\n        width: 100%;\r\n        display: inline-flex;\r\n        min-width: 100px;\r\n    }\r\n\r\n    .media-card {\r\n        display: flex;\r\n        width: 100%;\r\n        min-width: 100px;\r\n    }\r\n\r\n    .white-part {\r\n        display: flex;\r\n        height: 50px;\r\n        width: calc(100% - 50px);\r\n        min-width: 100px;\r\n    }\r\n\r\n    .media-album {\r\n        cursor: pointer;\r\n        border-top-left-radius: 2px;\r\n        border-bottom-left-radius: 2px;\r\n        border-top-right-radius: 0 !important;\r\n        border-bottom-right-radius: 0 !important;\r\n        min-width: 50px;\r\n        height: 50px;\r\n        width: 50px;\r\n        background-repeat: no-repeat;\r\n        background-size: cover;\r\n        background-position: center;\r\n    }\r\n\r\n    .media-text-info {\r\n        width: calc(100% - 24px);\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: flex-start;\r\n    }\r\n\r\n    @media (max-width: 1000px) {\r\n        .media-text-info {\r\n            width: calc(100% - 36px);\r\n        }\r\n\r\n        .local-icon {\r\n            width: 36px !important;\r\n            padding-top: 12px !important;\r\n            opacity: 0.8 !important;\r\n        }\r\n    }\r\n\r\n    .media-info-logo {\r\n        height: 20px;\r\n        opacity: 0.5;\r\n    }\r\n\r\n    .media-title-artists {\r\n        width: 100%;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        height: calc(100% - 10px);\r\n        margin-top: 3px;\r\n        font-size: 13px;\r\n        min-width: 100px;\r\n        max-width: 100%;\r\n    }\r\n\r\n    .track-title {\r\n        margin-bottom: -4px;\r\n        font-weight: bold;\r\n        max-width: calc(100% - 25px);\r\n        overflow-x: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n    }\r\n\r\n    .media-info >>> a {\r\n        text-decoration: none;\r\n    }\r\n\r\n    .media-info >>> a:hover {\r\n        text-decoration: underline;\r\n    }\r\n\r\n    .local-icon {\r\n        width: 24px;\r\n        height: 100%;\r\n        padding-top: 10px;\r\n        display: flex;\r\n        justify-content: flex-start;\r\n        align-items: flex-start;\r\n        opacity: 0.6;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MediaInfo.vue?vue&type=template&id=0dc848f8&scoped=true&\"\nimport script from \"./MediaInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./MediaInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MediaInfo.vue?vue&type=style&index=0&id=0dc848f8&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0dc848f8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"logo\"},[_c('img',{staticClass:\"logo-image\",attrs:{\"src\":_vm.$vuetify.theme.dark ? 'img/full-white-medium.png':'img/full-black-medium.png',\"alt\":\"logo image\"}}),_c('span',[_vm._v(\" Vue Music \")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"logo\">\r\n        <img class=\"logo-image\"\r\n             :src=\"$vuetify.theme.dark ? 'img/full-white-medium.png':'img/full-black-medium.png' \"\r\n             alt=\"logo image\"/>\r\n        <span>\r\n                    Vue Music\r\n                </span>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"Logo\"\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .logo {\r\n        margin-top: 2px;\r\n        margin-left: 2px;\r\n        padding: 15px;\r\n        font-weight: bold;\r\n        display: flex;\r\n        justify-content: center;\r\n        -webkit-app-region: drag;\r\n    }\r\n\r\n    .logo-image {\r\n        height: 20px;\r\n        margin-right: 10px;\r\n        pointer-events: none;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Logo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Logo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Logo.vue?vue&type=template&id=16b6a68a&scoped=true&\"\nimport script from \"./Logo.vue?vue&type=script&lang=js&\"\nexport * from \"./Logo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Logo.vue?vue&type=style&index=0&id=16b6a68a&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16b6a68a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.$store.getters.isTrackSet)?_c('div',{staticClass:\"queue-button\"},[_c('v-menu',{attrs:{\"offset-y\":\"\",\"close-on-content-click\":false,\"close-on-click\":true},on:{\"input\":_vm.scrollToItem},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({attrs:{\"icon\":\"\"}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-playlist-play\")])],1)]}}],null,false,2887210282)},[_c('queue-list',{ref:\"list\",staticClass:\"track-list\"})],1)],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"queue-button\" v-if=\"$store.getters.isTrackSet\">\r\n        <v-menu @input=\"scrollToItem\" offset-y :close-on-content-click=\"false\" :close-on-click=\"true\">\r\n            <template v-slot:activator=\"{ on, attrs }\">\r\n                <v-btn icon v-bind=\"attrs\" v-on=\"on\">\r\n                    <v-icon>mdi-playlist-play</v-icon>\r\n                </v-btn>\r\n            </template>\r\n            <queue-list class=\"track-list\" ref=\"list\"></queue-list>\r\n        </v-menu>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import TrackRow from \"./TrackRow\";\r\n    import QueueList from \"./QueueList\";\r\n\r\n    export default {\r\n        name: \"QueueButton\",\r\n        components: {QueueList, TrackRow},\r\n        data: () => ({\r\n            intervals: [],\r\n        }),\r\n        beforeDestroy() {\r\n            this.clearIntervals();\r\n        },\r\n        methods: {\r\n            clearIntervals() {\r\n                let intervals = this.intervals;\r\n                this.intervals = [];\r\n                for (let i of intervals)\r\n                    clearInterval(i);\r\n            },\r\n            scrollToItem() {\r\n                this.intervals.push(setInterval(() => {\r\n                    if (this.$refs.list) {\r\n                        this.$refs.list.scrollToItem();\r\n                        this.clearIntervals();\r\n                    }\r\n                }, 50));\r\n            },\r\n        },\r\n        computed: {},\r\n        watch: {},\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .track-list {\r\n        max-height: calc(100vh - 150px);\r\n        max-width: 100%;\r\n        width: 420px;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueueButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueueButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./QueueButton.vue?vue&type=template&id=59edc3a6&scoped=true&\"\nimport script from \"./QueueButton.vue?vue&type=script&lang=js&\"\nexport * from \"./QueueButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./QueueButton.vue?vue&type=style&index=0&id=59edc3a6&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"59edc3a6\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"toolbar\">\r\n        <logo class=\"logo\" v-if=\"mobile\"></logo>\r\n        <media-controls full class=\"controls\" v-if=\"!mobile && !compact\"></media-controls>\r\n        <div class=\"media-container\" v-if=\"(!compact && !mobile) && $store.getters.isTrackSet\">\r\n            <div class=\"media-info\">\r\n                <media-seek class=\"top-seeker\" no-background small-time></media-seek>\r\n                <media-info small-artists drag class=\"top-info\"></media-info>\r\n            </div>\r\n            <follow-button class=\"favorite-button\" hide-tooltip :item=\"$store.state.media.track\"></follow-button>\r\n            <queue-button class=\"queue-button\"></queue-button>\r\n        </div>\r\n        <div class=\"volume\" v-if=\"!mobile\">\r\n            <v-slider\r\n                    ref=\"volume\"\r\n                    :min=\"0\"\r\n                    :max=\"1\"\r\n                    :step=\"0.01\"\r\n                    v-model=\"volume\"\r\n                    :prepend-icon=\"volumeIcon\"\r\n                    @click:prepend=\"toggleMute\"\r\n            ></v-slider>\r\n        </div>\r\n        <div class=\"buttons\">\r\n            <v-menu offset-y :close-on-content-click=\"true\">\r\n                <template v-slot:activator=\"{ on, attrs }\">\r\n                    <v-btn\r\n                            color=\"primary\"\r\n                            icon\r\n                            v-bind=\"attrs\"\r\n                            v-on=\"on\">\r\n                        <v-icon>mdi-account-circle</v-icon>\r\n                    </v-btn>\r\n                </template>\r\n                <v-list>\r\n                    <v-list-item two-line\r\n                                 v-if=\"$store.getters.isLoggedIn\">\r\n                        <router-link class=\"list-link\"\r\n                                     tag=\"div\"\r\n                                     :to=\"`/user/${$store.getters.urlName($store.state.userInfo.name)}/${$store.state.userInfo.id}`\">\r\n                            <v-list-item-avatar>\r\n                                <img :src=\"$store.state.userInfo.avatar\" alt=\"User Avatar\">\r\n                            </v-list-item-avatar>\r\n                            <v-list-item-content>\r\n                                <v-list-item-title>{{$store.state.userInfo.name}}</v-list-item-title>\r\n                                <v-list-item-subtitle>{{$store.state.userInfo.mail}}</v-list-item-subtitle>\r\n                            </v-list-item-content>\r\n                        </router-link>\r\n                    </v-list-item>\r\n\r\n                    <v-list-item to=\"/downloads\">\r\n                        <v-list-item-icon>\r\n                            <v-icon>mdi-download</v-icon>\r\n                        </v-list-item-icon>\r\n                        <v-list-item-content>\r\n                            <v-list-item-title>Downloads</v-list-item-title>\r\n                        </v-list-item-content>\r\n                    </v-list-item>\r\n\r\n                    <v-list-item to=\"/settings\">\r\n                        <v-list-item-icon>\r\n                            <v-icon>mdi-cog-outline</v-icon>\r\n                        </v-list-item-icon>\r\n                        <v-list-item-content>\r\n                            <v-list-item-title>Settings</v-list-item-title>\r\n                        </v-list-item-content>\r\n                    </v-list-item>\r\n\r\n                    <v-list-item @click=\"$store.dispatch('spotifyLogout')\" color=\"primary\"\r\n                                 v-if=\"$store.getters.isLoggedIn\">\r\n                        <v-list-item-icon>\r\n                            <v-icon>mdi-logout</v-icon>\r\n                        </v-list-item-icon>\r\n                        <v-list-item-content>\r\n                            <v-list-item-title>Logout</v-list-item-title>\r\n                        </v-list-item-content>\r\n                    </v-list-item>\r\n                    <v-list-item @click=\"$store.dispatch('spotifyLogin')\" color=\"primary\"\r\n                                 v-else-if=\"$store.getters.isKeySet\">\r\n                        <v-list-item-icon>\r\n                            <v-icon>mdi-login</v-icon>\r\n                        </v-list-item-icon>\r\n                        <v-list-item-content>\r\n                            <v-list-item-title>Login</v-list-item-title>\r\n                        </v-list-item-content>\r\n                    </v-list-item>\r\n\r\n                    <v-list-item color=\"primary\">\r\n                        <v-list-item-icon>\r\n                            <v-icon>mdi-brightness-6</v-icon>\r\n                        </v-list-item-icon>\r\n                        <v-list-item-content>\r\n                            <v-list-item-title class=\"theme-switch\">\r\n                                <span>Dark theme</span>\r\n                            </v-list-item-title>\r\n                        </v-list-item-content>\r\n                        <v-list-item-action>\r\n                            <v-switch dense inset v-model=\"$vuetify.theme.dark\"></v-switch>\r\n                        </v-list-item-action>\r\n                    </v-list-item>\r\n                </v-list>\r\n            </v-menu>\r\n\r\n            <v-btn v-if=\"$store.state.platform.type==='electron'\" icon\r\n                   class=\"minimize-button\"\r\n                   @click=\"$store.dispatch('minimizeWindow')\">\r\n                <v-icon>mdi-minus</v-icon>\r\n            </v-btn>\r\n            <v-btn v-if=\"$store.state.platform.type==='electron'\" icon @click=\"$store.dispatch('closeWindow')\">\r\n                <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import MediaInfo from \"./MediaInfo\";\r\n    import MediaControls from \"./MediaControls\";\r\n    import MediaSeek from \"./MediaSeek\";\r\n    import Logo from \"./Logo\";\r\n    import FollowButton from \"./FollowButton\";\r\n    import QueueButton from \"./QueueButton\";\r\n\r\n    export default {\r\n        name: \"ToolBar\",\r\n        components: {QueueButton, FollowButton, Logo, MediaSeek, MediaControls, MediaInfo},\r\n        data: () => ({\r\n            volume: 1,\r\n            prevVolume: 1,\r\n        }),\r\n        props: {\r\n            mobile: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            compact: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n        },\r\n        mounted() {\r\n            this.mountVolumeListener();\r\n            this.volume = this.$store.state.media.volume ** 0.5;\r\n        },\r\n        beforeDestroy() {\r\n            this.removeVolumeListener();\r\n        },\r\n        methods: {\r\n            mountVolumeListener() {\r\n                if (this.$refs.volume)\r\n                    this.$refs.volume.$el.addEventListener('wheel', this.volumeScroll, true);\r\n            },\r\n            removeVolumeListener() {\r\n                if (this.$refs.volume)\r\n                    this.$refs.volume.$el.removeEventListener('wheel', this.volumeScroll);\r\n            },\r\n            toggleMute() {\r\n                if (this.volume > 0) {\r\n                    this.prevVolume = this.volume;\r\n                    this.volume = 0;\r\n                } else {\r\n                    this.volume = this.prevVolume;\r\n                }\r\n            },\r\n            volumeScroll(e) {\r\n                let changeAmount = e.deltaY * -0.00025;\r\n                this.volume = Math.min(1, Math.max(0, this.volume + changeAmount));\r\n            },\r\n        },\r\n        watch: {\r\n            '$vuetify.theme.dark'() {\r\n                localStorage.darkTheme = this.$vuetify.theme.dark;\r\n            },\r\n            '$store.state.media.volume'() {\r\n                this.volume = this.$store.state.media.volume ** 0.5;\r\n            },\r\n            mobile() {\r\n                if (!this.mobile) {\r\n                    setTimeout(() => {\r\n                        this.mountVolumeListener();\r\n                    }, 100);\r\n                } else {\r\n                    this.removeVolumeListener();\r\n                }\r\n            },\r\n            volume() {\r\n                this.$store.commit('volume', this.volume ** 2);\r\n            },\r\n        },\r\n        computed: {\r\n            volumeIcon() {\r\n                if (this.volume === 0) {\r\n                    return 'mdi-volume-mute';\r\n                } else if (this.volume < 0.5) {\r\n                    return 'mdi-volume-medium';\r\n                } else {\r\n                    return 'mdi-volume-high';\r\n                }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .toolbar {\r\n        -webkit-app-region: drag;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        width: calc(100% + 32px);\r\n        height: calc(100% + 2px);\r\n        margin: -2px -16px;\r\n        align-items: center;\r\n    }\r\n\r\n    .controls {\r\n        -webkit-app-region: no-drag;\r\n        margin-left: 5px;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        margin-right: 10px;\r\n    }\r\n\r\n    .controls > * {\r\n        -webkit-app-region: no-drag;\r\n    }\r\n\r\n    .media-container {\r\n        display: flex;\r\n        max-width: 550px;\r\n        flex: 1 0 0;\r\n        align-items: center;\r\n        min-width: 100px;\r\n    }\r\n\r\n    .media-info {\r\n        -webkit-app-region: no-drag;\r\n        width: 100%;\r\n        min-width: 100px;\r\n        margin-bottom: -5px;\r\n    }\r\n\r\n    .top-seeker {\r\n        width: calc(100% - 51px);\r\n        margin-left: 51px;\r\n        position: relative;\r\n        top: 40px;\r\n        z-index: 5;\r\n    }\r\n\r\n    .top-info {\r\n        margin-top: -20px;\r\n    }\r\n\r\n    .volume {\r\n        -webkit-app-region: no-drag;\r\n        max-width: 110px;\r\n        height: 32px;\r\n        flex-grow: 1;\r\n        margin-left: 10px;\r\n    }\r\n\r\n    .buttons {\r\n        margin: 0 5px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n\r\n    .buttons > * {\r\n        -webkit-app-region: no-drag;\r\n    }\r\n\r\n    .favorite-button {\r\n        -webkit-app-region: no-drag;\r\n        margin: 0 5px;\r\n    }\r\n\r\n    .queue-button {\r\n        -webkit-app-region: no-drag;\r\n    }\r\n\r\n    .list-link {\r\n        display: inline-flex;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .theme-switch {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n    }\r\n\r\n    @media (max-width: 800px) {\r\n        .favorite-button {\r\n            display: none;\r\n        }\r\n\r\n        .minimize-button {\r\n            display: none;\r\n        }\r\n    }\r\n\r\n    @media (max-width: 710px) {\r\n        .queue-button {\r\n            display: none;\r\n        }\r\n    }\r\n\r\n    @media (max-width: 680px) {\r\n        .minimize-button {\r\n            display: inline-flex !important;\r\n        }\r\n    }\r\n\r\n    @media (max-width: 352px) {\r\n        .logo {\r\n            width: 0;\r\n            overflow: hidden;\r\n            padding: 0;\r\n        }\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ToolBar.vue?vue&type=template&id=3401c773&scoped=true&\"\nimport script from \"./ToolBar.vue?vue&type=script&lang=js&\"\nexport * from \"./ToolBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ToolBar.vue?vue&type=style&index=0&id=3401c773&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3401c773\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('perfect-scrollbar',{staticClass:\"nav-bar\"},[_c('div',{staticClass:\"nav-top\"},[_c('logo'),_c('search-input',{staticClass:\"search-input\"})],1),_c('v-list',{staticClass:\"py-0\",attrs:{\"dense\":\"\",\"nav\":\"\"}},[_c('v-list-item',{attrs:{\"to\":\"/\",\"exact\":\"\"}},[_c('v-list-item-icon',[_c('v-icon',{attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-play-circle-outline\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Listen Now\")])],1)],1),_c('v-list-item',{attrs:{\"to\":\"/browse\",\"exact\":\"\"}},[_c('v-list-item-icon',[_c('v-icon',{attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-grid-large\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Browse\")])],1)],1),_c('v-subheader',[_vm._v(\"Library\")]),_c('v-list-item',{attrs:{\"to\":\"/library/artists\"}},[_c('v-list-item-icon',[_c('v-icon',{attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-microphone-variant\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Artists\")])],1)],1),_c('v-list-item',{attrs:{\"to\":\"/library/albums\"}},[_c('v-list-item-icon',[_c('v-icon',{attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-record-circle-outline\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Albums\")])],1)],1),_c('v-list-item',{attrs:{\"to\":\"/library/tracks\"}},[_c('v-list-item-icon',[_c('v-icon',{attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-music-note\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Tracks\")])],1)],1),_c('div',{staticClass:\"playlist-header\"},[(_vm.$store.state.library.playlists.length > 0)?_c('v-subheader',[_vm._v(\"Playlists\")]):_c('v-subheader',[_vm._v(\"Create playlist\")]),(!_vm.showPlaylistInput)?_c('v-btn',{staticClass:\"add-playlist\",attrs:{\"icon\":\"\",\"small\":\"\",\"title\":\"Create new playlist\"},on:{\"click\":function($event){_vm.showPlaylistInput=true}}},[_c('v-icon',{attrs:{\"x-small\":\"\"}},[_vm._v(\"mdi-plus\")])],1):_c('v-btn',{attrs:{\"small\":\"\",\"text\":\"\"},on:{\"click\":function($event){_vm.showPlaylistInput=false}}},[_vm._v(\"Cancel\")])],1),(_vm.showPlaylistInput)?_c('v-form',{staticClass:\"create-playlist\",on:{\"submit\":function($event){$event.preventDefault();return _vm.createPlaylist.apply(null, arguments)}}},[_c('v-text-field',{attrs:{\"autofocus\":\"\",\"rules\":_vm.playlistRules,\"label\":\"Playlist name\",\"outlined\":\"\",\"dense\":\"\"},model:{value:(_vm.playlistName),callback:function ($$v) {_vm.playlistName=$$v},expression:\"playlistName\"}}),_c('v-btn',{attrs:{\"icon\":\"\",\"type\":\"submit\",\"loading\":_vm.createLoading}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1)],1):_vm._e(),_vm._l((_vm.$store.state.library.playlists),function(playlist){return _c('v-list-item',{key:playlist.id,attrs:{\"to\":_vm.$store.getters.relativeItemUrl(playlist),\"exact\":\"\"}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-playlist-music\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(playlist.name))])],1)],1)})],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <perfect-scrollbar class=\"nav-bar\">\r\n        <div class=\"nav-top\">\r\n            <logo></logo>\r\n            <search-input class=\"search-input\"></search-input>\r\n        </div>\r\n\r\n        <v-list dense nav class=\"py-0\">\r\n            <v-list-item to=\"/\" exact>\r\n                <v-list-item-icon>\r\n                    <v-icon color=\"primary\">mdi-play-circle-outline</v-icon>\r\n                </v-list-item-icon>\r\n                <v-list-item-content>\r\n                    <v-list-item-title>Listen Now</v-list-item-title>\r\n                </v-list-item-content>\r\n            </v-list-item>\r\n            <v-list-item to=\"/browse\" exact>\r\n                <v-list-item-icon>\r\n                    <v-icon color=\"primary\">mdi-grid-large</v-icon>\r\n                </v-list-item-icon>\r\n                <v-list-item-content>\r\n                    <v-list-item-title>Browse</v-list-item-title>\r\n                </v-list-item-content>\r\n            </v-list-item>\r\n\r\n            <v-subheader>Library</v-subheader>\r\n            <v-list-item to=\"/library/artists\">\r\n                <v-list-item-icon>\r\n                    <v-icon color=\"primary\">mdi-microphone-variant</v-icon>\r\n                </v-list-item-icon>\r\n                <v-list-item-content>\r\n                    <v-list-item-title>Artists</v-list-item-title>\r\n                </v-list-item-content>\r\n            </v-list-item>\r\n            <v-list-item to=\"/library/albums\">\r\n                <v-list-item-icon>\r\n                    <v-icon color=\"primary\">mdi-record-circle-outline</v-icon>\r\n                </v-list-item-icon>\r\n                <v-list-item-content>\r\n                    <v-list-item-title>Albums</v-list-item-title>\r\n                </v-list-item-content>\r\n            </v-list-item>\r\n            <v-list-item to=\"/library/tracks\">\r\n                <v-list-item-icon>\r\n                    <v-icon color=\"primary\">mdi-music-note</v-icon>\r\n                </v-list-item-icon>\r\n                <v-list-item-content>\r\n                    <v-list-item-title>Tracks</v-list-item-title>\r\n                </v-list-item-content>\r\n            </v-list-item>\r\n\r\n            <div class=\"playlist-header\">\r\n                <v-subheader v-if=\"$store.state.library.playlists.length > 0\">Playlists</v-subheader>\r\n                <v-subheader v-else>Create playlist</v-subheader>\r\n                <v-btn @click=\"showPlaylistInput=true\" v-if=\"!showPlaylistInput\" icon small title=\"Create new playlist\"\r\n                       class=\"add-playlist\">\r\n                    <v-icon x-small>mdi-plus</v-icon>\r\n                </v-btn>\r\n                <v-btn @click=\"showPlaylistInput=false\" small text v-else>Cancel</v-btn>\r\n            </div>\r\n            <v-form v-if=\"showPlaylistInput\" @submit.prevent=\"createPlaylist\"\r\n                    class=\"create-playlist\">\r\n                <v-text-field autofocus :rules=\"playlistRules\" label=\"Playlist name\" outlined dense\r\n                              v-model=\"playlistName\"></v-text-field>\r\n                <v-btn icon type=\"submit\" :loading=\"createLoading\">\r\n                    <v-icon>mdi-plus</v-icon>\r\n                </v-btn>\r\n            </v-form>\r\n\r\n            <v-list-item v-for=\"playlist in $store.state.library.playlists\" :key=\"playlist.id\"\r\n                         :to=\"$store.getters.relativeItemUrl(playlist)\" exact>\r\n                <v-list-item-icon>\r\n                    <v-icon>mdi-playlist-music</v-icon>\r\n                </v-list-item-icon>\r\n                <v-list-item-content>\r\n                    <v-list-item-title>{{playlist.name}}</v-list-item-title>\r\n                </v-list-item-content>\r\n            </v-list-item>\r\n        </v-list>\r\n    </perfect-scrollbar>\r\n</template>\r\n\r\n<script>\r\n    import Logo from \"./Logo\";\r\n    import SearchInput from \"./SearchInput\";\r\n\r\n    export default {\r\n        name: \"NavContent\",\r\n        components: {SearchInput, Logo},\r\n        data: () => ({\r\n            showPlaylistInput: false,\r\n            playlistRules: [\r\n                v => v.length > 0 || \"Name can't be empty\",\r\n            ],\r\n            playlistName: '',\r\n            createLoading: false,\r\n        }),\r\n        mounted() {\r\n        },\r\n        methods: {\r\n            async createPlaylist() {\r\n                this.createLoading = true;\r\n                let playlist = await this.$store.dispatch('createPlaylist', this.playlistName);\r\n                this.createLoading = false;\r\n                this.showPlaylistInput = false;\r\n                this.playlistName = '';\r\n                await this.$router.push($store.getters.relativeItemUrl(playlist));\r\n            }\r\n        },\r\n        watch: {},\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .nav-bar {\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n\r\n    .playlist-header {\r\n        display: flex;\r\n        /*justify-content: space-between;*/\r\n        align-items: center;\r\n    }\r\n\r\n    .search-input {\r\n        margin: 15px !important;\r\n        margin-bottom: 0 !important;\r\n    }\r\n\r\n    .add-playlist {\r\n        opacity: 0.7;\r\n    }\r\n\r\n    .create-playlist {\r\n        display: flex;\r\n    }\r\n\r\n    .create-playlist > *:last-child {\r\n        margin-top: 2px;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavContent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NavContent.vue?vue&type=template&id=ccbadd1e&scoped=true&\"\nimport script from \"./NavContent.vue?vue&type=script&lang=js&\"\nexport * from \"./NavContent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NavContent.vue?vue&type=style&index=0&id=ccbadd1e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ccbadd1e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div')\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"MusicPlayer\",\r\n        data: () => ({\r\n            timeInterval: -1,\r\n        }),\r\n        async mounted() {\r\n            this.timeInterval = setInterval(() => {\r\n                let audio = this.$store.state.media.audio;\r\n\r\n                if (!this.$store.state.media.trackLoading)\r\n                    this.$store.commit('currentTime', audio.currentTime);\r\n                if (audio.duration) {\r\n                    if(navigator && navigator.mediaSession && navigator.mediaSession.setPositionState)\r\n                        navigator.mediaSession.setPositionState({\r\n                            duration: audio.duration,\r\n                            playbackRate: 1,\r\n                            position: audio.currentTime,\r\n                        });\r\n                }\r\n            }, 1000 / 30);\r\n\r\n            this.handleVolume();\r\n            if (this.$store.getters.isTrackSet)\r\n                await this.$store.dispatch('setTrack', this.$store.state.media.track);\r\n        },\r\n        beforeDestroy() {\r\n            clearInterval(this.timeInterval);\r\n        },\r\n        methods: {\r\n            handleVolume() {\r\n                let audio = this.$store.state.media.audio;\r\n                let backupAudio = this.$store.state.media.backupAudio;\r\n                audio.volume = this.$store.state.media.volume;\r\n                backupAudio.volume = this.$store.state.media.volume;\r\n            }\r\n        },\r\n        watch: {\r\n            async '$store.state.media.track'() {\r\n                await this.$store.dispatch('setTrack', this.$store.state.media.track);\r\n            },\r\n            '$store.state.media.volume'() {\r\n                this.handleVolume();\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MusicPlayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MusicPlayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MusicPlayer.vue?vue&type=template&id=16984c14&scoped=true&\"\nimport script from \"./MusicPlayer.vue?vue&type=script&lang=js&\"\nexport * from \"./MusicPlayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16984c14\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <v-app class=\"app\">\r\n        <v-navigation-drawer\r\n                color=\"navBackground\"\r\n                class=\"navBar\"\r\n                v-if=\"$store.state.windowWidth > 680\"\r\n                v-model=\"drawer\"\r\n                :permanent=\"true\"\r\n                app\r\n                absolute>\r\n            <nav-content></nav-content>\r\n        </v-navigation-drawer>\r\n\r\n        <v-app-bar app class=\"toolbar\" elevation=\"1\">\r\n            <tool-bar :compact=\"$store.state.windowWidth <= 1000\" :mobile=\"$store.state.windowWidth <= 680\"\r\n                      class=\"toolbar-content\"></tool-bar>\r\n        </v-app-bar>\r\n\r\n        <v-main>\r\n            <div class=\"perfect-scroller\">\r\n                <router-view class=\"router-view\"></router-view>\r\n            </div>\r\n        </v-main>\r\n\r\n        <v-snackbar v-for=\"snack in $store.state.snackbars\" app v-model=\"snack.open\" :timeout=\"snack.timeout\"\r\n                    :outlined=\"!$vuetify.theme.dark\" color=\"primary\">\r\n            {{ snack.text }}\r\n            <template v-slot:action=\"{ attrs }\">\r\n                <v-btn text v-bind=\"attrs\" :color=\"$vuetify.theme.dark ? 'default' : 'primary'\"\r\n                       @click=\"snack.open = false\">\r\n                    Dismiss\r\n                </v-btn>\r\n            </template>\r\n        </v-snackbar>\r\n\r\n        <v-card flat class=\"bottom-media-control\"\r\n                :class=\"{'medium-width': $store.state.windowWidth <= 1000}\"\r\n                v-if=\"$store.state.windowWidth <= 1000 && $store.getters.isTrackSet\"\r\n                color=\"primaryLight\">\r\n            <div class=\"info-pane\">\r\n                <media-info class=\"media-info\"></media-info>\r\n                <follow-button class=\"button\" :item=\"$store.state.media.track\"></follow-button>\r\n                <queue-button class=\"button\"></queue-button>\r\n            </div>\r\n            <div class=\"full-controls\" v-if=\"$route.name !== 'NowPlaying'\">\r\n                <media-controls :full=\"$store.state.windowWidth > 430\"></media-controls>\r\n                <media-seek class=\"seeker\"></media-seek>\r\n            </div>\r\n        </v-card>\r\n\r\n        <v-bottom-navigation\r\n                color=\"primary\"\r\n                grow\r\n                :shift=\"$store.state.windowWidth <= 430\"\r\n                v-if=\"$store.state.windowWidth <= 680\"\r\n                app>\r\n            <v-btn value=\"now\" to=\"/\" exact>\r\n                <span>Listen Now</span>\r\n                <v-icon>mdi-play-circle-outline</v-icon>\r\n            </v-btn>\r\n            <v-btn value=\"browse\" to=\"/browse\" exact>\r\n                <span>Browse</span>\r\n                <v-icon>mdi-grid-large</v-icon>\r\n            </v-btn>\r\n            <v-btn value=\"library\" to=\"/library\">\r\n                <span>Library</span>\r\n                <v-icon>mdi-record-circle-outline</v-icon>\r\n            </v-btn>\r\n            <v-btn value=\"search\" to=\"/search\">\r\n                <span>Search</span>\r\n                <v-icon>mdi-magnify</v-icon>\r\n            </v-btn>\r\n        </v-bottom-navigation>\r\n\r\n        <music-player></music-player>\r\n    </v-app>\r\n</template>\r\n\r\n<script>\r\n    import ToolBar from \"./components/ToolBar\";\r\n    import MediaInfo from \"./components/MediaInfo\";\r\n    import MediaControls from \"./components/MediaControls\";\r\n    import MediaSeek from \"./components/MediaSeek\";\r\n    import NavContent from \"./components/NavContent\";\r\n    import FollowButton from \"./components/FollowButton\";\r\n    import QueueButton from \"./components/QueueButton\";\r\n    import MusicPlayer from \"./components/MusicPlayer\";\r\n\r\n    //TOOD:\r\n    //maybe remove spotify stuff from store.js into spotify-module.js (probably not needed until more stuff starts to clutter base store.js)\r\n    //Delete cache every week or so to prevent massive cache causing lag (see first if lag actually happens)\r\n    //maybe add play/shuffle to track grid/ search results and artist tracks\r\n    //click media notification -> open app (impossible)\r\n    //queue track menus not showing when in fullscreen (geen zin om te fixen)\r\n\r\n    //break up store.js into some modules\r\n    //add youtube-only search/tracks\r\n\r\n    export default {\r\n        name: 'App',\r\n        components: {MusicPlayer, QueueButton, FollowButton, NavContent, MediaSeek, MediaControls, MediaInfo, ToolBar},\r\n        data: () => ({\r\n            drawer: true,\r\n            cacheInterval: -1,\r\n        }),\r\n        async mounted() {\r\n            await this.$store.dispatch('initialize');\r\n\r\n            document.addEventListener('keypress', this.devListener);\r\n            window.addEventListener('resize', this.resizeListener);\r\n\r\n            let isCaching = false;\r\n            window.onbeforeunload = e => {\r\n                if (!this.$store.state.dontCache && !isCaching) {\r\n                    isCaching = true;\r\n                    this.$store.dispatch('cacheAll').then(() => isCaching = false);\r\n                }\r\n                delete e['returnValue'];\r\n            };\r\n            if (this.$store.state.platform.type === 'electron') {\r\n                //todo move this to electron-module\r\n                let electron = window.require('electron');\r\n                electron.ipcRenderer.on('before-close', async () => {\r\n                    if (!isCaching) {\r\n                        isCaching = true;\r\n                        await this.$store.dispatch('cacheAll');\r\n                        isCaching = false;\r\n                    }\r\n                    electron.remote.app.quit();\r\n                });\r\n            }\r\n\r\n            this.cacheInterval = setInterval(async () => {\r\n                await this.$store.dispatch('cacheAll');\r\n            }, 1000 * 60 * 2);//Cache every 2 minute(s).\r\n\r\n            console.log(this.$store);\r\n            if (!this.$store.getters.isKeySet) {\r\n                if (this.$route.name !== 'Settings') {\r\n                    await this.$router.push('/settings');\r\n                }\r\n            } else if (!this.$store.getters.isLoggedIn && this.$route.name !== 'Settings') {\r\n                await this.$router.push('/settings');\r\n            }\r\n\r\n            if (this.$store.state.platform.type === 'web')\r\n                this.handleCode();\r\n        },\r\n        beforeDestroy() {\r\n            clearInterval(this.cacheInterval);\r\n            document.removeEventListener('keypress', this.devListener);\r\n            window.removeEventListener('resize', this.resizeListener);\r\n        },\r\n        methods: {\r\n            handleCode() {\r\n                if (location.search.includes('?code=')) {\r\n                    let code = location.search.split('?code=')[1].split('&')[0];\r\n\r\n                    let otherTab = new BroadcastChannel('loginCode');\r\n                    otherTab.postMessage(code);\r\n                    otherTab.close();\r\n                    window.close();\r\n                }\r\n            },\r\n            resizeListener() {\r\n                this.$store.commit('windowWidth', window.innerWidth);\r\n            },\r\n            devListener(e) {\r\n                if (e.key === '`')\r\n                    this.$store.dispatch('openDevTools');\r\n                if (e.key === 'r' && e.ctrlKey)\r\n                    location.reload();\r\n            },\r\n        },\r\n        watch: {\r\n            '$vuetify.theme.dark'() {\r\n                this.$store.dispatch('applyThemeColor', this.$store.state.theme.color);\r\n            },\r\n        },\r\n    };\r\n</script>\r\n<style>\r\n    html, body {\r\n        overflow-y: auto;\r\n    }\r\n\r\n    h1 {\r\n        font-size: 1.8rem;\r\n    }\r\n\r\n    h1, h2, h3, h4, h5 {\r\n        font-weight: bold;\r\n    }\r\n\r\n    .app {\r\n        user-select: none;\r\n        font-family: Roboto, Helvetica Neue, Helvetica, Arial, sans-serif;\r\n    }\r\n\r\n    .toolbar {\r\n        display: flex;\r\n        justify-content: left;\r\n        align-items: center;\r\n        padding: 0;\r\n    }\r\n\r\n    .v-toolbar__content {\r\n        width: 100%;\r\n    }\r\n\r\n    .router-view {\r\n        /*position: absolute;*/\r\n        width: 100%;\r\n        height: 100%;\r\n        position: absolute;\r\n        overflow-y: auto;\r\n    }\r\n\r\n    .perfect-scroller {\r\n        height: 100%;\r\n    }\r\n\r\n    .navBar {\r\n        /*position: fixed;*/\r\n    }\r\n\r\n    .bottom-media-control {\r\n        width: calc(100% - 256px);\r\n        left: 256px;\r\n        bottom: 0;\r\n        padding: 5px;\r\n        position: relative;\r\n    }\r\n\r\n    @media (max-width: 680px) {\r\n        .bottom-media-control {\r\n            width: 100%;\r\n            left: 0;\r\n            bottom: 56px;\r\n        }\r\n    }\r\n\r\n    .info-pane {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n\r\n    .info-pane > .media-info {\r\n        flex-grow: 1;\r\n    }\r\n\r\n    .button {\r\n        min-width: 50px;\r\n        display: flex;\r\n        justify-content: center;\r\n    }\r\n\r\n    .full-controls {\r\n        height: 55px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-around;\r\n    }\r\n\r\n    .seeker {\r\n        margin: 0 20px;\r\n    }\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=55a5af10&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=55a5af10&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable no-console */\r\n\r\nimport { register } from 'register-service-worker'\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n  register(`${process.env.BASE_URL}service-worker.js`, {\r\n    ready () {\r\n      console.log(\r\n        'App is being served from cache by a service worker.\\n' +\r\n        'For more details, visit https://goo.gl/AFskqB'\r\n      )\r\n    },\r\n    registered () {\r\n      console.log('Service worker has been registered.')\r\n    },\r\n    cached () {\r\n      console.log('Content has been cached for offline use.')\r\n    },\r\n    updatefound () {\r\n      console.log('New content is downloading.')\r\n    },\r\n    updated () {\r\n      console.log('New content is available; please refresh.')\r\n    },\r\n    offline () {\r\n      console.log('No internet connection found. App is running in offline mode.')\r\n    },\r\n    error (error) {\r\n      console.error('Error during service worker registration:', error)\r\n    }\r\n  })\r\n}\r\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"listen-now\"},[_c('div',{staticClass:\"padded\"},[_c('h2',[_vm._v(_vm._s(_vm.$store.state.homePage.featured.title.replace(/\\\\/gi,'')))])]),_c('item-row',{staticClass:\"item-row\",attrs:{\"items\":_vm.$store.state.homePage.featured.playlists,\"big\":\"\"}}),(_vm.$store.state.media.recentlyPlayed.length > 0)?_c('h2',{staticClass:\"padded\"},[_vm._v(\"Recently played\")]):_vm._e(),(_vm.$store.state.media.recentlyPlayed.length > 0)?_c('item-row',{staticClass:\"item-row\",attrs:{\"items\":_vm.$store.state.media.recentlyPlayed}}):_vm._e(),_c('h2',{staticClass:\"padded\"},[_vm._v(\"Made for you\")]),_c('item-row',{staticClass:\"item-row\",attrs:{\"items\":_vm.$store.state.homePage.personalized,\"type\":\"playlist\"}}),_c('h2',{staticClass:\"padded\"},[_vm._v(\"New releases\")]),_c('item-row',{staticClass:\"item-row\",attrs:{\"items\":_vm.$store.state.homePage.newReleases,\"type\":\"album\",\"rows\":2,\"big\":\"\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"listen-now\">\r\n        <div class=\"padded\">\r\n            <h2>{{$store.state.homePage.featured.title.replace(/\\\\/gi,'')}}</h2>\r\n        </div>\r\n\r\n        <item-row class=\"item-row\"\r\n                  :items=\"$store.state.homePage.featured.playlists\"\r\n                  big\r\n        ></item-row>\r\n\r\n        <h2 class=\"padded\" v-if=\"$store.state.media.recentlyPlayed.length > 0\">Recently played</h2>\r\n        <item-row class=\"item-row\"\r\n                  v-if=\"$store.state.media.recentlyPlayed.length > 0\"\r\n                  :items=\"$store.state.media.recentlyPlayed\"\r\n        ></item-row>\r\n\r\n        <h2 class=\"padded\">Made for you</h2>\r\n        <item-row class=\"item-row\"\r\n                  :items=\"$store.state.homePage.personalized\"\r\n                  type=\"playlist\"\r\n        ></item-row>\r\n\r\n        <h2 class=\"padded\">New releases</h2>\r\n        <item-row class=\"item-row\"\r\n                  :items=\"$store.state.homePage.newReleases\"\r\n                  type=\"album\"\r\n                  :rows=\"2\"\r\n                  big\r\n        ></item-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import ItemSquare from \"../components/ItemSquare\";\r\n    import ItemRow from \"../components/ItemRow\";\r\n\r\n    export default {\r\n        name: 'ListenNow',\r\n        components: {ItemRow, ItemSquare},\r\n        mounted() {\r\n            this.$store.dispatch('refreshHomePage');\r\n        }\r\n    }\r\n</script>\r\n<style scoped>\r\n    .listen-now {\r\n        padding: 0px;\r\n        padding-top: 20px;\r\n        padding-bottom: 30px;\r\n    }\r\n\r\n    .padded {\r\n        padding: 10px 30px;\r\n    }\r\n\r\n    .item-row {\r\n\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListenNow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListenNow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListenNow.vue?vue&type=template&id=277d7cd1&scoped=true&\"\nimport script from \"./ListenNow.vue?vue&type=script&lang=js&\"\nexport * from \"./ListenNow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ListenNow.vue?vue&type=style&index=0&id=277d7cd1&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"277d7cd1\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport Home from '../views/ListenNow.vue'\r\n\r\nVue.use(VueRouter)\r\n\r\nconst routes = [\r\n    {\r\n        path: '/',\r\n        name: 'Home',\r\n        component: Home\r\n    },\r\n    {\r\n        path: '/settings',\r\n        name: 'Settings',\r\n        component: () => import('../views/Settings')\r\n    },\r\n    {\r\n        path: '/downloads',\r\n        name: 'Downloads',\r\n        component: () => import('../views/Downloads')\r\n    },\r\n    {\r\n        path: '/browse',\r\n        name: 'Browse',\r\n        component: () => import('../views/Browse')\r\n    },\r\n    {\r\n        path: '/album/:name/:id/:trackId?',\r\n        name: 'Album',\r\n        component: () => import('../views/Album')\r\n    },\r\n    {\r\n        path: '/playlist/:name/:id',\r\n        name: 'Playlist',\r\n        component: () => import('../views/Playlist')\r\n    },\r\n    {\r\n        path: '/artist/:name/:id',\r\n        name: 'Artist',\r\n        component: () => import('../views/Artist')\r\n    },\r\n    {\r\n        path: '/user/:name/:id',\r\n        name: 'User',\r\n        component: () => import('../views/User')\r\n    },\r\n    {\r\n        path: '/track/:name/:id',\r\n        name: 'Track',\r\n        component: () => import('../views/Track')\r\n    },\r\n    {\r\n        path: '/category/:id',\r\n        name: 'Category',\r\n        component: () => import('../views/Category')\r\n    },\r\n    {\r\n        path: '/library',\r\n        name: 'Library',\r\n        component: () => import('../views/Library')\r\n    },\r\n    {\r\n        path: '/library/artists',\r\n        name: 'Artists',\r\n        component: () => import('../views/Artists')\r\n    },\r\n    {\r\n        path: '/library/albums',\r\n        name: 'Albums',\r\n        component: () => import('../views/Albums')\r\n    },\r\n    {\r\n        path: '/library/playlists',\r\n        name: 'Playlists',\r\n        component: () => import('../views/Playlists')\r\n    },\r\n    {\r\n        path: '/library/tracks',\r\n        name: 'Tracks',\r\n        component: () => import('../views/Tracks')\r\n    },\r\n    {\r\n        path: '/search',\r\n        name: 'Search',\r\n        component: () => import('../views/Search')\r\n    },\r\n    {\r\n        path: '/tune',\r\n        name: 'Tune',\r\n        component: () => import('../views/Tune')\r\n    },\r\n    {\r\n        path: '/radio',\r\n        name: 'Radio',\r\n        component: () => import('../views/Radio')\r\n    },\r\n    {\r\n        path: '/nowplaying',\r\n        name: 'NowPlaying',\r\n        component: () => import('../views/NowPlaying')\r\n    },\r\n]\r\n\r\nconst router = new VueRouter({\r\n    routes\r\n})\r\n\r\nexport default router\r\n","import Utils from \"../../js/Utils\";\r\nimport {get, set, keys} from \"idb-keyval\";\r\nimport Vue from \"vue\";\r\n\r\nexport default {\r\n    state: {\r\n        recentlyPlayed: [],\r\n        track: null,\r\n        local: false,\r\n        currentTime: 0,\r\n        duration: 1,\r\n        playing: false,\r\n        queue: [],\r\n        shuffledQueue: [],\r\n        contextItem: null,\r\n        shuffle: false,\r\n        repeat: true,\r\n        downloads: [],\r\n        playAfterLoad: false,\r\n        volume: 1,\r\n        trackLoading: true,\r\n        shouldDownload: true,\r\n        dontOverwriteTrackFromCache: false,\r\n        audio: document.createElement('audio'),\r\n        backupAudio: document.createElement('audio'),\r\n    },\r\n    mutations: {\r\n        setMediaStateValue: (state, {key, value}) => {\r\n            if (key === 'track' && state.dontOverwriteTrackFromCache)\r\n                return;\r\n            Vue.set(state, key, value)\r\n        },\r\n\r\n        swapAudios: (state) => [state.audio, state.backupAudio] = [state.backupAudio, state.audio],\r\n        local: (state, local) => state.local = local,\r\n        trackLoading: (state, trackLoading) => state.trackLoading = trackLoading,\r\n        volume: (state, volume) => state.volume = volume,\r\n        seekTo: (state, percentage) => {\r\n            if (state.audio.duration)\r\n                state.audio.currentTime = state.audio.duration * percentage;\r\n        },\r\n        duration: (state, duration) => state.duration = duration || 0,\r\n        currentTime: (state, currentTime) => state.currentTime = currentTime || 0,\r\n        playing: (state, playing) => state.playing = playing,\r\n        audioElement: (state, audio) => state.audio = audio,\r\n\r\n        addDownload: (state, download) => {\r\n            let existing = state.downloads.findIndex(d => d.track.id === download.track.id);\r\n            if (existing !== -1)\r\n                state.downloads[existing] = download;\r\n            else\r\n                state.downloads.push(download)\r\n        },\r\n        downloadProgress: (state, {track, progress}) => state.downloads.find(t => t.track.id === track.id).state = progress,\r\n        removeDownload: (state, track) => {\r\n            let index = state.downloads.findIndex(t => t.track.id === track.id);\r\n            if (index !== -1)\r\n                state.downloads.splice(index, 1);\r\n        },\r\n\r\n        toggleShuffle: state => state.shuffle = !state.shuffle,\r\n        toggleRepeat: state => state.repeat = !state.repeat,\r\n        shuffle: (state, shuffle) => state.shuffle = shuffle,\r\n        repeat: (state, repeat) => state.repeat = repeat,\r\n        playAfterLoad: (state, playAfterLoad) => state.playAfterLoad = playAfterLoad,\r\n        dontOverwriteTrackFromCache: (state, value) => state.dontOverwriteTrackFromCache = value,\r\n        shuffledQueue: state => state.shuffledQueue = Utils.shuffleArray([...state.queue]),\r\n        queue: (state, queue) => {\r\n            state.queue = queue;\r\n            state.shuffledQueue = Utils.shuffleArray([...queue]);\r\n        },\r\n        track: (state, {track, contextItem}) => {\r\n            state.track = track;\r\n            if (contextItem === undefined)\r\n                return;\r\n            // Replace contextItem when\r\n            if (state.contextItem === null || //No context item is set\r\n                state.contextItem.id !== contextItem.id || //The ID of the new context is different\r\n                state.contextItem.type !== contextItem.type || //The type of the new context is different\r\n                !state.queue ||\r\n                state.queue.findIndex(t => t.id === track) === -1 //The new track is not in the current queue\r\n            ) {\r\n                if (contextItem.type !== 'radio' && contextItem.type !== 'search') {\r\n                    let index = state.recentlyPlayed.findIndex(i => i.id === contextItem.id);\r\n                    if (index !== -1)\r\n                        state.recentlyPlayed.splice(index, 1);\r\n                    state.recentlyPlayed.unshift(contextItem);\r\n                    state.recentlyPlayed = state.recentlyPlayed.slice(0, 10);\r\n                }\r\n\r\n                state.queue = contextItem.tracks;\r\n                state.contextItem = contextItem;\r\n                state.shuffledQueue = Utils.shuffleArray([...state.queue]);\r\n            }\r\n        },\r\n        playNext: (state, tracks) => {\r\n            let queues = [state.queue, state.shuffledQueue];\r\n            //Add tracks as \"Play next\" to both queues, remove duplicate tracks\r\n            for (let queue of queues) {\r\n                let currentIndex = queue.findIndex(t => t.id === state.track.id);\r\n                for (let track of tracks) {\r\n                    let index = queue.findIndex(t => t.id === track.id);\r\n                    if (index === currentIndex)\r\n                        continue;\r\n                    if (index !== -1)\r\n                        queue.splice(index, 1);\r\n                    queue.splice(currentIndex + 1, 0, track);\r\n                }\r\n            }\r\n        },\r\n        addToQueue: (state, tracks) => {\r\n            let queues = [state.queue, state.shuffledQueue];\r\n            //Add tracks as \"Play next\" to both queues, remove duplicate tracks\r\n            for (let queue of queues) {\r\n                let currentIndex = queue.findIndex(t => t.id === state.track.id);\r\n                for (let track of tracks) {\r\n                    let index = queue.findIndex(t => t.id === track.id);\r\n                    if (index === currentIndex)\r\n                        continue;\r\n                    if (index !== -1)\r\n                        queue.splice(index, 1);\r\n                    queue.push(track);\r\n                }\r\n            }\r\n        },\r\n        removeFromQueue: (state, track) => {\r\n            if (track.id === state.track.id)\r\n                return;\r\n            let index = state.queue.findIndex(t => t.id === track.id);\r\n            let indexShuffle = state.shuffledQueue.findIndex(t => t.id === track.id);\r\n            if (index !== -1)\r\n                state.queue.splice(index, 1);\r\n            if (indexShuffle !== -1)\r\n                state.shuffledQueue.splice(indexShuffle, 1);\r\n        },\r\n        clearQueue: (state) => {\r\n            state.queue = [state.track];\r\n            state.shuffledQueue = [state.track];\r\n        },\r\n    },\r\n    getters: {\r\n        trackIndex: (state, getters) => {\r\n            return getters.isTrackSet ? getters.currentQueue.findIndex(t => t.id === state.track.id) : -1\r\n        },\r\n        currentQueue: state => {\r\n            return state.shuffle ? state.shuffledQueue : state.queue;\r\n        },\r\n        isTrackSet: state => {\r\n            return state.track !== null;\r\n        },\r\n        durationHms: (state) => {\r\n            return Utils.secondsToHms(state.duration);\r\n        },\r\n        currentTimeHms: state => {\r\n            return Utils.secondsToHms(state.currentTime);\r\n        },\r\n        progress: (state) => {\r\n            if (!state.duration)\r\n                return 0;\r\n            return state.currentTime / state.duration;\r\n        },\r\n    },\r\n    actions: {\r\n        initializeMedia: async ({state, commit, dispatch}) => {\r\n            let lsKeys = await keys();\r\n            let getKvPair = async lsKey => {\r\n                let value = await get(lsKey);\r\n                let stateKey = lsKey.substring('media.'.length);\r\n                return {key: stateKey, value};\r\n            }\r\n            let kvPairs = await Promise.all(lsKeys.filter(key => key.startsWith('media.')).map(getKvPair));\r\n            kvPairs.forEach(({key, value}) => commit('setMediaStateValue', {key, value}));\r\n            if (state.queue)\r\n                commit('shuffledQueue');\r\n\r\n            await dispatch('initAudios');\r\n        },\r\n        cacheMedia: async ({state}) => {\r\n            let cachedFields = [\"shouldDownload\", \"recentlyPlayed\", \"track\", \"contextItem\", \"shuffle\", \"repeat\", \"volume\", \"queue\"];\r\n            await Promise.all(cachedFields.map(field => set('media.' + field, state[field])));\r\n            console.log(\"Media cache complete\");\r\n        },\r\n\r\n        isTrackAvailableOffline: async ({rootState}, track) => {\r\n            return await rootState.platform.downloader.isTrackOffline(track);\r\n        },\r\n        removeCached: async ({rootState, commit}, track) => {\r\n            await rootState.platform.downloader.removeCached(track);\r\n        },\r\n        downloadTrackByUrl: async ({rootState, state, commit}, {track, url}) => {\r\n            if (!state.shouldDownload)\r\n                return;\r\n\r\n            let abortController = new AbortController();\r\n            commit('addDownload', {track, state: 'Preparing', abortController: abortController})\r\n            await rootState.platform.downloader.downloadTrack(url, track,\r\n                progress => commit('downloadProgress', {track, progress}),\r\n                abortController.signal,\r\n            );\r\n        },\r\n        getTrackUrls({rootState}, track) {\r\n            return rootState.platform.downloader.getTrackUrls(track);\r\n        },\r\n\r\n        async setTrack({dispatch, state, commit}, track) {\r\n            commit('local', false);\r\n            dispatch('setMetadata', track);\r\n            commit('trackLoading', true);\r\n            commit('currentTime', 0);\r\n            await dispatch('pause');\r\n            for await(let {url, local} of await dispatch('getTrackUrls', track)) {\r\n                if (state.track.id !== track.id)\r\n                    return; // Don't set src when track has been skipped while loading\r\n\r\n                commit('local', local);\r\n                let success = await dispatch('setTrackUrl', url);\r\n                if (success) {\r\n                    commit('trackLoading', false);\r\n                    if (!local)\r\n                        await dispatch('downloadTrackByUrl', {track, url});\r\n                    return;\r\n                } else if (local) {\r\n                    await dispatch('removeCached', track);\r\n                }\r\n            }\r\n            console.warn(\"Failed to load track, skipping\")\r\n            // Failed to load track\r\n            await dispatch('skip', 1);\r\n        },\r\n        initAudios({state, commit, dispatch}) {\r\n            for (let audio of [state.audio, state.backupAudio]) {\r\n                audio.onloadedmetadata = () => {\r\n                    if (audio === state.audio)\r\n                        commit('duration', audio.duration);\r\n                };\r\n                audio.onended = () => {\r\n                    if (audio === state.audio)\r\n                        dispatch('skip', 1);\r\n                }\r\n                audio.onplay = () => {\r\n                    if (audio === state.audio) {\r\n                        if (navigator.mediaSession)\r\n                            navigator.mediaSession.playbackState = 'playing';\r\n                        dispatch('setPlatformPlaying', true);\r\n                        commit('playing', true);\r\n                    }\r\n                };\r\n                audio.onpause = () => {\r\n                    if (audio === state.audio) {\r\n                        if (navigator.mediaSession)\r\n                            navigator.mediaSession.playbackState = 'paused';\r\n                        dispatch('setPlatformPlaying', false);\r\n                        commit('playing', false);\r\n                    }\r\n                };\r\n            }\r\n        },\r\n        async setTrackUrl({dispatch, state, commit}, url) {\r\n            return new Promise((resolve, reject) => {\r\n                let playAfterLoad = state.playAfterLoad;\r\n                commit('playAfterLoad', false);\r\n\r\n                console.log(\"🎵 Now playing 🎵\", url)\r\n                commit('swapAudios');\r\n                state.backupAudio.pause();\r\n                state.audio.src = url;\r\n                if (playAfterLoad)\r\n                    state.audio.play();\r\n\r\n                let loadTimeout = setTimeout(() => {\r\n                    //if url doesn't load in time, go next url\r\n                    console.warn(\"Can't play\");\r\n                    resolve(false);\r\n                }, 3500);\r\n                let canplayFired = false;\r\n                state.backupAudio.oncanplay = () => 0;\r\n                state.backupAudio.onerror = () => 0;\r\n                state.audio.onerror = async () => {\r\n                    clearTimeout(loadTimeout);\r\n                    resolve(false);\r\n                };\r\n                state.audio.oncanplay = async () => {\r\n                    if (canplayFired)\r\n                        return;\r\n                    canplayFired = true; //Don't run this when seeking through a track, which also fires oncanplay\r\n\r\n                    clearTimeout(loadTimeout);\r\n                    resolve(true);\r\n                };\r\n            });\r\n        },\r\n        async play({state}) {\r\n            if (state.audio.paused)\r\n                await state.audio.play();\r\n        },\r\n        async pause({state}) {\r\n            if (!state.audio.paused)\r\n                await state.audio.pause();\r\n        },\r\n        async skip({state, getters, commit, dispatch}, n) {\r\n            if (n === -1 && state.currentTime > 5) {\r\n                state.audio.currentTime = 0;\r\n                return;\r\n            }\r\n\r\n            let newIndex = getters.trackIndex + n;\r\n            if (newIndex >= state.queue.length)\r\n                if (state.repeat)\r\n                    newIndex -= state.queue.length;\r\n                else\r\n                    return await dispatch('pause');\r\n            if (newIndex < 0)\r\n                if (state.repeat)\r\n                    newIndex += state.queue.length;\r\n                else\r\n                    return await dispatch('pause');\r\n\r\n            commit('playAfterLoad', true);\r\n            commit('track', {track: getters.currentQueue[newIndex]});\r\n        },\r\n        setMetadata({dispatch, getters, state, commit}, track) {\r\n            let artistsString = track.artists.map(a => a.name).join(', ');\r\n            document.title = 'Vue Music • ' + track.name + ' - ' + artistsString;\r\n\r\n            if (!('mediaSession' in navigator))\r\n                return;\r\n\r\n            let artwork = [{\r\n                src: getters.notFoundImage,\r\n                type: 'image/png',\r\n                sizes: '512x512',\r\n            }];\r\n            if (track.album.images.length > 0)\r\n                artwork = track.album.images.map(i => ({\r\n                    src: i.url,\r\n                    type: 'image/png',\r\n                    sizes: `${i.width}x${i.height}`,\r\n                }));\r\n\r\n            navigator.mediaSession.metadata = new MediaMetadata({\r\n                title: track.name,\r\n                artist: artistsString,\r\n                album: track.album.name,\r\n                artwork\r\n            });\r\n\r\n            navigator.mediaSession.setActionHandler('previoustrack', () => {\r\n                dispatch('skip', -1);\r\n            });\r\n\r\n            navigator.mediaSession.setActionHandler('nexttrack', () => {\r\n                dispatch('skip', 1);\r\n            });\r\n\r\n            let defaultSkipTime = 10;\r\n            navigator.mediaSession.setActionHandler('seekbackward', (event) => {\r\n                const skipTime = event.seekOffset || defaultSkipTime;\r\n                state.audio.currentTime = Math.max(state.audio.currentTime - skipTime, 0);\r\n            });\r\n\r\n            navigator.mediaSession.setActionHandler('seekforward', (event) => {\r\n                const skipTime = event.seekOffset || defaultSkipTime;\r\n                state.audio.currentTime = Math.min(state.audio.currentTime + skipTime, state.audio.duration);\r\n            });\r\n\r\n            navigator.mediaSession.setActionHandler('play', () => {\r\n                dispatch('play');\r\n            });\r\n\r\n            navigator.mediaSession.setActionHandler('pause', () => {\r\n                dispatch('pause');\r\n            });\r\n\r\n            try {\r\n                navigator.mediaSession.setActionHandler('stop', () => {\r\n                    dispatch('pause');\r\n                });\r\n            } catch (error) {\r\n                console.warn('Warning! The \"stop\" media session action is not supported.');\r\n            }\r\n\r\n            try {\r\n                navigator.mediaSession.setActionHandler('seekto', (event) => {\r\n                    commit('seekTo', event.seekTime / state.duration);\r\n                });\r\n            } catch (error) {\r\n                console.warn('Warning! The \"seekto\" media session action is not supported.');\r\n            }\r\n        },\r\n\r\n        playItem: async ({state, commit, dispatch}, {item, shuffle = false}) => {\r\n            let context = await dispatch('getContextItem', item);\r\n            if (!context.tracks || context.tracks.length === 0) {\r\n                return dispatch(\"addSnack\", {text: \"This item has no tracks\"});\r\n            }\r\n            let startTrack;\r\n            if (shuffle)\r\n                startTrack = context.tracks[Math.floor(Math.random() * context.tracks.length)];\r\n            else\r\n                startTrack = context.tracks[0];\r\n            if (item.type === 'track')\r\n                console.warn(\"Setting track item as context item, this should probably not happen\");\r\n\r\n            commit('playAfterLoad', true);\r\n            commit('track', {contextItem: context, track: startTrack});\r\n            commit('shuffle', shuffle);\r\n        },\r\n    },\r\n}","import Vue from 'vue'\r\n\r\nexport default {\r\n    state: {\r\n        liveTerm: '',\r\n        term: '',\r\n        results: {},\r\n        recent: localStorage.getItem('recentSearch') === null ?\r\n            [] : JSON.parse(localStorage.recentSearch),\r\n    },\r\n    mutations: {\r\n        searchTerm: (state, searchResult) => {\r\n            state.term = searchResult.term;\r\n            if (state.recent.includes(state.term))\r\n                state.recent.splice(state.recent.indexOf(state.term), 1);\r\n            state.recent = [state.term, ...state.recent.slice(0, 5)];\r\n            localStorage.recentSearch = JSON.stringify(state.recent);\r\n            Vue.set(state.results, searchResult.term, searchResult);\r\n        },\r\n        liveTerm: (state, liveTerm) => state.liveTerm = liveTerm,\r\n    },\r\n    getters: {},\r\n    actions: {\r\n        search: async ({state, commit, rootState}, term) => {\r\n            let result = await rootState.api.search(term, ['album', 'artist', 'playlist', 'track']);\r\n            commit('searchTerm', {\r\n                term,\r\n                albums: result.albums.items,\r\n                artists: result.artists.items,\r\n                playlists: result.playlists.items,\r\n                tracks: result.tracks.items,\r\n            });\r\n        },\r\n    }\r\n}","import Vue from 'vue';\r\nimport Vuetify from 'vuetify/lib';\r\n\r\nVue.use(Vuetify);\r\n\r\nexport default new Vuetify({\r\n    theme: {\r\n        dark: localStorage.darkTheme === 'true',\r\n        themes: {\r\n            dark: {\r\n                primary: '#ef2d46',\r\n                foreground: '#ffffff',\r\n                primarySeek: '#c9c9c9',\r\n                navBackground: '#1b1b1c',\r\n                primaryLight: '#2a2a2b',\r\n                secondary: '#de901a',\r\n            },\r\n            light: {\r\n                primary: '#e7474c',\r\n                foreground: '#1a1a1a',\r\n                primarySeek: '#e7474c',\r\n                navBackground: '#ffffff',\r\n                primaryLight: '#f1efef',\r\n                secondary: '#ffcf84',\r\n            },\r\n        },\r\n    }\r\n});\r\n","import Utils from \"../../js/Utils\";\r\nimport Vuetify from '../vuetify';\r\n\r\nexport default {\r\n    state: {\r\n        original: JSON.parse(JSON.stringify(Vuetify.userPreset.theme)),\r\n        color: null,\r\n        fgLegible: true,\r\n    },\r\n    mutations: {\r\n        color: (state, color) => state.color = color,\r\n        fgLegible: (state, fgLegible) => state.fgLegible = fgLegible,\r\n    },\r\n    getters: {\r\n        currentTheme: () => Vuetify.framework.theme,\r\n    },\r\n    actions: {\r\n        async setThemeToItem({getters, dispatch, state}, item) {\r\n            console.log('getter', getters.currentTheme, 'original', state.original)\r\n            let imgUrl = getters.itemImage(item);\r\n            let color = await dispatch('getImageColor', imgUrl);\r\n            await dispatch('applyThemeColor', color);\r\n        },\r\n        async applyThemeColor({commit, state, dispatch, getters}, color) {\r\n            if (color === null || color === undefined)\r\n                return await dispatch('revertThemeColor');\r\n\r\n            console.log(\"Apply\", color);\r\n            commit('color', color);\r\n            let {bgLegible, fgLegible} = Utils.isLegible(color, getters.currentTheme);\r\n            if (!bgLegible)\r\n                return await dispatch('revertThemeColor');\r\n            console.log(\"Applying theme color 🎨\", color);\r\n            commit('fgLegible', fgLegible);\r\n\r\n            if (getters.currentTheme.isDark) {\r\n                getters.currentTheme.themes.dark.primary = color;\r\n            } else {\r\n                getters.currentTheme.themes.light.primary = color;\r\n                getters.currentTheme.themes.light.primarySeek = color;\r\n            }\r\n        },\r\n        revertThemeColor({commit, getters, state}) {\r\n            commit('fgLegible', true);\r\n\r\n            if (getters.currentTheme.isDark) {\r\n                getters.currentTheme.themes.dark.primary = state.original.themes.dark.primary;\r\n            } else {\r\n                getters.currentTheme.themes.light.primary = state.original.themes.light.primary;\r\n                getters.currentTheme.themes.light.primarySeek = state.original.themes.light.primarySeek;\r\n            }\r\n        },\r\n        async leavePage({commit, dispatch}) {\r\n            commit('color', null);\r\n            await dispatch('revertThemeColor');\r\n        },\r\n        async getImageColor({dispatch}, imgUrl) {\r\n            return new Promise(resolve => {\r\n                let img = document.createElement('img');\r\n                img.crossOrigin = 'anonymous';\r\n                img.src = imgUrl;\r\n                let canvas = document.createElement('canvas');\r\n                let context = canvas.getContext('2d');\r\n                img.onload = async () => {\r\n                    let width = 20;\r\n                    let height = 20;\r\n                    canvas.width = width;\r\n                    canvas.height = height;\r\n                    context.drawImage(img, 0, 0, width, height);\r\n                    let bins = {};\r\n                    let imageData = context.getImageData(0, 0, width, height);\r\n                    for (let i = 0; i < imageData.data.length; i += 4) {\r\n                        let color = imageData.data.slice(i, i + 3);\r\n                        let rgb = color.map(c => Math.floor(c / 20))\r\n                        let [h, s, l] = await dispatch('rgbToHsl', rgb);\r\n                        let binKey = rgb.join(',');\r\n                        if (bins[binKey] === undefined)\r\n                            bins[binKey] = {n: 0, color};\r\n                        // console.log(hsl);\r\n                        bins[binKey].n += 1 + (s * (1 - Math.abs(0.5 - l))) * 255;\r\n                    }\r\n                    let values = Object.values(bins);\r\n                    const indexOfMaxValue = values.map(e => e.n).reduce((iMax, x, i, arr) => x > arr[iMax] ? i : iMax, 0);\r\n                    let [r, g, b] = values[indexOfMaxValue].color;\r\n                    let toHex = c => c.toString(16).padStart(2, '0');\r\n                    resolve('#' + toHex(r) + toHex(g) + toHex(b));\r\n                };\r\n            });\r\n        },\r\n        rgbToHsl({}, rgb) {\r\n            let [r, g, b] = rgb;\r\n            r /= 255, g /= 255, b /= 255;\r\n            let max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n            let h, s, l = (max + min) / 2;\r\n            if (max === min) {\r\n                h = s = 0; // achromatic\r\n            } else {\r\n                let d = max - min;\r\n                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n                switch (max) {\r\n                    case r:\r\n                        h = (g - b) / d + (g < b ? 6 : 0);\r\n                        break;\r\n                    case g:\r\n                        h = (b - r) / d + 2;\r\n                        break;\r\n                    case b:\r\n                        h = (r - g) / d + 4;\r\n                        break;\r\n                }\r\n                h /= 6;\r\n            }\r\n            return [h, s, l];\r\n        },\r\n    }\r\n}","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport SpotifyWebApi from 'spotify-web-api-js';\r\nimport media from './media-module';\r\nimport search from './search-module';\r\nimport theme from './theme-module';\r\nimport EventEmitter from 'events';\r\nimport Utils from \"../../js/Utils\";\r\nimport {get, keys, set, clear} from \"idb-keyval\";\r\n\r\nlet isElectron = window && window.process !== undefined && window.process.type !== undefined;\r\nconsole.log(\"is electron?\", isElectron);\r\nconst platform = require(isElectron ? './electron-module' : './web-module').default;\r\n\r\nif (document.querySelectorAll(`head link[rel='manifest']`).length === 0) {\r\n    let manifestLink = document.createElement('link');\r\n    manifestLink.setAttribute('rel', 'manifest');\r\n    manifestLink.setAttribute('href', './manifest.json');\r\n    document.querySelector('head').appendChild(manifestLink);\r\n}\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n    state: {\r\n        keys: {\r\n            spotifyId: 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa',\r\n            spotifySecret: 'bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb',\r\n            youtube: 'cccccccccccc-dddddddddddddddddddddddddd',\r\n        },\r\n        requestedScopes: \"ugc-image-upload user-read-email user-read-private playlist-read-collaborative playlist-modify-public playlist-read-private playlist-modify-private user-library-modify user-library-read user-top-read user-read-recently-played user-follow-read user-follow-modify\",\r\n        authUrl: 'https://accounts.spotify.com/',\r\n\r\n        isTouch: Utils.isTouchDevice(),\r\n        dontCache: false,\r\n        events: new EventEmitter(),\r\n        windowWidth: window.innerWidth,\r\n        timeout: -1,\r\n        snackbars: [],\r\n        api: new SpotifyWebApi(),\r\n        isRefreshing: {\r\n            playlist: false,\r\n            album: false,\r\n            artist: false,\r\n            track: false,\r\n        },\r\n        auth: {\r\n            code: null,\r\n            token: null,\r\n            refresh: null,\r\n            expiryDate: null,\r\n        },\r\n        homePage: {\r\n            featured: {title: '', playlists: []},\r\n            newReleases: [],\r\n            personalized: [],\r\n        },\r\n        browse: {\r\n            categories: [],\r\n            genres: [],\r\n        },\r\n        userInfo: {\r\n            id: '',\r\n            name: '',\r\n            mail: '',\r\n            country: '',\r\n            followers: 0,\r\n            avatar: 'img/no-user.jpg',\r\n        },\r\n        library: {\r\n            playlists: [],\r\n            artists: [],\r\n            albums: [],\r\n            tracks: [],\r\n        },\r\n        playlist: {},\r\n        album: {},\r\n        artist: {},\r\n        category: {},\r\n        user: {},\r\n    },\r\n    mutations: {\r\n        setStateValue: (state, {key, value}) => Vue.set(state, key, value),\r\n\r\n        spotifyId: (state, id) => {\r\n            state.keys.spotifyId = id\r\n        },\r\n        spotifySecret: (state, secret) => {\r\n            state.keys.spotifySecret = secret\r\n        },\r\n        youtubeKey: (state, key) => {\r\n            state.keys.youtube = key;\r\n            state.platform.downloader.apiKey = key;\r\n        },\r\n\r\n        dontCache: state => state.dontCache = true,\r\n        addSnackObject: (state, snack) => state.snackbars.push(snack),\r\n        removeSnack: (state, snack) => state.snackbars.splice(state.snackbars.indexOf(snack), 1),\r\n\r\n        loadCategory: (state, {id, category}) => Vue.set(state.category, id, category),\r\n        extendCategory: (state, {id, playlists}) => state.category[id].playlists.push(...playlists),\r\n        loadPlaylist: (state, {id, playlist}) => Vue.set(state.playlist, id, playlist),\r\n        extendPlaylist: (state, {id, tracks}) => state.playlist[id].tracks.push(...tracks),\r\n        loadAlbum: (state, {id, album}) => Vue.set(state.album, id, album),\r\n        extendAlbum: (state, {id, tracks}) => state.album[id].tracks.push(...tracks),\r\n        loadInitialArtist: (state, {id, artist}) => Vue.set(state.artist, id, {\r\n            artist,\r\n            related: [],\r\n            tracks: [],\r\n            albums: {},\r\n        }),\r\n        loadArtist: (state, {id, artist}) => state.artist[id].artist = artist,\r\n        loadArtistRelated: (state, {id, related}) => state.artist[id].related = related,\r\n        loadArtistTracks: (state, {id, tracks}) => state.artist[id].tracks = tracks,\r\n        loadArtistAlbums: (state, {id, albums}) => state.artist[id].albums = albums,\r\n        loadUser: (state, {id, user}) => Vue.set(state.user, id, user),\r\n        extendUser: (state, {id, playlists}) => state.user[id].playlists.push(...playlists),\r\n\r\n        browseCategories: (state, categories) => state.browse.categories = categories,\r\n        browseGenres: (state, genres) => state.browse.genres = genres,\r\n\r\n        homeFeatured: (state, featured) => state.homePage.featured = featured,\r\n        homeRecent: (state, recent) => state.homePage.recent = recent,\r\n        homeNew: (state, newReleases) => state.homePage.newReleases = newReleases,\r\n        homePersonalized: (state, personalized) => state.homePage.personalized = personalized,\r\n\r\n        isRefreshing: (state, {type, value}) => state.isRefreshing[type] = value,\r\n        addUserPlaylist: (state, playlist) => state.library.playlists.push(playlist),\r\n        userPlaylists: (state, playlists) => state.library.playlists = playlists,\r\n\r\n        addToLibrary: (state, {\r\n            type,\r\n            item,\r\n            addAtStart = false\r\n        }) => state.library[type + 's'][addAtStart ? 'unshift' : 'push'](item),\r\n        removeFromLibrary: (state, {type, id}) => {\r\n            let index = state.library[type + 's'].findIndex(i => i.id === id)\r\n            if (index !== -1)\r\n                state.library[type + 's'].splice(index, 1)\r\n        },\r\n        setLibrary: (state, {type, items}) => state.library[type + 's'] = items,\r\n        userInfo: (state, userInfo) => state.userInfo = userInfo,\r\n\r\n        timeout: (state, id) => state.timeout = id,\r\n        windowWidth: (state, windowWidth) => state.windowWidth = windowWidth,\r\n        server: (state, server) => state.server = server,\r\n        auth: (state, auth) => state.auth = auth,\r\n    },\r\n    getters: {\r\n        isValidKeySet: () => ({spotifyId, spotifySecret, youtube}) =>\r\n            spotifyId !== \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\" &&\r\n            spotifySecret !== \"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\" &&\r\n            youtube !== \"cccccccccccc-dddddddddddddddddddddddddd\" &&\r\n            spotifyId.length === 32 &&\r\n            spotifySecret.length === 32 &&\r\n            youtube.length === 39,\r\n        isKeySet: (state, getters) => getters.isValidKeySet({...state.keys}),\r\n\r\n        notFoundUser: () => {\r\n            let i = Math.floor(Math.random() * 7) + 1;\r\n            return `img/user/${i}.png`;\r\n        },\r\n        notFoundImage: () => {\r\n            let i = Math.floor(Math.random() * 7) + 1;\r\n            return `img/notfound/${i}.png`;\r\n        },\r\n        likedImage: () => {\r\n            let i = Math.floor(Math.random() * 7) + 1;\r\n            return `img/liked/${i}.png`;\r\n        },\r\n        itemImage: (state, getters) => item => {\r\n            if (!item)\r\n                return getters.notFoundImage;\r\n            let type = item.type || 'category';\r\n            if (type === 'category') {\r\n                if (item.icons.length > 0)\r\n                    return item.icons[0].url;\r\n                else\r\n                    return getters.notFoundImage;\r\n            } else if (type === 'track') {\r\n                if (item.album && item.album.images && item.album.images.length > 0)\r\n                    return item.album.images[0].url;\r\n                else\r\n                    return getters.notFoundImage;\r\n            } else if (type === 'search') {\r\n                console.warn(\"Tried getting image for search\");\r\n                return '';\r\n            } else if (type === 'radio') {\r\n                console.warn(\"Tried getting image for radio\");\r\n                return '';\r\n            } else if (type === 'liked') {\r\n                return getters.likedImage;\r\n            } else {\r\n                if (item.images.length > 0)\r\n                    return item.images[0].url;\r\n                else\r\n                    return type === 'user' ? getters.notFoundUser : getters.notFoundImage;\r\n            }\r\n        },\r\n        isLoggedIn: state => {\r\n            return state.auth.code !== null &&\r\n                state.auth.token !== null &&\r\n                state.auth.refresh !== null &&\r\n                state.auth.expiryDate !== null;\r\n        },\r\n        isAuthExpired: (state, getters) => {\r\n            if (!getters.isLoggedIn) {\r\n                console.warn(\"Auth expiry check warning: User is not logged in\");\r\n                return true;\r\n            }\r\n            return new Date > state.auth.expiryDate;\r\n        },\r\n        urlName: () => name => {\r\n            let toEncode = name.toLowerCase().replace(/ /gi, '-').slice(0, 36);\r\n            let encoded = '';\r\n            try{\r\n                encoded = encodeURIComponent(toEncode);\r\n            }catch(e){\r\n                encoded = toEncode.replace(/[^a-z0-9]/gi,'');\r\n                console.warn(`Couldn't uri encode ${toEncode}, changed to ${encoded}`);\r\n            }\r\n            console.log({name, toEncode, encoded});\r\n            return encoded;\r\n        },\r\n        relativeItemUrl: (state, getters) => item => {\r\n            let type = item.type || 'category';\r\n            let name = type === 'user' ? item.display_name : item.name;\r\n            if (type === 'category')\r\n                return `${type}/${item.id}`;\r\n            if (type === 'radio')\r\n                return null;\r\n            if (type === 'search')\r\n                return item.to;\r\n            if (type === 'liked')\r\n                return '/library/tracks';\r\n            return `/${type}/${getters.urlName(name)}/${item.id}`;\r\n        },\r\n        shareUrl: (state, getters) => item => {\r\n            let baseUrl = state.platform.type === 'web' ?\r\n                `${location.origin}${location.pathname}` :\r\n                'https://ruurd.dev/vuemusic/';\r\n            return `${baseUrl}#${getters.relativeItemUrl(item)}`;\r\n        },\r\n        spotifyShareUrl: (state, getters) => item => {\r\n            let type = item.type || 'category';\r\n            let baseUrl = 'https://open.spotify.com/';\r\n            return `${baseUrl}${type}/${item.id}`;\r\n        },\r\n        isArtistFollowed: state => artist => state.library.artists.find(a => a.id === artist.id),\r\n        isTrackFollowed: state => track => state.library.tracks.find(a => a.id === track.id),\r\n        isPlaylistFollowed: state => playlist => state.library.playlists.find(a => a.id === playlist.id),\r\n        isAlbumFollowed: state => album => state.library.albums.find(a => a.id === album.id),\r\n    },\r\n    actions: {\r\n        initialize: async ({commit, state, dispatch}) => {\r\n            let lsKeys = await keys();\r\n            let getKvPair = async lsKey => {\r\n                let value = await get(lsKey);\r\n                let stateKey = lsKey.substring('state.'.length);\r\n                return {key: stateKey, value};\r\n            }\r\n            let kvPairs = await Promise.all(lsKeys.filter(key => key.startsWith('state.')).map(getKvPair));\r\n            kvPairs.forEach(({key, value}) => commit('setStateValue', {key, value}));\r\n\r\n            state.platform.downloader.apiKey = state.keys.youtube;\r\n            await dispatch('processAuth');\r\n            await dispatch('initializeMedia');\r\n            await dispatch('initializePlatform');\r\n        },\r\n\r\n        cacheAll: async ({commit, dispatch}) => {\r\n            await Promise.all([\r\n                dispatch('cacheState'),\r\n                dispatch('cacheMedia'),\r\n            ]);\r\n        },\r\n        cacheState: async ({state}) => {\r\n            let cachedFields = [\"auth\", \"homePage\", \"browse\", \"userInfo\", \"library\", \"playlist\",\r\n                \"album\", \"artist\", \"category\", \"user\", \"keys\"];\r\n\r\n            await Promise.all(cachedFields.map(field => set('state.' + field, state[field])));\r\n            console.log(\"State cache complete\");\r\n        },\r\n\r\n        clearCache: async ({state, commit}) => {\r\n            commit('dontCache');\r\n            localStorage.clear();\r\n            await clear();\r\n            location.reload();\r\n        },\r\n\r\n        getAuthByRefreshToken: async ({state}, refreshToken) => {\r\n            console.log('Refresh using refreshToken', refreshToken);\r\n            let result = await (await fetch('https://accounts.spotify.com/api/token', {\r\n                method: 'post',\r\n                body: `grant_type=refresh_token&refresh_token=${refreshToken}&client_id=${state.keys.spotifyId}&client_secret=${state.keys.spotifySecret}`,\r\n                headers: {'Content-Type': 'application/x-www-form-urlencoded',}\r\n            })).text();\r\n            try {\r\n                return JSON.parse(result);\r\n            } catch (e) {\r\n                console.log(\"Error\", e.message, \"result = \", result);\r\n            }\r\n        },\r\n        getAuthByCode: async ({state}, {redirectUrl, code}) => {\r\n            console.log('Getting auth using code', {redirectUrl, code});\r\n            let result = await (await fetch(`${state.authUrl}api/token`, {\r\n                method: 'post',\r\n                body: `grant_type=authorization_code&code=${code}&redirect_uri=${redirectUrl}&client_id=` +\r\n                    `${state.keys.spotifyId}&client_secret=${state.keys.spotifySecret}`,\r\n                headers: {'Content-Type': 'application/x-www-form-urlencoded',}\r\n            })).text();\r\n            try {\r\n                console.log(result);\r\n                return JSON.parse(result);\r\n            } catch (e) {\r\n                console.log(\"Error\", e.message, \"t = \", result);\r\n            }\r\n        },\r\n\r\n        spotifyLogin: async ({dispatch, commit}) => {\r\n            let auth = await dispatch('firstLogin');\r\n            console.log(\"Auth result from 'firstLogin'\", auth);\r\n            commit('auth', auth);\r\n            await dispatch('cacheState');\r\n            await dispatch('processAuth');\r\n        },\r\n        loginByRefreshToken: async ({state, dispatch, commit}) => {\r\n            if (!state.auth.refresh) {\r\n                console.warn(\"Couldn't get new token, refresh token isn't set\", state.auth);\r\n                return;\r\n            }\r\n            let {access_token, expires_in} = await dispatch('getAuthByRefreshToken', state.auth.refresh);\r\n            let auth = {...state.auth};\r\n            auth.token = access_token;\r\n            auth.expiryDate = (+new Date) + expires_in * 1000;\r\n            commit('auth', auth);\r\n            await dispatch('cacheState');\r\n            await dispatch('processAuth');\r\n        },\r\n        spotifyLogout: async ({state, commit, dispatch}) => {\r\n            commit('auth', {\r\n                code: null,\r\n                token: null,\r\n                refresh: null,\r\n                expiryDate: null,\r\n            });\r\n            commit('userInfo', {\r\n                id: '',\r\n                name: '',\r\n                mail: '',\r\n                country: '',\r\n                followers: 0,\r\n                avatar: 'img/no-user.jpg',\r\n            });\r\n            await dispatch('cacheState');\r\n            clearTimeout(state.timeout);\r\n        },\r\n        addSnack: async ({state, commit}, {text, timeout = 3000}) => {\r\n            let snack = {text, open: true, timeout};\r\n            commit('addSnackObject', snack);\r\n            return new Promise(resolve => {\r\n                setTimeout(() => {\r\n                    commit('removeSnack', snack);\r\n                    resolve();\r\n                }, timeout + 500);\r\n            });\r\n        },\r\n        share: async ({dispatch, getters}, {item, copy, urlType = 'vuemusic'}) => {\r\n            let url = urlType === 'spotify' ? getters.spotifyShareUrl(item) : getters.shareUrl(item);\r\n            if (navigator.share instanceof Function) {\r\n                let type = item.type === null || item.type === undefined ? 'category' : item.type;\r\n                try {\r\n                    await navigator.share({\r\n                        title: type.substr(0, 1).toUpperCase() + type.substr(1),\r\n                        text: item.name === null || item.name === undefined ? item.display_name : item.name,\r\n                        url,\r\n                    });\r\n                } catch (e) {\r\n                    console.warn(e)\r\n                }\r\n            } else {\r\n                await copy(url);\r\n                await dispatch('addSnack', {text: 'Share URL copied to clipboard!'});\r\n            }\r\n        },\r\n        processAuth: async ({dispatch, commit, state}) => {\r\n            let now = new Date();\r\n            if (state.auth.expiryDate > now) {\r\n                state.api.setAccessToken(state.auth.token);\r\n                state.events.emit('accessToken');\r\n\r\n                let msUntilExpire = state.auth.expiryDate - now;\r\n                await dispatch('initializeSpotify');\r\n                commit('timeout', setTimeout(async () => {\r\n                    await dispatch('loginByRefreshToken');\r\n                }, msUntilExpire - 1000 * 60 * 5));\r\n            } else {\r\n                console.warn(\"Auth has expired, getting new token\");\r\n                //auth is expired\r\n                await dispatch('loginByRefreshToken');\r\n            }\r\n        },\r\n        waitFor: async ({state}, event) => {\r\n            return new Promise(resolve => {\r\n                state.events.on(event, resolve);\r\n            });\r\n        },\r\n        awaitAuth: async ({dispatch, commit, state}) => {\r\n            if (state.api.getAccessToken() !== null)\r\n                return;\r\n            return await dispatch('waitFor', 'accessToken');\r\n        },\r\n        findPagination: ({}, object) => {\r\n            if (object === null)\r\n                return false;\r\n\r\n            let getKeyPath;\r\n            getKeyPath = ({keys: keyPath = [], o}) => {\r\n                if (o !== null && o.hasOwnProperty('next') && o.hasOwnProperty('items'))\r\n                    return [true, keyPath];\r\n                if (typeof o !== 'object' || o === null)\r\n                    return [false, keyPath.slice(0, -1)];\r\n\r\n                for (let key in o) {\r\n                    if (!o.hasOwnProperty(key))\r\n                        continue;\r\n                    let result;\r\n                    [result, keyPath] = getKeyPath({keys: keyPath.concat(key), o: o[key]});\r\n                    if (result)\r\n                        return [true, keyPath];\r\n                }\r\n                return [false, keyPath.slice(0, -1)];\r\n            }\r\n\r\n            let [success, keyPath] = getKeyPath({o: object});\r\n\r\n            if (!success)\r\n                return false;\r\n            return r => {\r\n                for (let key of keyPath)\r\n                    r = r[key];\r\n                return r;\r\n            }\r\n        },\r\n        async* retrieveSpotifyArray({state, dispatch}, apiFunction) {\r\n            let getData = () => apiFunction()\r\n\r\n            while (true) {\r\n                let result = await getData();\r\n                let pageObject = await dispatch('findPagination', result);\r\n\r\n                if (result !== null)\r\n                    yield result;\r\n\r\n                if (result === null || pageObject === false || pageObject(result).next === null)\r\n                    break;\r\n\r\n                let nextUrl = pageObject(result).next;\r\n                if (nextUrl === undefined)\r\n                    console.warn(\"next url is undefined\");\r\n\r\n                getData = () => state.api.getGeneric(nextUrl);\r\n            }\r\n        },\r\n        initializeSpotify: async ({state, commit, dispatch}) => {\r\n            await dispatch('refreshUserInfo');\r\n            let doneCount = 0;\r\n            let libLoaded = state.library.tracks.length !== 0;\r\n            let checkDone = async () => {\r\n                doneCount++;\r\n                if (doneCount === (libLoaded ? 3 : 4)) {\r\n                    await dispatch('cacheState');\r\n                }\r\n            }\r\n            dispatch('refreshUserData').then(checkDone);\r\n            dispatch('refreshUserData', 'artist').then(checkDone);\r\n            dispatch('refreshUserData', 'album').then(checkDone);\r\n            if (!libLoaded) {\r\n                dispatch('refreshUserData', 'track').then(checkDone);\r\n            }\r\n        },\r\n        refreshUserInfo: async ({commit, state, getters}) => {\r\n            let me = await state.api.getMe();\r\n            commit('userInfo', {\r\n                id: me.id,\r\n                name: me.display_name,\r\n                mail: me.email,\r\n                country: me.country,\r\n                followers: me.followers,\r\n                avatar: me.images.length === 0 ? getters.notFoundUser : me.images[0].url,\r\n            });\r\n        },\r\n        refreshUserData: async ({commit, state, dispatch}, type = 'playlist') => {\r\n            if (!['playlist', 'album', 'track', 'artist'].includes(type))\r\n                console.warn(\"Wrong type set for refreshUserData!\");\r\n\r\n            if (state.isRefreshing[type]) {\r\n                console.info(\"This library type is already refreshing, waiting for that to finish\");\r\n                await dispatch('waitFor', 'refreshed' + type);\r\n                return;\r\n            }\r\n            await dispatch('awaitAuth');\r\n            commit('isRefreshing', {type, value: true});\r\n\r\n            let isInitial = state.library[type + 's'].length === 0;\r\n\r\n            if (state.userInfo.id === '')\r\n                await dispatch('refreshUserInfo');\r\n\r\n            let retrieval, page = r => r;\r\n            switch (type) {\r\n                case 'playlist':\r\n                    retrieval = () => state.api.getUserPlaylists(state.userInfo.id, {limit: 50});\r\n                    break;\r\n                case 'album':\r\n                    retrieval = () => state.api.getMySavedAlbums();\r\n                    break;\r\n                case 'artist':\r\n                    retrieval = () => state.api.getFollowedArtists();\r\n                    page = r => r.artists;\r\n                    break;\r\n                case 'track':\r\n                    retrieval = () => state.api.getMySavedTracks({limit: 50});\r\n                    break;\r\n            }\r\n\r\n            let items = [];\r\n            let addToLib = item => {\r\n                if (isInitial)\r\n                    commit('addToLibrary', {type, item});\r\n                else items.push(item);\r\n            }\r\n\r\n            for await(let batch of await dispatch('retrieveSpotifyArray', retrieval)) {\r\n                for (let item of page(batch).items) {\r\n                    if (type === 'track')\r\n                        addToLib(item.track);\r\n                    else if (type === 'album')\r\n                        addToLib(item.album);\r\n                    else\r\n                        addToLib(item);\r\n                }\r\n            }\r\n            if (!isInitial)\r\n                commit('setLibrary', {type, items});\r\n\r\n            state.events.emit('refreshed' + type);\r\n            commit('isRefreshing', {type, value: false});\r\n        },\r\n        refreshHomePage: async ({commit, state, dispatch}) => {\r\n            await dispatch('awaitAuth');\r\n\r\n            //Featured playlists\r\n            let featured = await state.api.getFeaturedPlaylists({limit: 50});\r\n            commit('homeFeatured', {\r\n                title: featured.message,\r\n                playlists: featured.playlists.items,\r\n            });\r\n\r\n            //Personalized playlists\r\n            let personalized;\r\n            if (state.library.playlists.length === 0) {\r\n                await dispatch('refreshUserData');\r\n            }\r\n            const discoverNames = ['Discover Weekly', 'Release Radar', ...[...Array(10)].map((_, i) => 'Daily Mix ' + (i + 1))];\r\n\r\n            personalized = state.library.playlists.filter(playlist => discoverNames\r\n                    .findIndex(name => playlist.name.includes(name)) !== -1 &&\r\n                playlist.owner.display_name === 'Spotify'\r\n            );\r\n            personalized.sort((a, b) => {\r\n                let aI = discoverNames.findIndex(name => a.name.includes(name));\r\n                let bI = discoverNames.findIndex(name => b.name.includes(name));\r\n                return aI - bI;\r\n            });\r\n            if (personalized.length > 0) {\r\n                commit('homePersonalized', personalized);\r\n            }\r\n\r\n            //New releases\r\n            let newReleases = await state.api.getNewReleases({limit: 50});\r\n            commit('homeNew', newReleases.albums.items);\r\n\r\n            //Recently played playlists or albums\r\n            if (localStorage.getItem('recentlyPlayed') !== null)\r\n                commit('homeRecent', JSON.parse(localStorage.recentlyPlayed));\r\n        },\r\n        refreshBrowsePage: async ({dispatch, commit, state}) => {\r\n            await dispatch('awaitAuth');\r\n\r\n            state.api.getCategories({limit: 50})\r\n                .then(c => commit('browseCategories', c.categories.items));\r\n            state.api.getAvailableGenreSeeds().then(g => {\r\n                commit('browseGenres', g.genres.map(genre =>\r\n                    genre.split('-')\r\n                        .map(w => w\r\n                                .substr(0, 1)\r\n                                .toUpperCase() +\r\n                            w.substr(1))\r\n                        .join(' ')\r\n                ));\r\n            });\r\n        },\r\n        loadPlaylist: async ({dispatch, commit, state}, id) => {\r\n            await dispatch('awaitAuth');\r\n\r\n            let retrieval = () => state.api.getPlaylist(id);\r\n            for await(let batch of await dispatch('retrieveSpotifyArray', retrieval)) {\r\n                if (batch.items) {\r\n                    commit('extendPlaylist', {\r\n                        id, tracks: batch.items\r\n                            .map(t => t.track)\r\n                            .filter(t => t !== null)\r\n                    });\r\n                } else {\r\n                    commit('loadPlaylist', {\r\n                        id, playlist: {\r\n                            ...batch, tracks: batch.tracks.items\r\n                                .map(t => t.track)\r\n                                .filter(t => t !== null)\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        loadAlbum: async ({dispatch, commit, state}, id) => {\r\n            await dispatch('awaitAuth');\r\n            let retrieval = () => state.api.getAlbum(id);\r\n            for await(let batch of await dispatch('retrieveSpotifyArray', retrieval)) {\r\n                if (batch.items) {\r\n                    batch.items.forEach(i => i.album = {\r\n                        images: state.album[id].images,\r\n                        name: state.album[id].name,\r\n                        id: state.album[id].id,\r\n                    });\r\n                    commit('extendAlbum', {id, tracks: batch.items});\r\n                } else {\r\n                    let album = {...batch};\r\n                    album.tracks = album.tracks.items;\r\n                    album.tracks.forEach(i => i.album = {\r\n                        images: album.images,\r\n                        name: album.name,\r\n                        id: album.id,\r\n                    });\r\n                    commit('loadAlbum', {id, album});\r\n                }\r\n            }\r\n        },\r\n        loadCategory: async ({state, commit, dispatch}, id) => {\r\n            await dispatch('awaitAuth');\r\n            if (!state.category.hasOwnProperty(id)) {\r\n                let category = {playlists: [], ...(await state.api.getCategory(id))};\r\n                commit('loadCategory', {id, category});\r\n            }\r\n\r\n            let retrieval = () => state.api.getCategoryPlaylists(id);\r\n            for await(let batch of await dispatch('retrieveSpotifyArray', retrieval)) {\r\n                if (batch.playlists) {\r\n                    commit('extendCategory', {id, playlists: batch.playlists.items});\r\n                } else {\r\n                    commit('extendCategory', {id, playlists: batch.items});\r\n                }\r\n            }\r\n        },\r\n        loadArtist: async ({dispatch, commit, state}, id) => {\r\n            await dispatch('awaitAuth');\r\n            let isInitial = !state.artist.hasOwnProperty(id);\r\n\r\n            let artist = await state.api.getArtist(id);\r\n            if (isInitial)\r\n                commit('loadInitialArtist', {id, artist});\r\n            else\r\n                commit('loadArtist', {id, artist});\r\n\r\n            state.api.getArtistRelatedArtists(id).then(related => {\r\n                commit('loadArtistRelated', {id, related: related.artists});\r\n            });\r\n\r\n            state.api.getArtistTopTracks(id, 'from_token').then(tracks => {\r\n                commit('loadArtistTracks', {id, tracks: tracks.tracks});\r\n            });\r\n\r\n            let retrieval = () => state.api.getArtistAlbums(id);\r\n            let albums = []\r\n            for await(let batch of await dispatch('retrieveSpotifyArray', retrieval)) {\r\n                albums.push(...batch.items);\r\n            }\r\n            commit('loadArtistAlbums', {id, albums});\r\n        },\r\n        loadUser: async ({dispatch, commit, state}, id) => {\r\n            await dispatch('awaitAuth');\r\n            let isInitial = state.user[id] === undefined;\r\n            let user = await state.api.getUser(id);\r\n\r\n            if (isInitial)\r\n                commit('loadUser', {id, user: {...user, playlists: []}});\r\n            let playlists = (await state.api.getUserPlaylists(id, {limit: 50})).items;\r\n            if (isInitial)\r\n                commit('extendUser', {id, playlists});\r\n            else\r\n                commit('loadUser', {id, user: {...user, playlists}});\r\n        },\r\n        loadTrack: async ({state, dispatch}, id) => {\r\n            await dispatch('awaitAuth');\r\n            return await state.api.getTrack(id);\r\n        },\r\n        followPlaylist: async ({state, dispatch}, playlist) => {\r\n            await state.api.followPlaylist(playlist.id);\r\n            await dispatch('refreshUserData', 'playlist');\r\n        },\r\n        unfollowPlaylist: async ({state, dispatch}, playlist) => {\r\n            await state.api.unfollowPlaylist(playlist.id);\r\n            await dispatch('refreshUserData', 'playlist');\r\n            await dispatch('loadUser', state.userInfo.id);\r\n        },\r\n        followArtist: async ({state, dispatch}, artist) => {\r\n            await state.api.followArtists([artist.id]);\r\n            await dispatch('refreshUserData', 'artist');\r\n        },\r\n        unfollowArtist: async ({state, dispatch}, artist) => {\r\n            await state.api.unfollowArtists([artist.id]);\r\n            await dispatch('refreshUserData', 'artist');\r\n        },\r\n        followAlbum: async ({state, dispatch}, album) => {\r\n            await state.api.addToMySavedAlbums([album.id]);\r\n            await dispatch('refreshUserData', 'album');\r\n        },\r\n        unfollowAlbum: async ({state, dispatch}, album) => {\r\n            await state.api.removeFromMySavedAlbums([album.id]);\r\n            await dispatch('refreshUserData', 'album');\r\n        },\r\n        toggleFollowCurrentTrack: async ({state, dispatch}) => {\r\n            let track = state.media.track;\r\n            if (track === null) return;\r\n\r\n            let [saved] = await state.api.containsMySavedTracks([track.id]);\r\n            if (saved)\r\n                await dispatch('unfollowTrack', track);\r\n            else\r\n                await dispatch('followTrack', track);\r\n            return !saved;\r\n        },\r\n        followTrack: async ({state, dispatch, commit}, track) => {\r\n            await state.api.addToMySavedTracks([track.id]);\r\n            commit('addToLibrary', {type: 'track', item: track, addAtStart: true});\r\n        },\r\n        unfollowTrack: async ({state, dispatch, commit}, track) => {\r\n            await state.api.removeFromMySavedTracks([track.id]);\r\n            commit('removeFromLibrary', {type: 'track', id: track.id});\r\n        },\r\n        addToPlaylist: async ({state, dispatch}, {track, playlist}) => {\r\n            await dispatch('loadPlaylist', playlist.id);\r\n            let existingTracks = state.playlist[playlist.id].tracks;\r\n\r\n            if (existingTracks.findIndex(t => t.id === track.id) !== -1) {\r\n                dispatch('addSnack', {text: 'Track is already in playlist'}).then();\r\n                return;\r\n            }\r\n            try {\r\n                await state.api.addTracksToPlaylist(playlist.id, [track.uri]);\r\n                await dispatch('loadPlaylist', playlist.id);\r\n                dispatch('addSnack', {text: 'Added to playlist!'}).then();\r\n            } catch (e) {\r\n                console.warn(e);\r\n                dispatch('addSnack', {text: 'Could not add track to this playlist'}).then();\r\n            }\r\n        },\r\n        removeFromPlaylist: async ({state, dispatch}, {track, playlist}) => {\r\n            try {\r\n                await state.api.removeTracksFromPlaylist(playlist.id, [track.uri]);\r\n                await dispatch('loadPlaylist', playlist.id);\r\n            } catch (e) {\r\n                console.warn(e);\r\n                dispatch('addSnack', {text: 'Could not remove track from this playlist'}).then();\r\n            }\r\n        },\r\n        createPlaylist: async ({state, dispatch, commit}, name) => {\r\n            let playlist = await state.api.createPlaylist(state.userInfo.id, {name});\r\n            await dispatch('loadPlaylist', playlist.id);\r\n            await dispatch('refreshUserData', 'playlist');\r\n            return state.playlist[playlist.id];\r\n        },\r\n        getRadioTracks: async ({state, dispatch}, options) => {\r\n            let firstTrack = null;\r\n            let keys = Object.keys(options);\r\n            if (keys.length === 1 && keys[0] === 'seed_tracks') {\r\n                let tracks = options['seed_tracks'].split(',');\r\n                if (tracks.length === 1)\r\n                    firstTrack = await dispatch('loadTrack', tracks[0]);\r\n            }\r\n            options.limit = firstTrack ? 99 : 100;\r\n            let radioTracks = (await state.api.getRecommendations(options)).tracks;\r\n            if (firstTrack)\r\n                return [firstTrack, ...radioTracks];\r\n            return radioTracks;\r\n        },\r\n        getItem: async ({state, dispatch}, item) => {\r\n            let type = item.type || 'category';\r\n            if (item.tracks && item.tracks.length > 0)\r\n                return item;\r\n            if (!state[type][item.id]) {\r\n                await dispatch('load' + type[0].toUpperCase() + type.slice(1), item.id);\r\n            }\r\n            return state[type][item.id];\r\n        },\r\n        getContextItem: async ({state, dispatch}, item) => {\r\n            if (item.type === 'track') {\r\n                return {...item, tracks: [item]};\r\n            }\r\n            if (item.tracks && item.tracks.length > 0)\r\n                return item;\r\n            let completeItem = await dispatch('getItem', item);\r\n            let type = item.type || 'category';\r\n            if (type === 'category') {\r\n                let randomPlaylist = completeItem.playlists[Math.floor(Math.random() * completeItem.playlists.length)];\r\n                return await dispatch('getContextItem', randomPlaylist);\r\n            }\r\n            if (type === 'artist') {\r\n                return {...completeItem.artist, tracks: completeItem.tracks};\r\n            }\r\n            return completeItem;\r\n        },\r\n    },\r\n    modules: {platform, media, search, theme}\r\n})\r\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport './registerServiceWorker'\r\nimport router from './plugins/router'\r\nimport store from './plugins/vuex/store'\r\nimport vuetify from './plugins/vuetify';\r\n\r\nimport PerfectScrollbar from 'vue2-perfect-scrollbar'\r\nimport 'vue2-perfect-scrollbar/dist/vue2-perfect-scrollbar.css'\r\n\r\nVue.use(PerfectScrollbar)\r\n\r\nimport {RecycleScroller} from 'vue-virtual-scroller';\r\n\r\nVue.component('RecycleScroller', RecycleScroller);\r\nimport 'vue-virtual-scroller/dist/vue-virtual-scroller.css';\r\n\r\n\r\nimport VueClipboard from 'vue-clipboard2'\r\nVue.use(VueClipboard)\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n    router,\r\n    store,\r\n    vuetify,\r\n    render: h => h(App)\r\n}).$mount('#app')\r\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-lazy',{staticClass:\"item-square\",attrs:{\"width\":(_vm.big ? 240 : _vm.small ? 80 : 180),\"min-height\":_vm.big ? 240 : _vm.small ? 80 : 180}},[_c('router-link',{attrs:{\"tag\":\"span\",\"to\":_vm.$store.getters.relativeItemUrl(_vm.item)}},[_c('div',{staticClass:\"image\",class:{big: _vm.big, small: _vm.small},style:({\n                backgroundImage: `url(${_vm.$store.getters.itemImage(_vm.item)})`,\n                borderRadius: _vm.type === 'artist' ? '50%' : '5px',\n             })}),_c('div',{staticClass:\"play-button\",class:{big: _vm.big, small: _vm.small},style:({\n                borderRadius: _vm.type === 'artist' ? '50%' : '5px',\n             })},[(!_vm.itemIsPlaying && !_vm.$store.state.isTouch)?_c('v-btn',{attrs:{\"loading\":_vm.playLoading,\"fab\":\"\",\"small\":\"\",\"color\":\"primary\"},on:{\"click\":_vm.play}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-play\")])],1):(!_vm.$store.state.isTouch)?_c('v-btn',{attrs:{\"loading\":_vm.playLoading,\"fab\":\"\",\"small\":\"\",\"color\":\"primary\"},on:{\"click\":_vm.pause}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-pause\")])],1):_vm._e(),(!_vm.hideMenu && !_vm.$store.state.isTouch)?_c('item-menu',{attrs:{\"color\":_vm.type==='artist' ? 'default' : 'white',\"fab\":_vm.type==='artist',\"item\":_vm.item}}):_vm._e()],1),(!_vm.noTitle)?_c('div',{staticClass:\"text\",class:{big: _vm.big,small: _vm.small},style:({textAlign: _vm.type==='artist'?'center':'left'})},[_c('p',{staticClass:\"preview-title\"},[_vm._v(_vm._s(_vm.item.name))]),(_vm.item.hasOwnProperty('description'))?_c('p',{staticClass:\"preview-description\",attrs:{\"title\":_vm.item.description},domProps:{\"innerHTML\":_vm._s(_vm.item.description)}}):_vm._e(),(_vm.showYear)?_c('p',{staticClass:\"preview-year\"},[_vm._v(_vm._s(new Date(_vm.item.release_date).getFullYear()))]):_vm._e()]):_vm._e()])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-lazy class=\"item-square\" :width=\"(big ? 240 : small ? 80 : 180)\" :min-height=\"big ? 240 : small ? 80 : 180\">\r\n        <router-link tag=\"span\" :to=\"$store.getters.relativeItemUrl(item)\">\r\n            <div class=\"image\" :class=\"{big, small}\"\r\n                 :style=\"{\r\n                    backgroundImage: `url(${$store.getters.itemImage(item)})`,\r\n                    borderRadius: type === 'artist' ? '50%' : '5px',\r\n                 }\">\r\n            </div>\r\n            <div class=\"play-button\" :class=\"{big, small}\"\r\n                 :style=\"{\r\n                    borderRadius: type === 'artist' ? '50%' : '5px',\r\n                 }\">\r\n                <v-btn :loading=\"playLoading\" fab small color=\"primary\" @click=\"play\" v-if=\"!itemIsPlaying && !$store.state.isTouch\">\r\n                    <v-icon color=\"white\">mdi-play</v-icon>\r\n                </v-btn>\r\n                <v-btn :loading=\"playLoading\" fab small color=\"primary\" @click=\"pause\" v-else-if=\"!$store.state.isTouch\">\r\n                    <v-icon color=\"white\">mdi-pause</v-icon>\r\n                </v-btn>\r\n                <item-menu :color=\"type==='artist' ? 'default' : 'white'\"\r\n                           :fab=\"type==='artist'\"\r\n                           v-if=\"!hideMenu && !$store.state.isTouch\"\r\n                           :item=\"item\"></item-menu>\r\n            </div>\r\n            <div class=\"text\" v-if=\"!noTitle\" :class=\"{big,small}\"\r\n                 :style=\"{textAlign: type==='artist'?'center':'left'}\">\r\n                <p class=\"preview-title\">{{item.name}}</p>\r\n                <p\r\n                        :title=\"item.description\"\r\n                        v-if=\"item.hasOwnProperty('description')\"\r\n                        class=\"preview-description\"\r\n                        v-html=\"item.description\"/>\r\n                <p class=\"preview-year\" v-if=\"showYear\">{{new Date(item.release_date).getFullYear()}}</p>\r\n            </div>\r\n        </router-link>\r\n    </v-lazy>\r\n</template>\r\n\r\n<script>\r\n    import ShareMenuItem from \"./ShareMenuItem\";\r\n    import FollowMenuItem from \"./FollowMenuItem\";\r\n    import ItemMenu from \"./ItemMenu\";\r\n\r\n    export default {\r\n        name: \"ItemSquare\",\r\n        components: {ItemMenu, FollowMenuItem, ShareMenuItem},\r\n        props: {\r\n            big: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            small: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            item: {\r\n                type: Object,\r\n                default: null,\r\n            },\r\n            showYear: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            noTitle: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            hideMenu: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n        },\r\n        data: () => ({\r\n            playLoading: false,\r\n        }),\r\n        methods: {\r\n            async pause(e) {\r\n                e.stopPropagation();\r\n                await this.$store.dispatch('pause');\r\n            },\r\n            async play(e) {\r\n                e.stopPropagation();\r\n                if (this.itemIsLoaded) {\r\n                    return await this.$store.dispatch('play');\r\n                }\r\n                this.playLoading = true;\r\n                await this.$store.dispatch('playItem', {item: this.item});\r\n                this.playLoading = false;\r\n            },\r\n        },\r\n        computed: {\r\n            itemIsLoaded() {\r\n                if (!this.$store.getters.isTrackSet)\r\n                    return false;\r\n                let contextItem = this.$store.state.media.contextItem;\r\n                return contextItem.type === this.item.type && contextItem.id === this.item.id;\r\n            },\r\n            itemIsPlaying() {\r\n                if (!this.itemIsLoaded)\r\n                    return false;\r\n                if (this.$store.state.media.playing)\r\n                    return true;\r\n            },\r\n            type() {\r\n                if (!this.item.type)\r\n                    return 'category';\r\n                return this.item.type;\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .item-square {\r\n        cursor: pointer;\r\n        display: inline-flex;\r\n    }\r\n\r\n    .image {\r\n        width: 180px;\r\n        height: 180px;\r\n        background-size: cover;\r\n        background-position: center;\r\n        background-repeat: no-repeat;\r\n        border-radius: 5px;\r\n        box-shadow: 0 4px 10px 0 rgba(0, 0, 0, 0.1);\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n\r\n    .image.big {\r\n        height: 240px !important;\r\n        width: 240px !important;\r\n    }\r\n\r\n    .image.small {\r\n        height: 80px !important;\r\n        width: 80px !important;\r\n    }\r\n\r\n    .play-button:hover {\r\n        opacity: 1;\r\n    }\r\n\r\n    .play-button {\r\n        background-color: rgba(0, 0, 0, 0.2);\r\n        border-radius: 5px;\r\n        opacity: 0;\r\n        width: 180px;\r\n        height: 180px;\r\n        margin-top: -180px;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: flex-end;\r\n        transition: opacity 0.2s;\r\n        padding: 15px;\r\n    }\r\n\r\n    .play-button.small {\r\n        height: 80px !important;\r\n        width: 80px !important;\r\n        margin-top: -80px;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n\r\n    .play-button.big {\r\n        height: 240px !important;\r\n        width: 240px !important;\r\n        margin-top: -240px;\r\n    }\r\n\r\n    .text {\r\n        max-width: 180px;\r\n        padding: 5px;\r\n    }\r\n\r\n    .text.big {\r\n        max-width: 240px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .text.small {\r\n        max-width: 80px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .preview-title {\r\n        font-weight: bold;\r\n        font-size: 14px;\r\n        margin: 0;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n    }\r\n\r\n    .preview-description {\r\n        font-size: 14px;\r\n        opacity: 0.7;\r\n        font-weight: normal;\r\n        margin-top: 3px;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n        margin-bottom: 0px;\r\n    }\r\n\r\n    .preview-year {\r\n        font-size: 14px;\r\n        opacity: 0.7;\r\n        font-weight: normal;\r\n        margin-top: 3px;\r\n        margin-bottom: 0px;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n    }\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemSquare.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemSquare.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ItemSquare.vue?vue&type=template&id=3a24db36&scoped=true&\"\nimport script from \"./ItemSquare.vue?vue&type=script&lang=js&\"\nexport * from \"./ItemSquare.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ItemSquare.vue?vue&type=style&index=0&id=3a24db36&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3a24db36\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-list-item',_vm._g(_vm._b({},'v-list-item',attrs,false),on),[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-share\")])],1),_c('v-list-item-title',[_vm._v(\"Share\")])],1)]}}])},[_c('v-list',[_c('v-list-item',{on:{\"click\":_vm.share}},[_c('v-list-item-icon',[(_vm.loading)?_c('v-progress-circular',{attrs:{\"size\":\"20\",\"indeterminate\":\"\",\"width\":\"1\"}}):_c('v-icon',[_vm._v(\"mdi-share\")])],1),_c('v-list-item-title',[_vm._v(\"Share Vue Music link\")])],1),(_vm.item.type !== undefined && _vm.item.type !== 'category')?_c('v-list-item',{on:{\"click\":_vm.shareSpotify}},[_c('v-list-item-icon',[(_vm.loadingSpotify)?_c('v-progress-circular',{attrs:{\"size\":\"20\",\"indeterminate\":\"\",\"width\":\"1\"}}):_c('v-icon',[_vm._v(\"mdi-spotify\")])],1),_c('v-list-item-title',[_vm._v(\"Share Spotify™ link\")])],1):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-menu offset-y>\r\n        <template v-slot:activator=\"{ on, attrs }\">\r\n            <v-list-item\r\n                    v-bind=\"attrs\"\r\n                    v-on=\"on\">\r\n                <v-list-item-icon>\r\n                    <v-icon>mdi-share</v-icon>\r\n                </v-list-item-icon>\r\n                <v-list-item-title>Share</v-list-item-title>\r\n            </v-list-item>\r\n        </template>\r\n        <v-list>\r\n            <v-list-item @click=\"share\">\r\n                <v-list-item-icon>\r\n                    <v-progress-circular size=\"20\" indeterminate width=\"1\" v-if=\"loading\"></v-progress-circular>\r\n                    <v-icon v-else>mdi-share</v-icon>\r\n                </v-list-item-icon>\r\n                <v-list-item-title>Share Vue Music link</v-list-item-title>\r\n            </v-list-item>\r\n            <v-list-item @click=\"shareSpotify\" v-if=\"item.type !== undefined && item.type !== 'category'\">\r\n                <v-list-item-icon>\r\n                    <v-progress-circular size=\"20\" indeterminate width=\"1\" v-if=\"loadingSpotify\"></v-progress-circular>\r\n                    <v-icon v-else>mdi-spotify</v-icon>\r\n                </v-list-item-icon>\r\n                <v-list-item-title>Share Spotify™ link</v-list-item-title>\r\n            </v-list-item>\r\n        </v-list>\r\n    </v-menu>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"ShareMenuItem\",\r\n        props: {\r\n            item: {\r\n                type: Object,\r\n                default: null,\r\n            }\r\n        },\r\n        data: () => ({\r\n            loading: false,\r\n            loadingSpotify: false,\r\n        }),\r\n        methods: {\r\n            async share() {\r\n                this.$emit('action');\r\n                // this.$refs.shareParent.isActive=false;\r\n                this.loading = true;\r\n                await this.$store.dispatch('share', {\r\n                    item: this.item,\r\n                    copy: this.$copyText,\r\n                });\r\n                this.loading = false;\r\n            },\r\n            async shareSpotify() {\r\n                this.$emit('action');\r\n                this.loadingSpotify = true;\r\n                await this.$store.dispatch('share', {\r\n                    item: this.item,\r\n                    copy: this.$copyText,\r\n                    urlType: 'spotify',\r\n                });\r\n                this.loadingSpotify = false;\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShareMenuItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShareMenuItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShareMenuItem.vue?vue&type=template&id=b3c8ae50&scoped=true&\"\nimport script from \"./ShareMenuItem.vue?vue&type=script&lang=js&\"\nexport * from \"./ShareMenuItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b3c8ae50\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArtistsSpan.vue?vue&type=style&index=0&id=7560a804&prod&scoped=true&lang=css&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=55a5af10&prod&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackItem.vue?vue&type=style&index=0&id=4eda178f&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.$store.getters.isTrackSet)?_c('div',{staticClass:\"controls\",class:_vm.large ? 'large' : '',style:({minWidth: _vm.full? '156px':'96px'})},[(_vm.full)?_c('v-btn',{attrs:{\"color\":_vm.$store.state.media.shuffle ? 'primary' : 'default',\"icon\":\"\",\"small\":!_vm.large},on:{\"click\":function($event){return _vm.$store.commit('toggleShuffle')}}},[_c('v-icon',{attrs:{\"small\":!_vm.large}},[_vm._v(\"mdi-shuffle\")])],1):_vm._e(),_c('v-btn',{attrs:{\"icon\":\"\",\"small\":!_vm.large,\"large\":_vm.large},on:{\"click\":function($event){return _vm.$store.dispatch('skip', -1)}}},[_c('v-icon',[_vm._v(\"mdi-rewind\")])],1),_c('v-btn',{attrs:{\"loading\":_vm.$store.state.media.trackLoading,\"icon\":!_vm.large,\"fab\":_vm.large,\"color\":(_vm.large && _vm.$store.state.theme.fgLegible) ? 'primary' : 'default',\"large\":\"\"},on:{\"click\":function($event){return _vm.$store.dispatch(_vm.playing ? 'pause' : 'play')}}},[(_vm.playing)?_c('v-icon',{attrs:{\"large\":_vm.large}},[_vm._v(\"mdi-pause\")]):_c('v-icon',{attrs:{\"large\":_vm.large}},[_vm._v(\"mdi-play\")])],1),_c('v-btn',{attrs:{\"icon\":\"\",\"small\":!_vm.large,\"large\":_vm.large},on:{\"click\":function($event){return _vm.$store.dispatch('skip', 1)}}},[_c('v-icon',[_vm._v(\"mdi-fast-forward\")])],1),(_vm.full)?_c('v-btn',{attrs:{\"color\":_vm.$store.state.media.repeat ? 'primary' : 'default',\"icon\":\"\",\"small\":!_vm.large},on:{\"click\":function($event){return _vm.$store.commit('toggleRepeat')}}},[_c('v-icon',{attrs:{\"small\":!_vm.large}},[_vm._v(\"mdi-repeat\")])],1):_vm._e()],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"controls\" :class=\"large ? 'large' : ''\" :style=\"{minWidth: full? '156px':'96px'}\"\r\n         v-if=\"$store.getters.isTrackSet\">\r\n        <v-btn :color=\"$store.state.media.shuffle ? 'primary' : 'default'\"\r\n               @click=\"$store.commit('toggleShuffle')\"\r\n               icon\r\n               :small=\"!large\"\r\n               v-if=\"full\">\r\n            <v-icon :small=\"!large\">mdi-shuffle</v-icon>\r\n        </v-btn>\r\n        <v-btn icon\r\n               :small=\"!large\"\r\n               :large=\"large\"\r\n               @click=\"$store.dispatch('skip', -1)\">\r\n            <v-icon>mdi-rewind</v-icon>\r\n        </v-btn>\r\n        <v-btn :loading=\"$store.state.media.trackLoading\"\r\n               :icon=\"!large\"\r\n               :fab=\"large\"\r\n               :color=\"(large && $store.state.theme.fgLegible) ? 'primary' : 'default'\"\r\n               large\r\n               @click=\"$store.dispatch(playing ? 'pause' : 'play')\">\r\n            <v-icon :large=\"large\" v-if=\"playing\">mdi-pause</v-icon>\r\n            <v-icon :large=\"large\" v-else>mdi-play</v-icon>\r\n        </v-btn>\r\n        <v-btn icon\r\n               :small=\"!large\"\r\n               :large=\"large\"\r\n               @click=\"$store.dispatch('skip', 1)\">\r\n            <v-icon>mdi-fast-forward</v-icon>\r\n        </v-btn>\r\n        <v-btn :color=\"$store.state.media.repeat ? 'primary' : 'default'\"\r\n               @click=\"$store.commit('toggleRepeat')\"\r\n               icon\r\n               :small=\"!large\"\r\n               v-if=\"full\">\r\n            <v-icon :small=\"!large\">mdi-repeat</v-icon>\r\n        </v-btn>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"MediaControls\",\r\n        props: {\r\n            full: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            large: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n        },\r\n        computed: {\r\n            playing() {\r\n                return this.$store.state.media.playing;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .controls {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n\r\n    .large > * {\r\n        margin: 0 6px;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaControls.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaControls.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MediaControls.vue?vue&type=template&id=4621d430&scoped=true&\"\nimport script from \"./MediaControls.vue?vue&type=script&lang=js&\"\nexport * from \"./MediaControls.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MediaControls.vue?vue&type=style&index=0&id=4621d430&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4621d430\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('span',{staticClass:\"artists\",attrs:{\"title\":_vm.artists.map(a=>a.name).join(', ')}},_vm._l((_vm.artists),function(artist,i){return _c('span',{key:artist.id},[_c('router-link',{staticClass:\"artist\",style:({opacity: _vm.grey ? 0.7 : 1}),attrs:{\"tag\":_vm.grey ? 'span' : 'a',\"to\":_vm.$store.getters.relativeItemUrl(artist)}},[_vm._v(_vm._s(artist.name))]),(i !== _vm.artists.length - 1)?_c('span',[_vm._v(\", \")]):_vm._e()],1)}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <span class=\"artists\"\r\n          :title=\"artists.map(a=>a.name).join(', ')\">\r\n        <span v-for=\"(artist, i) in artists\" :key=\"artist.id\">\r\n            <router-link\r\n                    :tag=\"grey ? 'span' : 'a'\"\r\n                    :style=\"{opacity: grey ? 0.7 : 1}\"\r\n                    class=\"artist\"\r\n                    :to=\"$store.getters.relativeItemUrl(artist)\">{{artist.name}}</router-link>\r\n            <span v-if=\"i !== artists.length - 1\">, </span>\r\n        </span>\r\n    </span>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"ArtistsSpan\",\r\n        props: {\r\n            grey: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            artists: {\r\n                type: Array,\r\n                default: () => [],\r\n            },\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .artists {\r\n        white-space: nowrap;\r\n        text-overflow: ellipsis;\r\n        overflow: hidden;\r\n        display: block;\r\n    }\r\n\r\n    .artist {\r\n        font-weight: 500 !important;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .artist * {\r\n        text-decoration: none !important;\r\n    }\r\n\r\n    .artist:hover {\r\n        text-decoration: underline;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArtistsSpan.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArtistsSpan.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArtistsSpan.vue?vue&type=template&id=7560a804&scoped=true&\"\nimport script from \"./ArtistsSpan.vue?vue&type=script&lang=js&\"\nexport * from \"./ArtistsSpan.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ArtistsSpan.vue?vue&type=style&index=0&id=7560a804&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7560a804\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaSeek.vue?vue&type=style&index=0&id=24042a70&prod&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaControls.vue?vue&type=style&index=0&id=4621d430&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-menu',{ref:\"parentMenu\",attrs:{\"close-on-content-click\":true,\"close-on-click\":true},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g({attrs:{\"color\":_vm.color,\"fab\":_vm.fab,\"icon\":!_vm.fab,\"small\":_vm.fab}},on),[_c('v-icon',[_vm._v(\"mdi-dots-horizontal\")])],1)]}}])},[_c('v-list',{attrs:{\"dense\":\"\"}},[_c('share-menu-item',{attrs:{\"item\":_vm.item},on:{\"action\":function($event){_vm.$refs.parentMenu.isActive=false}}}),(_vm.type!=='category' && _vm.type!=='user' && _vm.type !== 'liked')?_c('follow-menu-item',{attrs:{\"item\":_vm.item}}):_vm._e(),(_vm.type === 'track' || _vm.type === 'artist')?_c('v-list-item',{attrs:{\"exact\":\"\",\"to\":`/radio?seed_${_vm.type}s=${_vm.item.id}`}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-radio-tower\")])],1),_c('v-list-item-title',[_vm._v(\"Go to \"+_vm._s(_vm.type)+\" radio\")])],1):_vm._e(),(!_vm.queueTrack && _vm.type !== 'category' && _vm.type !== 'liked' && _vm.type !== 'user')?_c('v-list-item',{on:{\"click\":function($event){return _vm.playNext(_vm.item)}}},[_c('v-list-item-icon',[(_vm.nextQueueLoading)?_c('v-progress-circular',{attrs:{\"size\":\"20\",\"indeterminate\":\"\",\"width\":\"1\"}}):_c('v-icon',[_vm._v(\"mdi-play-circle-outline\")])],1),_c('v-list-item-title',[_vm._v(\"Play next\")])],1):_vm._e(),(!_vm.queueTrack && _vm.type !== 'category' && _vm.type !== 'liked' && _vm.type !== 'user')?_c('v-list-item',{on:{\"click\":function($event){return _vm.addToQueue(_vm.item)}}},[_c('v-list-item-icon',[(_vm.addQueueLoading)?_c('v-progress-circular',{attrs:{\"size\":\"20\",\"indeterminate\":\"\",\"width\":\"1\"}}):_c('v-icon',[_vm._v(\"mdi-plus\")])],1),_c('v-list-item-title',[_vm._v(\"Add to queue\")])],1):_vm._e(),(_vm.editablePlaylist)?_c('v-list-item',{on:{\"click\":function($event){return _vm.remove(_vm.item, _vm.contextItem)}}},[_c('v-list-item-icon',[(_vm.removeLoading)?_c('v-progress-circular',{attrs:{\"size\":\"20\",\"indeterminate\":\"\",\"width\":\"1\"}}):_c('v-icon',[_vm._v(\"mdi-playlist-minus\")])],1),_c('v-list-item-title',[_vm._v(\"Remove from \"),_c('span',{staticClass:\"font-weight-bold\"},[_vm._v(_vm._s(_vm.contextItem.name))])])],1):_vm._e(),(_vm.type === 'track' && _vm.queueTrack && _vm.$store.getters.isTrackSet && _vm.item.id !== _vm.$store.state.media.track.id)?_c('v-list-item',{on:{\"click\":function($event){return _vm.$store.commit('removeFromQueue', _vm.item)}}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-playlist-minus\")])],1),_c('v-list-item-title',[_vm._v(\"Remove from queue\")])],1):_vm._e(),_c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [(_vm.item.type === 'track')?_c('v-list-item',_vm._g(_vm._b({},'v-list-item',attrs,false),on),[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-playlist-plus\")])],1),_c('v-list-item-title',[_vm._v(\"Add to playlist\")])],1):_vm._e()]}}])},[_c('v-list',{staticClass:\"playlist-menu\",attrs:{\"dense\":\"\"}},_vm._l((_vm.myPlaylists),function(playlist){return _c('v-list-item',{key:playlist.id,on:{\"click\":function($event){return _vm.add(_vm.item, playlist)}}},[_c('v-list-item-icon',[(_vm.addLoading[playlist.id])?_c('v-progress-circular',{attrs:{\"size\":\"20\",\"indeterminate\":\"\",\"width\":\"1\"}}):_c('v-icon',[_vm._v(\"mdi-playlist-music\")])],1),_c('v-list-item-title',[_vm._v(_vm._s(playlist.name))])],1)}),1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-menu ref=\"parentMenu\" :close-on-content-click=\"true\" :close-on-click=\"true\">\r\n        <template v-slot:activator=\"{ on, attrs }\">\r\n            <v-btn :color=\"color\" :fab=\"fab\" :icon=\"!fab\" :small=\"fab\" v-on=\"on\">\r\n                <v-icon>mdi-dots-horizontal</v-icon>\r\n            </v-btn>\r\n        </template>\r\n        <v-list dense>\r\n            <share-menu-item @action=\"$refs.parentMenu.isActive=false\" :item=\"item\"></share-menu-item>\r\n            <follow-menu-item v-if=\"type!=='category' && type!=='user' && type !== 'liked'\"\r\n                              :item=\"item\"></follow-menu-item>\r\n            <v-list-item v-if=\"type === 'track' || type === 'artist'\" exact :to=\"`/radio?seed_${type}s=${item.id}`\">\r\n                <v-list-item-icon>\r\n                    <v-icon>mdi-radio-tower</v-icon>\r\n                </v-list-item-icon>\r\n                <v-list-item-title>Go to {{type}} radio</v-list-item-title>\r\n            </v-list-item>\r\n            <v-list-item v-if=\"!queueTrack && type !== 'category' && type !== 'liked' && type !== 'user'\"\r\n                         @click=\"playNext(item)\">\r\n                <v-list-item-icon>\r\n                    <v-progress-circular size=\"20\" indeterminate width=\"1\"\r\n                                         v-if=\"nextQueueLoading\"></v-progress-circular>\r\n                    <v-icon v-else>mdi-play-circle-outline</v-icon>\r\n                </v-list-item-icon>\r\n                <v-list-item-title>Play next</v-list-item-title>\r\n            </v-list-item>\r\n            <v-list-item v-if=\"!queueTrack && type !== 'category' && type !== 'liked' && type !== 'user'\"\r\n                         @click=\"addToQueue(item)\">\r\n                <v-list-item-icon>\r\n                    <v-progress-circular size=\"20\" indeterminate width=\"1\"\r\n                                         v-if=\"addQueueLoading\"></v-progress-circular>\r\n                    <v-icon v-else>mdi-plus</v-icon>\r\n                </v-list-item-icon>\r\n                <v-list-item-title>Add to queue</v-list-item-title>\r\n            </v-list-item>\r\n            <v-list-item v-if=\"editablePlaylist\" @click=\"remove(item, contextItem)\">\r\n                <v-list-item-icon>\r\n                    <v-progress-circular size=\"20\" indeterminate width=\"1\" v-if=\"removeLoading\"></v-progress-circular>\r\n                    <v-icon v-else>mdi-playlist-minus</v-icon>\r\n                </v-list-item-icon>\r\n                <v-list-item-title>Remove from <span class=\"font-weight-bold\">{{contextItem.name}}</span>\r\n                </v-list-item-title>\r\n            </v-list-item>\r\n            <v-list-item\r\n                    v-if=\"type === 'track' && queueTrack && $store.getters.isTrackSet && item.id !== $store.state.media.track.id\"\r\n                    @click=\"$store.commit('removeFromQueue', item)\">\r\n                <v-list-item-icon>\r\n                    <v-icon>mdi-playlist-minus</v-icon>\r\n                </v-list-item-icon>\r\n                <v-list-item-title>Remove from queue</v-list-item-title>\r\n            </v-list-item>\r\n            <v-menu offset-y>\r\n                <template v-slot:activator=\"{ on, attrs }\">\r\n                    <v-list-item v-if=\"item.type === 'track'\" v-on=\"on\" v-bind=\"attrs\">\r\n                        <v-list-item-icon>\r\n                            <v-icon>mdi-playlist-plus</v-icon>\r\n                        </v-list-item-icon>\r\n                        <v-list-item-title>Add to playlist</v-list-item-title>\r\n                    </v-list-item>\r\n                </template>\r\n                <v-list dense class=\"playlist-menu\">\r\n                    <v-list-item @click=\"add(item, playlist)\" v-for=\"playlist of myPlaylists\" :key=\"playlist.id\">\r\n                        <v-list-item-icon>\r\n                            <v-progress-circular size=\"20\" indeterminate width=\"1\"\r\n                                                 v-if=\"addLoading[playlist.id]\"></v-progress-circular>\r\n                            <v-icon v-else>mdi-playlist-music</v-icon>\r\n                        </v-list-item-icon>\r\n                        <v-list-item-title>{{playlist.name}}</v-list-item-title>\r\n                    </v-list-item>\r\n                </v-list>\r\n            </v-menu>\r\n        </v-list>\r\n    </v-menu>\r\n</template>\r\n\r\n<script>\r\n    import ShareMenuItem from \"./ShareMenuItem\";\r\n    import FollowMenuItem from \"./FollowMenuItem\";\r\n    import Vue from 'vue';\r\n\r\n    export default {\r\n        name: \"ItemMenu\",\r\n        components: {FollowMenuItem, ShareMenuItem},\r\n        props: {\r\n            item: {\r\n                type: Object,\r\n                default: null,\r\n            },\r\n            fab: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            color: {\r\n                type: String,\r\n                default: 'default',\r\n            },\r\n            contextItem: {\r\n                type: Object,\r\n                default: null,\r\n            },\r\n            queueTrack: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n        },\r\n        data: () => ({\r\n            addLoading: {},\r\n            removeLoading: false,\r\n            addQueueLoading: false,\r\n            nextQueueLoading: false,\r\n        }),\r\n        methods: {\r\n            async add(track, playlist) {\r\n                this.$refs.parentMenu.isActive = false;\r\n                Vue.set(this.addLoading, playlist.id, true);\r\n                await this.$store.dispatch('addToPlaylist', {track, playlist});\r\n                Vue.set(this.addLoading, playlist.id, false);\r\n            },\r\n            async remove(track, playlist) {\r\n                this.removeLoading = true;\r\n                await this.$store.dispatch('removeFromPlaylist', {track, playlist});\r\n                this.removeLoading = false;\r\n            },\r\n            async playNext(item) {\r\n                let context = await this.$store.dispatch('getContextItem', item);\r\n                this.$store.commit('playNext', context.tracks);\r\n            },\r\n            async addToQueue(item) {\r\n                let context = await this.$store.dispatch('getContextItem', item);\r\n                this.$store.commit('addToQueue', context.tracks);\r\n            },\r\n        },\r\n        computed: {\r\n            editablePlaylist() {\r\n                if (this.contextItem === null || this.contextItem.type !== 'playlist')\r\n                    return false;\r\n                return this.contextItem.collaborative || this.contextItem.owner.id === this.$store.state.userInfo.id;\r\n            },\r\n            myPlaylists() {\r\n                return this.$store.state.library.playlists.filter(p =>\r\n                    p.owner.id === this.$store.state.userInfo.id ||\r\n                    p.collaborative\r\n                );\r\n            },\r\n            type() {\r\n                if (!this.item.type)\r\n                    return 'category';\r\n                return this.item.type;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .playlist-menu {\r\n        max-height: 90vh;\r\n        overflow-y: auto;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ItemMenu.vue?vue&type=template&id=3616c00e&scoped=true&\"\nimport script from \"./ItemMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./ItemMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ItemMenu.vue?vue&type=style&index=0&id=3616c00e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3616c00e\",\n  null\n  \n)\n\nexport default component.exports","export default class Utils {\r\n    static isTouchDevice() {\r\n        return ('ontouchstart' in window) ||\r\n            (navigator.maxTouchPoints > 0) ||\r\n            (navigator.msMaxTouchPoints > 0);\r\n    }\r\n\r\n    static reduceTrackSize(track) {\r\n        return {\r\n            album: {\r\n                images: track.album.images,\r\n                name: track.album.name,\r\n                type: track.album.type,\r\n                id: track.album.id,\r\n                release_date: track.album.release_date,\r\n            },\r\n            artists: track.artists,\r\n            name: track.name,\r\n            duration_ms: track.duration_ms,\r\n            id: track.id,\r\n            is_local: track.is_local,\r\n            type: track.type,\r\n            disc_number: track.disc_number,\r\n        }\r\n    }\r\n\r\n    static isLegible(hexColor, theme) {\r\n        console.log(\"Is\", hexColor, \"legible on theme\", theme);\r\n\r\n        let currentTheme = theme.themes[theme.isDark ? 'dark' : 'light'];\r\n        let background = currentTheme.navBackground;\r\n        let foreground = currentTheme.foreground;\r\n\r\n        let contrastOnBg = Utils.hexContrast(hexColor, background);\r\n        let contrastOnFg = Utils.hexContrast(hexColor, foreground);\r\n        console.log({contrastOnBg, contrastOnFg});\r\n        return {bgLegible: contrastOnBg > 3, fgLegible: contrastOnFg > 2};\r\n    }\r\n\r\n    static hexToRgb(hex) {\r\n        if (hex[0] === '#')\r\n            hex = hex.slice(1);\r\n        let r = hex.slice(0, 2);\r\n        let g = hex.slice(2, 4);\r\n        let b = hex.slice(4, 6);\r\n        return [parseInt(r, 16), parseInt(g, 16), parseInt(b, 16)];\r\n    }\r\n\r\n    static hexContrast(hex1, hex2) {\r\n        return Utils.contrast(Utils.hexToRgb(hex1), Utils.hexToRgb(hex2));\r\n    }\r\n\r\n    static luminance(r, g, b) {\r\n        const a = [r, g, b].map(v => {\r\n            v /= 255;\r\n            return v <= 0.03928\r\n                ? v / 12.92\r\n                : Math.pow((v + 0.055) / 1.055, 2.4);\r\n        });\r\n        return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;\r\n    }\r\n\r\n    static contrast(rgb1, rgb2) {\r\n        const lum1 = Utils.luminance(rgb1[0], rgb1[1], rgb1[2]);\r\n        const lum2 = Utils.luminance(rgb2[0], rgb2[1], rgb2[2]);\r\n        const brightest = Math.max(lum1, lum2);\r\n        const darkest = Math.min(lum1, lum2);\r\n        return (brightest + 0.05) / (darkest + 0.05);\r\n    }\r\n\r\n    static secondsToHms(seconds) {\r\n        if (isNaN(seconds) || seconds === undefined)\r\n            return '0:00';\r\n\r\n        seconds = Math.round(seconds);\r\n        let h = Math.floor(seconds / 3600);\r\n        let m = Math.floor((seconds % 3600) / 60);\r\n        let s = seconds % 60;\r\n        h = h.toString();\r\n        m = m.toString();\r\n        s = s.toString();\r\n        if (h !== '0') {\r\n            m = m.padStart(2, '0');\r\n            s = s.padStart(2, '0');\r\n        }\r\n        s = s.padStart(2, '0');\r\n\r\n        if (h === '0')\r\n            return `${m}:${s}`;\r\n        else return `${h}:${m}:${s}`;\r\n    }\r\n\r\n    static shuffleArray(array) {\r\n        for (let i = array.length - 1; i > 0; i--) {\r\n            const j = Math.floor(Math.random() * (i + 1));\r\n            [array[i], array[j]] = [array[j], array[i]];\r\n        }\r\n        return array;\r\n    }\r\n\r\n    static bytesToReadable(bytes) {\r\n        let length = Math.log10(bytes);\r\n        if (length < 2) {\r\n            return bytes + ' B';\r\n        } else if (length < 5) {\r\n            return (bytes / 1024).toFixed(2) + ' kB';\r\n        } else if (length < 8) {\r\n            return (bytes / (1024 ** 2)).toFixed(2) + ' MB';\r\n        } else if (length < 12) {\r\n            return (bytes / (1024 ** 3)).toFixed(2) + ' GB';\r\n        } else if (length < 15) {\r\n            return (bytes / (1024 ** 4)).toFixed(2) + ' TB';\r\n        }\r\n        return 'very bige bytes';\r\n    }\r\n}","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('perfect-scrollbar',{staticClass:\"item-container\"},_vm._l((_vm.itemGroups),function(itemGroup,i){return _c('div',{staticClass:\"column\",class:{last: i===_vm.items.length-1}},_vm._l((itemGroup),function(item){return _c('item-square',{staticClass:\"single-item\",attrs:{\"big\":_vm.big,\"small\":_vm.small,\"show-year\":_vm.showYear,\"item\":item}})}),1)}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <perfect-scrollbar class=\"item-container\">\r\n        <div class=\"column\" v-for=\"(itemGroup, i) in itemGroups\"\r\n             :class=\"{last: i===items.length-1}\">\r\n            <item-square v-for=\"item in itemGroup\"\r\n                          :big=\"big\"\r\n                          :small=\"small\"\r\n                          :show-year=\"showYear\"\r\n                          class=\"single-item\"\r\n                          :item=\"item\"></item-square>\r\n        </div>\r\n    </perfect-scrollbar>\r\n</template>\r\n\r\n<script>\r\n    import ItemSquare from \"./ItemSquare\";\r\n\r\n    export default {\r\n        name: \"ItemRow\",\r\n        components: {ItemSquare},\r\n        props: {\r\n            items: {\r\n                type: Array,\r\n                default: () => [],\r\n            },\r\n            small: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            big: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            rows: {\r\n                type: Number,\r\n                default: 1,\r\n            },\r\n            showYear: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n        },\r\n        computed: {\r\n            itemGroups() {\r\n                let groups = [];\r\n                for (let i = 0; i < this.items.length; i += this.rows) {\r\n                    groups.push(this.items.slice(i, i + this.rows));\r\n                }\r\n                return groups;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .item-container {\r\n        position: relative;\r\n        width: 100%;\r\n        display: flex;\r\n        padding: 0 15px;\r\n        padding-bottom: 15px;\r\n    }\r\n\r\n    .single-item {\r\n        display: inline-block;\r\n        margin: 5px 15px;\r\n    }\r\n\r\n    .single-item.last {\r\n        padding-right: 30px;\r\n    }\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemRow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemRow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ItemRow.vue?vue&type=template&id=11f2d088&scoped=true&\"\nimport script from \"./ItemRow.vue?vue&type=script&lang=js&\"\nexport * from \"./ItemRow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ItemRow.vue?vue&type=style&index=0&id=11f2d088&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11f2d088\",\n  null\n  \n)\n\nexport default component.exports","import path from 'path';\r\nimport ffbinaries from \"ffbinaries\";\r\nimport fs from \"fs\";\r\nimport child_process from \"child_process\";\r\nimport fileNamify from 'filenamify';\r\nimport MusicDownloader from \"./MusicDownloader\";\r\n\r\nexport default class NodeMusicDownloader extends MusicDownloader {\r\n    constructor(musicDir = './', filesDir = './', tempDir = './') {\r\n        super();\r\n\r\n        this.directories = {\r\n            music: musicDir,\r\n            files: filesDir,\r\n            temp: tempDir,\r\n        }\r\n\r\n        this.ffmpegPath = null;\r\n        this.downloadingFfmpeg = false;\r\n    }\r\n\r\n    async isTrackOffline(track) {\r\n        let fileName = fileNamify(this.getSearchString(track));\r\n        let filePath = path.join(this.directories.music, fileName + '.mp3');\r\n        if (await this.fileExists(filePath)) {\r\n            return filePath;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    async removeCached(track) {\r\n        let fileName = fileNamify(this.getSearchString(track));\r\n        let filePath = path.join(this.directories.music, fileName + '.mp3');\r\n        if (await this.fileExists(filePath)) {\r\n            await this.deleteFile(filePath);\r\n            console.warn(`Deleted cache ${filePath} for`, track);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    async downloadTrack(url, track, progress = () => 0, abortSignal = null) {\r\n        abortSignal.addEventListener('abort', () => progress('Cancelled'));\r\n\r\n        let fileName = fileNamify(this.getSearchString(track));\r\n\r\n        let downloadedTrackFile = path.join(this.directories.temp, fileName);\r\n        progress('Downloading');\r\n        try {\r\n            await this.downloadFile(url, downloadedTrackFile, abortSignal);\r\n        } catch (e) {\r\n            return progress('Failed');\r\n        }\r\n        progress('Processing metadata');\r\n        let processedFile = await this.ffmpegProcessing(track, downloadedTrackFile, () => 0, abortSignal);\r\n        progress('Downloaded');\r\n        console.log(\"Downloaded track and converted to mp3 ✔\", processedFile);\r\n    }\r\n\r\n    async ffmpegProcessing(track, trackInputFile, progress = () => 0, abortSignal = null) {\r\n        let baseFileName = path.basename(trackInputFile);\r\n        let tags = {\r\n            title: track.name,\r\n            artist: track.artists.map(a => a.name),\r\n            disc: track.disc_number,\r\n            track: track.track_number,\r\n        };\r\n        if (track.hasOwnProperty('album')) {\r\n            tags.album = track.album.name;\r\n            tags.year = new Date(track.album.release_date).getFullYear();\r\n        }\r\n\r\n        let hasImage = track.hasOwnProperty('album') && track.album.images.length > 0;\r\n        let imageFile = path.join(this.directories.temp, `image-${baseFileName}.jpg`);\r\n        if (hasImage)\r\n            await this.downloadFile(track.album.images[0].url, imageFile, abortSignal);\r\n\r\n        let outputFile = path.join(this.directories.temp, baseFileName + '.mp3');\r\n\r\n        try {\r\n            await this.ffmpegMetadata(trackInputFile, outputFile, hasImage ? imageFile : '', tags, abortSignal);\r\n        } catch (e) {\r\n            progress('Failed');\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            let destinationFile = path.join(this.directories.music, baseFileName + '.mp3');\r\n            fs.rename(outputFile, destinationFile, err => {\r\n                this.deleteFile(trackInputFile).then();\r\n                if (hasImage)\r\n                    this.deleteFile(imageFile).then();\r\n                resolve(destinationFile)\r\n            });\r\n        });\r\n    }\r\n\r\n    async downloadFile(url, destinationFile, abortSignal = null) {\r\n        let res = await fetch(url, {signal: abortSignal});\r\n        let blob = await res.blob();\r\n        let writer = fs.createWriteStream(destinationFile);\r\n        writer.write(Buffer.from(await blob.arrayBuffer()));\r\n    }\r\n\r\n    async ffmpegMetadata(fileInput, fileOutput, coverImageFile, tags, abortSignal = null) {\r\n        return new Promise(async (resolve, reject) => {\r\n            let ffmpegPath = await this.getFfmpegPath();\r\n            let command;\r\n            if (coverImageFile) {\r\n                command = `${ffmpegPath} -y -i \"${fileInput}\" -i \"${coverImageFile}\"` +\r\n                    ` -map 0:0 -map 1:0 -id3v2_version 3 -metadata:s:v title=\"Album cover\" -metadata:s:v comment=\"Cover (Front)\" ` +\r\n                    `${this.tagsToString(tags)} \"${fileOutput}\"`;\r\n            } else {\r\n                command = `${ffmpegPath} -y -i \"${fileInput}\"` +\r\n                    `${this.tagsToString(tags)} \"${fileOutput}\"`;\r\n            }\r\n            if (await this.fileExists(fileOutput))\r\n                await this.deleteFile(fileOutput);\r\n            await this.waitForFileUnlock(fileInput);\r\n            await this.waitForFileUnlock(coverImageFile);\r\n            await this.waitForFileUnlock(ffmpegPath);\r\n\r\n            if (!abortSignal.aborted) {\r\n                let process = child_process.exec(command, (error, stdout, stderr) => {\r\n                    if (error)\r\n                        return reject(error);\r\n                    resolve({err: stderr, out: stdout});\r\n                });\r\n                abortSignal.addEventListener('abort', () => process.kill());\r\n            }\r\n        })\r\n    }\r\n\r\n    tagsToString(tags) {\r\n        let result = [];\r\n        for (let tag in tags)\r\n            if (tags.hasOwnProperty(tag))\r\n                if (tags[tag] instanceof Array)\r\n                    for (let part of tags[tag])\r\n                        result.push(`-metadata ${tag}=\"${part}\"`);\r\n                else\r\n                    result.push(`-metadata ${tag}=\"${tags[tag]}\"`);\r\n        return result.join(' ');\r\n    }\r\n\r\n    async deleteFile(filePath) {\r\n        return new Promise((resolve, reject) => {\r\n            fs.unlink(filePath, err => {\r\n                if (err)\r\n                    return reject(err);\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n\r\n    async fileExists(filePath) {\r\n        return new Promise((resolve, reject) => {\r\n            fs.access(filePath, fs.F_OK, err => {\r\n                if (err)\r\n                    resolve(false)\r\n                resolve(true);\r\n            });\r\n        });\r\n    }\r\n\r\n    async waitSleep(ms) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n\r\n    async waitForFileUnlock(filePath, timeout = 10000) {\r\n        let startTime = performance.now();\r\n        while (true) {\r\n            if (performance.now() > startTime + timeout)\r\n                throw \"Timeout waiting for file to unlock\";\r\n            let isFileLocked = await this.isFileLocked(filePath);\r\n            if (!isFileLocked)\r\n                return true;\r\n            await this.waitSleep(250);\r\n        }\r\n    }\r\n\r\n    async isFileLocked(filePath) {\r\n        return new Promise((resolve, reject) => {\r\n            fs.open(filePath, 'r+', (err, fd) => {\r\n                if (err && err.code === 'EBUSY') {\r\n                    resolve(true);\r\n                } else if (err && err.code === 'ENOENT') {\r\n                    reject(\"File does not exist\");\r\n                } else {\r\n                    fs.close(fd, err => {\r\n                        if (err)\r\n                            return reject(err);\r\n                        resolve(false);\r\n                    })\r\n                }\r\n            });\r\n        })\r\n    }\r\n\r\n    async getFfmpegPath() {\r\n        return new Promise(async (resolve, reject) => {\r\n            if (this.ffmpegPath)\r\n                return resolve(this.ffmpegPath);\r\n            if (this.downloadingFfmpeg)\r\n                return this.once('downloadFFMPEG', resolve);\r\n\r\n            this.downloadingFfmpeg = true;\r\n            ffbinaries.downloadBinaries(['ffmpeg'], {destination: this.directories.files}, () => {\r\n                this.ffmpegPath = path.join(this.directories.files, ffbinaries.getBinaryFilename('ffmpeg', ffbinaries.detectPlatform()))\r\n                resolve(this.ffmpegPath);\r\n                this.emit('downloadFFMPEG');\r\n                this.downloadingFfmpeg = false;\r\n            });\r\n        });\r\n\r\n    }\r\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrackRow.vue?vue&type=style&index=0&id=61538a80&prod&scoped=true&lang=css&\"","import electron from 'electron';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\n\r\nclass Directories {\r\n    constructor() {\r\n        this.temp = this.initializeDir('temp', 'vuemusic');\r\n        this.files = this.initializeDir('appData', 'vuemusic-files');\r\n        this.music = this.getDir('music', '');\r\n    }\r\n\r\n    initializeDir(base, dir) {\r\n        let fullDir = this.getDir(base, dir);\r\n        this.createDir(fullDir);\r\n        return fullDir;\r\n    }\r\n\r\n    getDir(base = 'music', dir = 'files') {\r\n        let app = electron.app;\r\n        if (electron.hasOwnProperty('remote'))\r\n            app = electron.remote.app;\r\n        return path.join(app.getPath(base), dir);\r\n    }\r\n\r\n    createDir(dir) {\r\n        if (!fs.existsSync(dir))\r\n            fs.mkdirSync(dir);\r\n    }\r\n\r\n    importLSFile() {\r\n        let localStorageFile = path.join(this.files, 'localStorage.json');\r\n\r\n        if (fs.existsSync(localStorageFile)) {\r\n            let ls = JSON.parse(fs.readFileSync(localStorageFile));\r\n            for (let key in ls)\r\n                if (ls.hasOwnProperty(key))\r\n                    localStorage[key] = ls[key];\r\n        }\r\n    }\r\n\r\n    exportLSToFile() {\r\n        let localStorageFile = path.join(this.files, 'localStorage.json');\r\n\r\n        let localData = JSON.stringify(localStorage);\r\n        fs.writeFileSync(localStorageFile, localData);\r\n    }\r\n}\r\n\r\nexport default new Directories();","import NodeMusicDownloader from '../../js/music-downloader/NodeMusicDownloader'\r\nimport electron, {remote} from 'electron'\r\nimport http from \"http\";\r\nimport Directories from \"../../js/Directories\";\r\nimport path from \"path\";\r\n\r\nconst express = window.require('express')\r\nDirectories.importLSFile();\r\n\r\nexport default {\r\n    state: {\r\n        type: 'electron',\r\n        server: null,\r\n        downloader: new NodeMusicDownloader(Directories.music, Directories.files, Directories.temp),\r\n        downloads: [],\r\n        playingIcons: [],\r\n        pausedIcons: [],\r\n    },\r\n    mutations: {\r\n        playIcons: (state, {playIcon, pauseIcon, prevIcon, nextIcon}) => {\r\n            state.playingIcons = [prevIcon, pauseIcon, nextIcon];\r\n            state.pausedIcons = [prevIcon, playIcon, nextIcon];\r\n        },\r\n    },\r\n    getters: {},\r\n    actions: {\r\n        initializePlatform: async ({state, commit, dispatch, getters, rootState}) => {\r\n            const likeShortcut = 'Shift+Alt+L';\r\n            if (remote.globalShortcut.isRegistered(likeShortcut))\r\n                remote.globalShortcut.unregister(likeShortcut);\r\n            let regResult = remote.globalShortcut.register(likeShortcut, async () => {\r\n                let added = await dispatch('toggleFollowCurrentTrack');\r\n                let speech = added ? 'Added to favorites' : 'Removed from favorites';\r\n                let voices = speechSynthesis.getVoices();\r\n                let voice = voices[Math.floor(Math.random() * voices.length)];\r\n                let utterance = new SpeechSynthesisUtterance(speech);\r\n                utterance.voice = voice;\r\n                speechSynthesis.speak(utterance);\r\n            });\r\n            if (regResult)\r\n                console.log(\"Registered global shortcut ✔\")\r\n            else\r\n                console.log(\"Failed to register global shortcut ❌\")\r\n\r\n\r\n            let playIcon = {\r\n                tooltip: 'Play',\r\n                icon: path.join(__static, '/img/playicon.png'),\r\n                click: () => dispatch('play'),\r\n            };\r\n            let pauseIcon = {\r\n                tooltip: 'Play',\r\n                icon: path.join(__static, '/img/pauseicon.png'),\r\n                click: () => dispatch('pause'),\r\n            };\r\n            let prevIcon = {\r\n                tooltip: 'Previous Song',\r\n                icon: path.join(__static, '/img/previcon.png'),\r\n                click: () => dispatch('skip', -1),\r\n            };\r\n            let nextIcon = {\r\n                tooltip: 'Next Song',\r\n                icon: path.join(__static, '/img/nexticon.png'),\r\n                click: () => dispatch('skip', 1),\r\n            };\r\n            commit('playIcons', {playIcon, pauseIcon, prevIcon, nextIcon});\r\n        },\r\n        setPlatformPlaying: ({state}, playing) => {\r\n            const win = remote.getCurrentWindow();\r\n            let thumbAdded = win.setThumbarButtons(playing ? state.playingIcons : state.pausedIcons);\r\n        },\r\n        openDevTools: async ({}) => {\r\n            remote.getCurrentWindow().openDevTools();\r\n        },\r\n        closeWindow: async ({}) => {\r\n            remote.getCurrentWindow().close();\r\n        },\r\n        minimizeWindow: async ({}) => {\r\n            remote.getCurrentWindow().minimize();\r\n        },\r\n\r\n        exportCache: ({}) => {\r\n            Directories.exportLSToFile();\r\n        },\r\n\r\n        resetSpotifyLogin({state, commit}) {\r\n            if (state.server !== null) {\r\n                state.server.close();\r\n                commit('server', null);\r\n            }\r\n        },\r\n        firstLogin: async ({rootState, getters, state, commit, dispatch}) => {\r\n            return new Promise(async resolve => {\r\n                if (!getters.isKeySet) {\r\n                    console.warn(\"Can't log in, keys are not set\");\r\n                    return;\r\n                }\r\n                const port = 38900;\r\n                const redirectUrl = 'http://localhost:' + port;\r\n                const url = `${rootState.authUrl}authorize?client_id=${rootState.keys.spotifyId}&response_type=code&redirect_uri=${redirectUrl}&scope=${encodeURIComponent(rootState.requestedScopes)}`;\r\n                let {shell} = electron;\r\n                await shell.openExternal(url);\r\n\r\n                if (state.server !== null)\r\n                    state.server.close();\r\n\r\n                const app = express();\r\n                const server = http.createServer(app);\r\n\r\n                app.get('/', async (req, res) => {\r\n                    if (req.query.hasOwnProperty('code')) {\r\n                        server.close()\r\n                        commit('server', null);\r\n                        console.log(\"Stopped listening on *:\" + port);\r\n                        dispatch('getAuthByCode', {redirectUrl, code: req.query.code}).then(auth => {\r\n                            remote.getCurrentWindow().focus();\r\n                            resolve({\r\n                                code: req.query.code,\r\n                                token: auth.access_token,\r\n                                refresh: auth.refresh_token,\r\n                                expiryDate: (+new Date) + auth.expires_in * 1000,\r\n                            });\r\n                        });\r\n                    }\r\n                    res.send(`\r\n                        <html lang=\"en\">\r\n                            <head><title>Logging in...</title></head>\r\n                            <body>\r\n                                <script>\r\n                                    window.close();\r\n                                </script>\r\n                            </body>\r\n                        </html>\r\n                    `);\r\n                });\r\n\r\n                commit('server', http);\r\n                server.listen(port, () => {\r\n                    console.log('listening on *:' + port);\r\n                });\r\n            })\r\n        },\r\n    },\r\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueueButton.vue?vue&type=style&index=0&id=59edc3a6&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"seek\",on:{\"mousedown\":_vm.seekDown,\"touchstart\":_vm.touchDown}},[_c('span',{staticClass:\"time\",class:_vm.smallTime ? 'smallTime':''},[_vm._v(_vm._s(_vm.$store.getters.currentTimeHms))]),_c('v-sheet',{ref:\"seekBar\",staticClass:\"seek-background\",style:({margin: _vm.smallTime ? '0 -50px' : '0 5px'}),attrs:{\"flat\":\"\",\"color\":_vm.noBackground ? 'transparent' : 'default'}},[_c('v-sheet',{staticClass:\"seek-progress\",style:({width: Math.round(_vm.$store.getters.progress * 10000)/100+'%'}),attrs:{\"color\":\"primarySeek\"}}),_c('v-sheet',{staticClass:\"seek-thumb\",style:({left:'calc('+ Math.round(_vm.$store.getters.progress * 10000)/100+'% - 5px)'}),attrs:{\"color\":\"primarySeek\"}})],1),_c('span',{staticClass:\"time\",class:_vm.smallTime ? 'smallTime':''},[_vm._v(_vm._s(_vm.$store.getters.durationHms))])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"seek\"\r\n         @mousedown=\"seekDown\"\r\n         @touchstart=\"touchDown\">\r\n        <span class=\"time\" :class=\"smallTime ? 'smallTime':''\">{{$store.getters.currentTimeHms}}</span>\r\n        <v-sheet flat\r\n                 class=\"seek-background\"\r\n                 :color=\"noBackground ? 'transparent' : 'default'\"\r\n                 ref=\"seekBar\"\r\n                 :style=\"{margin: smallTime ? '0 -50px' : '0 5px'}\">\r\n            <v-sheet color=\"primarySeek\" class=\"seek-progress\"\r\n                     :style=\"{width: Math.round($store.getters.progress * 10000)/100+'%'}\"\r\n            ></v-sheet>\r\n            <v-sheet color=\"primarySeek\" class=\"seek-thumb\"\r\n                     :style=\"{left:'calc('+ Math.round($store.getters.progress * 10000)/100+'% - 5px)'}\"\r\n            ></v-sheet>\r\n        </v-sheet>\r\n        <span class=\"time\" :class=\"smallTime ? 'smallTime':''\">{{$store.getters.durationHms}}</span>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"MediaSeek\",\r\n        props: {\r\n            smallTime: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            noBackground: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n        },\r\n        data: () => ({\r\n            seeking: false,\r\n        }),\r\n        mounted() {\r\n            document.addEventListener('mousemove', this.seekMove);\r\n            document.addEventListener('mouseup', this.seekUp);\r\n            document.addEventListener('touchmove', this.touchMove);\r\n            document.addEventListener('touchend', this.touchEnd);\r\n        },\r\n        beforeDestroy() {\r\n            document.removeEventListener('mousemove', this.seekMove);\r\n            document.removeEventListener('mouseup', this.seekUp);\r\n            document.removeEventListener('touchmove', this.touchMove);\r\n            document.removeEventListener('touchend', this.touchEnd);\r\n        },\r\n        methods: {\r\n            touchDown(e) {\r\n                this.seekDown(e.touches[0]);\r\n            },\r\n            touchMove(e) {\r\n                this.seekMove(e.touches[0]);\r\n            },\r\n            touchEnd(e) {\r\n                this.seekUp(e.touches[0]);\r\n            },\r\n            seekDown(e) {\r\n                this.seeking = true;\r\n                this.seekByEvent(e);\r\n            },\r\n            seekMove(e) {\r\n                if (this.seeking) {\r\n                    this.seekByEvent(e);\r\n                }\r\n            },\r\n            seekByEvent(e) {\r\n                let {left, width} = this.$refs.seekBar.$el.getBoundingClientRect();\r\n                let x = e.pageX - left;\r\n                let percentage = Math.max(Math.min(1, x / width), 0);\r\n                this.$store.commit('seekTo', percentage);\r\n            },\r\n            seekUp(e) {\r\n                this.seeking = false;\r\n            }\r\n        },\r\n        watch: {\r\n            '$store.state.media.track'() {\r\n                this.seeking = false;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .seek {\r\n        -webkit-app-region: no-drag;\r\n        display: flex;\r\n        align-items: center;\r\n        width: 100%;\r\n        min-height: 20px;\r\n        cursor: grab;\r\n    }\r\n\r\n    .seek:active {\r\n        cursor: grabbing;\r\n    }\r\n\r\n    .seek > * {\r\n        pointer-events: none;\r\n    }\r\n\r\n    .time {\r\n        min-width: 40px;\r\n        font-size: 13px;\r\n        opacity: 0.6;\r\n        font-weight: 500;\r\n    }\r\n\r\n    .time:last-child {\r\n        text-align: right;\r\n    }\r\n\r\n    .smallTime {\r\n        opacity: 0.5;\r\n        font-size: 12px;\r\n        margin: -15px 5px 0;\r\n        min-width: 40px !important;\r\n    }\r\n\r\n    .seek-background {\r\n        flex-grow: 1;\r\n        height: 3px;\r\n        border-radius: 2px;\r\n    }\r\n\r\n    .seek-progress {\r\n        height: 100%;\r\n        border-radius: 2px;\r\n    }\r\n\r\n    .seek-thumb {\r\n        height: 7px;\r\n        width: 7px;\r\n        top: -5px;\r\n        position: relative;\r\n        border-radius: 50%;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaSeek.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaSeek.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MediaSeek.vue?vue&type=template&id=24042a70&scoped=true&\"\nimport script from \"./MediaSeek.vue?vue&type=script&lang=js&\"\nexport * from \"./MediaSeek.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MediaSeek.vue?vue&type=style&index=0&id=24042a70&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"24042a70\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemRow.vue?vue&type=style&index=0&id=11f2d088&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.item !== null)?_c('div',{staticClass:\"follow-button\"},[(!_vm.hideTooltip)?_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [(_vm.isFollowed)?_c('v-btn',_vm._g(_vm._b({attrs:{\"loading\":_vm.loading,\"icon\":\"\",\"color\":\"primary\"},on:{\"click\":_vm.unfollow}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-heart-outline\")])],1):_c('v-btn',_vm._g(_vm._b({attrs:{\"loading\":_vm.loading,\"icon\":\"\"},on:{\"click\":_vm.follow}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-heart-outline\")])],1)]}}],null,false,2796376417)},[(_vm.isFollowed)?_c('span',[_vm._v(\"Remove from library\")]):_c('span',[_vm._v(\"Add to library\")])]):_c('div',[(_vm.isFollowed)?_c('v-btn',{attrs:{\"loading\":_vm.loading,\"icon\":\"\",\"color\":\"primary\"},on:{\"click\":_vm.unfollow}},[_c('v-icon',[_vm._v(\"mdi-heart-outline\")])],1):_c('v-btn',{attrs:{\"loading\":_vm.loading,\"icon\":\"\"},on:{\"click\":_vm.follow}},[_c('v-icon',[_vm._v(\"mdi-heart-outline\")])],1)],1)],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"follow-button\" v-if=\"item !== null\">\r\n        <v-tooltip top v-if=\"!hideTooltip\">\r\n            <template v-slot:activator=\"{ on, attrs }\">\r\n                <v-btn :loading=\"loading\" icon v-if=\"isFollowed\" @click=\"unfollow\" color=\"primary\"\r\n                       v-bind=\"attrs\"\r\n                       v-on=\"on\">\r\n                    <v-icon>mdi-heart-outline</v-icon>\r\n                </v-btn>\r\n                <v-btn :loading=\"loading\" icon v-else @click=\"follow\"\r\n                       v-bind=\"attrs\"\r\n                       v-on=\"on\">\r\n                    <v-icon>mdi-heart-outline</v-icon>\r\n                </v-btn>\r\n            </template>\r\n            <span v-if=\"isFollowed\">Remove from library</span>\r\n            <span v-else>Add to library</span>\r\n        </v-tooltip>\r\n        <div v-else>\r\n            <v-btn :loading=\"loading\" icon v-if=\"isFollowed\" @click=\"unfollow\" color=\"primary\">\r\n                <v-icon>mdi-heart-outline</v-icon>\r\n            </v-btn>\r\n            <v-btn :loading=\"loading\" icon v-else @click=\"follow\">\r\n                <v-icon>mdi-heart-outline</v-icon>\r\n            </v-btn>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"FollowButton\",\r\n        props: {\r\n            item: {\r\n                type: Object,\r\n                default: null,\r\n            },\r\n            hideTooltip: {\r\n                type: Boolean,\r\n                default: false,\r\n            }\r\n        },\r\n        data: () => ({\r\n            loading: false,\r\n        }),\r\n        methods: {\r\n            async follow() {\r\n                this.loading = true;\r\n                await this.$store.dispatch('follow' + this.typeCapitalized, this.item);\r\n                this.loading = false;\r\n            },\r\n            async unfollow() {\r\n                this.loading = true;\r\n                await this.$store.dispatch('unfollow' + this.typeCapitalized, this.item);\r\n                this.loading = false;\r\n            },\r\n        },\r\n        computed: {\r\n            typeCapitalized() {\r\n                return this.item.type.substring(0, 1).toUpperCase() + this.item.type.substring(1);\r\n            },\r\n            isFollowed() {\r\n                return this.$store.getters[`is${this.typeCapitalized}Followed`](this.item);\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FollowButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FollowButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FollowButton.vue?vue&type=template&id=04dea7bf&scoped=true&\"\nimport script from \"./FollowButton.vue?vue&type=script&lang=js&\"\nexport * from \"./FollowButton.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04dea7bf\",\n  null\n  \n)\n\nexport default component.exports","export default {\r\n    api: 'https://api.ruurd.dev',\r\n    // api: 'http://localhost:3000',\r\n}","import config from './config'\r\n\r\nclass FetchInterceptor {\r\n    constructor() {\r\n        this._fetch = window.fetch;\r\n    }\r\n\r\n    start() {\r\n        let originalFetch = this._fetch;\r\n        window.fetch = function () {\r\n            let [url, options] = arguments;\r\n\r\n            let interceptUrls = [\"https://www.youtube.com\", \"https://manifest.googlevideo.com\",\r\n                \"https://r1---\", \"https://r2---\", \"https://r3---\", \"https://r4---\", \"https://r5---\",\r\n                \"https://r6---\", \"https://r7---\", \"https://r8---\", \"https://r9---\"]\r\n            for (let interceptUrl of interceptUrls) {\r\n                if (url.startsWith(interceptUrl)) {\r\n                    console.log(\"INTERCEPT\", url, options);\r\n                    url = `${config.api}/proxy?url=${encodeURIComponent(url)}`;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return originalFetch.apply(this, [url, options]);\r\n        };\r\n    }\r\n\r\n    stop() {\r\n        window.fetch = this._fetch;\r\n    }\r\n}\r\n\r\nexport default new FetchInterceptor();","export default class XMLHttpRequestInterceptor {\r\n    constructor() {\r\n        this.options = {\r\n        };\r\n        this.url = '';\r\n        this.readyState = 0;\r\n        this.status = 0;\r\n        this.onreadystatechange = () => {\r\n        };\r\n        this.responseText = '';\r\n    }\r\n\r\n    static start() {\r\n        this._XMLHttpRequest = window.XMLHttpRequest;\r\n        window.XMLHttpRequest = XMLHttpRequestInterceptor;\r\n    }\r\n\r\n    static stop() {\r\n        window.XMLHttpRequest = this._XMLHttpRequest;\r\n    }\r\n\r\n    async send(postData) {\r\n        this.options.body = postData;\r\n        await this.sendLive();\r\n    }\r\n\r\n    async sendLive() {\r\n        let response = await fetch(this.url, this.options);\r\n        this.readyState = 4;\r\n        this.status = response.status;\r\n        this.responseText = await response.text();\r\n        this.onreadystatechange();\r\n    }\r\n\r\n    open(type, url) {\r\n        this.options.method = type;\r\n        this.url = url;\r\n    }\r\n\r\n    abort(...args) {\r\n        console.info(\"abort\", ...args);\r\n    }\r\n\r\n    setRequestHeader(key, value) {\r\n        if (!this.options.hasOwnProperty('headers'))\r\n            this.options.headers = {};\r\n        this.options.headers[key] = value;\r\n    }\r\n}","import MusicDownloader from \"./MusicDownloader\";\r\nimport FetchInterceptor from \"./FetchInterceptor\";\r\nimport XMLHttpRequestInterceptor from \"./XMLHttpRequestInterceptor\";\r\nimport config from './config'\r\n\r\nexport default class BrowserMusicDownloader extends MusicDownloader {\r\n    constructor() {\r\n        super();\r\n        this.cacheName = 'vue-music';\r\n        FetchInterceptor.start();\r\n        XMLHttpRequestInterceptor.start();\r\n    }\r\n\r\n    async getYtdlInfo(id) {\r\n        // sadly we must move ytdl to the server, because the IP of the ytdl requester has to match the client requesting it\r\n        let response = await fetch(config.api + '/ytdl?id=' + id, {method: \"POST\"});\r\n        return await response.json();\r\n    }\r\n\r\n    async removeCached(track) {\r\n        let trackString = this.getSearchString(track);\r\n        const cacheStorage = await caches.open(this.cacheName);\r\n        console.warn(`Deleted cache ${trackString} for`, track);\r\n        return await cacheStorage.delete(trackString);\r\n    }\r\n\r\n    async isTrackOffline(track) {\r\n        let trackString = this.getSearchString(track);\r\n        const cacheStorage = await caches.open(this.cacheName);\r\n        let response = await cacheStorage.match(trackString);\r\n        if (response === undefined)\r\n            return false;\r\n        let blob = await response.blob();\r\n        return URL.createObjectURL(blob);\r\n    }\r\n\r\n    async downloadTrack(url, track, progress = () => 0, abortSignal = null) {\r\n        progress('Downloading');\r\n        let trackString = this.getSearchString(track);\r\n        try {\r\n            let res = await fetch(url, {signal: abortSignal});\r\n            const cacheStorage = await caches.open(this.cacheName);\r\n            await cacheStorage.put(trackString, res);\r\n            progress('Downloaded');\r\n        } catch (e) {\r\n            return progress('Failed');\r\n        }\r\n    }\r\n}","import BrowserMusicDownloader from \"../../js/music-downloader/BrowserMusicDownloader\";\r\n\r\nexport default {\r\n    state: {\r\n        type: 'web',\r\n        channel: null,\r\n        downloads: [],\r\n        playingIcons: [],\r\n        pausedIcons: [],\r\n        downloader: new BrowserMusicDownloader(),\r\n    },\r\n    mutations: {\r\n        channel: (state, channel) => state.channel = channel,\r\n    },\r\n    getters: {},\r\n    actions: {\r\n        exportCache() {\r\n            //Not needed\r\n        },\r\n\r\n        initializePlatform: async ({state, commit, dispatch, getters, rootState}) => {\r\n        },\r\n        setPlatformPlaying: ({state}, playing) => {\r\n        },\r\n\r\n        resetSpotifyLogin({state, commit}) {\r\n            if (state.channel !== null) {\r\n                state.channel.close();\r\n                commit('channel', null);\r\n            }\r\n        },\r\n        firstLogin: async ({rootState, getters, state, commit, dispatch}) => {\r\n            return new Promise(async resolve => {\r\n                if (!getters.isKeySet) {\r\n                    console.warn(\"Can't log in, keys are not set\");\r\n                    return;\r\n                }\r\n                let redirectUrl = location.origin + (location.pathname + (location.pathname.endsWith('/') ? '' : '/')).replace(/\\/\\//gi, '/');\r\n                console.log(\"REDIRECT URL:\", redirectUrl);\r\n                redirectUrl = encodeURIComponent(redirectUrl);\r\n                const url = `${rootState.authUrl}authorize?client_id=${rootState.keys.spotifyId}&response_type=code&redirect_uri=${redirectUrl}&scope=${encodeURIComponent(rootState.requestedScopes)}`;\r\n                window.open(url);\r\n\r\n                if (state.channel)\r\n                    state.channel.close();\r\n                let channel = new BroadcastChannel('loginCode');\r\n                commit('channel', channel);\r\n                channel.onmessage = msg => {\r\n                    channel.close();\r\n                    commit('channel', null);\r\n\r\n                    dispatch('getAuthByCode', {redirectUrl, code: msg.data}).then(auth => {\r\n                        resolve({\r\n                            code: msg.data,\r\n                            token: auth.access_token,\r\n                            refresh: auth.refresh_token,\r\n                            expiryDate: (+new Date) + auth.expires_in * 1000,\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n        },\r\n    },\r\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolBar.vue?vue&type=style&index=0&id=3401c773&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.contextItem !== null)?_c('v-list',{ref:\"list\",staticClass:\"queue-list\",style:({\n    height: _vm.height,\n})},[_c('h5',{staticClass:\"context\"},[_vm._v(_vm._s(_vm.context.name))]),_c('recycle-scroller',{ref:\"scroller\",staticClass:\"scroller\",style:({\n                height: _vm.scrollerHeight + 'px',\n            }),attrs:{\"items\":_vm.queue,\"item-size\":51},scopedSlots:_vm._u([{key:\"default\",fn:function({item, index}){return [_c('div',{staticClass:\"scroll-item\"},[_c('v-divider'),_c('track-row',{key:item.id,attrs:{\"queue-track\":\"\",\"context-item\":_vm.contextItem,\"track\":item}})],1)]}}],null,false,3097587504)}),_c('div',{staticClass:\"bottom-buttons\"},[(_vm.context.to !== null)?_c('v-btn',{staticClass:\"view-more\",attrs:{\"disabled\":_vm.$route.fullPath === _vm.context.to,\"color\":\"primary\",\"text\":\"\",\"small\":\"\",\"to\":_vm.context.to,\"title\":'Visit ' + _vm.contextItem.name}},[_vm._v(\"Go to \"+_vm._s(_vm.contextItem.type)+\" \")]):_vm._e(),_c('v-btn',{staticClass:\"view-more\",attrs:{\"small\":\"\",\"text\":\"\"},on:{\"click\":function($event){return _vm.$store.commit('clearQueue')}}},[_vm._v(\"Clear queue\")])],1)],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-list v-if=\"contextItem !== null\" class=\"queue-list\" ref=\"list\" :style=\"{\r\n        height: height,\r\n    }\">\r\n        <h5 class=\"context\">{{context.name}}</h5>\r\n        <recycle-scroller\r\n                ref=\"scroller\"\r\n                class=\"scroller\"\r\n                :items=\"queue\"\r\n                :item-size=\"51\"\r\n                :style=\"{\r\n                    height: scrollerHeight + 'px',\r\n                }\"\r\n                v-slot=\"{item, index}\">\r\n            <div class=\"scroll-item\">\r\n                <v-divider></v-divider>\r\n                <track-row\r\n                        queue-track\r\n                        :context-item=\"contextItem\"\r\n                        :key=\"item.id\"\r\n                        :track=\"item\"></track-row>\r\n            </div>\r\n        </recycle-scroller>\r\n        <div class=\"bottom-buttons\">\r\n            <v-btn v-if=\"context.to !== null\" :disabled=\"$route.fullPath === context.to\" color=\"primary\" text\r\n                   class=\"view-more\" small :to=\"context.to\"\r\n                   :title=\"'Visit ' + contextItem.name\">Go to {{contextItem.type}}\r\n            </v-btn>\r\n            <v-btn small text class=\"view-more\" @click=\"$store.commit('clearQueue')\">Clear queue</v-btn>\r\n        </div>\r\n    </v-list>\r\n</template>\r\n\r\n<script>\r\n    import TrackRow from \"./TrackRow\";\r\n\r\n    export default {\r\n        name: \"QueueList\",\r\n        components: {TrackRow},\r\n        props: {\r\n            height: {\r\n                type: [Number, String],\r\n                default: '90vh',\r\n            },\r\n        },\r\n        data: () => ({\r\n            scrollerHeight: window.innerHeight - 110 - 150,\r\n        }),\r\n        mounted() {\r\n            this.calculateHeight();\r\n            window.addEventListener('resize', this.calculateHeight);\r\n        },\r\n        beforeDestroy() {\r\n            window.removeEventListener('resize', this.calculateHeight);\r\n        },\r\n        methods: {\r\n            calculateHeight() {\r\n                if (!this.$refs.list)\r\n                    return;\r\n                let {height} = this.$refs.list.$el.getBoundingClientRect();\r\n                this.scrollerHeight = height - 110;\r\n            },\r\n            scrollToItem() {\r\n                setTimeout(() => {\r\n                    this.calculateHeight();\r\n                    if (this.$refs.scroller)\r\n                        this.$refs.scroller.scrollToItem(this.$store.getters.trackIndex);\r\n                }, 100);\r\n            },\r\n        },\r\n        computed: {\r\n            contextItem() {\r\n                return this.$store.state.media.contextItem;\r\n            },\r\n            context() {\r\n                return {\r\n                    name: this.contextItem.name,\r\n                    to: this.$store.getters.relativeItemUrl(this.contextItem)\r\n                };\r\n            },\r\n            queue() {\r\n                return this.$store.getters.currentQueue;\r\n            }\r\n        },\r\n        watch: {\r\n            '$store.getters.trackIndex'() {\r\n                if (this.$refs.scroller)\r\n                    this.$refs.scroller.scrollToItem(this.$store.getters.trackIndex);\r\n            },\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .queue-list {\r\n        overflow-y: auto;\r\n    }\r\n\r\n    .context {\r\n        padding: 15px 20px;\r\n    }\r\n\r\n    .view-more {\r\n        margin: 13px 15px 2px;\r\n    }\r\n\r\n    .scroller {\r\n        height: 51px;\r\n        padding: 0 15px;\r\n    }\r\n\r\n    .bottom-buttons {\r\n        display: flex;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueueList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueueList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./QueueList.vue?vue&type=template&id=262b5931&scoped=true&\"\nimport script from \"./QueueList.vue?vue&type=script&lang=js&\"\nexport * from \"./QueueList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./QueueList.vue?vue&type=style&index=0&id=262b5931&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"262b5931\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}