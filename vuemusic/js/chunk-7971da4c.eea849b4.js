(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7971da4c"],{1681:function(t,e,s){},"26d3":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"settings"},[s("div",{staticClass:"wide"},[s("h1",{staticClass:"page-title"},[t._v("Settings")]),s("v-divider",{staticClass:"divider"}),s("div",{staticClass:"secrets"},[s("h2",[t._v("Secrets")]),s("p",{staticClass:"caption"},[t._v("These values must be set before using the application. Order: Spotify id, Spotify secret, Youtube API key")]),s("div",{staticClass:"secret-textarea"},[t._m(0),s("v-textarea",{attrs:{placeholder:t.secretsPlaceholder,"no-resize":"",spellcheck:"false",rules:t.secretRules,outlined:"","auto-grow":"","row-height":"4"},model:{value:t.secrets,callback:function(e){t.secrets=e},expression:"secrets"}})],1),t.$store.getters.isKeySet?s("p",{staticClass:"key-saved"},[s("v-icon",{attrs:{color:"success"}},[t._v("mdi-check")]),s("span",[t._v("Keys saved!")])],1):s("p",{staticClass:"key-saved"},[s("v-icon",{attrs:{color:"error"}},[t._v("mdi-close")]),s("span",[t._v("One or more keys not valid")])],1)]),s("div",[s("h2",[t._v("Account")]),t.$store.getters.isKeySet?s("div",{staticClass:"login"},[t.$store.getters.isLoggedIn?t._e():s("div",[s("p",[t._v("Click the button below to log in to your Spotifyâ„¢ account!")]),s("v-btn",{attrs:{outlined:"",color:"success",loading:t.loginLoading},on:{click:t.login}},[s("v-icon",[t._v("mdi-spotify")]),t._v(" Login ")],1),t.loginLoading?s("v-btn",{attrs:{icon:"",color:"warning"},on:{click:t.resetLogin}},[s("v-icon",[t._v("mdi-close")])],1):t._e()],1)]):t._e(),t.$store.getters.isLoggedIn?s("div",[s("div",{staticClass:"account-info"},[s("v-avatar",[s("img",{staticClass:"avatar",attrs:{src:t.$store.state.userInfo.avatar,alt:"user profile image"}})]),s("div",[s("h3",[t._v(t._s(t.$store.state.userInfo.name))]),s("p",{staticClass:"caption"},[t._v(t._s(t.$store.state.userInfo.mail))])])],1),s("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){return t.$store.dispatch("spotifyLogout")}}},[t._v("Log out")])],1):t._e()]),s("div",{staticClass:"misc"},[s("h2",[t._v("Miscellaneous")]),s("v-btn",{attrs:{outlined:"",color:"error"},on:{click:function(e){return t.$store.dispatch("clearCache")}}},[s("v-icon",[t._v("mdi-error")]),t._v(" Clear cache ")],1),s("v-switch",{attrs:{inset:"",label:"Download tracks while you're listening?"},model:{value:t.$store.state.media.shouldDownload,callback:function(e){t.$set(t.$store.state.media,"shouldDownload",e)},expression:"$store.state.media.shouldDownload"}})],1)],1)])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"secret-help"},[s("p",[t._v("Spotify Client ID")]),s("p",[t._v("Spotify Client Secret")]),s("p",[t._v("Youtube API Key")])])}],o={name:"Settings",data:()=>({secretsPlaceholder:"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\nbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\ncccccccccccc-dddddddddddddddddddddddddd",secrets:"",loginLoading:!1,secretRules:[t=>3===t.split("\n").length||"There must be three lines"]}),mounted(){},methods:{async resetLogin(){await this.$store.dispatch("resetSpotifyLogin"),this.loginLoading=!1},async login(){this.loginLoading=!0,await this.$store.dispatch("spotifyLogin"),this.loginLoading=!1}},watch:{"$store.state.keys"(){this.secrets=this.$store.state.keys.spotifyId+"\n"+this.$store.state.keys.spotifySecret+"\n"+this.$store.state.keys.youtube},async secrets(){console.log("Secrets changed to",this.secrets);let t=this.secrets.split("\n");if(3===t.length){let[e,s,a]=t;this.$store.commit("spotifyId",e),this.$store.commit("spotifySecret",s),this.$store.commit("youtubeKey",a),await this.$store.dispatch("cacheState")}}}},r=o,n=(s("3922"),s("2877")),c=s("6544"),l=s.n(c),d=s("8212"),u=s("8336"),h=s("ce7e"),p=s("132d"),v=s("b73d"),g=(s("1681"),s("8654")),b=s("58df");const y=Object(b["a"])(g["a"]);var f=y.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...g["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick(()=>{var e;t?this.calculateInputHeight():null==(e=this.$refs.input)||e.style.removeProperty("height")})},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,s=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(s,e)+"px"},genInput(){const t=g["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){g["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),m=Object(n["a"])(r,a,i,!1,null,"eb107c9a",null);e["default"]=m.exports;l()(m,{VAvatar:d["a"],VBtn:u["a"],VDivider:h["a"],VIcon:p["a"],VSwitch:v["a"],VTextarea:f})},3922:function(t,e,s){"use strict";s("f8f6")},f8f6:function(t,e,s){}}]);
//# sourceMappingURL=chunk-7971da4c.eea849b4.js.map