{"version":3,"sources":["webpack:///./src/views/Tracks.vue?e91f","webpack:///./src/views/Tracks.vue?b578","webpack:///src/views/Tracks.vue","webpack:///./src/views/Tracks.vue?b9d1","webpack:///./src/views/Tracks.vue?1751"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","scrollItems","scopedSlots","_u","key","fn","ref","item","index","on","$event","preventDefault","filter","apply","arguments","_v","clearFilter","model","value","callback","$$v","liveFilter","expression","$store","dispatch","context","tracks","length","shuffle","_e","_s","fullDuration","id","hideAlbum","compactMenu","staticRenderFns","component","VBtn","VDivider","VForm","VIcon","VProgressCircular","VTextField"],"mappings":"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","file":"js/chunk-314eefa8.353880bb.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tracks.vue?vue&type=style&index=0&id=2b6d4f20&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tracks\"},[_c('recycle-scroller',{staticClass:\"scroller\",attrs:{\"items\":_vm.scrollItems,\"key-field\":\"id\",\"size-field\":\"size\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nvar index = ref.index;\nreturn [(index===0)?_c('div',{staticClass:\"page-title-container\"},[_c('v-form',{staticClass:\"title-container\",on:{\"submit\":function($event){$event.preventDefault();return _vm.filter.apply(null, arguments)}}},[_c('h1',{staticClass:\"page-title\"},[_vm._v(\"Tracks\")]),_c('v-text-field',{ref:\"filterInput\",staticClass:\"filter-term\",attrs:{\"outlined\":\"\",\"rounded\":\"\",\"dense\":\"\",\"label\":\"Filter tracks\",\"clearable\":\"\"},on:{\"click:clear\":_vm.clearFilter},model:{value:(_vm.liveFilter),callback:function ($$v) {_vm.liveFilter=$$v},expression:\"liveFilter\"}})],1),_c('v-divider',{staticClass:\"divider\"}),_c('div',{staticClass:\"buttons\"},[_c('v-btn',{attrs:{\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.$store.dispatch('playItem', {item: _vm.context})}}},[_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"}},[_vm._v(\"mdi-play\")]),_vm._v(\" Play \")],1),(_vm.tracks.length > 1)?_c('v-btn',{attrs:{\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.$store.dispatch('playItem', {item: _vm.context, shuffle:true})}}},[_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"}},[_vm._v(\"mdi-shuffle\")]),_vm._v(\" Shuffle \")],1):_vm._e()],1),_c('div',{staticClass:\"sub-caption\"},[_c('span',[_vm._v(_vm._s(_vm.tracks.length)+\" tracks\")]),_c('span',{staticClass:\"dot\"},[_vm._v(\"•\")]),_c('span',[_vm._v(_vm._s(_vm.fullDuration))]),(_vm.loading)?_c('span',{staticClass:\"loading-indicator\"},[_c('span',{staticClass:\"dot\"},[_vm._v(\"•\")]),_c('v-progress-circular',{staticClass:\"spinner\",attrs:{\"indeterminate\":\"\",\"size\":\"10\",\"width\":\"1\"}}),_c('span',[_vm._v(\"Refreshing\")])],1):_vm._e()]),_c('v-divider',{staticClass:\"mr-1 ml-1\"})],1):_vm._e(),(index>0)?_c('div',{staticClass:\"scroll-item\"},[_c('track-row',{key:item.id,attrs:{\"no-album\":_vm.hideAlbum,\"compact-menu\":_vm.compactMenu,\"context-item\":_vm.context,\"album-list\":false,\"track\":item}}),_c('v-divider',{staticClass:\"mr-1 ml-1\"})],1):_vm._e()]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"tracks\">\r\n        <recycle-scroller\r\n                class=\"scroller\"\r\n                :items=\"scrollItems\"\r\n                key-field=\"id\"\r\n                size-field=\"size\"\r\n                v-slot=\"{item, index}\">\r\n            <div v-if=\"index===0\" class=\"page-title-container\">\r\n                <v-form @submit.prevent=\"filter\" class=\"title-container\">\r\n                    <h1 class=\"page-title\">Tracks</h1>\r\n                    <v-text-field ref=\"filterInput\" outlined rounded dense v-model=\"liveFilter\" label=\"Filter tracks\"\r\n                                  class=\"filter-term\" clearable\r\n                                  @click:clear=\"clearFilter\"></v-text-field>\r\n                </v-form>\r\n                <v-divider class=\"divider\"></v-divider>\r\n                <div class=\"buttons\">\r\n                    <v-btn small color=\"primary\" @click=\"$store.dispatch('playItem', {item: context})\">\r\n                        <v-icon small class=\"mr-2\">mdi-play</v-icon>\r\n                        Play\r\n                    </v-btn>\r\n                    <v-btn small v-if=\"tracks.length > 1\" color=\"primary\"\r\n                           @click=\"$store.dispatch('playItem', {item: context, shuffle:true})\">\r\n                        <v-icon small class=\"mr-2\">mdi-shuffle</v-icon>\r\n                        Shuffle\r\n                    </v-btn>\r\n                </div>\r\n                <div class=\"sub-caption\">\r\n                    <span>{{tracks.length}} tracks</span>\r\n                    <span class=\"dot\">•</span>\r\n                    <span>{{fullDuration}}</span>\r\n                    <span v-if=\"loading\" class=\"loading-indicator\">\r\n                        <span class=\"dot\">•</span>\r\n                        <v-progress-circular class=\"spinner\" indeterminate size=\"10\" width=\"1\"></v-progress-circular>\r\n                        <span>Refreshing</span>\r\n                    </span>\r\n                </div>\r\n                <v-divider class=\"mr-1 ml-1\"></v-divider>\r\n            </div>\r\n            <div class=\"scroll-item\" v-if=\"index>0\">\r\n                <track-row\r\n                        :no-album=\"hideAlbum\"\r\n                        :compact-menu=\"compactMenu\"\r\n                        :context-item=\"context\"\r\n                        :album-list=\"false\"\r\n                        :key=\"item.id\"\r\n                        :track=\"item\"></track-row>\r\n                <v-divider class=\"mr-1 ml-1\"></v-divider>\r\n            </div>\r\n        </recycle-scroller>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import TrackRow from \"../components/TrackRow\";\r\n    import Utils from \"../js/Utils\";\r\n\r\n    export default {\r\n        name: \"Tracks\",\r\n        components: {TrackRow},\r\n        data: () => ({\r\n            liveFilter: '',\r\n            filterTerm: '',\r\n            focusInterval: -1,\r\n        }),\r\n        async mounted() {\r\n            await this.$store.dispatch('refreshUserData', 'track');\r\n        },\r\n        beforeDestroy() {\r\n            clearInterval(this.focusInterval);\r\n        },\r\n        methods: {\r\n            clearFilter() {\r\n                this.liveFilter = '';\r\n                this.filter(false);\r\n            },\r\n            filter(focus = true) {\r\n                this.filterTerm = this.liveFilter;\r\n                if (!focus)\r\n                    return;\r\n\r\n                // 🍝 Input element is destroyed due to recycle scroller being rebuild\r\n                // so input focus is sometimes lost which is unexpected.\r\n                // This restores focus\r\n                let hasSwitched = false;\r\n                let timeout = 800;\r\n                let intervalSpeed = 10;\r\n                let i = 0;\r\n                clearInterval(this.focusInterval);\r\n                this.focusInterval = setInterval(() => {\r\n                    let inputEl = this.$refs.filterInput.$el.querySelector(\"input\");\r\n                    if (inputEl !== document.activeElement) {\r\n                        hasSwitched = true;\r\n                        this.$refs.filterInput.focus();\r\n                        clearInterval(this.focusInterval);\r\n                        console.log(\"Stop due to focus called\");\r\n                    }\r\n                    if (i++ > timeout / intervalSpeed) {\r\n                        clearInterval(this.focusInterval);\r\n                        console.log(\"Stop due to timeout\");\r\n                    }\r\n                }, intervalSpeed);\r\n            }\r\n        },\r\n        computed: {\r\n            lowerFilterTerm() {\r\n                return this.filterTerm.toLowerCase();\r\n            },\r\n            context() {\r\n                return {type: 'liked', id: 'liked', name: 'Liked tracks', tracks: this.tracks}\r\n            },\r\n            loading() {\r\n                return this.$store.state.isRefreshing.track;\r\n            },\r\n            compactMenu() {\r\n                let width = this.$store.state.windowWidth;\r\n                return width < 735 && (width > 680 || width < 436);\r\n            },\r\n            hideAlbum() {\r\n                let width = this.$store.state.windowWidth;\r\n                return width < 950;\r\n            },\r\n            scrollItems() {\r\n                let tracks = this.tracks.map(t => ({...t, size: 51}));\r\n                let titleHeight = 142;\r\n                return [{id: '0', size: titleHeight}, ...tracks];\r\n            },\r\n            tracks() {\r\n                if (this.filterTerm === '')\r\n                    return this.$store.state.library.tracks.filter(t => !t.is_local);\r\n                return this.$store.state.library.tracks.filter(t =>\r\n                    !t.is_local &&\r\n                    t.name.toLowerCase().includes(this.lowerFilterTerm) ||\r\n                    t.artists.map(a => a.name).join(' ').toLowerCase().includes(this.lowerFilterTerm)\r\n                );\r\n            },\r\n            fullDuration() {\r\n                if (this.tracks.length === 0)\r\n                    return Utils.secondsToHms(0);\r\n                return Utils.secondsToHms(this.tracks.map(t => t.duration_ms / 1000).reduce((a, b) => a + b));\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .tracks {\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n\r\n    .title-container {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        margin-top: 4px;\r\n    }\r\n\r\n    .filter-term {\r\n        margin-bottom: -20px;\r\n        max-width: 250px;\r\n        margin-right: 5px;\r\n        margin-top: 4px;\r\n    }\r\n\r\n    .scroller {\r\n        height: 100%;\r\n        padding: 30px;\r\n        padding-top: 20px;\r\n    }\r\n\r\n    @media (max-width: 680px) {\r\n        .scroller {\r\n            padding: 10px;\r\n        }\r\n    }\r\n\r\n    .divider {\r\n        margin-bottom: 15px;\r\n    }\r\n\r\n    .buttons {\r\n        display: flex;\r\n    }\r\n\r\n    .buttons > *:not(:last-child) {\r\n        margin-right: 15px;\r\n    }\r\n\r\n    .sub-caption {\r\n        margin: 15px 0 10px;\r\n        text-transform: uppercase;\r\n        font-size: 12px;\r\n        font-weight: bolder;\r\n        opacity: 0.7;\r\n    }\r\n\r\n    .dot {\r\n        margin: 0 10px;\r\n    }\r\n\r\n    .loading-indicator {\r\n        display: inline-flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        vertical-align: top;\r\n    }\r\n\r\n    .spinner {\r\n        margin-right: 5px;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tracks.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tracks.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tracks.vue?vue&type=template&id=2b6d4f20&scoped=true&\"\nimport script from \"./Tracks.vue?vue&type=script&lang=js&\"\nexport * from \"./Tracks.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tracks.vue?vue&type=style&index=0&id=2b6d4f20&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b6d4f20\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VDivider,VForm,VIcon,VProgressCircular,VTextField})\n"],"sourceRoot":""}