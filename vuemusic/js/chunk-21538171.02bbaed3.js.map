{"version":3,"sources":["webpack:///../../../src/components/VTextarea/VTextarea.ts","webpack:///./src/views/Settings.vue","webpack:///src/views/Settings.vue","webpack:///./src/views/Settings.vue?2c46","webpack:///./src/views/Settings.vue?0ac0","webpack:///./src/views/Settings.vue?a6fb"],"names":["baseMixins","mixins","VTextField","extend","name","props","autoGrow","Boolean","noResize","rowHeight","type","Number","String","default","validator","v","isNaN","parseFloat","rows","parseInt","computed","classes","this","noResizeHandle","options","call","watch","val","$nextTick","calculateInputHeight","$refs","input","_a","style","removeProperty","lazyValue","mounted","setTimeout","methods","height","scrollHeight","minHeight","Math","max","genInput","tag","data","attrs","onInput","e","onKeyDown","isFocused","keyCode","stopPropagation","$emit","staticClass","_vm","_c","model","value","secrets","callback","expression","on","login","$store","_s","dispatch","staticRenderFns","secretsPlaceholder","loginLoading","secretRules","console","component"],"mappings":"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","file":"js/chunk-21538171.02bbaed3.js","sourcesContent":["// Styles\nimport './VTextarea.sass'\n\n// Extensions\nimport VTextField from '../VTextField/VTextField'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport Vue from 'vue'\n\ninterface options extends Vue {\n  $refs: {\n    input: HTMLTextAreaElement\n  }\n}\n\nconst baseMixins = mixins<options &\n  InstanceType<typeof VTextField>\n>(\n  VTextField\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-textarea',\n\n  props: {\n    autoGrow: Boolean,\n    noResize: Boolean,\n    rowHeight: {\n      type: [Number, String],\n      default: 24,\n      validator: (v: any) => !isNaN(parseFloat(v)),\n    },\n    rows: {\n      type: [Number, String],\n      default: 5,\n      validator: (v: any) => !isNaN(parseInt(v, 10)),\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-textarea': true,\n        'v-textarea--auto-grow': this.autoGrow,\n        'v-textarea--no-resize': this.noResizeHandle,\n        ...VTextField.options.computed.classes.call(this),\n      }\n    },\n    noResizeHandle (): boolean {\n      return this.noResize || this.autoGrow\n    },\n  },\n\n  watch: {\n    autoGrow (val: boolean) {\n      this.$nextTick(() => {\n        val\n          ? this.calculateInputHeight()\n          : this.$refs.input?.style.removeProperty('height')\n      })\n    },\n    lazyValue () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n    rowHeight () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n  },\n\n  mounted () {\n    setTimeout(() => {\n      this.autoGrow && this.calculateInputHeight()\n    }, 0)\n  },\n\n  methods: {\n    calculateInputHeight () {\n      const input = this.$refs.input\n      if (!input) return\n\n      input.style.height = '0'\n      const height = input.scrollHeight\n      const minHeight = parseInt(this.rows, 10) * parseFloat(this.rowHeight)\n      // This has to be done ASAP, waiting for Vue\n      // to update the DOM causes ugly layout jumping\n      input.style.height = Math.max(minHeight, height) + 'px'\n    },\n    genInput () {\n      const input = VTextField.options.methods.genInput.call(this)\n\n      input.tag = 'textarea'\n      delete input.data!.attrs!.type\n      input.data!.attrs!.rows = this.rows\n\n      return input\n    },\n    onInput (e: Event) {\n      VTextField.options.methods.onInput.call(this, e)\n      this.autoGrow && this.calculateInputHeight()\n    },\n    onKeyDown (e: KeyboardEvent) {\n      // Prevents closing of a\n      // dialog when pressing\n      // enter\n      if (this.isFocused && e.keyCode === 13) {\n        e.stopPropagation()\n      }\n\n      this.$emit('keydown', e)\n    },\n  },\n})\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"settings\"},[_c('div',{staticClass:\"wide\"},[_c('h1',{staticClass:\"page-title\"},[_vm._v(\"Settings\")]),_c('v-divider',{staticClass:\"divider\"}),_c('div',{staticClass:\"secrets\"},[_c('h2',[_vm._v(\"Secrets\")]),_c('p',{staticClass:\"caption\"},[_vm._v(\"These values must be set before using the application. Order: Spotify id, Spotify secret, Youtube API key\")]),_c('div',{staticClass:\"secret-textarea\"},[_vm._m(0),_c('v-textarea',{attrs:{\"placeholder\":_vm.secretsPlaceholder,\"no-resize\":\"\",\"spellcheck\":\"false\",\"rules\":_vm.secretRules,\"outlined\":\"\",\"auto-grow\":\"\",\"row-height\":\"4\"},model:{value:(_vm.secrets),callback:function ($$v) {_vm.secrets=$$v},expression:\"secrets\"}})],1),(_vm.$store.getters.isKeySet)?_c('p',{staticClass:\"key-saved\"},[_c('v-icon',{attrs:{\"color\":\"success\"}},[_vm._v(\"mdi-check\")]),_c('span',[_vm._v(\"Keys saved!\")])],1):_c('p',{staticClass:\"key-saved\"},[_c('v-icon',{attrs:{\"color\":\"error\"}},[_vm._v(\"mdi-close\")]),_c('span',[_vm._v(\"One or more keys not valid\")])],1)]),_c('div',[_c('h2',[_vm._v(\"Account\")]),(_vm.$store.getters.isKeySet)?_c('div',{staticClass:\"login\"},[(!_vm.$store.getters.isLoggedIn)?_c('div',[_c('p',[_vm._v(\"Click the button below to log in to your Spotify™ account!\")]),_c('v-btn',{attrs:{\"outlined\":\"\",\"color\":\"success\",\"loading\":_vm.loginLoading},on:{\"click\":_vm.login}},[_c('v-icon',[_vm._v(\"mdi-spotify\")]),_vm._v(\" Login \")],1),(_vm.loginLoading)?_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"warning\"},on:{\"click\":_vm.resetLogin}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1):_vm._e()],1):_vm._e()]):_vm._e(),(_vm.$store.getters.isLoggedIn)?_c('div',[_c('div',{staticClass:\"account-info\"},[_c('v-avatar',[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.$store.state.userInfo.avatar,\"alt\":\"user profile image\"}})]),_c('div',[_c('h3',[_vm._v(_vm._s(_vm.$store.state.userInfo.name))]),_c('p',{staticClass:\"caption\"},[_vm._v(_vm._s(_vm.$store.state.userInfo.mail))])])],1),_c('v-btn',{attrs:{\"color\":\"primary\",\"outlined\":\"\"},on:{\"click\":function($event){return _vm.$store.dispatch('spotifyLogout')}}},[_vm._v(\"Log out\")])],1):_vm._e()]),_c('div',{staticClass:\"misc\"},[_c('h2',[_vm._v(\"Miscellaneous\")]),_c('v-btn',{attrs:{\"outlined\":\"\",\"color\":\"error\"},on:{\"click\":function($event){return _vm.$store.dispatch('clearCache')}}},[_c('v-icon',[_vm._v(\"mdi-error\")]),_vm._v(\" Clear cache \")],1),_c('v-switch',{attrs:{\"inset\":\"\",\"label\":\"Download tracks while you're listening?\"},model:{value:(_vm.$store.state.media.shouldDownload),callback:function ($$v) {_vm.$set(_vm.$store.state.media, \"shouldDownload\", $$v)},expression:\"$store.state.media.shouldDownload\"}})],1)],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"secret-help\"},[_c('p',[_vm._v(\"Spotify Client ID\")]),_c('p',[_vm._v(\"Spotify Client Secret\")]),_c('p',[_vm._v(\"Youtube API Key\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"settings\">\r\n        <div class=\"wide\">\r\n            <h1 class=\"page-title\">Settings</h1>\r\n            <v-divider class=\"divider\"></v-divider>\r\n            <div class=\"secrets\">\r\n                <h2>Secrets</h2>\r\n                <p class=\"caption\">These values must be set before using the application. Order: Spotify id, Spotify\r\n                    secret,\r\n                    Youtube API key</p>\r\n                <div class=\"secret-textarea\">\r\n                    <div class=\"secret-help\">\r\n                        <p>Spotify Client ID</p>\r\n                        <p>Spotify Client Secret</p>\r\n                        <p>Youtube API Key</p>\r\n                    </div>\r\n                    <v-textarea :placeholder=\"secretsPlaceholder\" no-resize spellcheck=\"false\" :rules=\"secretRules\"\r\n                                outlined\r\n                                auto-grow row-height=\"4\"\r\n                                v-model=\"secrets\"></v-textarea>\r\n                </div>\r\n                <p class=\"key-saved\" v-if=\"$store.getters.isKeySet\">\r\n                    <v-icon color=\"success\">mdi-check</v-icon>\r\n                    <span>Keys saved!</span>\r\n                </p>\r\n                <p v-else class=\"key-saved\">\r\n                    <v-icon color=\"error\">mdi-close</v-icon>\r\n                    <span>One or more keys not valid</span>\r\n                </p>\r\n            </div>\r\n            <div>\r\n                <h2>Account</h2>\r\n                <div class=\"login\" v-if=\"$store.getters.isKeySet\">\r\n                    <div v-if=\"!$store.getters.isLoggedIn\">\r\n                        <p>Click the button below to log in to your Spotify™ account!</p>\r\n                        <v-btn outlined color=\"success\" @click=\"login\" :loading=\"loginLoading\">\r\n                            <v-icon>mdi-spotify</v-icon>\r\n                            Login\r\n                        </v-btn>\r\n                        <v-btn icon color=\"warning\" @click=\"resetLogin\" v-if=\"loginLoading\">\r\n                            <v-icon>mdi-close</v-icon>\r\n                        </v-btn>\r\n                    </div>\r\n                </div>\r\n                <div v-if=\"$store.getters.isLoggedIn\">\r\n                    <div class=\"account-info\">\r\n                        <v-avatar>\r\n                            <img class=\"avatar\" :src=\"$store.state.userInfo.avatar\" alt=\"user profile image\"/>\r\n                        </v-avatar>\r\n                        <div>\r\n                            <h3>{{$store.state.userInfo.name}}</h3>\r\n                            <p class=\"caption\">{{$store.state.userInfo.mail}}</p>\r\n                        </div>\r\n                    </div>\r\n                    <v-btn color=\"primary\" outlined @click=\"$store.dispatch('spotifyLogout')\">Log out</v-btn>\r\n                </div>\r\n            </div>\r\n            <div class=\"misc\">\r\n                <h2>Miscellaneous</h2>\r\n                <v-btn outlined @click=\"$store.dispatch('clearCache')\" color=\"error\">\r\n                    <v-icon>mdi-error</v-icon>\r\n                    Clear cache\r\n                </v-btn>\r\n                <v-switch inset v-model=\"$store.state.media.shouldDownload\"\r\n                          label=\"Download tracks while you're listening?\"></v-switch>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"Settings\",\r\n        data: () => ({\r\n            secretsPlaceholder: \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\\nbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\\ncccccccccccc-dddddddddddddddddddddddddd\",\r\n            secrets: \"\",\r\n            loginLoading: false,\r\n            secretRules: [\r\n                v => v.split('\\n').length === 3 || 'There must be three lines',\r\n            ],\r\n        }),\r\n        mounted() {\r\n\r\n        },\r\n        methods: {\r\n            async resetLogin() {\r\n                await this.$store.dispatch('resetSpotifyLogin');\r\n                this.loginLoading = false;\r\n            },\r\n            async login() {\r\n                this.loginLoading = true;\r\n                await this.$store.dispatch('spotifyLogin');\r\n                this.loginLoading = false;\r\n            }\r\n        },\r\n        watch: {\r\n            '$store.state.keys'() {\r\n                this.secrets = this.$store.state.keys.spotifyId + '\\n' + this.$store.state.keys.spotifySecret + '\\n' + this.$store.state.keys.youtube;\r\n            },\r\n            async secrets() {\r\n                console.log(\"Secrets changed to\", this.secrets);\r\n                let splitSecret = this.secrets.split('\\n');\r\n                if (splitSecret.length === 3) {\r\n                    let [spotifyId, spotifySecret, youtubeKey] = splitSecret;\r\n                    this.$store.commit('spotifyId', spotifyId);\r\n                    this.$store.commit('spotifySecret', spotifySecret);\r\n                    this.$store.commit('youtubeKey', youtubeKey);\r\n                    await this.$store.dispatch('cacheState');\r\n                }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .wide {\r\n        padding: 30px;\r\n        max-width: 800px;\r\n        display: block;\r\n        margin: 0 auto;\r\n    }\r\n\r\n    .divider {\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    .secret-help {\r\n        margin-top: 3px;\r\n        text-align: right;\r\n        font-weight: 500;\r\n    }\r\n\r\n    @media (max-width: 800px) {\r\n        .secret-help {\r\n            display: none;\r\n        }\r\n    }\r\n\r\n    .secret-help > p {\r\n        margin: 7px;\r\n    }\r\n\r\n    .secret-textarea {\r\n        display: flex;\r\n    }\r\n\r\n    .key-saved {\r\n        text-align: right;\r\n    }\r\n\r\n    .account-info {\r\n        display: flex;\r\n    }\r\n\r\n    .account-info > *:first-child {\r\n        margin-right: 10px;\r\n    }\r\n\r\n    .misc {\r\n        margin-top: 20px;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Settings.vue?vue&type=template&id=eb107c9a&scoped=true&\"\nimport script from \"./Settings.vue?vue&type=script&lang=js&\"\nexport * from \"./Settings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Settings.vue?vue&type=style&index=0&id=eb107c9a&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"eb107c9a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=style&index=0&id=eb107c9a&prod&scoped=true&lang=css&\""],"sourceRoot":""}