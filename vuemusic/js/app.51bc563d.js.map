{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?5b85","webpack:///./src/views/Home.vue?3ab6","webpack:///./src/components/MediaPlayerView.vue?fa36","webpack:///./src/App.vue?8b93","webpack:///./src/App.vue","webpack:///./src/views/Home.vue?c164","webpack:///./src/js/Token.js","webpack:///./src/js/Utils.js","webpack:///./src/js/FileStorage.js","webpack:///./src/js/Track.js","webpack:///./src/js/Playlist.js","webpack:///./src/js/SpotifyApi.js","webpack:///./src/components/PlaylistView.vue?cf63","webpack:///src/components/PlaylistView.vue","webpack:///./src/components/PlaylistView.vue?7282","webpack:///./src/components/PlaylistView.vue","webpack:///./src/components/MediaPlayerView.vue?7068","webpack:///./src/js/SongCacher.js","webpack:///src/components/MediaPlayerView.vue","webpack:///./src/components/MediaPlayerView.vue?9f20","webpack:///./src/components/MediaPlayerView.vue","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?2db0","webpack:///./src/views/Home.vue","webpack:///./src/router.js","webpack:///./src/registerServiceWorker.js","webpack:///./src/main.js","webpack:///./src/components/PlaylistView.vue?0069"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","script","component","staticClass","_e","likedTracks","on","playMedia","ref","Token","accessToken","expires","type","json","JSON","parse","e","console","warn","Utils","isLocal","location","href","includes","seconds","isNaN","undefined","Math","round","h","floor","toString","padStart","array","random","FileStorage","isReady","requestSize","events","getFileSystem","then","async","fileSystem","fs","quota","getCurrentQuota","grantedBytes","requestMoreQuota","log","fire","Promise","resolve","root","fileName","directory","getFileByName","files","getDirectoryFiles","find","f","error","reader","createReader","readEntries","webkitRequestFileSystem","PERSISTENT","size","navigator","webkitPersistentStorage","requestQuota","webkitTemporaryStorage","queryUsageAndQuota","usedBytes","blob","fileEntry","createFile","writeToFile","getFile","file","createWriter","writer","onwriteend","onerror","write","event","callback","indexOf","cb","id","title","artists","albumArt","durationMs","addedAt","duration","durationHms","secondsToHms","offline","caching","getCachedOfflineStatus","rawTrack","track","map","a","join","album","images","url","duration_ms","Date","added_at","localStorage","getItem","awaitReady","exists","tracks","activeTrack","empty","shuffledTracks","reshuffle","stringify","forEach","getOfflineStatus","rawTracks","fromRawTrack","shuffleArray","token","requestPaginatedResource","fromRawTracks","getToken","results","fetch","method","headers","next","concat","items","unixSeconds","secondsUntilExpiration","verifyToken","fromJson","getTokenFromApi","reject","clientId","redirectUrl","scopes","state","encodeURIComponent","spotifyWindow","open","hashChecker","setInterval","hash","close","clearInterval","split","tokenType","tokenExpires","tokenState","message","_v","_s","playlist","scopedSlots","_u","fn","item","$event","$emit","style","currentPlaylist","seekDown","touches","utils","trackProgress","shuffle","skipPrevious","pause","play","skipNext","repeat","cache","getServer","query","response","audioBlob","createFileFromBlob","getMetadata","metadata","setOffline","use","routes","path","Home","config","productionTip","router","App","$mount"],"mappings":"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","file":"js/app.51bc563d.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/vuemusic/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=158904c0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=158904c0&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaPlayerView.vue?vue&type=style&index=0&id=dd5701f0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaPlayerView.vue?vue&type=style&index=0&id=dd5701f0&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=203508ad&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[(_vm.loadingFs)?_c('md-progress-bar',{attrs:{\"md-mode\":\"indeterminate\"}}):_vm._e(),_c('md-content',[_c('playlist-view',{staticClass:\"playlist-view\",attrs:{\"playlist\":_vm.likedTracks},on:{\"play\":_vm.playMedia}})],1),_c('media-player-view',{ref:\"mediaPlayer\",staticClass:\"media-player\",attrs:{\"current-playlist\":_vm.likedTracks}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default class Token {\r\n    constructor(accessToken, expires, type) {\r\n        this.accessToken = accessToken;\r\n        this.expires = expires;\r\n        this.type = type;\r\n    }\r\n\r\n    static fromJson(json) {\r\n        if (!json)\r\n            return false;\r\n        try {\r\n            let object = JSON.parse(json);\r\n            return new Token(object.accessToken, object.expires, object.type);\r\n        } catch (e) {\r\n            console.warn(\"Token parse error\", e);\r\n            return false;\r\n        }\r\n    }\r\n}","export default class Utils {\r\n    static getServer() {\r\n        return this.isLocal() ? 'http://localhost:3000' : 'https://ruurd.dev:3000';\r\n    }\r\n\r\n    static isLocal() {\r\n        return location.href.includes('localhost') ||\r\n            location.href.includes('127.0.0.1') ||\r\n            location.href.includes('192.168.0');\r\n    }\r\n\r\n    static secondsToHms(seconds) {\r\n        if (isNaN(seconds) || seconds === undefined)\r\n            return '0:00';\r\n\r\n        seconds = Math.round(seconds);\r\n        let h = Math.floor(seconds / 3600);\r\n        let m = Math.floor((seconds % 3600) / 60);\r\n        let s = seconds % 60;\r\n        h = h.toString();\r\n        m = m.toString();\r\n        s = s.toString();\r\n        if (h !== '0') {\r\n            m = m.padStart(2, '0');\r\n            s = s.padStart(2, '0');\r\n        }\r\n        s = s.padStart(2, '0');\r\n\r\n        if (h === '0')\r\n            return `${m}:${s}`;\r\n        else return `${h}:${m}:${s}`;\r\n    }\r\n\r\n    static shuffleArray(array) {\r\n        for (let i = array.length - 1; i > 0; i--) {\r\n            const j = Math.floor(Math.random() * (i + 1));\r\n            [array[i], array[j]] = [array[j], array[i]];\r\n        }\r\n        return array;\r\n    }\r\n}","class FileStorage {\r\n    constructor() {\r\n        this.isReady = false;\r\n        this.requestSize = 1024 ** 3; // 1GB\r\n        this.events = {};\r\n\r\n        this.getFileSystem().then(async fs => {\r\n            this.fileSystem = fs;\r\n            let quota = await this.getCurrentQuota();\r\n            if (quota.grantedBytes < this.requestSize) {\r\n                await this.requestMoreQuota(this.requestSize);\r\n            }\r\n            this.isReady = true;\r\n            console.log(\"File storage loaded!\");\r\n            this.fire('ready');\r\n        });\r\n    }\r\n\r\n    async awaitReady() {\r\n        return new Promise(resolve => {\r\n            if (this.isReady)\r\n                resolve();\r\n            this.on('ready', () => {\r\n                // console.log(\"resolving ready here\");\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n\r\n    get root() {\r\n        return this.fileSystem.root;\r\n    }\r\n\r\n    async exists(fileName, directory = this.root) {\r\n        return (await this.getFileByName(fileName, directory)) !== undefined;\r\n    }\r\n\r\n    async getFileByName(fileName, directory = this.root) {\r\n        let files = await this.getDirectoryFiles(directory);\r\n        return files.find(f => f.name === fileName);\r\n    }\r\n\r\n    async getDirectoryFiles(directory = this.root) {\r\n        return new Promise((resolve, error) => {\r\n            let reader = directory.createReader();\r\n            reader.readEntries(r => resolve(r), e => error(e));\r\n        });\r\n    }\r\n\r\n    async getFileSystem() {\r\n        return new Promise((resolve, error) => {\r\n            window.webkitRequestFileSystem(window.PERSISTENT, this.requestSize, r => resolve(r), e => error(e));\r\n        });\r\n    }\r\n\r\n    async requestMoreQuota(size) {\r\n        return new Promise((resolve, error) => {\r\n            navigator.webkitPersistentStorage.requestQuota(size, r => resolve(r), e => error(e));\r\n        });\r\n    }\r\n\r\n    async getCurrentQuota() {\r\n        return new Promise((resolve, error) => {\r\n            navigator.webkitTemporaryStorage.queryUsageAndQuota(\r\n                (usedBytes, grantedBytes) => resolve({usedBytes, grantedBytes}), e => error(e)\r\n            );\r\n        });\r\n    }\r\n\r\n    async createFileFromBlob(name, blob, directory = this.root) {\r\n        let fileEntry = await this.createFile(name, directory);\r\n        await this.writeToFile(blob, fileEntry);\r\n        return fileEntry;\r\n    }\r\n\r\n    async createFile(name, directory = this.root) {\r\n        return new Promise((resolve, error) => {\r\n            directory.getFile(name, {create: true}, r => resolve(r), e => error(e));\r\n        });\r\n    }\r\n\r\n    async writeToFile(blob, file) {\r\n        return new Promise((resolve, error) => {\r\n            file.createWriter(writer => {\r\n                writer.onwriteend = e => resolve(e);\r\n                writer.onerror = e => error(e);\r\n\r\n                writer.write(blob);\r\n            });\r\n        });\r\n    }\r\n\r\n    on(event, callback) {\r\n        if (!this.events[event])\r\n            this.events[event] = [];\r\n\r\n        this.events[event].push(callback);\r\n    }\r\n\r\n    off(event, callback) {\r\n        if (this.events[event])\r\n            this.events[event].splice(this.events.indexOf(callback), 1);\r\n    }\r\n\r\n    fire(event) {\r\n        if (this.events[event])\r\n            for (let cb of this.events[event]) {\r\n                cb();\r\n            }\r\n    }\r\n}\r\n\r\nexport default new FileStorage();\r\n","import fs from './FileStorage';\r\nimport Utils from \"@/js/Utils\";\r\n\r\nexport default class Track {\r\n    constructor(id, title, artists, albumArt, durationMs, addedAt) {\r\n        this.id = id;\r\n        this.title = title;\r\n        this.artists = artists;\r\n        this.albumArt = albumArt;\r\n        this.duration = durationMs / 1000;\r\n        this.durationHms = Utils.secondsToHms(this.duration);\r\n        this.addedAt = addedAt;\r\n        this.offline = false;\r\n        this.caching = false;\r\n        this.getCachedOfflineStatus();\r\n    }\r\n\r\n    static empty() {\r\n        return new Track('0', '', '', '', 0, 0)\r\n    }\r\n\r\n    static fromJson(json) {\r\n        if (!json) return;\r\n        try {\r\n            let object = JSON.parse(json);\r\n            return new Track(object.id, object.title, object.artists, object.albumArt, object.duration * 1000, object.addedAt);\r\n        } catch (e) {\r\n            console.error(\"Can't parse \", e, \"JSON:\", json);\r\n        }\r\n    }\r\n\r\n    static fromRawTrack(rawTrack) {\r\n        let track = rawTrack.track;\r\n        return new Track(track.id, track.name, track.artists.map(a => a.name).join(', '), track.album.images[0].url, track.duration_ms, new Date(rawTrack.added_at));\r\n    }\r\n\r\n    get query() {\r\n        return `${this.title} - ${this.artists}`;\r\n    }\r\n\r\n    setOffline() {\r\n        this.offline = true;\r\n        let key = 'offlineTrack' + this.id;\r\n        localStorage[key] = this.offline;\r\n    }\r\n\r\n    getCachedOfflineStatus() {\r\n        let key = 'offlineTrack' + this.id;\r\n        if (localStorage.getItem(key) !== null)\r\n            this.offline = localStorage[key] === 'true';\r\n    }\r\n\r\n    async getOfflineStatus() {\r\n        let key = 'offlineTrack' + this.id;\r\n        await fs.awaitReady();\r\n        this.offline = await fs.exists(this.id);\r\n        localStorage[key] = this.offline;\r\n    }\r\n}","import Utils from './Utils';\r\nimport fs from './FileStorage'\r\nimport Track from \"@/js/Track\";\r\n\r\nexport default class Playlist {\r\n    constructor(name, tracks) {\r\n        this.name = name;\r\n        this.tracks = tracks;\r\n        this.activeTrack = tracks.length > 0 ? tracks[0] : Track.empty();\r\n        this.shuffledTracks = [];\r\n        this.reshuffle();\r\n    }\r\n\r\n    exportJson() {\r\n        return JSON.stringify({name: this.name, tracks: this.tracks});\r\n    }\r\n\r\n    static importJson(json) {\r\n        if (!json)\r\n            return false;\r\n        try {\r\n            let object = JSON.parse(json);\r\n            let tracks = object.tracks.map(track =>\r\n                new Track(track.id, track.title, track.artists, track.albumArt, track.duration * 1000, track.addedAt)\r\n            );\r\n\r\n            fs.awaitReady().then(() => {\r\n                tracks.forEach(track => track.getOfflineStatus())\r\n            });\r\n\r\n            return new Playlist(object.name, tracks);\r\n        } catch (e) {\r\n            console.error(\"Cant parse playlist\", e, \"JSON\", json);\r\n        }\r\n    }\r\n\r\n    static fromRawTracks(name, rawTracks) {\r\n        let tracks = rawTracks.map(Track.fromRawTrack);\r\n        fs.awaitReady().then(() => {\r\n            tracks.forEach(track => track.getOfflineStatus())\r\n        });\r\n        return new Playlist(name, tracks);\r\n    }\r\n\r\n    reshuffle() {\r\n        this.shuffledTracks = Utils.shuffleArray([...this.tracks]);\r\n    }\r\n\r\n    static empty() {\r\n        return new Playlist('', []);\r\n    }\r\n}","import Token from \"./Token\";\r\nimport Playlist from \"@/js/Playlist\";\r\nimport Utils from \"@/js/Utils\";\r\n\r\nclass SpotifyApi {\r\n    constructor() {\r\n        this.token = false;\r\n    }\r\n\r\n    async getLikedTracks() {\r\n        let url = 'https://api.spotify.com/v1/me/tracks?limit=50';\r\n        let rawTracks = await this.requestPaginatedResource(url);\r\n        return Playlist.fromRawTracks('Liked songs', rawTracks);\r\n    }\r\n\r\n    async requestPaginatedResource(url) {\r\n        let token = await this.getToken();\r\n        let results = [];\r\n\r\n        while (url) {\r\n            let result = await (await fetch(url, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Authorization': 'Bearer ' + token.accessToken,\r\n                }\r\n            })).json();\r\n            url = result.next;\r\n            results = results.concat(result.items);\r\n        }\r\n\r\n        return results;\r\n    }\r\n\r\n    static verifyToken(token) {\r\n        if (!token)\r\n            return false;\r\n\r\n        let unixSeconds = Math.floor((+new Date()) / 1000);\r\n        let secondsUntilExpiration = token.expires - unixSeconds;\r\n        return secondsUntilExpiration > 60;\r\n    }\r\n\r\n    async getToken() {\r\n        if (SpotifyApi.verifyToken(this.token))\r\n            return this.token;\r\n\r\n        if (localStorage.getItem('token') !== null) {\r\n            let token = Token.fromJson(localStorage.token);\r\n            if (SpotifyApi.verifyToken(token)) {\r\n                console.log(\"using localStorage token\");\r\n                return token;\r\n            }\r\n        }\r\n\r\n        console.log(\"requesting new token\");\r\n        let token = await this.getTokenFromApi();\r\n        localStorage.token = JSON.stringify(token);\r\n        this.token = token;\r\n        return token;\r\n    }\r\n\r\n    async getTokenFromApi() {\r\n        return new Promise((resolve, reject) => {\r\n            const clientId = 'cd272aa2194c46c7a460e9a202f66002';\r\n            let redirectUrl = Utils.isLocal() ? 'http://localhost:8080/vuemusic/#/' : 'https://ruurd.dev/vuemusic/#/';\r\n            let scopes = 'user-library-read';\r\n            let state = Math.round(Math.random() * 10000000).toString();\r\n            let url = `https://accounts.spotify.com/authorize?response_type=token&state=${state}&client_id=${clientId}${scopes ? '&scope=' + encodeURIComponent(scopes) : ''}&redirect_uri=${encodeURIComponent(redirectUrl)}`;\r\n            let spotifyWindow = window.open(url);\r\n            console.log(spotifyWindow);\r\n            let hashChecker = setInterval(() => {\r\n                let hash = spotifyWindow.location.hash;\r\n                if (hash) {\r\n                    spotifyWindow.close();\r\n                    clearInterval(hashChecker);\r\n                    if (hash.includes('error')) {\r\n                        console.log(\"ERROR:\", hash);\r\n                        reject(hash);\r\n                    }\r\n                    if (hash.includes('access_token')) {\r\n                        console.log(\"TOKEN:\", hash);\r\n                        let accessToken = hash.split('access_token=')[1].split('&')[0];\r\n                        let tokenType = hash.split('token_type=')[1].split('&')[0];\r\n                        let tokenExpires = hash.split('expires_in=')[1].split('&')[0];\r\n                        let tokenState = hash.split('state=')[1].split('&')[0];\r\n\r\n                        let expires = Math.floor((+new Date) / 1000) + (+tokenExpires);\r\n                        let token = new Token(accessToken, expires, tokenType);\r\n\r\n                        if (tokenState !== state) {\r\n                            reject({message: `State doens't match: ${tokenState}, ${state}`, token});\r\n                            return;\r\n                        }\r\n\r\n                        resolve(token);\r\n                    }\r\n                }\r\n                console.log(spotifyWindow.location.hash);\r\n            }, 100)\r\n        });\r\n    }\r\n}\r\n\r\nexport default new SpotifyApi();","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"playlist-view\"},[_c('h2',{staticClass:\"playlist-name\"},[_vm._v(\"\\n        \"+_vm._s(_vm.playlist.name)+\"\\n    \")]),_c('recycle-scroller',{staticClass:\"song-list\",attrs:{\"items\":_vm.playlist.tracks,\"item-size\":60,\"key-field\":\"id\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"song-view\",attrs:{\"active\":_vm.playlist.activeTrack.id === item.id},on:{\"click\":function($event){return _vm.$emit('play', item)}}},[(item.caching)?_c('md-icon',{staticClass:\"icon\"},[_vm._v(\"cached\")]):_c('md-icon',{staticClass:\"icon\",style:(item.offline ? 'opacity: 0.5' : 'opacity: 0')},[_vm._v(\"cloud_done\")]),_c('div',{staticClass:\"song-info\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_c('p',{staticClass:\"artists\"},[_vm._v(_vm._s(item.artists)+\" • \"+_vm._s(item.durationHms))])])],1)]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"playlist-view\">\r\n        <h2 class=\"playlist-name\">\r\n            {{playlist.name}}\r\n        </h2>\r\n        <recycle-scroller\r\n                :items=\"playlist.tracks\"\r\n                class=\"song-list\"\r\n                :item-size=\"60\"\r\n                key-field=\"id\"\r\n                v-slot=\"{ item }\">\r\n            <div class=\"song-view\" :active=\"playlist.activeTrack.id === item.id\" @click=\"$emit('play', item)\">\r\n                <md-icon v-if=\"item.caching\" class=\"icon\">cached</md-icon>\r\n                <md-icon v-else :style=\"item.offline ? 'opacity: 0.5' : 'opacity: 0'\" class=\"icon\">cloud_done</md-icon>\r\n                <div class=\"song-info\">\r\n                    <p class=\"title\">{{item.title}}</p>\r\n                    <p class=\"artists\">{{item.artists}} • {{item.durationHms}}</p>\r\n                </div>\r\n            </div>\r\n        </recycle-scroller>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Playlist from \"@/js/Playlist\";\r\n\r\n    export default {\r\n        name: \"PlaylistView\",\r\n        props: {\r\n            playlist: Playlist\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .playlist-view {\r\n        text-align: left;\r\n        background: radial-gradient(circle at top left, rgba(75, 47, 250, 0.9) 0%, transparent 65%), radial-gradient(circle at top right, rgba(235, 255, 240, .6) 0%, transparent 35%);\r\n    }\r\n\r\n    .playlist-name {\r\n        margin-bottom: 40px;\r\n        text-align: center;\r\n    }\r\n\r\n    .song-view {\r\n        padding: 8px;\r\n        border-radius: 5px;\r\n        cursor: pointer;\r\n        display: flex;\r\n        flex-direction: left;\r\n    }\r\n\r\n    .song-view p {\r\n        margin: 0;\r\n        padding: 0;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n\r\n    .song-view[active] {\r\n        background-color: rgba(255, 255, 255, 0.2);\r\n    }\r\n\r\n    .icon {\r\n        width: 40px;\r\n        height: 30px;\r\n        text-align: left !important;\r\n        margin-left: -5px;\r\n        opacity: 0.5;\r\n        font-size: 18px !important;\r\n    }\r\n\r\n    .song-info {\r\n        width: calc(100% - 40px);\r\n    }\r\n\r\n    .title {\r\n        font-size: 16px;\r\n    }\r\n\r\n    .artists {\r\n        font-size: 14px;\r\n        opacity: 0.7;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlaylistView.vue?vue&type=template&id=1dd93814&scoped=true&\"\nimport script from \"./PlaylistView.vue?vue&type=script&lang=js&\"\nexport * from \"./PlaylistView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlaylistView.vue?vue&type=style&index=0&id=1dd93814&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1dd93814\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('md-content',{staticClass:\"media-player-view player-card md-primary\"},[_c('div',{staticClass:\"track-card\"},[_c('div',{staticClass:\"album-art\",style:({'background-image': (\"url(\" + (_vm.currentPlaylist.activeTrack.albumArt) + \")\")})}),_c('div',{staticClass:\"track-info\"},[_c('span',[_vm._v(_vm._s(_vm.currentPlaylist.activeTrack.title))]),_c('span',[_vm._v(_vm._s(_vm.currentPlaylist.activeTrack.artists))])])]),_c('div',{staticClass:\"seek-bar\",on:{\"mousedown\":_vm.seekDown,\"touchstart\":function($event){return _vm.seekDown($event.touches[0])}}},[_c('span',{staticClass:\"track-time\"},[_vm._v(_vm._s(_vm.utils.secondsToHms(_vm.trackProgress * _vm.currentPlaylist.activeTrack.duration)))]),_c('div',{ref:\"seekContainer\",staticClass:\"seek-container\"},[_c('div',{staticClass:\"seek-progress\",style:({'width':((Math.round(_vm.trackProgress * 100)) + \"%\")})}),_c('div',{staticClass:\"seek-thumb\",style:({'left':(\"calc(\" + (Math.round(_vm.trackProgress * 100)) + \"% - 16px / 2)\")})})]),_c('span',{staticClass:\"track-duration\"},[_vm._v(_vm._s(_vm.currentPlaylist.activeTrack.durationHms))])]),_c('div',{staticClass:\"music-controls\"},[_c('md-button',{staticClass:\"md-icon-button\",on:{\"click\":function($event){_vm.shuffle = !_vm.shuffle}}},[_c('md-icon',{style:(_vm.shuffle ? 'opacity: 1' : 'opacity: 0.6')},[_vm._v(\"shuffle\")])],1),_c('md-button',{staticClass:\"md-icon-button\",on:{\"click\":_vm.skipPrevious}},[_c('md-icon',[_vm._v(\"skip_previous\")])],1),(_vm.playing)?_c('md-button',{staticClass:\"md-icon-button md-raised\",on:{\"click\":function($event){return _vm.pause()}}},[_c('md-icon',[_vm._v(\"pause\")])],1):_c('md-button',{staticClass:\"md-icon-button md-raised\",on:{\"click\":function($event){return _vm.play()}}},[_c('md-icon',[_vm._v(\"play_arrow\")])],1),_c('md-button',{staticClass:\"md-icon-button\",on:{\"click\":_vm.skipNext}},[_c('md-icon',[_vm._v(\"skip_next\")])],1),_c('md-button',{staticClass:\"md-icon-button\",on:{\"click\":function($event){_vm.repeat = !_vm.repeat}}},[_c('md-icon',{style:(_vm.repeat ? 'opacity: 1' : 'opacity: 0.6')},[_vm._v(\"repeat\")])],1)],1),_c('audio',{ref:\"player\",staticClass:\"audio-player\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import fs from './FileStorage';\r\nimport Utils from \"@/js/Utils\";\r\n\r\nclass SongCacher {\r\n    async cacheIfNotCached(track) {\r\n        await fs.awaitReady();\r\n        if (!(await fs.exists(track.id)))\r\n            await this.cache(track);\r\n        else\r\n            console.log(\"not caching song\", track.title, \"already available offline\");\r\n    }\r\n\r\n    async cache(track) {\r\n        return new Promise(async (resolve, reject) => {\r\n            if (track.caching)\r\n                return;\r\n            track.caching = true;\r\n            console.log(\"Caching\", track.title, \"now\");\r\n\r\n            let url = Utils.getServer() + '/download/?query=' + encodeURIComponent(track.query);\r\n            let response = await fetch(url);\r\n            let audioBlob = await response.blob();\r\n            let result = await fs.createFileFromBlob(track.id, audioBlob);\r\n\r\n            result.getMetadata(metadata => {\r\n                console.log(`Song ${track.title} caching complete: `, result, 'metadata', metadata);\r\n                track.caching = false;\r\n                track.setOffline();\r\n                resolve(track);\r\n            });\r\n        })\r\n    }\r\n}\r\n\r\nexport default new SongCacher();","<template>\r\n    <md-content class=\"media-player-view player-card md-primary\">\r\n        <div class=\"track-card\">\r\n            <div class=\"album-art\" :style=\"{'background-image': `url(${currentPlaylist.activeTrack.albumArt})`}\"></div>\r\n            <div class=\"track-info\">\r\n                <span>{{currentPlaylist.activeTrack.title}}</span>\r\n                <span>{{currentPlaylist.activeTrack.artists}}</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"seek-bar\" @mousedown=\"seekDown\" @touchstart=\"seekDown($event.touches[0])\">\r\n            <span class=\"track-time\">{{utils.secondsToHms(trackProgress * currentPlaylist.activeTrack.duration)}}</span>\r\n            <div class=\"seek-container\" ref=\"seekContainer\">\r\n                <div class=\"seek-progress\" :style=\"{'width':`${Math.round(trackProgress * 100)}%`}\"></div>\r\n                <div class=\"seek-thumb\"\r\n                     :style=\"{'left':`calc(${Math.round(trackProgress * 100)}% - 16px / 2)`}\"></div>\r\n            </div>\r\n            <span class=\"track-duration\">{{currentPlaylist.activeTrack.durationHms}}</span>\r\n        </div>\r\n        <div class=\"music-controls\">\r\n            <md-button class=\"md-icon-button\" @click=\"shuffle = !shuffle\">\r\n                <md-icon :style=\"shuffle ? 'opacity: 1' : 'opacity: 0.6'\">shuffle</md-icon>\r\n            </md-button>\r\n            <md-button @click=\"skipPrevious\" class=\"md-icon-button\">\r\n                <md-icon>skip_previous</md-icon>\r\n            </md-button>\r\n            <md-button v-if=\"playing\" @click=\"pause()\" class=\"md-icon-button md-raised\">\r\n                <md-icon>pause</md-icon>\r\n            </md-button>\r\n            <md-button v-else @click=\"play()\" class=\"md-icon-button md-raised\">\r\n                <md-icon>play_arrow</md-icon>\r\n            </md-button>\r\n            <md-button @click=\"skipNext\" class=\"md-icon-button\">\r\n                <md-icon>skip_next</md-icon>\r\n            </md-button>\r\n            <md-button class=\"md-icon-button\" @click=\"repeat = !repeat\">\r\n                <md-icon :style=\"repeat ? 'opacity: 1' : 'opacity: 0.6'\">repeat</md-icon>\r\n            </md-button>\r\n        </div>\r\n        <audio ref=\"player\" class=\"audio-player\"></audio>\r\n    </md-content>\r\n</template>\r\n\r\n<script>\r\n    import Playlist from \"@/js/Playlist\";\r\n    import Utils from '@/js/Utils';\r\n    import fs from '@/js/FileStorage';\r\n    import SongCacher from '@/js/SongCacher';\r\n\r\n    export default {\r\n        name: \"media-player-view\",\r\n        data() {\r\n            return {\r\n                utils: Utils,\r\n                timeUpdater: -1,\r\n                shuffle: false,\r\n                repeat: true,\r\n                playing: false,\r\n                songProgress: 0,\r\n                seeking: false,\r\n                trackProgress: 0,\r\n                loadedLastPlayed: false\r\n            }\r\n        },\r\n        props: {\r\n            currentPlaylist: Playlist\r\n        },\r\n        mounted() {\r\n            if (localStorage.getItem('shuffle') !== null)\r\n                this.shuffle = JSON.parse(localStorage.shuffle);\r\n            if (localStorage.getItem('repeat') !== null)\r\n                this.repeat = JSON.parse(localStorage.repeat);\r\n\r\n            document.addEventListener('mousemove', e => this.mouseMove(e));\r\n            document.addEventListener('touchmove', e => this.mouseMove(e.touches[0]));\r\n            document.addEventListener('mouseup', e => this.mouseUp(e));\r\n            document.addEventListener('touchend', e => this.mouseUp(e.touches[0]));\r\n            this.timeUpdater = setInterval(() => {\r\n                let progress = this.$refs.player.currentTime / (this.currentPlaylist.activeTrack.duration);\r\n                progress = Math.max(Math.min(progress, 1), 0);\r\n                this.trackProgress = progress;\r\n            }, 100);\r\n        },\r\n        methods: {\r\n            async playTrack(track, pause = false, firstPlay = false) {\r\n                if (!firstPlay && track.id === this.currentPlaylist.activeTrack.id) {\r\n                    this.$refs.player.currentTime = 0;\r\n                    if (!pause)\r\n                        this.play();\r\n                    return;\r\n                }\r\n                localStorage.lastPlayed = track.id;\r\n                this.currentPlaylist.activeTrack = track;\r\n                this.setTrackMetaData(track);\r\n\r\n                let url;\r\n\r\n                await fs.awaitReady();\r\n                if (await fs.exists(track.id)) {\r\n                    url = (await fs.getFileByName(track.id)).toURL();\r\n                } else {\r\n                    url = Utils.getServer() + '/stream/?query=' + encodeURIComponent(track.query);\r\n                    SongCacher.cacheIfNotCached(track);\r\n                }\r\n\r\n\r\n                console.log(\"Playing\", track.title, \"URL:\", url);\r\n                let player = this.$refs.player;\r\n                player.src = url;\r\n                player.oncanplay = async () => {\r\n                    await this.play();\r\n                };\r\n                player.onended = () => this.skipNext();\r\n            },\r\n            async play() {\r\n                if (this.currentPlaylist.activeTrack.title === '') return;\r\n                this.playing = true;\r\n                await this.$refs.player.play();\r\n            },\r\n            pause() {\r\n                if (this.currentPlaylist.activeTrack.title === '') return;\r\n                this.playing = false;\r\n                this.$refs.player.pause();\r\n            },\r\n            skipNext() {\r\n                let currentIndex = this.currentPlaylist.tracks.indexOf(this.currentPlaylist.activeTrack);\r\n                if (currentIndex === this.currentPlaylist.tracks.length - 1)\r\n                    if (this.repeat)\r\n                        currentIndex = -1;\r\n                    else {\r\n                        console.log(\"Not skipping, repeat is off\");\r\n                        return;\r\n                    }\r\n                if (this.shuffle)\r\n                    this.playTrack(this.currentPlaylist.shuffledTracks[currentIndex + 1]);\r\n                else\r\n                    this.playTrack(this.currentPlaylist.tracks[currentIndex + 1]);\r\n\r\n            },\r\n            skipPrevious() {\r\n                let player = this.$refs.player;\r\n                if (player.currentTime < 5) {\r\n                    let currentIndex = this.currentPlaylist.tracks.indexOf(this.currentPlaylist.activeTrack);\r\n                    if (currentIndex === 0)\r\n                        currentIndex = this.currentPlaylist.tracks.length;\r\n                    if (this.shuffle)\r\n                        this.playTrack(this.currentPlaylist.shuffledTracks[currentIndex - 1]);\r\n                    else\r\n                        this.playTrack(this.currentPlaylist.tracks[currentIndex - 1]);\r\n                } else player.currentTime = 0;\r\n            },\r\n            mouseUp() {\r\n                if (this.seeking)\r\n                    this.seeking = false;\r\n            },\r\n            mouseMove(e) {\r\n                if (this.seeking)\r\n                    this.seekToEvent(e);\r\n            },\r\n            seekDown(e) {\r\n                this.seeking = true;\r\n                this.seekToEvent(e);\r\n            },\r\n            seekToEvent(e) {\r\n                let percent = (e.pageX - this.$refs.seekContainer.offsetLeft) / this.$refs.seekContainer.offsetWidth;\r\n                percent = Math.max(Math.min(percent, 1), 0);\r\n                this.trackProgress = percent;\r\n                let duration = this.currentPlaylist.activeTrack.duration;\r\n                this.$refs.player.currentTime = duration * percent;\r\n            },\r\n            setTrackMetaData(track) {\r\n                document.title = track.artists + ' - ' + track.title;\r\n                // document.querySelector('meta[name=\"theme-color\"').content = track.color;\r\n\r\n                if (!('mediaSession' in navigator))\r\n                    return;\r\n\r\n                navigator.mediaSession.metadata = new MediaMetadata({\r\n                    title: track.title,\r\n                    artist: track.artists,\r\n                    artwork: [\r\n                        {src: track.albumArt, type: 'image/png'},\r\n                    ]\r\n                });\r\n                navigator.mediaSession.setActionHandler('play', async () => {\r\n                    await this.play();\r\n                });\r\n                navigator.mediaSession.setActionHandler('pause', async () => {\r\n                    await this.pause();\r\n                });\r\n                navigator.mediaSession.setActionHandler('previoustrack', () => {\r\n                    this.skipNext();\r\n                });\r\n                navigator.mediaSession.setActionHandler('nexttrack', () => {\r\n                    this.skipPrevious();\r\n                });\r\n            },\r\n        },\r\n        watch: {\r\n            currentPlaylist() {\r\n                let lastPlayedTrack = this.currentPlaylist.tracks.find(t => t.id === localStorage.lastPlayed);\r\n                console.log(\"Last played track\", lastPlayedTrack);\r\n\r\n                if (lastPlayedTrack) {\r\n                    this.currentPlaylist.activeTrack = lastPlayedTrack;\r\n                    if (!this.loadedLastPlayed) {\r\n                        this.playTrack(lastPlayedTrack, true, true);\r\n                        this.loadedLastPlayed = true;\r\n                    }\r\n                }\r\n            },\r\n            shuffle() {\r\n                localStorage.shuffle = this.shuffle;\r\n            },\r\n            repeat() {\r\n                localStorage.repeat = this.repeat;\r\n            },\r\n        },\r\n        beforeDestroy() {\r\n            clearInterval(this.timeUpdater);\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n    .track-card {\r\n        display: flex;\r\n        flex-direction: row;\r\n        margin: 15px;\r\n    }\r\n\r\n    .album-art {\r\n        width: 55px;\r\n        height: 55px;\r\n        border-radius: 3px;\r\n        box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.3);\r\n        background-size: cover;\r\n        background-repeat: no-repeat;\r\n        background-position: center;\r\n        padding: 10px;\r\n    }\r\n\r\n    .track-info {\r\n        display: flex;\r\n        /*text-shadow: 0px 0px 20px black;*/\r\n        flex-direction: column;\r\n        text-align: left;\r\n        padding: 10px 15px;\r\n        max-width: calc(100% - 55px);\r\n    }\r\n\r\n    .track-info > span:first-child {\r\n        font-weight: 500;\r\n        font-size: 18px;\r\n    }\r\n\r\n    .track-info > span:nth-child(2) {\r\n        opacity: 0.7;\r\n    }\r\n\r\n    .track-info > span {\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n\r\n    .seek-bar {\r\n        display: flex;\r\n        margin: 30px 0;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .seek-bar > span {\r\n        font-size: 16px;\r\n        font-weight: 500;\r\n        opacity: 0.8;\r\n        pointer-events: none;\r\n        width: 100px;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n\r\n    .track-duration {\r\n        text-align: right;\r\n    }\r\n\r\n    .seek-container {\r\n        width: 100%;\r\n        height: 5px;\r\n        background-color: rgba(255, 255, 255, 0.5);\r\n        margin: 6px 12px;\r\n        border-radius: 2.5px;\r\n        pointer-events: none;\r\n    }\r\n\r\n    .seek-progress {\r\n        width: 50%;\r\n        height: 5px;\r\n        border-radius: 2.5px;\r\n        background-color: white;\r\n    }\r\n\r\n    .seek-thumb {\r\n        height: 16px;\r\n        width: 16px;\r\n        background-color: white;\r\n        border-radius: 50%;\r\n        position: relative;\r\n        top: calc(-16px / 2 - 2.5px);\r\n        left: calc(50% - 16px / 2);\r\n    }\r\n\r\n    .music-controls {\r\n        display: flex;\r\n        justify-content: space-evenly;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaPlayerView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MediaPlayerView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MediaPlayerView.vue?vue&type=template&id=dd5701f0&scoped=true&\"\nimport script from \"./MediaPlayerView.vue?vue&type=script&lang=js&\"\nexport * from \"./MediaPlayerView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MediaPlayerView.vue?vue&type=style&index=0&id=dd5701f0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dd5701f0\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"home\">\n        <md-progress-bar v-if=\"loadingFs\" md-mode=\"indeterminate\"></md-progress-bar>\n        <md-content>\n            <playlist-view @play=\"playMedia\" class=\"playlist-view\" :playlist=\"likedTracks\"></playlist-view>\n        </md-content>\n        <media-player-view class=\"media-player\" :current-playlist=\"likedTracks\" ref=\"mediaPlayer\"></media-player-view>\n    </div>\n</template>\n\n<script>\n    import SpotifyApi from '@/js/SpotifyApi'\n    import PlaylistView from \"@/components/PlaylistView\";\n    import Playlist from \"@/js/Playlist\";\n    import MediaPlayerView from '@/components/MediaPlayerView';\n    import fs from '@/js/FileStorage';\n\n    console.log(fs);\n\n    export default {\n        name: 'home',\n        components: {PlaylistView, MediaPlayerView},\n        data() {\n            return {\n                loadingFs: true,\n                likedTracks: Playlist.empty()\n            }\n        },\n        async mounted() {\n            fs.awaitReady().then(() => this.loadingFs = false);\n            if (localStorage.getItem('likedTracks') !== null)\n                this.likedTracks = Playlist.importJson(localStorage.likedTracks);\n            SpotifyApi.getLikedTracks().then(tracks => {\n                this.likedTracks = tracks;\n                localStorage.likedTracks = this.likedTracks.exportJson();\n            });\n        },\n        methods: {\n            playMedia(song) {\n                this.$refs.mediaPlayer.playTrack(song);\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .playlist-view {\n        max-height: calc(100% - 250px);\n        overflow-y: auto;\n        width: 100%;\n        position: absolute;\n        top: 0;\n        padding: 20px;\n    }\n\n    .media-player {\n        position: absolute;\n        height: 250px;\n        bottom: 0;\n        width: 100%;\n        z-index: 5;\n        box-shadow: 0 0 30px 0 rgba(0, 0, 0, 0.3);\n        padding: 20px;\n    }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=158904c0&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=158904c0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"158904c0\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Home from './views/Home.vue'\n\nVue.use(Router);\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'home',\n      component: Home\n    },\n    // {\n    //   path: '/search',\n    //   name: 'search',\n    //   component: function () {\n    //     return import( './views/Search.vue')\n    //   }\n    // },\n  ]\n})\n","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker'\n\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready () {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n        'For more details, visit https://goo.gl/AFskqB'\n      )\n    },\n    registered () {\n      console.log('Service worker has been registered.')\n    },\n    cached () {\n      console.log('Content has been cached for offline use.')\n    },\n    updatefound () {\n      console.log('New content is downloading.')\n    },\n    updated () {\n      console.log('New content is available; please refresh.')\n    },\n    offline () {\n      console.log('No internet connection found. App is running in offline mode.')\n    },\n    error (error) {\n      console.error('Error during service worker registration:', error)\n    }\n  })\n}\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport './registerServiceWorker'\r\nimport { RecycleScroller } from 'vue-virtual-scroller';\r\n\r\nVue.config.productionTip = false;\r\nVue.component('RecycleScroller', RecycleScroller);\r\nimport 'vue-virtual-scroller/dist/vue-virtual-scroller.css'\r\n\r\nimport {MdButton, MdContent, MdList, MdIcon, MdSwitch, MdProgress} from 'vue-material/dist/components'\r\nimport 'vue-material/dist/vue-material.min.css'\r\nimport '../res/vm3-theme-primary-on-dark.css'\r\nVue.use(MdButton);\r\nVue.use(MdContent);\r\nVue.use(MdList);\r\nVue.use(MdIcon);\r\nVue.use(MdSwitch);\r\nVue.use(MdProgress);\r\n\r\nnew Vue({\r\n  router,\r\n  render: function (h) { return h(App) }\r\n}).$mount('#app');\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistView.vue?vue&type=style&index=0&id=1dd93814&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistView.vue?vue&type=style&index=0&id=1dd93814&scoped=true&lang=css&\""],"sourceRoot":""}