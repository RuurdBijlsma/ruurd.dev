(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21538171"],{1681:function(t,e,s){},"26d3":function(t,e,s){"use strict";s.r(e);var a=s("8212"),o=s("8336"),i=s("ce7e"),r=s("132d"),c=s("b73d"),n=(s("1681"),s("8654")),l=s("58df");const d=Object(l["a"])(n["a"]);var u=d.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...n["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick(()=>{var e;t?this.calculateInputHeight():null===(e=this.$refs.input)||void 0===e||e.style.removeProperty("height")})},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,s=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(s,e)+"px"},genInput(){const t=n["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){n["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"settings"},[e("div",{staticClass:"wide"},[e("h1",{staticClass:"page-title"},[t._v("Settings")]),e(i["a"],{staticClass:"divider"}),e("div",{staticClass:"secrets"},[e("h2",[t._v("Secrets")]),e("p",{staticClass:"caption"},[t._v("These values must be set before using the application. Order: Spotify id, Spotify secret, Youtube API key")]),e("div",{staticClass:"secret-textarea"},[t._m(0),e(u,{attrs:{placeholder:t.secretsPlaceholder,"no-resize":"",spellcheck:"false",rules:t.secretRules,outlined:"","auto-grow":"","row-height":"4"},model:{value:t.secrets,callback:function(e){t.secrets=e},expression:"secrets"}})],1),t.$store.getters.isKeySet?e("p",{staticClass:"key-saved"},[e(r["a"],{attrs:{color:"success"}},[t._v("mdi-check")]),e("span",[t._v("Keys saved!")])],1):e("p",{staticClass:"key-saved"},[e(r["a"],{attrs:{color:"error"}},[t._v("mdi-close")]),e("span",[t._v("One or more keys not valid")])],1)]),e("div",[e("h2",[t._v("Account")]),t.$store.getters.isKeySet?e("div",{staticClass:"login"},[t.$store.getters.isLoggedIn?t._e():e("div",[e("p",[t._v("Click the button below to log in to your Spotifyâ„¢ account!")]),e(o["a"],{attrs:{outlined:"",color:"success",loading:t.loginLoading},on:{click:t.login}},[e(r["a"],[t._v("mdi-spotify")]),t._v(" Login ")],1),t.loginLoading?e(o["a"],{attrs:{icon:"",color:"warning"},on:{click:t.resetLogin}},[e(r["a"],[t._v("mdi-close")])],1):t._e()],1)]):t._e(),t.$store.getters.isLoggedIn?e("div",[e("div",{staticClass:"account-info"},[e(a["a"],[e("img",{staticClass:"avatar",attrs:{src:t.$store.state.userInfo.avatar,alt:"user profile image"}})]),e("div",[e("h3",[t._v(t._s(t.$store.state.userInfo.name))]),e("p",{staticClass:"caption"},[t._v(t._s(t.$store.state.userInfo.mail))])])],1),e(o["a"],{attrs:{color:"primary",outlined:""},on:{click:function(e){return t.$store.dispatch("spotifyLogout")}}},[t._v("Log out")])],1):t._e()]),e("div",{staticClass:"misc"},[e("h2",[t._v("Miscellaneous")]),e(o["a"],{attrs:{outlined:"",color:"error"},on:{click:function(e){return t.$store.dispatch("clearCache")}}},[e(r["a"],[t._v("mdi-error")]),t._v(" Clear cache ")],1),e(c["a"],{attrs:{inset:"",label:"Download tracks while you're listening?"},model:{value:t.$store.state.media.shouldDownload,callback:function(e){t.$set(t.$store.state.media,"shouldDownload",e)},expression:"$store.state.media.shouldDownload"}})],1)],1)])},p=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"secret-help"},[e("p",[t._v("Spotify Client ID")]),e("p",[t._v("Spotify Client Secret")]),e("p",[t._v("Youtube API Key")])])}],g={name:"Settings",data:()=>({secretsPlaceholder:"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\nbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\ncccccccccccc-dddddddddddddddddddddddddd",secrets:"",loginLoading:!1,secretRules:[t=>3===t.split("\n").length||"There must be three lines"]}),mounted(){},methods:{async resetLogin(){await this.$store.dispatch("resetSpotifyLogin"),this.loginLoading=!1},async login(){this.loginLoading=!0,await this.$store.dispatch("spotifyLogin"),this.loginLoading=!1}},watch:{"$store.state.keys"(){this.secrets=this.$store.state.keys.spotifyId+"\n"+this.$store.state.keys.spotifySecret+"\n"+this.$store.state.keys.youtube},async secrets(){console.log("Secrets changed to",this.secrets);let t=this.secrets.split("\n");if(3===t.length){let[e,s,a]=t;this.$store.commit("spotifyId",e),this.$store.commit("spotifySecret",s),this.$store.commit("youtubeKey",a),await this.$store.dispatch("cacheState")}}}},v=g,b=(s("91c4"),s("2877")),y=Object(b["a"])(v,h,p,!1,null,"eb107c9a",null);e["default"]=y.exports},"91c4":function(t,e,s){"use strict";s("ef94")},ef94:function(t,e,s){}}]);
//# sourceMappingURL=chunk-21538171.02bbaed3.js.map