(function(e){function t(t){for(var n,a,o=t[0],c=t[1],u=t[2],l=0,d=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);m&&m(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,a=1;a<r.length;a++){var o=r[a];0!==i[o]&&(n=!1)}n&&(s.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},i={app:0},s=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-05208a0b":"dc2bbf25","chunk-0aadd050":"317fa2b1","chunk-0d65c4f6":"59a8cb27","chunk-14837eba":"2f8630ee","chunk-1c90bac7":"d87fce29","chunk-2d0c8407":"52c1aedc","chunk-2d2086b7":"1379e9ba","chunk-37884929":"37663d2c","chunk-40670343":"d4048239","chunk-431796de":"477794cf","chunk-48ff2a8b":"f3b1514c","chunk-491a2ef4":"99fadc15","chunk-4fd07930":"6a8c282f","chunk-6bbe2798":"d781eaac","chunk-786d4f79":"db6d07a7","chunk-7debffe2":"e0096570","chunk-c0d67e16":"bf9d3537","chunk-d0b3c9d6":"16eb0d3a"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r={"chunk-05208a0b":1,"chunk-0aadd050":1,"chunk-0d65c4f6":1,"chunk-14837eba":1,"chunk-1c90bac7":1,"chunk-37884929":1,"chunk-40670343":1,"chunk-431796de":1,"chunk-48ff2a8b":1,"chunk-491a2ef4":1,"chunk-4fd07930":1,"chunk-6bbe2798":1,"chunk-786d4f79":1,"chunk-7debffe2":1,"chunk-c0d67e16":1,"chunk-d0b3c9d6":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{"chunk-05208a0b":"e0b67911","chunk-0aadd050":"641add5d","chunk-0d65c4f6":"9bc59acb","chunk-14837eba":"0667f138","chunk-1c90bac7":"5549e1c8","chunk-2d0c8407":"31d6cfe0","chunk-2d2086b7":"31d6cfe0","chunk-37884929":"a385bbfc","chunk-40670343":"c29dac0a","chunk-431796de":"f8f0fcc9","chunk-48ff2a8b":"558142cf","chunk-491a2ef4":"3a580403","chunk-4fd07930":"57cdb5b2","chunk-6bbe2798":"a6d0e3ce","chunk-786d4f79":"bdcf4eff","chunk-7debffe2":"5549e1c8","chunk-c0d67e16":"4042a7e5","chunk-d0b3c9d6":"7944a41e"}[e]+".css",i=c.p+n,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var u=s[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===i))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){u=d[o],l=u.getAttribute("data-href");if(l===n||l===i)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var n=t&&t.target&&t.target.src||i,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete a[e],m.parentNode.removeChild(m),r(s)},m.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){a[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(m);var r=i[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",d.name="ChunkLoadError",d.type=n,d.request=a,r[1](d)}i[e]=void 0}};var m=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/vuemusic/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var m=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0125":function(e,t,r){},"0259":function(e,t,r){},"034f":function(e,t,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"0446":function(e,t,r){},"0781":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{on:{submit:function(t){return t.preventDefault(),e.pushSearchTerm(t)}}},[r("v-text-field",{attrs:{outlined:"",label:"Search","prepend-inner-icon":"mdi-magnify",dense:""},on:{click:e.goSearch},model:{value:e.$store.state.search.liveTerm,callback:function(t){e.$set(e.$store.state.search,"liveTerm",t)},expression:"$store.state.search.liveTerm"}})],1)},a=[],i=(r("caad"),r("b0c0"),r("ac1f"),r("2532"),r("841c"),r("1276"),r("3835")),s=(r("96cf"),r("1da1")),o={name:"SearchInput",methods:{goSearch:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("Search"===e.$route.name){t.next=3;break}return t.next=3,e.pushSearchTerm();case 3:case"end":return t.stop()}}),t)})))()},pushSearchTerm:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="",""!==e.$store.state.search.liveTerm&&(r="?term=".concat(encodeURIComponent(e.$store.state.search.liveTerm))),t.next=4,e.$router.push("/search".concat(r));case 4:case"end":return t.stop()}}),t)})))()}},watch:{term:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.term.includes("open.spotify.com/")){t.next=7;break}return r=e.term.split("spotify.com/")[1].split("?")[0],n=r.split("/"),a=Object(i["a"])(n,2),s=a[0],o=a[1],t.next=5,e.$router.push(e.$store.getters.relativeItemUrl({type:s,id:o,name:s[0]}));case 5:e.$store.dispatch("addSnack",{text:"Navigated to Spotifyâ„¢ link"}).then(),e.$store.commit("liveTerm","");case 7:case"end":return t.stop()}}),t)})))()}},computed:{term:function(){return this.$store.state.search.liveTerm}}},c=o,u=r("2877"),l=r("6544"),d=r.n(l),m=r("4bd4"),f=r("8654"),p=Object(u["a"])(c,n,a,!1,null,"c48f3eda",null);t["a"]=p.exports;d()(p,{VForm:m["a"],VTextField:f["a"]})},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},1344:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return null!==e.track?r("div",{ref:"trackRow",staticClass:"track-row",class:e.rowClass},[r("track-item",{staticClass:"track-left",attrs:{"context-item":e.contextItem,track:e.track,"album-list":e.albumList}}),e.albumList?e._e():r("div",{staticClass:"track-middle",attrs:{title:e.track.album.name}},[r("router-link",{staticClass:"album-link",attrs:{tag:"span",to:e.$store.getters.relativeItemUrl(e.track.album)}},[e._v(" "+e._s(e.track.album.name)+" ")])],1),r("div",{staticClass:"track-right"},[r("div",{staticClass:"track-duration"},[e._v(e._s(e.duration))]),r("item-menu",{attrs:{"queue-track":e.queueTrack,"context-item":e.contextItem,item:e.track}})],1)],1):e._e()},a=[],i=r("7628"),s=r("a123"),o=r("1f42"),c=r("e292"),u=r("5dd2"),l=r("190f"),d=r("9bcd"),m={name:"TrackRow",components:{ItemMenu:d["a"],FollowMenuItem:l["a"],ShareMenuItem:u["a"],FollowButton:c["a"],TrackItem:o["a"],ArtistsSpan:i["a"]},props:{track:{type:Object,default:null},albumList:{type:Boolean,default:!1},contextItem:{type:Object,default:null,required:!0},queueTrack:{type:Boolean,default:!1}},data:function(){return{rowWidth:0}},mounted:function(){this.windowResize(),window.addEventListener("resize",this.windowResize)},beforeDestroy:function(){window.removeEventListener("resize",this.windowResize)},methods:{windowResize:function(){this.rowWidth=this.$refs.trackRow.getBoundingClientRect().width}},computed:{rowClass:function(){return this.rowWidth>623?"big":"small"},duration:function(){return s["a"].secondsToHms(this.track.duration_ms/1e3)}}},f=m,p=(r("9420"),r("2877")),h=Object(p["a"])(f,n,a,!1,null,"7af6f4ec",null);t["a"]=h.exports},14:function(e,t){},15:function(e,t){},16:function(e,t){},"190f":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isFollowed?r("v-list-item",{on:{click:e.unfollow}},[r("v-list-item-icon",[e.loading?r("v-progress-circular",{attrs:{size:"20",indeterminate:"",width:"1"}}):r("v-icon",{attrs:{color:"primary"}},[e._v("mdi-heart-outline")])],1),r("v-list-item-title",[e._v("Remove from library")])],1):r("v-list-item",{attrs:{dense:""},on:{click:e.follow}},[r("v-list-item-icon",[e.loading?r("v-progress-circular",{attrs:{size:"20",indeterminate:"",width:"1"}}):r("v-icon",[e._v("mdi-heart-outline")])],1),r("v-list-item-title",[e._v("Add to library")])],1)},a=[],i=(r("96cf"),r("1da1")),s={name:"FollowMenuItem",props:{item:{type:Object,default:null}},data:function(){return{loading:!1}},methods:{follow:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("follow"+e.typeCapitalized,e.item);case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},unfollow:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("unfollow"+e.typeCapitalized,e.item);case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()}},computed:{typeCapitalized:function(){return this.item.type.substring(0,1).toUpperCase()+this.item.type.substring(1)},isFollowed:function(){return this.$store.getters["is".concat(this.typeCapitalized,"Followed")](this.item)}}},o=s,c=r("2877"),u=r("6544"),l=r.n(u),d=r("132d"),m=r("da13"),f=r("34c3"),p=r("5d23"),h=r("490a"),v=Object(c["a"])(o,n,a,!1,null,"dc14e49c",null);t["a"]=v.exports;l()(v,{VIcon:d["a"],VListItem:m["a"],VListItemIcon:f["a"],VListItemTitle:p["c"],VProgressCircular:h["a"]})},"1b08":function(e,t,r){},"1f42":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return null!==e.track?r("div",{staticClass:"track-item"},[r("div",{staticClass:"track-content"},[r("div",{staticClass:"left-square"},[e.albumList?r("div",{staticClass:"album-number"},[e._v(e._s(e.track.track_number))]):r("div",{staticClass:"album-art",style:{backgroundImage:"url("+e.$store.getters.itemImage(e.track)+")"}}),e.albumList?r("v-card",{staticClass:"play-button",style:{opacity:e.trackIsLoaded?"1":"0"},attrs:{flat:""}},[e.trackIsPlaying?r("v-btn",{attrs:{icon:""},on:{click:e.pause}},[r("v-icon",[e._v("mdi-pause")])],1):r("v-btn",{attrs:{icon:""},on:{click:e.play}},[r("v-icon",[e._v("mdi-play")])],1)],1):r("div",{staticClass:"play-button art-button",style:{opacity:e.trackIsLoaded?"1":"0"}},[e.trackIsPlaying?r("v-btn",{attrs:{icon:"",color:"white"},on:{click:e.pause}},[r("v-icon",[e._v("mdi-pause")])],1):r("v-btn",{attrs:{icon:"",color:"white"},on:{click:e.play}},[r("v-icon",[e._v("mdi-play")])],1)],1)],1),r("div",{staticClass:"track-info"},[r("div",{staticClass:"track-title",attrs:{title:e.track.name}},[e._v(" "+e._s(e.track.name)+" ")]),r("div",{staticClass:"track-artist"},[r("artists-span",{staticClass:"artists-span",attrs:{grey:"",artists:e.track.artists}})],1)])]),e.menu?r("div",{staticClass:"icons"},[r("follow-button",{attrs:{item:e.track}}),r("item-menu",{attrs:{"context-item":e.contextItem,item:e.track}})],1):e._e()]):e._e()},a=[],i=(r("96cf"),r("1da1")),s=r("7628"),o=r("5dd2"),c=r("190f"),u=r("e292"),l=r("9bcd"),d={name:"TrackItem",components:{ItemMenu:l["a"],FollowButton:u["a"],FollowMenuItem:c["a"],ShareMenuItem:o["a"],ArtistsSpan:s["a"]},props:{track:{type:Object,default:null},albumList:{type:Boolean,default:!1},menu:{type:Boolean,default:!1},contextItem:{type:Object,default:null}},methods:{play:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.trackIsLoaded){t.next=2;break}return t.abrupt("return",e.$store.dispatch("play"));case 2:e.$store.commit("playAfterLoad",!0),e.$store.commit("track",{track:e.track,contextItem:e.contextItem});case 4:case"end":return t.stop()}}),t)})))()},pause:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("pause");case 2:case"end":return t.stop()}}),t)})))()}},computed:{trackIsLoaded:function(){return!!this.$store.getters.isTrackSet&&this.$store.state.media.track.id===this.track.id},trackIsPlaying:function(){return this.trackIsLoaded&&this.$store.state.media.playing}}},m=d,f=(r("7bca"),r("2877")),p=r("6544"),h=r.n(p),v=r("8336"),g=r("b0af"),b=r("132d"),y=Object(f["a"])(m,n,a,!1,null,"641101b2",null);t["a"]=y.exports;h()(y,{VBtn:v["a"],VCard:g["a"],VIcon:b["a"]})},2:function(e,t){},"25c2":function(e,t,r){"use strict";var n=r("1b08"),a=r.n(n);a.a},3:function(e,t){},"304d":function(e,t,r){},"30b7":function(e,t,r){},"33b3":function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));r("99af"),r("c975"),r("a15b"),r("d81d"),r("fb6a"),r("b0c0"),r("d3b7"),r("25f0"),r("3ca3"),r("2ca0"),r("ddb0");var n=r("b85c"),a=(r("96cf"),r("1da1")),i=r("d4ec"),s=r("bee2"),o=r("262e"),c=r("2caf"),u=r("d7a8"),l=r("8868"),d=r("faa1"),m=r.n(d),f=r("949d"),p=r.n(f),h=r("fa1c"),v=r.n(h),g=function(e){Object(o["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.call(this),e.apiKey=null,e.searchCache=null===localStorage.getItem("searchCache")?{cacheAge:+new Date}:JSON.parse(localStorage.searchCache),e}return Object(s["a"])(r,[{key:"waitForApiKey",value:function(){var e=this;return new Promise((function(t){if(null!==e.apiKey)return t();var r;r=setInterval((function(){null!==e.apiKey&&(clearInterval(r),t())}),100)}))}},{key:"getSearchString",value:function(e){return"".concat(e.name," - ").concat(e.artists.map((function(e){return e.name})).join(", "))}},{key:"cachedSearch",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:3,n=t+"|"+r.toString(),!this.searchCache[n]){e.next=4;break}return e.abrupt("return",this.searchCache[n]);case 4:if(null!==this.apiKey){e.next=7;break}return e.next=7,this.waitForApiKey();case 7:return e.next=9,v()(t,{maxResults:r,key:this.apiKey});case 9:return a=e.sent,i=a.results,this.searchCache[n]=i,localStorage.searchCache=JSON.stringify(this.searchCache),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTrackUrls",value:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,i,s,o,c,l,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(u["a"])(t.isTrackOffline(e));case 2:if(a=r.sent,!a){r.next=6;break}return r.next=6,{local:!0,url:a};case 6:return i=t.getSearchString(e),r.next=9,Object(u["a"])(t.cachedSearch(i));case 9:s=r.sent,o=s.map((function(e){return e.id})),c=Object(n["a"])(o),r.prev=12,d=regeneratorRuntime.mark((function e(){var t,r,a,i,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=l.value,e.next=3,Object(u["a"])(p.a.getInfo(t,{quality:"highestaudio",filter:"audioonly"}));case 3:r=e.sent,a=r.formats,i=["AUDIO_QUALITY_LOW","AUDIO_QUALITY_MEDIUM","AUDIO_QUALITY_HIGH"],a=a.sort((function(e,t){return t.averageBitrate-e.averageBitrate})).sort((function(e,t){return t.audioBitrate-e.audioBitrate})).sort((function(e,t){return t.mimeType.startsWith("audio")-e.mimeType.startsWith("audio")})).sort((function(e,t){return i.indexOf(t.audioQuality)-i.indexOf(e.audioQuality)})),s=Object(n["a"])(a.slice(0,2)),e.prev=8,s.s();case 10:if((o=s.n()).done){e.next=16;break}return c=o.value,e.next=14,{local:!1,url:c.url};case 14:e.next=10;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](8),s.e(e.t0);case 21:return e.prev=21,s.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[8,18,21,24]])})),c.s();case 15:if((l=c.n()).done){r.next=19;break}return r.delegateYield(d(),"t0",17);case 17:r.next=15;break;case 19:r.next=24;break;case 21:r.prev=21,r.t1=r["catch"](12),c.e(r.t1);case 24:return r.prev=24,c.f(),r.finish(24);case 27:case"end":return r.stop()}}),r,null,[[12,21,24,27]])})))()}},{key:"isTrackOffline",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Not implemented";case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeCached",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Not implemented";case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"downloadTrack",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw n.length>2&&void 0!==n[2]?n[2]:function(){return 0},n.length>3&&void 0!==n[3]?n[3]:null,"Not implemented";case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()}]),r}(m.a)},3717:function(e,t,r){},3786:function(e,t,r){},4:function(e,t){},"47cb":function(e,t,r){"use strict";var n=r("e81c"),a=r.n(n);a.a},5:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{staticClass:"app"},[e.$store.state.windowWidth>680?r("v-navigation-drawer",{staticClass:"navBar",attrs:{color:"navBackground",permanent:!0,app:"",absolute:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("nav-content")],1):e._e(),r("v-app-bar",{staticClass:"toolbar",attrs:{app:"",elevation:"1"}},[r("tool-bar",{staticClass:"toolbar-content",attrs:{compact:e.$store.state.windowWidth<=1e3,mobile:e.$store.state.windowWidth<=680}})],1),r("v-main",{staticClass:"scroll-container"},[r("div",{staticClass:"perfect-scroller"},[r("router-view",{staticClass:"router-view"})],1)]),e._l(e.$store.state.snackbars,(function(t){return r("v-snackbar",{attrs:{app:"",timeout:t.timeout,outlined:!e.$vuetify.theme.dark,color:"primary"},scopedSlots:e._u([{key:"action",fn:function(n){var a=n.attrs;return[r("v-btn",e._b({attrs:{text:"",color:e.$vuetify.theme.dark?"default":"primary"},on:{click:function(e){t.open=!1}}},"v-btn",a,!1),[e._v(" Dismiss ")])]}}],null,!0),model:{value:t.open,callback:function(r){e.$set(t,"open",r)},expression:"snack.open"}},[e._v(" "+e._s(t.text)+" ")])})),e.$store.state.windowWidth<=1e3&&e.$store.getters.isTrackSet?r("v-card",{staticClass:"bottom-media-control",class:{"medium-width":e.$store.state.windowWidth<=1e3},attrs:{flat:"",color:"primaryLight"}},[r("div",{staticClass:"info-pane"},[r("media-info",{staticClass:"media-info"}),r("follow-button",{staticClass:"button",attrs:{item:e.$store.state.media.track}}),r("queue-button",{staticClass:"button"})],1),r("div",{staticClass:"full-controls"},[r("media-controls",{attrs:{full:e.$store.state.windowWidth>430}}),r("media-seek",{staticClass:"seeker"})],1)]):e._e(),e.$store.state.windowWidth<=680?r("v-bottom-navigation",{attrs:{color:"primary",grow:"",shift:e.$store.state.windowWidth<=430,app:""}},[r("v-btn",{attrs:{value:"now",to:"/",exact:""}},[r("span",[e._v("Listen Now")]),r("v-icon",[e._v("mdi-play-circle-outline")])],1),r("v-btn",{attrs:{value:"browse",to:"/browse",exact:""}},[r("span",[e._v("Browse")]),r("v-icon",[e._v("mdi-grid-large")])],1),r("v-btn",{attrs:{value:"library",to:"/library"}},[r("span",[e._v("Library")]),r("v-icon",[e._v("mdi-record-circle-outline")])],1),r("v-btn",{attrs:{value:"search",to:"/search"}},[r("span",[e._v("Search")]),r("v-icon",[e._v("mdi-magnify")])],1)],1):e._e(),r("music-player")],2)},i=[],s=(r("caad"),r("b0c0"),r("ac1f"),r("2532"),r("841c"),r("1276"),r("96cf"),r("1da1")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"toolbar"},[e.mobile?r("logo",{staticClass:"logo"}):e._e(),e.mobile||e.compact?e._e():r("media-controls",{staticClass:"controls",attrs:{full:""}}),e.compact||e.mobile||!e.$store.getters.isTrackSet?e._e():r("div",{staticClass:"media-container"},[r("div",{staticClass:"media-info"},[r("media-seek",{staticClass:"top-seeker",attrs:{"no-background":"","small-time":""}}),r("media-info",{staticClass:"top-info",attrs:{"small-artists":"",drag:""}})],1),r("follow-button",{staticClass:"favorite-button",attrs:{"hide-tooltip":"",item:e.$store.state.media.track}}),r("queue-button",{staticClass:"queue-button"})],1),e.mobile?e._e():r("div",{staticClass:"volume"},[r("v-slider",{ref:"volume",attrs:{min:0,max:1,step:.01,"prepend-icon":e.volumeIcon},on:{"click:prepend":e.toggleMute},model:{value:e.volume,callback:function(t){e.volume=t},expression:"volume"}})],1),r("div",{staticClass:"buttons"},[r("v-menu",{attrs:{"offset-y":"","close-on-content-click":!0},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[r("v-btn",e._g(e._b({attrs:{color:"primary",icon:""}},"v-btn",a,!1),n),[r("v-icon",[e._v("mdi-account-circle")])],1)]}}])},[r("v-list",[e.$store.getters.isLoggedIn?r("v-list-item",{attrs:{"two-line":""}},[r("router-link",{staticClass:"list-link",attrs:{tag:"div",to:"/user/"+e.$store.getters.urlName(e.$store.state.userInfo.name)+"/"+e.$store.state.userInfo.id}},[r("v-list-item-avatar",[r("img",{attrs:{src:e.$store.state.userInfo.avatar,alt:"User Avatar"}})]),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(e.$store.state.userInfo.name))]),r("v-list-item-subtitle",[e._v(e._s(e.$store.state.userInfo.mail))])],1)],1)],1):e._e(),r("v-list-item",{attrs:{to:"/downloads"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-download")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Downloads")])],1)],1),r("v-list-item",{attrs:{to:"/settings"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-cog-outline")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Settings")])],1)],1),e.$store.getters.isLoggedIn?r("v-list-item",{attrs:{color:"primary"},on:{click:function(t){return e.$store.dispatch("spotifyLogout")}}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-logout")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Logout")])],1)],1):e.$store.getters.isKeySet?r("v-list-item",{attrs:{color:"primary"},on:{click:function(t){return e.$store.dispatch("spotifyLogin")}}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-login")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Login")])],1)],1):e._e(),r("v-list-item",{attrs:{color:"primary"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-brightness-6")])],1),r("v-list-item-content",[r("v-list-item-title",{staticClass:"theme-switch"},[r("span",[e._v("Dark theme")])])],1),r("v-list-item-action",[r("v-switch",{model:{value:e.$vuetify.theme.dark,callback:function(t){e.$set(e.$vuetify.theme,"dark",t)},expression:"$vuetify.theme.dark"}})],1)],1)],1)],1),"electron"===e.$store.state.platform.type?r("v-btn",{staticClass:"minimize-button",attrs:{icon:""},on:{click:function(t){return e.$store.dispatch("minimizeWindow")}}},[r("v-icon",[e._v("mdi-minus")])],1):e._e(),"electron"===e.$store.state.platform.type?r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$store.dispatch("closeWindow")}}},[r("v-icon",[e._v("mdi-close")])],1):e._e()],1)],1)},c=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"media-info"},[n("v-card",{staticClass:"media-card",attrs:{outlined:""}},[n("div",{staticClass:"media-album",style:{backgroundImage:"url("+e.$store.getters.itemImage(e.$store.state.media.track)+")",webkitAppRegion:"drag"}}),n("div",{staticClass:"white-part"},[n("div",{staticClass:"media-text-info"},[e.$store.getters.isTrackSet?n("div",{staticClass:"media-title-artists"},[n("span",{staticClass:"track-title",attrs:{title:e.$store.state.media.track.name}},[e._v(" "+e._s(e.$store.state.media.track.name)+" ")]),n("artists-span",{staticClass:"track-artists",style:{maxWidth:e.smallArtists?"calc(100% - 56px)":""},attrs:{grey:"",artists:e.$store.state.media.track.artists}})],1):n("img",{staticClass:"media-info-logo",attrs:{src:r("d05a"),alt:"vm5 logo"}})]),n("div",{staticClass:"local-icon"},[e.$store.state.media.local?n("v-icon",{attrs:{small:e.$store.state.windowWidth>=1e3}},[e._v(" mdi-cloud-download-outline ")]):n("v-icon",{attrs:{small:e.$store.state.windowWidth>=1e3}},[e._v("mdi-radio-tower")])],1)])])],1)},l=[],d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.$store.getters.isTrackSet?r("div",{staticClass:"controls",style:{minWidth:e.full?"156px":"96px"}},[e.full?r("v-btn",{attrs:{color:e.$store.state.media.shuffle?"primary":"default",icon:"",small:""},on:{click:function(t){return e.$store.commit("toggleShuffle")}}},[r("v-icon",{attrs:{small:""}},[e._v("mdi-shuffle")])],1):e._e(),r("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.$store.dispatch("skip",-1)}}},[r("v-icon",[e._v("mdi-rewind")])],1),r("v-btn",{attrs:{loading:e.$store.state.media.trackLoading,icon:"",large:""},on:{click:function(t){return e.$store.dispatch(e.playing?"pause":"play")}}},[e.playing?r("v-icon",[e._v("mdi-pause")]):r("v-icon",[e._v("mdi-play")])],1),r("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.$store.dispatch("skip",1)}}},[r("v-icon",[e._v("mdi-fast-forward")])],1),e.full?r("v-btn",{attrs:{color:e.$store.state.media.repeat?"primary":"default",icon:"",small:""},on:{click:function(t){return e.$store.commit("toggleRepeat")}}},[r("v-icon",{attrs:{small:""}},[e._v("mdi-repeat")])],1):e._e()],1):e._e()},m=[],f={name:"MediaControls",props:{full:{type:Boolean,default:!1}},computed:{playing:function(){return this.$store.state.media.playing}}},p=f,h=(r("47cb"),r("2877")),v=r("6544"),g=r.n(v),b=r("8336"),y=r("132d"),k=Object(h["a"])(p,d,m,!1,null,"c9fe7e90",null),w=k.exports;g()(k,{VBtn:b["a"],VIcon:y["a"]});var x=r("7628"),R={name:"MediaInfo",components:{ArtistsSpan:x["a"],MediaControls:w},props:{drag:{type:Boolean,default:!1},smallArtists:{type:Boolean,default:!1}}},_=R,O=(r("25c2"),r("b0af")),I=Object(h["a"])(_,u,l,!1,null,"e2a59696",null),S=I.exports;g()(I,{VCard:O["a"],VIcon:y["a"]});var j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"seek",on:{mousedown:e.seekDown,touchstart:e.touchDown}},[r("span",{staticClass:"time",class:e.smallTime?"smallTime":""},[e._v(e._s(e.$store.getters.currentTimeHms))]),r("v-sheet",{ref:"seekBar",staticClass:"seek-background",style:{margin:e.smallTime?"0 -50px":"0 5px"},attrs:{flat:"",color:e.noBackground?"transparent":"default"}},[r("v-sheet",{staticClass:"seek-progress",style:{width:Math.round(1e4*e.$store.getters.progress)/100+"%"},attrs:{color:"primarySeek"}}),r("v-sheet",{staticClass:"seek-thumb",style:{left:"calc("+Math.round(1e4*e.$store.getters.progress)/100+"% - 5px)"},attrs:{color:"primarySeek"}})],1),r("span",{staticClass:"time",class:e.smallTime?"smallTime":""},[e._v(e._s(e.$store.getters.durationHms))])],1)},C=[],T={name:"MediaSeek",props:{smallTime:{type:Boolean,default:!1},noBackground:{type:Boolean,default:!1}},data:function(){return{seeking:!1}},mounted:function(){document.addEventListener("mousemove",this.seekMove),document.addEventListener("mouseup",this.seekUp),document.addEventListener("touchmove",this.touchMove),document.addEventListener("touchend",this.touchEnd)},beforeDestroy:function(){document.removeEventListener("mousemove",this.seekMove),document.removeEventListener("mouseup",this.seekUp),document.removeEventListener("touchmove",this.touchMove),document.removeEventListener("touchend",this.touchEnd)},methods:{touchDown:function(e){this.seekDown(e.touches[0])},touchMove:function(e){this.seekMove(e.touches[0])},touchEnd:function(e){this.seekUp(e.touches[0])},seekDown:function(e){this.seeking=!0,this.seekByEvent(e)},seekMove:function(e){this.seeking&&this.seekByEvent(e)},seekByEvent:function(e){var t=this.$refs.seekBar.$el.getBoundingClientRect(),r=t.left,n=t.width,a=e.pageX-r,i=Math.max(Math.min(1,a/n),0);this.$store.commit("seekTo",i)},seekUp:function(e){this.seeking=!1}},watch:{"$store.state.media.track":function(){this.seeking=!1}}},$=T,L=(r("58eb"),r("8dd9")),P=Object(h["a"])($,j,C,!1,null,"5dfc6138",null),A=P.exports;g()(P,{VSheet:L["a"]});var M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"logo"},[r("img",{staticClass:"logo-image",attrs:{src:e.$vuetify.theme.dark?"img/full-white-medium.png":"img/full-black-medium.png",alt:"logo image"}}),r("span",[e._v(" Vue Music ")])])},F=[],B={name:"Logo"},U=B,V=(r("e88c"),Object(h["a"])(U,M,F,!1,null,"e229bb10",null)),D=V.exports,E=r("e292"),N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.$store.getters.isTrackSet?r("div",{staticClass:"queue-button"},[r("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1,"close-on-click":!0},on:{input:e.scrollToItem},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[r("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",a,!1),n),[r("v-icon",[e._v("mdi-playlist-play")])],1)]}}],null,!1,2887210282)},[r("v-list",{staticClass:"track-list"},[r("h5",{staticClass:"context"},[e._v(e._s(e.context.name))]),r("recycle-scroller",{ref:"scroller",staticClass:"scroller",attrs:{items:e.queue,"item-size":51},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;t.index;return[r("div",{staticClass:"scroll-item"},[r("v-divider"),r("track-row",{key:n.id,attrs:{"queue-track":"","context-item":e.$store.state.media.contextItem,track:n}})],1)]}}],null,!1,798257430)}),r("div",{staticClass:"bottom-buttons"},[null!==e.context.to?r("v-btn",{staticClass:"view-more",attrs:{disabled:e.$route.fullPath===e.context.to,color:"primary",text:"",small:"",to:e.context.to,title:"Visit "+e.$store.state.media.contextItem.name}},[e._v("View more ")]):e._e(),r("v-btn",{staticClass:"view-more",attrs:{small:"",text:""},on:{click:function(t){return e.$store.commit("clearQueue")}}},[e._v("Clear queue")])],1)],1)],1)],1):e._e()},z=[],q=r("1344"),W={name:"QueueButton",components:{ArtistsSpan:x["a"],TrackRow:q["a"]},methods:{scrollToItem:function(){var e=this;setTimeout((function(){e.$refs.scroller&&e.$refs.scroller.scrollToItem(e.$store.getters.trackIndex)}),100)}},computed:{contextItem:function(){return this.$store.state.media.contextItem},context:function(){return{name:this.contextItem.name,to:this.$store.getters.relativeItemUrl(this.contextItem)}},queue:function(){return this.$store.getters.currentQueue}},watch:{"$store.getters.trackIndex":function(){this.$refs.scroller&&this.$refs.scroller.scrollToItem(this.$store.getters.trackIndex)}}},Q=W,H=(r("f8cc"),r("ce7e")),K=r("8860"),J=r("e449"),Y=Object(h["a"])(Q,N,z,!1,null,"11300ae5",null),G=Y.exports;g()(Y,{VBtn:b["a"],VDivider:H["a"],VIcon:y["a"],VList:K["a"],VMenu:J["a"]});var X={name:"ToolBar",components:{QueueButton:G,FollowButton:E["a"],Logo:D,MediaSeek:A,MediaControls:w,MediaInfo:S},data:function(){return{volume:1,prevVolume:1}},props:{mobile:{type:Boolean,default:!1},compact:{type:Boolean,default:!1}},mounted:function(){this.mountVolumeListener(),this.volume=Math.pow(this.$store.state.media.volume,.5)},beforeDestroy:function(){this.removeVolumeListener()},methods:{mountVolumeListener:function(){this.$refs.volume&&this.$refs.volume.$el.addEventListener("wheel",this.volumeScroll,!0)},removeVolumeListener:function(){this.$refs.volume&&this.$refs.volume.$el.removeEventListener("wheel",this.volumeScroll)},toggleMute:function(){this.volume>0?(this.prevVolume=this.volume,this.volume=0):this.volume=this.prevVolume},volumeScroll:function(e){var t=-25e-5*e.deltaY;this.volume=Math.min(1,Math.max(0,this.volume+t))}},watch:{"$vuetify.theme.dark":function(){localStorage.darkTheme=this.$vuetify.theme.dark},mobile:function(){var e=this;this.mobile?this.removeVolumeListener():setTimeout((function(){e.mountVolumeListener()}),100)},volume:function(){this.$store.commit("volume",Math.pow(this.volume,2))}},computed:{volumeIcon:function(){return 0===this.volume?"mdi-volume-mute":this.volume<.5?"mdi-volume-medium":"mdi-volume-high"}}},Z=X,ee=(r("8363"),r("da13")),te=r("1800"),re=r("8270"),ne=r("5d23"),ae=r("34c3"),ie=r("ba0d"),se=r("b73d"),oe=Object(h["a"])(Z,o,c,!1,null,"a80b01ee",null),ce=oe.exports;g()(oe,{VBtn:b["a"],VIcon:y["a"],VList:K["a"],VListItem:ee["a"],VListItemAction:te["a"],VListItemAvatar:re["a"],VListItemContent:ne["a"],VListItemIcon:ae["a"],VListItemSubtitle:ne["b"],VListItemTitle:ne["c"],VMenu:J["a"],VSlider:ie["a"],VSwitch:se["a"]});var ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("perfect-scrollbar",{staticClass:"nav-bar"},[r("div",{staticClass:"nav-top"},[r("logo"),r("search-input",{staticClass:"search-input"})],1),r("v-list",{staticClass:"py-0",attrs:{dense:"",nav:""}},[r("v-list-item",{attrs:{to:"/",exact:""}},[r("v-list-item-icon",[r("v-icon",{attrs:{color:"primary"}},[e._v("mdi-play-circle-outline")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Listen Now")])],1)],1),r("v-list-item",{attrs:{to:"/browse",exact:""}},[r("v-list-item-icon",[r("v-icon",{attrs:{color:"primary"}},[e._v("mdi-grid-large")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Browse")])],1)],1),r("v-subheader",[e._v("Library")]),r("v-list-item",{attrs:{to:"/library/artists"}},[r("v-list-item-icon",[r("v-icon",{attrs:{color:"primary"}},[e._v("mdi-microphone-variant")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Artists")])],1)],1),r("v-list-item",{attrs:{to:"/library/albums"}},[r("v-list-item-icon",[r("v-icon",{attrs:{color:"primary"}},[e._v("mdi-record-circle-outline")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Albums")])],1)],1),r("v-list-item",{attrs:{to:"/library/tracks"}},[r("v-list-item-icon",[r("v-icon",{attrs:{color:"primary"}},[e._v("mdi-music-note")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Tracks")])],1)],1),e.$store.state.library.playlists.length>0?r("div",{staticClass:"playlist-header"},[r("v-subheader",[e._v("Playlists")]),e.showPlaylistInput?r("v-btn",{attrs:{small:"",text:""},on:{click:function(t){e.showPlaylistInput=!1}}},[e._v("Cancel")]):r("v-btn",{staticClass:"add-playlist",attrs:{icon:"",small:"",title:"Create new playlist"},on:{click:function(t){e.showPlaylistInput=!0}}},[r("v-icon",{attrs:{"x-small":""}},[e._v("mdi-plus")])],1)],1):e._e(),e.showPlaylistInput?r("v-form",{staticClass:"create-playlist",on:{submit:function(t){return t.preventDefault(),e.createPlaylist(t)}}},[r("v-text-field",{attrs:{autofocus:"",rules:e.playlistRules,label:"Playlist name",outlined:"",dense:""},model:{value:e.playlistName,callback:function(t){e.playlistName=t},expression:"playlistName"}}),r("v-btn",{attrs:{icon:"",type:"submit",loading:e.createLoading}},[r("v-icon",[e._v("mdi-plus")])],1)],1):e._e(),e._l(e.$store.state.library.playlists,(function(t){return r("v-list-item",{key:t.id,attrs:{to:e.$store.getters.relativeItemUrl(t),exact:""}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-playlist-music")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(t.name))])],1)],1)}))],2)],1)},le=[],de=r("0781"),me={name:"NavContent",components:{SearchInput:de["a"],Logo:D},data:function(){return{showPlaylistInput:!1,playlistRules:[function(e){return e.length>0||"Name can't be empty"}],playlistName:"",createLoading:!1}},mounted:function(){},methods:{createPlaylist:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.createLoading=!0,t.next=3,e.$store.dispatch("createPlaylist",e.playlistName);case 3:return r=t.sent,e.createLoading=!1,e.showPlaylistInput=!1,e.playlistName="",t.next=9,e.$router.push($store.getters.relativeItemUrl(r));case 9:case"end":return t.stop()}}),t)})))()}},watch:{}},fe=me,pe=(r("99e8"),r("4bd4")),he=r("e0c7"),ve=r("8654"),ge=Object(h["a"])(fe,ue,le,!1,null,"5cfd90c0",null),be=ge.exports;g()(ge,{VBtn:b["a"],VForm:pe["a"],VIcon:y["a"],VList:K["a"],VListItem:ee["a"],VListItemContent:ne["a"],VListItemIcon:ae["a"],VListItemTitle:ne["c"],VSubheader:he["a"],VTextField:ve["a"]});var ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("audio",{ref:"audio"})])},ke=[],we={name:"MusicPlayer",data:function(){return{timeInterval:-1}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.commit("audioElement",e.$refs.audio),e.timeInterval=setInterval((function(){e.$store.commit("currentTime",e.$refs.audio.currentTime),e.$refs.audio.duration&&navigator.mediaSession.hasOwnProperty("setPositionState")&&navigator.mediaSession.setPositionState({duration:e.$refs.audio.duration,playbackRate:1,position:e.$refs.audio.currentTime})}),1e3/30),e.handleVolume(),!e.$store.getters.isTrackSet){t.next=6;break}return t.next=6,e.$store.dispatch("setTrack",e.$store.state.media.track);case 6:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){clearInterval(this.timeInterval)},methods:{handleVolume:function(){this.$refs.audio.volume=this.$store.state.media.volume}},watch:{"$store.state.media.track":function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("setTrack",e.$store.state.media.track);case 2:case"end":return t.stop()}}),t)})))()},"$store.state.media.volume":function(){this.handleVolume()}}},xe=we,Re=Object(h["a"])(xe,ye,ke,!1,null,"72a46d51",null),_e=Re.exports,Oe={name:"App",components:{MusicPlayer:_e,QueueButton:G,FollowButton:E["a"],NavContent:be,MediaSeek:A,MediaControls:w,MediaInfo:S,ToolBar:ce},data:function(){return{drawer:!0,cacheInterval:-1}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("initialize");case 2:if(document.addEventListener("keypress",e.devListener),window.addEventListener("resize",e.resizeListener),window.onbeforeunload=function(t){e.$store.state.dontCache||e.$store.dispatch("cacheAll"),delete t["returnValue"]},"electron"===e.$store.state.platform.type&&window.require("electron").ipcRenderer.on("before-quit",Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("cacheState");case 2:case"end":return t.stop()}}),t)})))),e.cacheInterval=setInterval(Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("cacheAll");case 2:case"end":return t.stop()}}),t)}))),3e5),console.log(e.$store),e.$store.getters.isKeySet){t.next=14;break}if("Settings"===e.$route.name){t.next=12;break}return t.next=12,e.$router.push("/settings");case 12:t.next=17;break;case 14:if(e.$store.getters.isLoggedIn||"Settings"===e.$route.name){t.next=17;break}return t.next=17,e.$router.push("/settings");case 17:"web"===e.$store.state.platform.type&&e.handleCode();case 18:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){clearInterval(this.cacheInterval),document.removeEventListener("keypress",this.devListener),window.removeEventListener("resize",this.resizeListener)},methods:{handleCode:function(){if(location.search.includes("?code=")){var e=location.search.split("?code=")[1].split("&")[0],t=new BroadcastChannel("loginCode");t.postMessage(e),t.close(),window.close()}},resizeListener:function(){this.$store.commit("windowWidth",window.innerWidth)},devListener:function(e){"`"===e.key&&this.$store.dispatch("openDevTools"),"r"===e.key&&e.ctrlKey&&location.reload()}}},Ie=Oe,Se=(r("034f"),r("7496")),je=r("40dc"),Ce=r("b81c"),Te=r("f6c4"),$e=r("f774"),Le=r("2db4"),Pe=Object(h["a"])(Ie,a,i,!1,null,null,null),Ae=Pe.exports;g()(Pe,{VApp:Se["a"],VAppBar:je["a"],VBottomNavigation:Ce["a"],VBtn:b["a"],VCard:O["a"],VIcon:y["a"],VMain:Te["a"],VNavigationDrawer:$e["a"],VSnackbar:Le["a"]});var Me=r("9483");Object(Me["a"])("".concat("/vuemusic/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});r("d3b7");var Fe=r("8c4f"),Be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"listen-now"},[r("div",{staticClass:"padded"},[r("h2",[e._v(e._s(e.$store.state.homePage.featured.title.replace(/\\/gi,"")))])]),r("item-row",{staticClass:"item-row",attrs:{items:e.$store.state.homePage.featured.playlists,big:""}}),e.$store.state.media.recentlyPlayed.length>0?r("h2",{staticClass:"padded"},[e._v("Recently played")]):e._e(),e.$store.state.media.recentlyPlayed.length>0?r("item-row",{staticClass:"item-row",attrs:{items:e.$store.state.media.recentlyPlayed}}):e._e(),r("h2",{staticClass:"padded"},[e._v("Made for you")]),r("item-row",{staticClass:"item-row",attrs:{items:e.$store.state.homePage.personalized,type:"playlist"}}),r("h2",{staticClass:"padded"},[e._v("New releases")]),r("item-row",{staticClass:"item-row",attrs:{items:e.$store.state.homePage.newReleases,type:"album",rows:2,big:""}})],1)},Ue=[],Ve=r("5c2f"),De=r("a892"),Ee={name:"ListenNow",components:{ItemRow:De["a"],ItemSquare:Ve["a"]},mounted:function(){this.$store.dispatch("refreshHomePage")}},Ne=Ee,ze=(r("6f1c"),Object(h["a"])(Ne,Be,Ue,!1,null,"38e1a534",null)),qe=ze.exports;n["a"].use(Fe["a"]);var We=[{path:"/",name:"Home",component:qe},{path:"/login",name:"Login",component:function(){return r.e("chunk-2d2086b7").then(r.bind(null,"a55b"))}},{path:"/settings",name:"Settings",component:function(){return r.e("chunk-05208a0b").then(r.bind(null,"26d3"))}},{path:"/downloads",name:"Downloads",component:function(){return r.e("chunk-37884929").then(r.bind(null,"9d26e"))}},{path:"/browse",name:"Browse",component:function(){return r.e("chunk-6bbe2798").then(r.bind(null,"b210"))}},{path:"/album/:name/:id/:trackId?",name:"Album",component:function(){return r.e("chunk-1c90bac7").then(r.bind(null,"ee18"))}},{path:"/playlist/:name/:id",name:"Playlist",component:function(){return r.e("chunk-7debffe2").then(r.bind(null,"2059"))}},{path:"/artist/:name/:id",name:"Artist",component:function(){return r.e("chunk-0d65c4f6").then(r.bind(null,"6b01"))}},{path:"/user/:name/:id",name:"User",component:function(){return r.e("chunk-786d4f79").then(r.bind(null,"1511"))}},{path:"/track/:name/:id",name:"Track",component:function(){return r.e("chunk-2d0c8407").then(r.bind(null,"53a4"))}},{path:"/category/:id",name:"Category",component:function(){return r.e("chunk-d0b3c9d6").then(r.bind(null,"4886"))}},{path:"/library",name:"Library",component:function(){return r.e("chunk-c0d67e16").then(r.bind(null,"55a5"))}},{path:"/library/artists",name:"Artists",component:function(){return r.e("chunk-431796de").then(r.bind(null,"b7e4"))}},{path:"/library/albums",name:"Albums",component:function(){return r.e("chunk-40670343").then(r.bind(null,"be55"))}},{path:"/library/playlists",name:"Playlists",component:function(){return r.e("chunk-491a2ef4").then(r.bind(null,"ea2f"))}},{path:"/library/tracks",name:"Tracks",component:function(){return r.e("chunk-14837eba").then(r.bind(null,"ac6c"))}},{path:"/search",name:"Search",component:function(){return r.e("chunk-4fd07930").then(r.bind(null,"2d3b"))}},{path:"/tune",name:"Tune",component:function(){return r.e("chunk-0aadd050").then(r.bind(null,"edc3"))}},{path:"/radio",name:"Radio",component:function(){return r.e("chunk-48ff2a8b").then(r.bind(null,"b3ad"))}}],Qe=new Fe["a"]({routes:We}),He=Qe,Ke=(r("a4d3"),r("e01a"),r("99af"),r("4de4"),r("7db0"),r("c740"),r("4160"),r("c975"),r("a15b"),r("d81d"),r("fb6a"),r("a434"),r("b64b"),r("3ca3"),r("5319"),r("159b"),r("ddb0"),r("b85c")),Je=r("3835"),Ye=r("53ca"),Ge=r("8468"),Xe=r("2909"),Ze=r("5530"),et=r("668b"),tt=r("d7a8"),rt=r("8868"),nt=r("2f62"),at=r("be8d"),it=r.n(at),st=(r("38cf"),r("a123")),ot={state:Object(Ze["a"])({recentlyPlayed:[],track:null,local:!1,currentTime:0,duration:1,playing:!1,queue:[],shuffledQueue:[],contextItem:null,shuffle:!1,repeat:!0,downloads:[],playAfterLoad:!1,volume:1,trackLoading:!0},null===localStorage.getItem("mediaStateCache")?{}:JSON.parse(localStorage.mediaStateCache)),mutations:{local:function(e,t){return e.local=t},trackLoading:function(e,t){return e.trackLoading=t},volume:function(e,t){return e.volume=t},seekTo:function(e,t){e.audio.duration&&(e.audio.currentTime=e.audio.duration*t)},duration:function(e,t){return e.duration=t||0},currentTime:function(e,t){return e.currentTime=t||0},playing:function(e,t){return e.playing=t},audioElement:function(e,t){return e.audio=t},addDownload:function(e,t){var r=e.downloads.findIndex((function(e){return e.track.id===t.track.id}));-1!==r?e.downloads[r]=t:e.downloads.push(t)},downloadProgress:function(e,t){var r=t.track,n=t.progress;return e.downloads.find((function(e){return e.track.id===r.id})).state=n},removeDownload:function(e,t){var r=e.downloads.findIndex((function(e){return e.track.id===t.id}));-1!==r&&e.downloads.splice(r,1)},toggleShuffle:function(e){return e.shuffle=!e.shuffle},toggleRepeat:function(e){return e.repeat=!e.repeat},shuffle:function(e,t){return e.shuffle=t},repeat:function(e,t){return e.repeat=t},playAfterLoad:function(e,t){return e.playAfterLoad=t},track:function(e,t){var r=t.track,n=t.contextItem;if(e.track=r,void 0!==n&&(null===e.contextItem||e.contextItem.id!==n.id||e.contextItem.type!==n.type||-1===e.queue.findIndex((function(e){return e.id===r})))){if("radio"!==n.type&&"search"!==n.type){var a=e.recentlyPlayed.findIndex((function(e){return e.id===n.id}));-1!==a&&e.recentlyPlayed.splice(a,1),e.recentlyPlayed.unshift(n),e.recentlyPlayed=e.recentlyPlayed.slice(0,10)}e.contextItem=n,e.queue=n.tracks,e.shuffledQueue=st["a"].shuffleArray(Object(Xe["a"])(n.tracks))}},playNext:function(e,t){for(var r=[e.queue,e.shuffledQueue],n=0,a=r;n<a.length;n++){var i,s=a[n],o=s.findIndex((function(t){return t.id===e.track.id})),c=Object(Ke["a"])(t);try{var u=function(){var e=i.value,t=s.findIndex((function(t){return t.id===e.id}));if(t===o)return"continue";-1!==t&&s.splice(t,1),s.splice(o+1,0,e)};for(c.s();!(i=c.n()).done;)u()}catch(l){c.e(l)}finally{c.f()}}},addToQueue:function(e,t){for(var r=[e.queue,e.shuffledQueue],n=0,a=r;n<a.length;n++){var i,s=a[n],o=s.findIndex((function(t){return t.id===e.track.id})),c=Object(Ke["a"])(t);try{var u=function(){var e=i.value,t=s.findIndex((function(t){return t.id===e.id}));if(t===o)return"continue";-1!==t&&s.splice(t,1),s.push(e)};for(c.s();!(i=c.n()).done;)u()}catch(l){c.e(l)}finally{c.f()}}},removeFromQueue:function(e,t){if(t.id!==e.track.id){var r=e.queue.findIndex((function(e){return e.id===t.id})),n=e.shuffledQueue.findIndex((function(e){return e.id===t.id}));-1!==r&&e.queue.splice(r,1),-1!==n&&e.shuffledQueue.splice(n,1)}},clearQueue:function(e){e.queue=[e.track],e.shuffledQueue=[e.track]},cacheMedia:function(e){for(var t=["recentlyPlayed","track","queue","shuffledQueue","contextItem","shuffle","repeat","volume"],r={},n=0,a=t;n<a.length;n++){var i=a[n];if("library"===i){var s=e[i];s.tracks=s.tracks.map(st["a"].reduceTrackSize),r[i]=s}else r[i]=e[i]}localStorage.mediaStateCache=JSON.stringify(r),console.log("Media state cache complete")}},getters:{trackIndex:function(e,t){return t.isTrackSet?t.currentQueue.findIndex((function(t){return t.id===e.track.id})):-1},currentQueue:function(e){return e.shuffle?e.shuffledQueue:e.queue},isTrackSet:function(e){return null!==e.track},durationHms:function(e){return st["a"].secondsToHms(e.duration)},currentTimeHms:function(e){return st["a"].secondsToHms(e.currentTime)},progress:function(e){return e.duration?e.currentTime/e.duration:0}},actions:{isTrackAvailableOffline:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.rootState,e.next=3,n.platform.downloader.isTrackOffline(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),removeCached:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.rootState,t.commit,e.next=3,n.platform.downloader.removeCached(r);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),downloadTrackByUrl:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.rootState,a=t.commit,i=r.track,s=r.url,o=new AbortController,a("addDownload",{track:i,state:"Preparing",abortController:o}),e.next=6,n.platform.downloader.downloadTrack(s,i,(function(e){return a("downloadProgress",{track:i,progress:e})}),o.signal);case 6:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),getTrackUrls:function(e,t){var r=e.rootState;return r.platform.downloader.getTrackUrls(t)},setTrack:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,i,s,o,c,u,l,d,m,f,p,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,a=e.state,i=e.commit,n("setMetadata",t),i("trackLoading",!0),r.next=5,n("pause");case 5:return s=!0,o=!1,r.prev=7,r.t0=et["a"],r.next=11,n("getTrackUrls",t);case 11:r.t1=r.sent,u=(0,r.t0)(r.t1);case 13:return r.next=15,u.next();case 15:return l=r.sent,s=l.done,r.next=19,l.value;case 19:if(d=r.sent,s){r.next=42;break}if(m=d,f=m.url,p=m.local,a.track.id===t.id){r.next=24;break}return r.abrupt("return");case 24:return i("local",p),r.next=27,n("setTrackUrl",f);case 27:if(h=r.sent,!h){r.next=36;break}if(i("trackLoading",!1),p){r.next=33;break}return r.next=33,n("downloadTrackByUrl",{track:t,url:f});case 33:return r.abrupt("return");case 36:if(!p){r.next=39;break}return r.next=39,n("removeCached",t);case 39:s=!0,r.next=13;break;case 42:r.next=48;break;case 44:r.prev=44,r.t2=r["catch"](7),o=!0,c=r.t2;case 48:if(r.prev=48,r.prev=49,s||null==u.return){r.next=53;break}return r.next=53,u.return();case 53:if(r.prev=53,!o){r.next=56;break}throw c;case 56:return r.finish(53);case 57:return r.finish(48);case 58:return r.next=60,n("skip",1);case 60:case"end":return r.stop()}}),r,null,[[7,44,48,58],[49,,53,57]])})))()},setTrackUrl:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,a=e.state,i=e.commit,r.abrupt("return",new Promise((function(e,r){var o=a.playAfterLoad;i("playAfterLoad",!1),console.log("ðŸŽµ Now playing ðŸŽµ",t),a.audio.src=t;var c=setTimeout((function(){console.warn("can't play"),e(!1)}),3500);a.audio.onloadedmetadata=function(){i("duration",a.audio.duration)},a.audio.onended=function(){return n("skip",1)},a.audio.onplay=function(){navigator.mediaSession.playbackState="playing",n("setPlatformPlaying",!0),i("playing",!0)},a.audio.onpause=function(){navigator.mediaSession.playbackState="paused",n("setPlatformPlaying",!1),i("playing",!1)};var u=!1;a.audio.oncanplay=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!u){t.next=2;break}return t.abrupt("return");case 2:if(u=!0,clearTimeout(c),!o){t.next=7;break}return t.next=7,n("play");case 7:e(!0);case 8:case"end":return t.stop()}}),t)})))})));case 2:case"end":return r.stop()}}),r)})))()},play:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.state,!r.audio.paused){t.next=4;break}return t.next=4,r.audio.play();case 4:case"end":return t.stop()}}),t)})))()},pause:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.state,r.audio.paused){t.next=4;break}return t.next=4,r.audio.pause();case 4:case"end":return t.stop()}}),t)})))()},skip:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,i,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.state,a=e.getters,i=e.commit,s=e.dispatch,!(-1===t&&n.currentTime>5)){r.next=4;break}return n.audio.currentTime=0,r.abrupt("return");case 4:if(o=a.trackIndex+t,!(o>=n.queue.length)){r.next=13;break}if(!n.repeat){r.next=10;break}o-=n.queue.length,r.next=13;break;case 10:return r.next=12,s("pause");case 12:return r.abrupt("return",r.sent);case 13:if(!(o<0)){r.next=21;break}if(!n.repeat){r.next=18;break}o+=n.queue.length,r.next=21;break;case 18:return r.next=20,s("pause");case 20:return r.abrupt("return",r.sent);case 21:i("playAfterLoad",!0),i("track",{track:a.currentQueue[o]});case 23:case"end":return r.stop()}}),r)})))()},setMetadata:function(e,t){var r=e.dispatch,n=e.getters,a=e.state,i=e.commit,s=t.artists.map((function(e){return e.name})).join(", ");if(document.title="Vue Music â€¢ "+t.name+" - "+s,"mediaSession"in navigator){var o=[{src:n.notFoundImage,type:"image/png",sizes:"512x512"}];t.album.images.length>0&&(o=t.album.images.map((function(e){return{src:e.url,type:"image/png",sizes:"".concat(e.width,"x").concat(e.height)}}))),navigator.mediaSession.metadata=new MediaMetadata({title:t.name,artist:s,album:t.album.name,artwork:o}),navigator.mediaSession.setActionHandler("previoustrack",(function(){r("skip",-1)})),navigator.mediaSession.setActionHandler("nexttrack",(function(){r("skip",1)}));var c=10;navigator.mediaSession.setActionHandler("seekbackward",(function(e){var t=e.seekOffset||c;a.audio.currentTime=Math.max(a.audio.currentTime-t,0)})),navigator.mediaSession.setActionHandler("seekforward",(function(e){var t=e.seekOffset||c;a.audio.currentTime=Math.min(a.audio.currentTime+t,a.audio.duration)})),navigator.mediaSession.setActionHandler("play",(function(){r("play")})),navigator.mediaSession.setActionHandler("pause",(function(){r("pause")}));try{navigator.mediaSession.setActionHandler("stop",(function(){r("pause")}))}catch(u){console.warn('Warning! The "stop" media session action is not supported.')}try{navigator.mediaSession.setActionHandler("seekto",(function(e){i("seekTo",e.seekTime/a.duration)}))}catch(u){console.warn('Warning! The "seekto" media session action is not supported.')}}},playItem:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state,n=t.commit,a=t.dispatch,i=r.item,s=r.shuffle,o=void 0!==s&&s,e.next=4,a("getContextItem",i);case 4:if(c=e.sent,c.tracks&&0!==c.tracks.length){e.next=7;break}return e.abrupt("return",a("addSnack",{text:"This item has no tracks"}));case 7:u=o?c.tracks[Math.floor(Math.random()*c.tracks.length)]:c.tracks[0],"track"===i.type&&console.warn("Setting track item as context item, this should probably not happen"),n("playAfterLoad",!0),n("track",{contextItem:c,track:u}),n("shuffle",o);case 12:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()}},ct={state:{liveTerm:"",term:"",results:{},recent:null===localStorage.getItem("recentSearch")?[]:JSON.parse(localStorage.recentSearch)},mutations:{searchTerm:function(e,t){e.term=t.term,e.recent.includes(e.term)&&e.recent.splice(e.recent.indexOf(e.term),1),e.recent=[e.term].concat(Object(Xe["a"])(e.recent.slice(0,5))),localStorage.recentSearch=JSON.stringify(e.recent),n["a"].set(e.results,t.term,t)},liveTerm:function(e,t){return e.liveTerm=t}},getters:{},actions:{search:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state,n=t.commit,a=t.rootState,e.next=3,a.api.search(r,["album","artist","playlist","track"]);case 3:i=e.sent,n("searchTerm",{term:r,albums:i.albums.items,artists:i.artists.items,playlists:i.playlists.items,tracks:i.tracks.items});case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()}},ut=r("faa1"),lt=r.n(ut),dt=window&&void 0!==window.process&&void 0!==window.process.type;console.log("is electron?",dt);var mt=r(dt?"bf8a":"e51b").default;n["a"].use(nt["a"]);var ft=new nt["a"].Store({state:Object(Ze["a"])({spotifyId:"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",spotifySecret:"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",youtubeKey:"cccccccccccc-dddddddddddddddddddddddddd",requestedScopes:"ugc-image-upload user-read-email user-read-private playlist-read-collaborative playlist-modify-public playlist-read-private playlist-modify-private user-library-modify user-library-read user-top-read user-read-recently-played user-follow-read user-follow-modify",authUrl:"https://accounts.spotify.com/",dontCache:!1,events:new lt.a,windowWidth:window.innerWidth,timeout:-1,snackbars:[],api:new it.a,isRefreshing:{playlist:!1,album:!1,artist:!1,track:!1},auth:{code:null,token:null,refresh:null,expiryDate:null},homePage:{featured:{title:"",playlists:[]},newReleases:[],personalized:[]},browse:{categories:[],genres:[]},userInfo:{id:"",name:"",mail:"",country:"",followers:0,avatar:"img/no-user.jpg"},library:{playlists:[],artists:[],albums:[],tracks:[]},playlist:{},album:{},artist:{},category:{},user:{}},null===localStorage.getItem("stateCache")?{}:JSON.parse(localStorage.stateCache)),mutations:{spotifyId:function(e,t){e.spotifyId=t},spotifySecret:function(e,t){e.spotifySecret=t},youtubeKey:function(e,t){e.youtubeKey=t,e.platform.downloader.apiKey=t},cacheState:function(e){for(var t=["auth","homePage","browse","userInfo","library","playlist","album","artist","category","user","spotifyId","spotifySecret","youtubeKey"],r={},n=0,a=t;n<a.length;n++){var i=a[n];if("library"===i){var s=e[i];s.tracks=s.tracks.map(st["a"].reduceTrackSize),r[i]=s}else r[i]=e[i]}localStorage.stateCache=JSON.stringify(r),console.log("State cache complete")},clearCache:function(e){e.dontCache=!0,localStorage.clear(),location.reload()},addSnackObject:function(e,t){return e.snackbars.push(t)},removeSnack:function(e,t){return e.snackbars.splice(e.snackbars.indexOf(t),1)},loadCategory:function(e,t){var r=t.id,a=t.category;return n["a"].set(e.category,r,a)},extendCategory:function(e,t){var r,n=t.id,a=t.playlists;return(r=e.category[n].playlists).push.apply(r,Object(Xe["a"])(a))},loadPlaylist:function(e,t){var r=t.id,a=t.playlist;return n["a"].set(e.playlist,r,a)},extendPlaylist:function(e,t){var r,n=t.id,a=t.tracks;return(r=e.playlist[n].tracks).push.apply(r,Object(Xe["a"])(a))},loadAlbum:function(e,t){var r=t.id,a=t.album;return n["a"].set(e.album,r,a)},extendAlbum:function(e,t){var r,n=t.id,a=t.tracks;return(r=e.album[n].tracks).push.apply(r,Object(Xe["a"])(a))},loadInitialArtist:function(e,t){var r=t.id,a=t.artist;return n["a"].set(e.artist,r,{artist:a,related:[],tracks:[],albums:{}})},loadArtist:function(e,t){var r=t.id,n=t.artist;return e.artist[r].artist=n},loadArtistRelated:function(e,t){var r=t.id,n=t.related;return e.artist[r].related=n},loadArtistTracks:function(e,t){var r=t.id,n=t.tracks;return e.artist[r].tracks=n},loadArtistAlbums:function(e,t){var r=t.id,n=t.albums;return e.artist[r].albums=n},loadUser:function(e,t){var r=t.id,a=t.user;return n["a"].set(e.user,r,a)},extendUser:function(e,t){var r,n=t.id,a=t.playlists;return(r=e.user[n].playlists).push.apply(r,Object(Xe["a"])(a))},browseCategories:function(e,t){return e.browse.categories=t},browseGenres:function(e,t){return e.browse.genres=t},homeFeatured:function(e,t){return e.homePage.featured=t},homeRecent:function(e,t){return e.homePage.recent=t},homeNew:function(e,t){return e.homePage.newReleases=t},homePersonalized:function(e,t){return e.homePage.personalized=t},isRefreshing:function(e,t){var r=t.type,n=t.value;return e.isRefreshing[r]=n},addUserPlaylist:function(e,t){return e.library.playlists.push(t)},userPlaylists:function(e,t){return e.library.playlists=t},addToLibrary:function(e,t){var r=t.type,n=t.item,a=t.addAtStart,i=void 0!==a&&a;return e.library[r+"s"][i?"unshift":"push"](n)},removeFromLibrary:function(e,t){var r=t.type,n=t.id,a=e.library[r+"s"].findIndex((function(e){return e.id===n}));-1!==a&&e.library[r+"s"].splice(a,1)},setLibrary:function(e,t){var r=t.type,n=t.items;return e.library[r+"s"]=n},userInfo:function(e,t){return e.userInfo=t},timeout:function(e,t){return e.timeout=t},windowWidth:function(e,t){return e.windowWidth=t},server:function(e,t){return e.server=t},auth:function(e,t){return e.auth=t}},getters:{isValidKeySet:function(){return function(e){var t=e.spotifyId,r=e.spotifySecret,n=e.youtubeKey;return"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"!==t&&"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb"!==r&&"cccccccccccc-dddddddddddddddddddddddddd"!==n&&32===t.length&&32===r.length&&39===n.length&&12===n.indexOf("-")}},isKeySet:function(e,t){return t.isValidKeySet(Object(Ze["a"])({},e))},notFoundUser:function(){var e=Math.floor(7*Math.random())+1;return"img/user/".concat(e,".png")},notFoundImage:function(){var e=Math.floor(7*Math.random())+1;return"img/notfound/".concat(e,".png")},likedImage:function(){var e=Math.floor(7*Math.random())+1;return"img/liked/".concat(e,".png")},itemImage:function(e,t){return function(e){var r=e.type||"category";return"category"===r?e.icons.length>0?e.icons[0].url:t.notFoundImage:"track"===r?e.album&&e.album.images&&e.album.images.length>0?e.album.images[0].url:t.notFoundImage:"search"===r?(console.warn("Tried getting image for search"),""):"radio"===r?(console.warn("Tried getting image for radio"),""):"liked"===r?t.likedImage:e.images.length>0?e.images[0].url:"user"===r?t.notFoundUser:t.notFoundImage}},isLoggedIn:function(e){return null!==e.auth.code&&null!==e.auth.token&&null!==e.auth.refresh&&null!==e.auth.expiryDate},isAuthExpired:function(e,t){return t.isLoggedIn?new Date>e.auth.expiryDate:(console.warn("Auth expiry check warning: User is not logged in"),!0)},urlName:function(){return function(e){return encodeURIComponent(e.toLowerCase().replace(/ /gi,"-").slice(0,36))}},relativeItemUrl:function(e,t){return function(e){var r=e.type||"category",n="user"===r?e.display_name:e.name;return"category"===r?"".concat(r,"/").concat(e.id):"radio"===r?null:"search"===r?e.to:"liked"===r?"/library/tracks":"/".concat(r,"/").concat(t.urlName(n),"/").concat(e.id)}},shareUrl:function(e,t){return function(e){return"".concat(location.origin,"/#").concat(t.relativeItemUrl(e))}},isArtistFollowed:function(e){return function(t){return e.library.artists.find((function(e){return e.id===t.id}))}},isTrackFollowed:function(e){return function(t){return e.library.tracks.find((function(e){return e.id===t.id}))}},isPlaylistFollowed:function(e){return function(t){return e.library.playlists.find((function(e){return e.id===t.id}))}},isAlbumFollowed:function(e){return function(t){return e.library.albums.find((function(e){return e.id===t.id}))}}},actions:{initialize:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,r=t.state,n=t.dispatch,r.platform.downloader.apiKey=r.youtubeKey,e.next=4,n("processAuth");case 4:return e.next=6,n("platformInitialize");case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),cacheAll:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=t.dispatch,r("cacheState"),r("cacheMedia"),e.next=5,n("exportCache");case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),cacheState:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=t.dispatch,r("cacheState"),e.next=4,n("exportCache");case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getAuthByRefreshToken:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,console.log("Refresh using refreshToken",r),e.next=4,fetch("https://accounts.spotify.com/api/token",{method:"post",body:"grant_type=refresh_token&refresh_token=".concat(r,"&client_id=").concat(n.spotifyId,"&client_secret=").concat(n.spotifySecret),headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 4:return e.next=6,e.sent.text();case 6:return a=e.sent,e.prev=7,e.abrupt("return",JSON.parse(a));case 11:e.prev=11,e.t0=e["catch"](7),console.log("Error",e.t0.message,"result = ",a);case 14:case"end":return e.stop()}}),e,null,[[7,11]])})));function t(t,r){return e.apply(this,arguments)}return t}(),getAuthByCode:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,a=r.redirectUrl,i=r.code,console.log("Getting auth using code",{redirectUrl:a,code:i}),e.next=5,fetch("".concat(n.authUrl,"api/token"),{method:"post",body:"grant_type=authorization_code&code=".concat(i,"&redirect_uri=").concat(a,"&client_id=")+"".concat(n.spotifyId,"&client_secret=").concat(n.spotifySecret),headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 5:return e.next=7,e.sent.text();case 7:return s=e.sent,e.prev=8,console.log(s),e.abrupt("return",JSON.parse(s));case 13:e.prev=13,e.t0=e["catch"](8),console.log("Error",e.t0.message,"t = ",s);case 16:case"end":return e.stop()}}),e,null,[[8,13]])})));function t(t,r){return e.apply(this,arguments)}return t}(),spotifyLogin:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.commit,e.next=3,r("firstLogin");case 3:return a=e.sent,console.log("Auth result from 'firstLogin'",a),n("auth",a),e.next=8,r("cacheState");case 8:return e.next=10,r("processAuth");case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),loginByRefreshToken:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,n=t.dispatch,a=t.commit,r.auth.refresh){e.next=4;break}return console.warn("Couldn't get new token, refresh token isn't set",r.auth),e.abrupt("return");case 4:return e.next=6,n("getAuthByRefreshToken",r.auth.refresh);case 6:return i=e.sent,s=i.access_token,o=i.expires_in,c=Object(Ze["a"])({},r.auth),c.token=s,c.expiryDate=+new Date+1e3*o,a("auth",c),e.next=15,n("cacheState");case 15:return e.next=17,n("processAuth");case 17:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),spotifyLogout:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,n=t.commit,a=t.dispatch,n("auth",{code:null,token:null,refresh:null,expiryDate:null}),n("userInfo",{id:"",name:"",mail:"",country:"",followers:0,avatar:"img/no-user.jpg"}),e.next=5,a("cacheState");case 5:clearTimeout(r.timeout);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),addSnack:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state,n=t.commit,a=r.text,i=r.timeout,s=void 0===i?3e3:i,o={text:a,open:!0,timeout:s},n("addSnackObject",o),e.abrupt("return",new Promise((function(e){setTimeout((function(){n("removeSnack",o),e()}),s+500)})));case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),share:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dispatch,a=t.getters,i=r.item,s=r.copy,o=a.shareUrl(i),!(navigator.share instanceof Function)){e.next=8;break}return e.next=6,navigator.share({name:i.name||i.display_name,text:i.description||"",url:o});case 6:e.next=12;break;case 8:return e.next=10,s(o);case 10:return e.next=12,n("addSnack",{text:"Share URL copied to clipboard!"});case 12:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),processAuth:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.dispatch,n=t.commit,a=t.state,i=new Date,!(a.auth.expiryDate>i)){e.next=11;break}return a.api.setAccessToken(a.auth.token),a.events.emit("accessToken"),o=a.auth.expiryDate-i,e.next=8,r("initializeSpotify");case 8:n("timeout",setTimeout(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r("loginByRefreshToken");case 2:case"end":return e.stop()}}),e)}))),o-3e5)),e.next=14;break;case 11:return console.warn("Auth has expired, getting new token"),e.next=14,r("loginByRefreshToken");case 14:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),waitFor:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,e.abrupt("return",new Promise((function(e){n.events.on(r,e)})));case 2:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),awaitAuth:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.dispatch,t.commit,n=t.state,null===n.api.getAccessToken()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r("waitFor","accessToken");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getCached:function(e,t){Object(Ge["a"])(e);t.key,t.getFunction,t.lifeTimeMs},findPagination:function(e,t){if(Object(Ge["a"])(e),null===t)return!1;var r;r=function(e){var t=e.keys,n=void 0===t?[]:t,a=e.o;if(null!==a&&a.hasOwnProperty("next")&&a.hasOwnProperty("items"))return[!0,n];if("object"!==Object(Ye["a"])(a)||null===a)return[!1,n.slice(0,-1)];for(var i in a)if(a.hasOwnProperty(i)){var s=void 0,o=r({keys:n.concat(i),o:a[i]}),c=Object(Je["a"])(o,2);if(s=c[0],n=c[1],s)return[!0,n]}return[!1,n.slice(0,-1)]};var n=r({o:t}),a=Object(Je["a"])(n,2),i=a[0],s=a[1];return!!i&&function(e){var t,r=Object(Ke["a"])(s);try{for(r.s();!(t=r.n()).done;){var n=t.value;e=e[n]}}catch(a){r.e(a)}finally{r.f()}return e}},retrieveSpotifyArray:function(e,t){var r=e.state,n=e.dispatch;return Object(rt["a"])(regeneratorRuntime.mark((function e(){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=function(){return t()},i=regeneratorRuntime.mark((function e(){var t,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(tt["a"])(a());case 2:return t=e.sent,e.next=5,Object(tt["a"])(n("findPagination",t));case 5:if(i=e.sent,null===t){e.next=9;break}return e.next=9,t;case 9:if(null!==t&&!1!==i&&null!==i(t).next){e.next=11;break}return e.abrupt("return","break");case 11:s=i(t).next,void 0===s&&console.warn("next url is undefined"),a=function(){return r.api.getGeneric(s)};case 14:case"end":return e.stop()}}),e)}));case 2:return e.delegateYield(i(),"t0",4);case 4:if(s=e.t0,"break"!==s){e.next=7;break}return e.abrupt("break",9);case 7:e.next=2;break;case 9:case"end":return e.stop()}}),e)})))()},initializeSpotify:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,t.commit,n=t.dispatch,e.next=3,n("refreshUserInfo");case 3:a=0,i=0!==r.library.tracks.length,o=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a++,a!==(i?3:4)){e.next=4;break}return e.next=4,n("cacheState");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n("refreshUserData").then(o),n("refreshUserData","artist").then(o),n("refreshUserData","album").then(o),i||n("refreshUserData","track").then(o);case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),refreshUserInfo:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=t.state,a=t.getters,e.next=3,n.api.getMe();case 3:i=e.sent,r("userInfo",{id:i.id,name:i.display_name,mail:i.email,country:i.country,followers:i.followers,avatar:0===i.images.length?a.notFoundUser:i.images[0].url});case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),refreshUserData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,s,o,c,u,l,d,m,f,p,h,v,g,b,y,k,w=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,n=t.state,a=t.dispatch,i=w.length>1&&void 0!==w[1]?w[1]:"playlist",["playlist","album","track","artist"].includes(i)||console.warn("Wrong type set for refreshUserData!"),!n.isRefreshing[i]){e.next=8;break}return console.info("This library type is already refreshing, waiting for that to finish"),e.next=7,a("waitFor","refreshed"+i);case 7:return e.abrupt("return");case 8:if(r("isRefreshing",{type:i,value:!0}),s=0===n.library[i+"s"].length,""!==n.userInfo.id){e.next=13;break}return e.next=13,a("refreshUserInfo");case 13:c=function(e){return e},e.t0=i,e.next="playlist"===e.t0?17:"album"===e.t0?19:"artist"===e.t0?21:"track"===e.t0?24:26;break;case 17:return o=function(){return n.api.getUserPlaylists(n.userInfo.id,{limit:50})},e.abrupt("break",26);case 19:return o=function(){return n.api.getMySavedAlbums()},e.abrupt("break",26);case 21:return o=function(){return n.api.getFollowedArtists()},c=function(e){return e.artists},e.abrupt("break",26);case 24:return o=function(){return n.api.getMySavedTracks({limit:50})},e.abrupt("break",26);case 26:return u=[],l=function(e){s?r("addToLibrary",{type:i,item:e}):u.push(e)},d=!0,m=!1,e.prev=30,e.t1=et["a"],e.next=34,a("retrieveSpotifyArray",o);case 34:e.t2=e.sent,p=(0,e.t1)(e.t2);case 36:return e.next=38,p.next();case 38:return h=e.sent,d=h.done,e.next=42,h.value;case 42:if(v=e.sent,d){e.next=50;break}g=v,b=Object(Ke["a"])(c(g).items);try{for(b.s();!(y=b.n()).done;)k=y.value,l("track"===i?k.track:"album"===i?k.album:k)}catch(x){b.e(x)}finally{b.f()}case 47:d=!0,e.next=36;break;case 50:e.next=56;break;case 52:e.prev=52,e.t3=e["catch"](30),m=!0,f=e.t3;case 56:if(e.prev=56,e.prev=57,d||null==p.return){e.next=61;break}return e.next=61,p.return();case 61:if(e.prev=61,!m){e.next=64;break}throw f;case 64:return e.finish(61);case 65:return e.finish(56);case 66:s||r("setLibrary",{type:i,items:u}),n.events.emit("refreshed"+i),r("isRefreshing",{type:i,value:!1});case 69:case"end":return e.stop()}}),e,null,[[30,52,56,66],[57,,61,65]])})));function t(t){return e.apply(this,arguments)}return t}(),refreshHomePage:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=t.state,a=t.dispatch,e.next=3,a("awaitAuth");case 3:return e.next=5,n.api.getFeaturedPlaylists({limit:50});case 5:if(i=e.sent,r("homeFeatured",{title:i.message,playlists:i.playlists.items}),0!==n.library.playlists.length){e.next=10;break}return e.next=10,a("refreshUserData");case 10:return o=["Discover Weekly","Release Radar"].concat(Object(Xe["a"])(Object(Xe["a"])(Array(10)).map((function(e,t){return"Daily Mix "+(t+1)})))),s=n.library.playlists.filter((function(e){return-1!==o.findIndex((function(t){return e.name.includes(t)}))&&"Spotify"===e.owner.display_name})),s.sort((function(e,t){var r=o.findIndex((function(t){return e.name.includes(t)})),n=o.findIndex((function(e){return t.name.includes(e)}));return r-n})),s.length>0&&r("homePersonalized",s),e.next=16,n.api.getNewReleases({limit:50});case 16:c=e.sent,r("homeNew",c.albums.items),null!==localStorage.getItem("recentlyPlayed")&&r("homeRecent",JSON.parse(localStorage.recentlyPlayed));case 19:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),refreshBrowsePage:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.dispatch,r=t.commit,n=t.state,n.api.getCategories({limit:50}).then((function(e){return r("browseCategories",e.categories.items)})),n.api.getAvailableGenreSeeds().then((function(e){r("browseGenres",e.genres.map((function(e){return e.split("-").map((function(e){return e.substr(0,1).toUpperCase()+e.substr(1)})).join(" ")})))}));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),loadPlaylist:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o,c,u,l,d,m,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,a=t.commit,i=t.state,s=function(){return i.api.getPlaylist(r)},o=!0,c=!1,e.prev=4,e.t0=et["a"],e.next=8,n("retrieveSpotifyArray",s);case 8:e.t1=e.sent,l=(0,e.t0)(e.t1);case 10:return e.next=12,l.next();case 12:return d=e.sent,o=d.done,e.next=16,d.value;case 16:if(m=e.sent,o){e.next=23;break}f=m,f.items?a("extendPlaylist",{id:r,tracks:f.items.map((function(e){return e.track})).filter((function(e){return null!==e}))}):a("loadPlaylist",{id:r,playlist:Object(Ze["a"])(Object(Ze["a"])({},f),{},{tracks:f.tracks.items.map((function(e){return e.track})).filter((function(e){return null!==e}))})});case 20:o=!0,e.next=10;break;case 23:e.next=29;break;case 25:e.prev=25,e.t2=e["catch"](4),c=!0,u=e.t2;case 29:if(e.prev=29,e.prev=30,o||null==l.return){e.next=34;break}return e.next=34,l.return();case 34:if(e.prev=34,!c){e.next=37;break}throw u;case 37:return e.finish(34);case 38:return e.finish(29);case 39:case"end":return e.stop()}}),e,null,[[4,25,29,39],[30,,34,38]])})));function t(t,r){return e.apply(this,arguments)}return t}(),loadAlbum:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o,c,u,l,d,m,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,a=t.commit,i=t.state,s=function(){return i.api.getAlbum(r)},o=!0,c=!1,e.prev=4,e.t0=et["a"],e.next=8,n("retrieveSpotifyArray",s);case 8:e.t1=e.sent,l=(0,e.t0)(e.t1);case 10:return e.next=12,l.next();case 12:return d=e.sent,o=d.done,e.next=16,d.value;case 16:if(m=e.sent,o){e.next=23;break}f=m,f.items?(f.items.forEach((function(e){return e.album={images:i.album[r].images,name:i.album[r].name,id:i.album[r].id}})),a("extendAlbum",{id:r,tracks:f.items})):function(){var e=Object(Ze["a"])({},f);e.tracks=e.tracks.items,e.tracks.forEach((function(t){return t.album={images:e.images,name:e.name,id:e.id}})),a("loadAlbum",{id:r,album:e})}();case 20:o=!0,e.next=10;break;case 23:e.next=29;break;case 25:e.prev=25,e.t2=e["catch"](4),c=!0,u=e.t2;case 29:if(e.prev=29,e.prev=30,o||null==l.return){e.next=34;break}return e.next=34,l.return();case 34:if(e.prev=34,!c){e.next=37;break}throw u;case 37:return e.finish(34);case 38:return e.finish(29);case 39:case"end":return e.stop()}}),e,null,[[4,25,29,39],[30,,34,38]])})));function t(t,r){return e.apply(this,arguments)}return t}(),loadCategory:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o,c,u,l,d,m,f,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.state,a=t.commit,i=t.dispatch,n.category.hasOwnProperty(r)){e.next=9;break}return e.t0=Ze["a"],e.t1={playlists:[]},e.next=6,n.api.getCategory(r);case 6:e.t2=e.sent,s=(0,e.t0)(e.t1,e.t2),a("loadCategory",{id:r,category:s});case 9:return o=function(){return n.api.getCategoryPlaylists(r)},c=!0,u=!1,e.prev=12,e.t3=et["a"],e.next=16,i("retrieveSpotifyArray",o);case 16:e.t4=e.sent,d=(0,e.t3)(e.t4);case 18:return e.next=20,d.next();case 20:return m=e.sent,c=m.done,e.next=24,m.value;case 24:if(f=e.sent,c){e.next=31;break}p=f,p.playlists?a("extendCategory",{id:r,playlists:p.playlists.items}):a("extendCategory",{id:r,playlists:p.items});case 28:c=!0,e.next=18;break;case 31:e.next=37;break;case 33:e.prev=33,e.t5=e["catch"](12),u=!0,l=e.t5;case 37:if(e.prev=37,e.prev=38,c||null==d.return){e.next=42;break}return e.next=42,d.return();case 42:if(e.prev=42,!u){e.next=45;break}throw l;case 45:return e.finish(42);case 46:return e.finish(37);case 47:case"end":return e.stop()}}),e,null,[[12,33,37,47],[38,,42,46]])})));function t(t,r){return e.apply(this,arguments)}return t}(),loadArtist:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o,c,u,l,d,m,f,p,h,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,a=t.commit,i=t.state,s=!i.artist.hasOwnProperty(r),e.next=4,i.api.getArtist(r);case 4:return o=e.sent,a(s?"loadInitialArtist":"loadArtist",{id:r,artist:o}),i.api.getArtistRelatedArtists(r).then((function(e){a("loadArtistRelated",{id:r,related:e.artists})})),i.api.getArtistTopTracks(r,"from_token").then((function(e){a("loadArtistTracks",{id:r,tracks:e.tracks})})),c=function(){return i.api.getArtistAlbums(r)},u=[],l=!0,d=!1,e.prev=12,e.t0=et["a"],e.next=16,n("retrieveSpotifyArray",c);case 16:e.t1=e.sent,f=(0,e.t0)(e.t1);case 18:return e.next=20,f.next();case 20:return p=e.sent,l=p.done,e.next=24,p.value;case 24:if(h=e.sent,l){e.next=31;break}v=h,u.push.apply(u,Object(Xe["a"])(v.items));case 28:l=!0,e.next=18;break;case 31:e.next=37;break;case 33:e.prev=33,e.t2=e["catch"](12),d=!0,m=e.t2;case 37:if(e.prev=37,e.prev=38,l||null==f.return){e.next=42;break}return e.next=42,f.return();case 42:if(e.prev=42,!d){e.next=45;break}throw m;case 45:return e.finish(42);case 46:return e.finish(37);case 47:a("loadArtistAlbums",{id:r,albums:u});case 48:case"end":return e.stop()}}),e,null,[[12,33,37,47],[38,,42,46]])})));function t(t,r){return e.apply(this,arguments)}return t}(),loadUser:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dispatch,n=t.commit,a=t.state,i=void 0===a.user[r],e.next=4,a.api.getUser(r);case 4:return s=e.sent,i&&n("loadUser",{id:r,user:Object(Ze["a"])(Object(Ze["a"])({},s),{},{playlists:[]})}),e.next=8,a.api.getUserPlaylists(r,{limit:50});case 8:o=e.sent.items,i?n("extendUser",{id:r,playlists:o}):n("loadUser",{id:r,user:Object(Ze["a"])(Object(Ze["a"])({},s),{},{playlists:o})});case 10:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),loadTrack:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,e.next=3,n.api.getTrack(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),followPlaylist:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,a=t.dispatch,e.next=3,n.api.followPlaylist(r.id);case 3:return e.next=5,a("refreshUserData","playlist");case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),unfollowPlaylist:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,a=t.dispatch,e.next=3,n.api.unfollowPlaylist(r.id);case 3:return e.next=5,a("refreshUserData","playlist");case 5:return e.next=7,a("loadUser",n.userInfo.id);case 7:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),followArtist:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,a=t.dispatch,e.next=3,n.api.followArtists([r.id]);case 3:return e.next=5,a("refreshUserData","artist");case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),unfollowArtist:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,a=t.dispatch,e.next=3,n.api.unfollowArtists([r.id]);case 3:return e.next=5,a("refreshUserData","artist");case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),followAlbum:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,a=t.dispatch,e.next=3,n.api.addToMySavedAlbums([r.id]);case 3:return e.next=5,a("refreshUserData","album");case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),unfollowAlbum:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,a=t.dispatch,e.next=3,n.api.removeFromMySavedAlbums([r.id]);case 3:return e.next=5,a("refreshUserData","album");case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),toggleFollowCurrentTrack:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,n=t.dispatch,a=r.media.track,null!==a){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,r.api.containsMySavedTracks([a.id]);case 6:if(i=e.sent,s=Object(Je["a"])(i,1),o=s[0],!o){e.next=14;break}return e.next=12,n("unfollowTrack",a);case 12:e.next=16;break;case 14:return e.next=16,n("followTrack",a);case 16:return e.abrupt("return",!o);case 17:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),followTrack:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,t.dispatch,a=t.commit,e.next=3,n.api.addToMySavedTracks([r.id]);case 3:a("addToLibrary",{type:"track",item:r,addAtStart:!0});case 4:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),unfollowTrack:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,t.dispatch,a=t.commit,e.next=3,n.api.removeFromMySavedTracks([r.id]);case 3:a("removeFromLibrary",{type:"track",id:r.id});case 4:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),addToPlaylist:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,a=t.dispatch,i=r.track,s=r.playlist,e.next=4,a("loadPlaylist",s.id);case 4:if(o=n.playlist[s.id].tracks,-1===o.findIndex((function(e){return e.id===i.id}))){e.next=8;break}return a("addSnack",{text:"Track is already in playlist"}).then(),e.abrupt("return");case 8:return e.prev=8,e.next=11,n.api.addTracksToPlaylist(s.id,[i.uri]);case 11:return e.next=13,a("loadPlaylist",s.id);case 13:a("addSnack",{text:"Added to playlist!"}).then(),e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](8),console.warn(e.t0),a("addSnack",{text:"Could not add track to this playlist"}).then();case 20:case"end":return e.stop()}}),e,null,[[8,16]])})));function t(t,r){return e.apply(this,arguments)}return t}(),removeFromPlaylist:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,a=t.dispatch,i=r.track,s=r.playlist,e.prev=2,e.next=5,n.api.removeTracksFromPlaylist(s.id,[i.uri]);case 5:return e.next=7,a("loadPlaylist",s.id);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](2),console.warn(e.t0),a("addSnack",{text:"Could not remove track from this playlist"}).then();case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));function t(t,r){return e.apply(this,arguments)}return t}(),createPlaylist:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,a=t.dispatch,t.commit,e.next=3,n.api.createPlaylist(n.userInfo.id,{name:r});case 3:return i=e.sent,e.next=6,a("loadPlaylist",i.id);case 6:return e.next=8,a("refreshUserData","playlist");case 8:return e.abrupt("return",n.playlist[i.id]);case 9:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),getRadioTracks:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.state,a=t.dispatch,i=null,s=Object.keys(r),1!==s.length||"seed_tracks"!==s[0]){e.next=9;break}if(o=r["seed_tracks"].split(","),1!==o.length){e.next=9;break}return e.next=8,a("loadTrack",o[0]);case 8:i=e.sent;case 9:return r.limit=i?99:100,e.next=12,n.api.getRecommendations(r);case 12:if(c=e.sent.tracks,!i){e.next=15;break}return e.abrupt("return",[i].concat(Object(Xe["a"])(c)));case 15:return e.abrupt("return",c);case 16:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),getItem:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.state,a=t.dispatch,i=r.type||"category",!(r.tracks&&r.tracks.length>0)){e.next=4;break}return e.abrupt("return",r);case 4:if(n[i][r.id]){e.next=7;break}return e.next=7,a("load"+i[0].toUpperCase()+i.slice(1),r.id);case 7:return e.abrupt("return",n[i][r.id]);case 8:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),getContextItem:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.state,n=t.dispatch,"track"!==r.type){e.next=3;break}return e.abrupt("return",Object(Ze["a"])(Object(Ze["a"])({},r),{},{tracks:[r]}));case 3:if(!(r.tracks&&r.tracks.length>0)){e.next=5;break}return e.abrupt("return",r);case 5:return e.next=7,n("getItem",r);case 7:if(a=e.sent,i=r.type||"category","category"!==i){e.next=14;break}return s=a.playlists[Math.floor(Math.random()*a.playlists.length)],e.next=13,n("getContextItem",s);case 13:return e.abrupt("return",e.sent);case 14:if("artist"!==i){e.next=16;break}return e.abrupt("return",Object(Ze["a"])(Object(Ze["a"])({},a.artist),{},{tracks:a.tracks}));case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},modules:{platform:mt,media:ot,search:ct}}),pt=r("f309");n["a"].use(pt["a"]);var ht=new pt["a"]({theme:{dark:"true"===localStorage.darkTheme,themes:{dark:{primary:"#ef2d46",foreground:"#ffffff",primarySeek:"#c9c9c9",navBackground:"#1b1b1c",primaryLight:"#2a2a2b",secondary:"#de901a"},light:{primary:"#e7474c",foreground:"#1a1a1a",primarySeek:"#e7474c",navBackground:"#ffffff",primaryLight:"#f1efef",secondary:"#ffcf84"}}}}),vt=r("a4a1"),gt=r.n(vt),bt=(r("f6b9"),r("e508")),yt=(r("a899"),r("4eb5")),kt=r.n(yt);n["a"].use(gt.a),n["a"].component("RecycleScroller",bt["a"]),n["a"].use(kt.a),n["a"].config.productionTip=!1,new n["a"]({router:He,store:ft,vuetify:ht,render:function(e){return e(Ae)}}).$mount("#app")},"58eb":function(e,t,r){"use strict";var n=r("9324"),a=r.n(n);a.a},"5c2f":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-lazy",{staticClass:"item-square",attrs:{width:e.big?240:e.small?80:180,"min-height":e.big?240:e.small?80:180}},[r("router-link",{attrs:{tag:"span",to:e.$store.getters.relativeItemUrl(e.item)}},[r("div",{staticClass:"image",class:{big:e.big,small:e.small},style:{backgroundImage:"url("+e.$store.getters.itemImage(e.item)+")",borderRadius:"artist"===e.type?"50%":"5px"}}),r("div",{staticClass:"play-button",class:{big:e.big,small:e.small},style:{borderRadius:"artist"===e.type?"50%":"5px"}},[e.itemIsPlaying?r("v-btn",{attrs:{loading:e.playLoading,fab:"",small:"",color:"primary"},on:{click:e.pause}},[r("v-icon",{attrs:{color:"white"}},[e._v("mdi-pause")])],1):r("v-btn",{attrs:{loading:e.playLoading,fab:"",small:"",color:"primary"},on:{click:e.play}},[r("v-icon",{attrs:{color:"white"}},[e._v("mdi-play")])],1),e.hideMenu?e._e():r("item-menu",{attrs:{color:"white",fab:"artist"===e.type,item:e.item}})],1),e.noTitle?e._e():r("div",{staticClass:"text",class:{big:e.big,small:e.small},style:{textAlign:"artist"===e.type?"center":"left"}},[r("p",{staticClass:"preview-title"},[e._v(e._s(e.item.name))]),e.item.hasOwnProperty("description")?r("p",{staticClass:"preview-description",attrs:{title:e.item.description},domProps:{innerHTML:e._s(e.item.description)}}):e._e(),e.showYear?r("p",{staticClass:"preview-year"},[e._v(e._s(new Date(e.item.release_date).getFullYear()))]):e._e()])])],1)},a=[],i=(r("96cf"),r("1da1")),s=r("5dd2"),o=r("190f"),c=r("9bcd"),u={name:"ItemSquare",components:{ItemMenu:c["a"],FollowMenuItem:o["a"],ShareMenuItem:s["a"]},props:{big:{type:Boolean,default:!1},small:{type:Boolean,default:!1},item:{type:Object,default:null},showYear:{type:Boolean,default:!1},noTitle:{type:Boolean,default:!1},hideMenu:{type:Boolean,default:!1}},data:function(){return{playLoading:!1}},methods:{pause:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.stopPropagation(),r.next=3,t.$store.dispatch("pause");case 3:case"end":return r.stop()}}),r)})))()},play:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.stopPropagation(),!t.itemIsLoaded){r.next=5;break}return r.next=4,t.$store.dispatch("play");case 4:return r.abrupt("return",r.sent);case 5:return t.playLoading=!0,r.next=8,t.$store.dispatch("playItem",{item:t.item});case 8:t.playLoading=!1;case 9:case"end":return r.stop()}}),r)})))()}},computed:{itemIsLoaded:function(){if(!this.$store.getters.isTrackSet)return!1;var e=this.$store.state.media.contextItem;return e.type===this.item.type&&e.id===this.item.id},itemIsPlaying:function(){return!!this.itemIsLoaded&&(!!this.$store.state.media.playing||void 0)},type:function(){return this.item.type?this.item.type:"category"}}},l=u,d=(r("edca"),r("2877")),m=r("6544"),f=r.n(m),p=r("8336"),h=r("132d"),v=r("b687"),g=Object(d["a"])(l,n,a,!1,null,"4cff8d4d",null);t["a"]=g.exports;f()(g,{VBtn:p["a"],VIcon:h["a"],VLazy:v["a"]})},"5dd2":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-list-item",{on:{click:e.share}},[r("v-list-item-icon",[e.loading?r("v-progress-circular",{attrs:{size:"20",indeterminate:"",width:"1"}}):r("v-icon",[e._v("mdi-share")])],1),r("v-list-item-title",[e._v("Share")])],1)},a=[],i=(r("96cf"),r("1da1")),s={name:"ShareMenuItem",props:{item:{type:Object,default:null}},data:function(){return{loading:!1}},methods:{share:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("share",{item:e.item,copy:e.$copyText});case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()}}},o=s,c=r("2877"),u=r("6544"),l=r.n(u),d=r("132d"),m=r("da13"),f=r("34c3"),p=r("5d23"),h=r("490a"),v=Object(c["a"])(o,n,a,!1,null,"01884d2e",null);t["a"]=v.exports;l()(v,{VIcon:d["a"],VListItem:m["a"],VListItemIcon:f["a"],VListItemTitle:p["c"],VProgressCircular:h["a"]})},6:function(e,t){},"6f1c":function(e,t,r){"use strict";var n=r("0259"),a=r.n(n);a.a},7:function(e,t){},7628:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"artists",attrs:{title:e.artists.map((function(e){return e.name})).join(", ")}},e._l(e.artists,(function(t,n){return r("span",{key:t.id},[r("router-link",{staticClass:"artist",style:{opacity:e.grey?.7:1},attrs:{tag:e.grey?"span":"a",to:e.$store.getters.relativeItemUrl(t)}},[e._v(e._s(t.name))]),n!==e.artists.length-1?r("span",[e._v(", ")]):e._e()],1)})),0)},a=[],i={name:"ArtistsSpan",props:{grey:{type:Boolean,default:!1},artists:{type:Array,default:function(){return[]}}}},s=i,o=(r("c512"),r("2877")),c=Object(o["a"])(s,n,a,!1,null,"03293e3c",null);t["a"]=c.exports},"7bca":function(e,t,r){"use strict";var n=r("d570"),a=r.n(n);a.a},8:function(e,t){},"816f":function(e,t,r){"use strict";var n=r("e2de"),a=r.n(n);a.a},8363:function(e,t,r){"use strict";var n=r("304d"),a=r.n(n);a.a},8381:function(e,t,r){},"85ec":function(e,t,r){},9:function(e,t){},9324:function(e,t,r){},9420:function(e,t,r){"use strict";var n=r("3786"),a=r.n(n);a.a},"99e8":function(e,t,r){"use strict";var n=r("0446"),a=r.n(n);a.a},"9bcd":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-menu",{attrs:{"close-on-content-click":!0,"close-on-click":!0},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;t.attrs;return[r("v-btn",e._g({attrs:{color:e.color,fab:e.fab,icon:!e.fab,small:e.fab}},n),[r("v-icon",[e._v("mdi-dots-horizontal")])],1)]}}])},[r("v-list",{attrs:{dense:""}},[r("share-menu-item",{attrs:{item:e.item}}),"category"!==e.type&&"user"!==e.type&&"liked"!==e.type?r("follow-menu-item",{attrs:{item:e.item}}):e._e(),"track"===e.type||"artist"===e.type?r("v-list-item",{attrs:{exact:"",to:"/radio?seed_"+e.type+"s="+e.item.id}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-radio-tower")])],1),r("v-list-item-title",[e._v("Go to "+e._s(e.type)+" radio")])],1):e._e(),e.queueTrack||"category"===e.type||"liked"===e.type?e._e():r("v-list-item",{on:{click:function(t){return e.playNext(e.item)}}},[r("v-list-item-icon",[e.nextQueueLoading?r("v-progress-circular",{attrs:{size:"20",indeterminate:"",width:"1"}}):r("v-icon",[e._v("mdi-play-circle-outline")])],1),r("v-list-item-title",[e._v("Play next")])],1),e.queueTrack||"category"===e.type||"liked"===e.type?e._e():r("v-list-item",{on:{click:function(t){return e.addToQueue(e.item)}}},[r("v-list-item-icon",[e.addQueueLoading?r("v-progress-circular",{attrs:{size:"20",indeterminate:"",width:"1"}}):r("v-icon",[e._v("mdi-plus")])],1),r("v-list-item-title",[e._v("Add to queue")])],1),e.editablePlaylist?r("v-list-item",{on:{click:function(t){return e.remove(e.item,e.contextItem)}}},[r("v-list-item-icon",[e.removeLoading?r("v-progress-circular",{attrs:{size:"20",indeterminate:"",width:"1"}}):r("v-icon",[e._v("mdi-playlist-minus")])],1),r("v-list-item-title",[e._v("Remove from "),r("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.contextItem.name))])])],1):e._e(),"track"===e.type&&e.queueTrack&&e.$store.getters.isTrackSet&&e.item.id!==e.$store.state.media.track.id?r("v-list-item",{on:{click:function(t){return e.$store.commit("removeFromQueue",e.item)}}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-playlist-minus")])],1),r("v-list-item-title",[e._v("Remove from queue")])],1):e._e(),r("v-menu",{attrs:{"open-on-hover":"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return["track"===e.item.type?r("v-list-item",e._g(e._b({},"v-list-item",a,!1),n),[r("v-list-item-icon",[r("v-icon",[e._v("mdi-playlist-plus")])],1),r("v-list-item-title",[e._v("Add to playlist")])],1):e._e()]}}])},[r("v-list",{staticClass:"playlist-menu",attrs:{dense:""}},e._l(e.myPlaylists,(function(t){return r("v-list-item",{key:t.id,on:{click:function(r){return e.add(e.item,t)}}},[r("v-list-item-icon",[e.addLoading[t.id]?r("v-progress-circular",{attrs:{size:"20",indeterminate:"",width:"1"}}):r("v-icon",[e._v("mdi-playlist-music")])],1),r("v-list-item-title",[e._v(e._s(t.name))])],1)})),1)],1)],1)],1)},a=[],i=(r("4de4"),r("96cf"),r("1da1")),s=r("5dd2"),o=r("190f"),c=r("2b0e"),u={name:"ItemMenu",components:{FollowMenuItem:o["a"],ShareMenuItem:s["a"]},props:{item:{type:Object,default:null},fab:{type:Boolean,default:!1},color:{type:String,default:"default"},contextItem:{type:Object,default:null},queueTrack:{type:Boolean,default:!1}},data:function(){return{addLoading:{},removeLoading:!1,addQueueLoading:!1,nextQueueLoading:!1}},methods:{add:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c["a"].set(r.addLoading,t.id,!0),n.next=3,r.$store.dispatch("addToPlaylist",{track:e,playlist:t});case 3:c["a"].set(r.addLoading,t.id,!1);case 4:case"end":return n.stop()}}),n)})))()},remove:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.removeLoading=!0,n.next=3,r.$store.dispatch("removeFromPlaylist",{track:e,playlist:t});case 3:r.removeLoading=!1;case 4:case"end":return n.stop()}}),n)})))()},playNext:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("getContextItem",e);case 2:n=r.sent,t.$store.commit("playNext",n.tracks);case 4:case"end":return r.stop()}}),r)})))()},addToQueue:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("getContextItem",e);case 2:n=r.sent,t.$store.commit("addToQueue",n.tracks);case 4:case"end":return r.stop()}}),r)})))()}},computed:{editablePlaylist:function(){return null!==this.contextItem&&"playlist"===this.contextItem.type&&(this.contextItem.collaborative||this.contextItem.owner.id===this.$store.state.userInfo.id)},myPlaylists:function(){var e=this;return this.$store.state.library.playlists.filter((function(t){return t.owner.id===e.$store.state.userInfo.id||t.collaborative}))},type:function(){return this.item.type?this.item.type:"category"}}},l=u,d=(r("816f"),r("2877")),m=r("6544"),f=r.n(m),p=r("8336"),h=r("132d"),v=r("8860"),g=r("da13"),b=r("34c3"),y=r("5d23"),k=r("e449"),w=r("490a"),x=Object(d["a"])(l,n,a,!1,null,"4d702d16",null);t["a"]=x.exports;f()(x,{VBtn:p["a"],VIcon:h["a"],VList:v["a"],VListItem:g["a"],VListItemIcon:b["a"],VListItemTitle:y["c"],VMenu:k["a"],VProgressCircular:w["a"]})},a123:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("99af"),r("d81d"),r("fb6a"),r("b0c0"),r("6b93"),r("b680"),r("d3b7"),r("25f0"),r("4d90");var n=r("d4ec"),a=r("bee2"),i=function(){function e(){Object(n["a"])(this,e)}return Object(a["a"])(e,null,[{key:"reduceTrackSize",value:function(e){return{album:{images:e.album.images,name:e.album.name,type:e.album.type,id:e.album.id,release_date:e.album.release_date},artists:e.artists,name:e.name,duration_ms:e.duration_ms,id:e.id,is_local:e.is_local,type:e.type,disc_number:e.disc_number}}},{key:"isLegible",value:function(t,r){var n=r.themes[r.dark?"dark":"light"],a=n.navBackground,i=n.foreground,s=e.hexContrast(t,a),o=e.hexContrast(t,i);return{bgLegible:s>3,fgLegible:o>2}}},{key:"hexToRgb",value:function(e){"#"===e[0]&&(e=e.slice(1));var t=e.slice(0,2),r=e.slice(2,4),n=e.slice(4,6);return[parseInt(t,16),parseInt(r,16),parseInt(n,16)]}},{key:"hexContrast",value:function(t,r){return e.contrast(e.hexToRgb(t),e.hexToRgb(r))}},{key:"luminance",value:function(e,t,r){var n=[e,t,r].map((function(e){return e/=255,e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}));return.2126*n[0]+.7152*n[1]+.0722*n[2]}},{key:"contrast",value:function(t,r){var n=e.luminance(t[0],t[1],t[2]),a=e.luminance(r[0],r[1],r[2]),i=Math.max(n,a),s=Math.min(n,a);return(i+.05)/(s+.05)}},{key:"secondsToHms",value:function(e){if(isNaN(e)||void 0===e)return"0:00";e=Math.round(e);var t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t=t.toString(),r=r.toString(),n=n.toString(),"0"!==t&&(r=r.padStart(2,"0"),n=n.padStart(2,"0")),n=n.padStart(2,"0"),"0"===t?"".concat(r,":").concat(n):"".concat(t,":").concat(r,":").concat(n)}},{key:"shuffleArray",value:function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=[e[r],e[t]];e[t]=n[0],e[r]=n[1]}return e}},{key:"bytesToReadable",value:function(e){var t=Math.log10(e);return t<2?e+" B":t<5?(e/1024).toFixed(2)+" kB":t<8?(e/Math.pow(1024,2)).toFixed(2)+" MB":t<12?(e/Math.pow(1024,3)).toFixed(2)+" GB":t<15?(e/Math.pow(1024,4)).toFixed(2)+" TB":"very bige bytes"}}]),e}()},a892:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("perfect-scrollbar",{staticClass:"item-container"},e._l(e.itemGroups,(function(t,n){return r("div",{staticClass:"column",class:{last:n===e.items.length-1}},e._l(t,(function(t){return r("item-square",{staticClass:"single-item",attrs:{big:e.big,small:e.small,"show-year":e.showYear,item:t}})})),1)})),0)},a=[],i=(r("fb6a"),r("a9e3"),r("5c2f")),s={name:"ItemRow",components:{ItemSquare:i["a"]},props:{items:{type:Array,default:function(){return[]}},small:{type:Boolean,default:!1},big:{type:Boolean,default:!1},rows:{type:Number,default:1},showYear:{type:Boolean,default:!1}},computed:{itemGroups:function(){for(var e=[],t=0;t<this.items.length;t+=this.rows)e.push(this.items.slice(t,t+this.rows));return e}}},o=s,c=(r("e476"),r("2877")),u=Object(c["a"])(o,n,a,!1,null,"27043fbc",null);t["a"]=u.exports},a955:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return b}));r("99af"),r("a15b"),r("d81d"),r("b0c0"),r("d3b7"),r("ac1f");var n=r("b85c"),a=(r("96cf"),r("1da1")),i=r("d4ec"),s=r("bee2"),o=r("262e"),c=r("2caf"),u=r("df7c"),l=r.n(u),d=r("a13b"),m=r.n(d),f=r("3e8f"),p=r.n(f),h=r("0baa"),v=r.n(h),g=r("33b3"),b=function(t){Object(o["a"])(u,t);var r=Object(c["a"])(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"./",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"./",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"./";return Object(i["a"])(this,u),e=r.call(this),e.directories={music:t,files:n,temp:a},e.ffmpegPath=null,e.downloadingFfmpeg=!1,e}return Object(s["a"])(u,[{key:"isTrackOffline",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=v()(this.getSearchString(t)),n=l.a.join(this.directories.music,r+".mp3"),e.next=4,this.fileExists(n);case 4:if(!e.sent){e.next=6;break}return e.abrupt("return",n);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeCached",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=v()(this.getSearchString(t)),n=l.a.join(this.directories.music,r+".mp3"),e.next=4,this.fileExists(n);case 4:if(!e.sent){e.next=9;break}return e.next=7,this.deleteFile(n);case 7:return console.warn("Deleted cache ".concat(n," for"),t),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"downloadTrack",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]?c[2]:function(){return 0},a=c.length>3&&void 0!==c[3]?c[3]:null,a.addEventListener("abort",(function(){return n("Cancelled")})),i=v()(this.getSearchString(r)),s=l.a.join(this.directories.temp,i),n("Downloading"),e.next=8,this.downloadFile(t,s,a);case 8:return n("Processing metadata"),e.next=11,this.ffmpegProcessing(r,s,(function(){return 0}),a);case 11:o=e.sent,n("Done"),console.log("Downloaded track and converted to mp3 âœ”",o);case 14:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"ffmpegProcessing",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o,c,u=this,d=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d.length>2&&void 0!==d[2]?d[2]:function(){return 0},n=d.length>3&&void 0!==d[3]?d[3]:null,a=l.a.basename(r),i={title:t.name,artist:t.artists.map((function(e){return e.name})),disc:t.disc_number,track:t.track_number},t.hasOwnProperty("album")&&(i.album=t.album.name,i.year=new Date(t.album.release_date).getFullYear()),s=t.hasOwnProperty("album")&&t.album.images.length>0,o=l.a.join(this.directories.temp,"image-".concat(a,".jpg")),!s){e.next=10;break}return e.next=10,this.downloadFile(t.album.images[0].url,o,n);case 10:return c=l.a.join(this.directories.temp,a+".mp3"),e.next=13,this.ffmpegMetadata(r,c,s?o:"",i,n);case 13:return e.abrupt("return",new Promise((function(e,t){var n=l.a.join(u.directories.music,a+".mp3");p.a.rename(c,n,(function(t){u.deleteFile(r).then(),s&&u.deleteFile(o).then(),e(n)}))})));case 14:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"downloadFile",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r,n){var a,i,s,o,c=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:null,t.next=3,fetch(r,{signal:a});case 3:return i=t.sent,t.next=6,i.blob();case 6:return s=t.sent,o=p.a.createWriteStream(n),t.t0=o,t.t1=e,t.next=12,s.arrayBuffer();case 12:t.t2=t.sent,t.t3=t.t1.from.call(t.t1,t.t2),t.t0.write.call(t.t0,t.t3);case 15:case"end":return t.stop()}}),t)})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"ffmpegMetadata",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,n,i){var s,o=this,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=c.length>4&&void 0!==c[4]?c[4]:null,e.abrupt("return",new Promise(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(a,c){var u,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.getFfmpegPath();case 2:return u=e.sent,l=n?"".concat(u,' -y -i "').concat(t,'" -i "').concat(n,'"')+' -map 0:0 -map 1:0 -id3v2_version 3 -metadata:s:v title="Album cover" -metadata:s:v comment="Cover (Front)" '+"".concat(o.tagsToString(i),' "').concat(r,'"'):"".concat(u,' -y -i "').concat(t,'"')+"".concat(o.tagsToString(i),' "').concat(r,'"'),e.next=6,o.fileExists(r);case 6:if(!e.sent){e.next=9;break}return e.next=9,o.deleteFile(r);case 9:return e.next=11,o.waitForFileUnlock(t);case 11:return e.next=13,o.waitForFileUnlock(n);case 13:return e.next=15,o.waitForFileUnlock(u);case 15:s.aborted||(d=p.a.exec(l,(function(e,t,r){if(e)return c(e);a({err:r,out:t})})),s.addEventListener("abort",(function(){return d.kill()})));case 16:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));function t(t,r,n,a){return e.apply(this,arguments)}return t}()},{key:"tagsToString",value:function(e){var t=[];for(var r in e)if(e.hasOwnProperty(r))if(e[r]instanceof Array){var a,i=Object(n["a"])(e[r]);try{for(i.s();!(a=i.n()).done;){var s=a.value;t.push("-metadata ".concat(r,'="').concat(s,'"'))}}catch(o){i.e(o)}finally{i.f()}}else t.push("-metadata ".concat(r,'="').concat(e[r],'"'));return t.join(" ")}},{key:"deleteFile",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){p.a.unlink(t,(function(t){if(t)return r(t);e()}))})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fileExists",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){p.a.access(t,p.a.F_OK,(function(t){t&&e(!1),e(!0)}))})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"waitSleep",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"waitForFileUnlock",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=i.length>1&&void 0!==i[1]?i[1]:1e4,n=performance.now();case 2:if(!(performance.now()>n+r)){e.next=5;break}throw"Timeout waiting for file to unlock";case 5:return e.next=7,this.isFileLocked(t);case 7:if(a=e.sent,a){e.next=10;break}return e.abrupt("return",!0);case 10:return e.next=12,this.waitSleep(250);case 12:e.next=2;break;case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isFileLocked",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){p.a.open(t,"r+",(function(t,n){t&&"EBUSY"===t.code?e(!0):t&&"ENOENT"===t.code?r("File does not exist"):p.a.close(n,(function(t){if(t)return r(t);e(!1)}))}))})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFfmpegPath",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.ffmpegPath){e.next=2;break}return e.abrupt("return",r(t.ffmpegPath));case 2:if(!t.downloadingFfmpeg){e.next=4;break}return e.abrupt("return",t.once("downloadFFMPEG",r));case 4:t.downloadingFfmpeg=!0,m.a.downloadBinaries(["ffmpeg"],{destination:t.directories.files},(function(){t.ffmpegPath=l.a.join(t.directories.files,m.a.getBinaryFilename("ffmpeg",m.a.detectPlatform())),r(t.ffmpegPath),t.emit("downloadFFMPEG"),t.downloadingFfmpeg=!1}));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),u}(g["a"])}).call(this,r("b639").Buffer)},bf8a:function(e,t,r){"use strict";r.r(t);r("99af"),r("a15b"),r("d3b7");var n=r("8468"),a=(r("96cf"),r("1da1")),i=r("a955"),s=r("bdb9"),o=r.n(s),c=r("9490"),u=r.n(c),l=r("d4ec"),d=r("bee2"),m=r("3e8f"),f=r.n(m),p=r("df7c"),h=r.n(p),v=function(){function e(){Object(l["a"])(this,e),this.temp=this.initializeDir("temp","vuemusic"),this.files=this.initializeDir("appData","vuemusic-files"),this.music=this.getDir("music","")}return Object(d["a"])(e,[{key:"initializeDir",value:function(e,t){var r=this.getDir(e,t);return this.createDir(r),r}},{key:"getDir",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"music",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"files",r=o.a.app;return o.a.hasOwnProperty("remote")&&(r=o.a.remote.app),h.a.join(r.getPath(e),t)}},{key:"createDir",value:function(e){f.a.existsSync(e)||f.a.mkdirSync(e)}},{key:"importLSFile",value:function(){var e=h.a.join(this.files,"localStorage.json");if(f.a.existsSync(e)){var t=JSON.parse(f.a.readFileSync(e));for(var r in t)t.hasOwnProperty(r)&&(localStorage[r]=t[r])}}},{key:"exportLSToFile",value:function(){var e=h.a.join(this.files,"localStorage.json"),t=JSON.stringify(localStorage);f.a.writeFileSync(e,t)}}]),e}(),g=new v,b=window.require("express");g.importLSFile();t["default"]={state:{type:"electron",server:null,downloader:new i["a"](g.music,g.files,g.temp),downloads:[],playingIcons:[],pausedIcons:[]},mutations:{playIcons:function(e,t){var r=t.playIcon,n=t.pauseIcon,a=t.prevIcon,i=t.nextIcon;e.playingIcons=[a,n,i],e.pausedIcons=[a,r,i]}},getters:{},actions:{platformInitialize:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,o,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.state,r=t.commit,n=t.dispatch,t.getters,t.rootState,i="Shift+Alt+L",s["remote"].globalShortcut.isRegistered(i)&&s["remote"].globalShortcut.unregister(i),s["remote"].globalShortcut.register(i,Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n("toggleFollowCurrentTrack");case 2:t=e.sent,r=t?"Added to favorites":"Removed from favorites",a=speechSynthesis.getVoices(),i=a[Math.floor(Math.random()*a.length)],s=new SpeechSynthesisUtterance(r),s.voice=i,speechSynthesis.speak(s);case 9:case"end":return e.stop()}}),e)})))),o={tooltip:"Play",icon:h.a.join(__static,"/img/playicon.png"),click:function(){return n("play")}},c={tooltip:"Play",icon:h.a.join(__static,"/img/pauseicon.png"),click:function(){return n("pause")}},u={tooltip:"Previous Song",icon:h.a.join(__static,"/img/previcon.png"),click:function(){return n("skip",-1)}},l={tooltip:"Next Song",icon:h.a.join(__static,"/img/nexticon.png"),click:function(){return n("skip",1)}},r("playIcons",{playIcon:o,pauseIcon:c,prevIcon:u,nextIcon:l});case 9:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setPlatformPlaying:function(e,t){var r=e.state,n=s["remote"].getCurrentWindow();n.setThumbarButtons(t?r.playingIcons:r.pausedIcons)},openDevTools:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(n["a"])(t),s["remote"].getCurrentWindow().openDevTools();case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),closeWindow:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(n["a"])(t),s["remote"].getCurrentWindow().close();case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),minimizeWindow:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(n["a"])(t),s["remote"].getCurrentWindow().minimize();case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),exportCache:function(e){Object(n["a"])(e),g.exportLSToFile()},resetSpotifyLogin:function(e){var t=e.state,r=e.commit;null!==t.server&&(t.server.close(),r("server",null))},firstLogin:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.getters,i=t.state,c=t.commit,l=t.dispatch,e.abrupt("return",new Promise(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var d,m,f,p,h,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.isKeySet){e.next=3;break}return console.warn("Can't log in, keys are not set"),e.abrupt("return");case 3:return d=38900,m="http://localhost:"+d,f="".concat(r.authUrl,"authorize?client_id=").concat(r.spotifyId,"&response_type=code&redirect_uri=").concat(m,"&scope=").concat(encodeURIComponent(r.requestedScopes)),p=o.a.shell,e.next=9,p.openExternal(f);case 9:null!==i.server&&i.server.close(),h=b(),v=u.a.createServer(h),h.get("/",function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.query.hasOwnProperty("code")&&(v.close(),c("server",null),console.log("Stopped listening on *:"+d),l("getAuthByCode",{redirectUrl:m,code:r.query.code}).then((function(e){s["remote"].getCurrentWindow().focus(),t({code:r.query.code,token:e.access_token,refresh:e.refresh_token,expiryDate:+new Date+1e3*e.expires_in})}))),n.send('\n                        <html lang="en">\n                            <head><title>Logging in...</title></head>\n                            <body>\n                                <script>\n                                    window.close();\n                                <\/script>\n                            </body>\n                        </html>\n                    ');case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),c("server",u.a),v.listen(d,(function(){console.log("listening on *:"+d)}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}}},c512:function(e,t,r){"use strict";var n=r("fa95"),a=r.n(n);a.a},d05a:function(e,t,r){e.exports=r.p+"img/logo-small-v.bd740031.png"},d570:function(e,t,r){},e292:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return null!==e.item?r("div",{staticClass:"follow-button"},[e.hideTooltip?r("div",[e.isFollowed?r("v-btn",{attrs:{loading:e.loading,icon:"",color:"primary"},on:{click:e.unfollow}},[r("v-icon",[e._v("mdi-heart-outline")])],1):r("v-btn",{attrs:{loading:e.loading,icon:""},on:{click:e.follow}},[r("v-icon",[e._v("mdi-heart-outline")])],1)],1):r("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[e.isFollowed?r("v-btn",e._g(e._b({attrs:{loading:e.loading,icon:"",color:"primary"},on:{click:e.unfollow}},"v-btn",a,!1),n),[r("v-icon",[e._v("mdi-heart-outline")])],1):r("v-btn",e._g(e._b({attrs:{loading:e.loading,icon:""},on:{click:e.follow}},"v-btn",a,!1),n),[r("v-icon",[e._v("mdi-heart-outline")])],1)]}}],null,!1,2796376417)},[e.isFollowed?r("span",[e._v("Remove from library")]):r("span",[e._v("Add to library")])])],1):e._e()},a=[],i=(r("96cf"),r("1da1")),s={name:"FollowButton",props:{item:{type:Object,default:null},hideTooltip:{type:Boolean,default:!1}},data:function(){return{loading:!1}},methods:{follow:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("follow"+e.typeCapitalized,e.item);case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},unfollow:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("unfollow"+e.typeCapitalized,e.item);case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()}},computed:{typeCapitalized:function(){return this.item.type.substring(0,1).toUpperCase()+this.item.type.substring(1)},isFollowed:function(){return this.$store.getters["is".concat(this.typeCapitalized,"Followed")](this.item)}}},o=s,c=r("2877"),u=r("6544"),l=r.n(u),d=r("8336"),m=r("132d"),f=r("3a2f"),p=Object(c["a"])(o,n,a,!1,null,"663a8aa8",null);t["a"]=p.exports;l()(p,{VBtn:d["a"],VIcon:m["a"],VTooltip:f["a"]})},e2de:function(e,t,r){},e476:function(e,t,r){"use strict";var n=r("30b7"),a=r.n(n);a.a},e51b:function(e,t,r){"use strict";r.r(t);r("99af"),r("d3b7"),r("ac1f"),r("8a79"),r("5319"),r("96cf");var n=r("1da1"),a=(r("3ca3"),r("466d"),r("ddb0"),r("2b3d"),r("d4ec")),i=r("bee2"),s=r("262e"),o=r("2caf"),c=r("33b3"),u=(r("fb6a"),r("2ca0"),function(){function e(){Object(a["a"])(this,e),this._fetch=window.fetch}return Object(i["a"])(e,[{key:"start",value:function(){var e=this._fetch;window.fetch=function(){for(var t=Array.prototype.slice.call(arguments),r=t[0],n=t[1],a=["https://www.youtube.com","https://manifest.googlevideo.com","https://r1---","https://r2---","https://r3---","https://r4---","https://r5---"],i=0,s=a;i<s.length;i++){var o=s[i];if(r.startsWith(o)){console.log("INTERCEPT",r,n),r="https://api.ruurd.dev/proxy?url="+encodeURIComponent(r);break}}return e.apply(this,[r,n])}}},{key:"stop",value:function(){window.fetch=this._fetch}}]),e}()),l=new u,d=function(){function e(){Object(a["a"])(this,e),this.options={},this.url="",this.readyState=0,this.status=0,this.onreadystatechange=function(){},this.responseText=""}return Object(i["a"])(e,[{key:"send",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.options.body=t,e.next=3,this.sendLive();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendLive",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.url,this.options);case 2:return t=e.sent,this.readyState=4,this.status=t.status,e.next=7,t.text();case 7:this.responseText=e.sent,this.onreadystatechange();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"open",value:function(e,t){this.options.method=e,this.url=t}},{key:"abort",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=console).info.apply(e,["abort"].concat(r))}},{key:"setRequestHeader",value:function(e,t){this.options.hasOwnProperty("headers")||(this.options.headers={}),this.options.headers[e]=t}}],[{key:"start",value:function(){this._XMLHttpRequest=window.XMLHttpRequest,window.XMLHttpRequest=e}},{key:"stop",value:function(){window.XMLHttpRequest=this._XMLHttpRequest}}]),e}(),m=function(e){Object(s["a"])(r,e);var t=Object(o["a"])(r);function r(){var e;return Object(a["a"])(this,r),e=t.call(this),e.cacheName="vue-music",l.start(),d.start(),e}return Object(i["a"])(r,[{key:"removeCached",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.getSearchString(t),e.next=3,caches.open("vue-music");case 3:return n=e.sent,console.warn("Deleted cache ".concat(r," for"),t),e.next=7,n.delete(r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isTrackOffline",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.getSearchString(t),e.next=3,caches.open("vue-music");case 3:return n=e.sent,e.next=6,n.match(r);case 6:if(a=e.sent,void 0!==a){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,a.blob();case 11:return i=e.sent,e.abrupt("return",URL.createObjectURL(i));case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"downloadTrack",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]?c[2]:function(){return 0},a=c.length>3&&void 0!==c[3]?c[3]:null,n("Downloading"),i=this.getSearchString(r),e.next=6,fetch(t,{signal:a});case 6:return s=e.sent,e.next=9,caches.open(this.cacheName);case 9:return o=e.sent,e.next=12,o.put(i,s);case 12:n("Done");case 13:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()}]),r}(c["a"]);t["default"]={state:{type:"web",channel:null,downloads:[],playingIcons:[],pausedIcons:[],downloader:new m},mutations:{channel:function(e,t){return e.channel=t}},getters:{},actions:{exportCache:function(){},platformInitialize:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.state,t.commit,t.dispatch,t.getters,t.rootState;case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setPlatformPlaying:function(e,t){e.state},resetSpotifyLogin:function(e){var t=e.state,r=e.commit;null!==t.channel&&(t.channel.close(),r("server",null))},firstLogin:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.rootState,a=t.getters,i=t.state,s=t.commit,o=t.dispatch,e.abrupt("return",new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var n,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.isKeySet){e.next=3;break}return console.warn("Can't log in, keys are not set"),e.abrupt("return");case 3:n=location.origin+(location.pathname+(location.pathname.endsWith("/")?"":"/")+"#/login").replace(/\/\//gi,"/"),console.log("REDIRECT URL:",n),n=encodeURIComponent(n),c="".concat(r.authUrl,"authorize?client_id=").concat(r.spotifyId,"&response_type=code&redirect_uri=").concat(n,"&scope=").concat(encodeURIComponent(r.requestedScopes)),window.open(c),i.channel&&i.channel.close(),u=new BroadcastChannel("loginCode"),s("channel",u),u.onmessage=function(e){u.close(),s("channel",null),o("getAuthByCode",{redirectUrl:n,code:e.data}).then((function(r){t({code:e.data,token:r.access_token,refresh:r.refresh_token,expiryDate:+new Date+1e3*r.expires_in})}))};case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}}},e81c:function(e,t,r){},e88c:function(e,t,r){"use strict";var n=r("0125"),a=r.n(n);a.a},edca:function(e,t,r){"use strict";var n=r("3717"),a=r.n(n);a.a},f8cc:function(e,t,r){"use strict";var n=r("8381"),a=r.n(n);a.a},fa95:function(e,t,r){}});
//# sourceMappingURL=app.f9d3d479.js.map