(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],l=0,d=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);m&&m(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},i={app:0},a={app:0},o=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-05aa78e7":"1dcb0629","chunk-15871142":"a92d1640","chunk-19469fa3":"08c85157","chunk-3dbc7e81":"b21d7a90","chunk-4f6c082a":"5231e748","chunk-19813994":"4e68572a","chunk-46fe656a":"660de265","chunk-64106f0c":"216816d5","chunk-8b182660":"f0fc2d9a","chunk-a0943e14":"92377689","chunk-e05c639c":"0558d0d3"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-05aa78e7":1,"chunk-15871142":1,"chunk-19469fa3":1,"chunk-3dbc7e81":1,"chunk-4f6c082a":1,"chunk-19813994":1,"chunk-46fe656a":1,"chunk-64106f0c":1,"chunk-8b182660":1,"chunk-a0943e14":1,"chunk-e05c639c":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-05aa78e7":"08f1a0c4","chunk-15871142":"ebfa457b","chunk-19469fa3":"79718b9f","chunk-3dbc7e81":"1e28a913","chunk-4f6c082a":"71a5aeb1","chunk-19813994":"a452cb17","chunk-46fe656a":"1c4d25b5","chunk-64106f0c":"d6e0f51b","chunk-8b182660":"fa26a0c8","chunk-a0943e14":"04e00d19","chunk-e05c639c":"0fdb9b9d"}[e]+".css",a=c.p+r,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===a))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){u=d[s],l=u.getAttribute("data-href");if(l===r||l===a)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var r=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete i[e],m.parentNode.removeChild(m),n(o)},m.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(m)})).then((function(){i[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(m);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",d.name="ChunkLoadError",d.type=r,d.request=i,n[1](d)}a[e]=void 0}};var m=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/plex/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var m=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"0aeb":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"plex-image",style:{"--width":e.width+"px","--height":e.height+"px",borderRadius:e.rounding}},[e.glow?n("glow-image",{staticClass:"vimg",attrs:{rounding:e.rounding,width:e.width,height:e.height,src:e.fullSrc}}):n("div",{staticClass:"vimg",style:{backgroundImage:"url("+e.fullSrc+")",borderRadius:e.rounding}})],1)},i=[],a=(n("a9e3"),n("2ca0"),n("96cf"),n("1da1")),o=n("5530"),s=n("2f62"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"glow-image",style:{width:e.width+"px",borderRadius:e.rounding}},[n("div",{staticClass:"album-art album-background",style:{backgroundImage:"url("+e.src+")",opacity:e.$vuetify.theme.dark?.4:.7,minWidth:e.width+"px",height:e.height+"px",right:-e.width/2+"px",borderRadius:e.rounding,top:e.height/16+"px",filter:"blur("+e.width/16+"px)"}}),n("div",{staticClass:"album-art album-normal",style:{backgroundImage:"url("+e.src+")",minWidth:e.width+"px",height:e.height+"px",left:-e.width/2+"px",borderRadius:e.rounding}})])},u=[],l={name:"GlowImage",props:{src:{type:String,default:void 0},width:{type:Number,default:300},height:{type:Number,default:300},rounding:{type:String,default:"0"}}},d=l,m=(n("7e37"),n("2877")),h=Object(m["a"])(d,c,u,!1,null,"f29b5b58",null),p=h.exports,f={name:"PlexImage",components:{GlowImage:p},props:{glow:{type:Boolean,default:!1},src:{type:String,default:"",required:!0},width:{type:Number,default:140},height:{type:Number,default:140},transitionDuration:{type:String,default:".1s"},rounding:{type:String,default:"0"}},data:function(){return{lazySrc:"",fullSrc:"",transition:""}},mounted:function(){this.transition=this.transitionDuration,this.setSrc()},methods:Object(o["a"])({setSrc:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:navigator.onLine&&(e.fullSrc=e.imgUrl);case 1:case"end":return t.stop()}}),t)})))()}},Object(s["b"])(["onlinePlexImg","offlinePlexImg"])),computed:Object(o["a"])({thumbWidth:function(){return 100*Math.ceil(this.width/100)},thumbHeight:function(){return Math.round(this.thumbWidth/this.aspectRatio)},imgUrl:function(){return this.src.startsWith("img/")?this.src:""===this.src?"notfound.png":this.transcodeImage({url:this.src,width:Math.round(this.thumbWidth),height:Math.round(this.thumbHeight)})},placeholderImg:function(){return""===this.src?"notfound.png":this.transcodeImage({url:this.src,width:Math.round(.05*this.thumbWidth),height:Math.round(.05*this.thumbHeight)})},aspectRatio:function(){return this.width/this.height}},Object(s["c"])(["transcodeImage","plexUrl"])),watch:{imgUrl:function(){this.setSrc()}}},v=f,y=(n("823f"),Object(m["a"])(v,r,i,!1,null,"2de1d278",null));t["a"]=y.exports},"0c10":function(e,t,n){"use strict";n("52b3")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},"16b9":function(e,t,n){"use strict";n("935c")},"173c":function(e,t,n){"use strict";n("1d33")},"1d33":function(e,t,n){},"1dd7":function(e,t,n){"use strict";n("8b70")},2:function(e,t){},"2c55":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.item?n("div",{staticClass:"main-deck mt-3",style:{"--imgHeight":Math.round(e.imgHeight)+"px","--imgWidth":Math.round(e.imgWidth)+"px",backdropFilter:"blur(40px) brightness("+(e.$vuetify.theme.dark?"150":"110")+"%) saturate(150%)"}},[n("div",{staticClass:"main-info"},["episode"===e.item.type?n("div",[n("router-link",{staticClass:"ellipsis",attrs:{to:"/show/"+e.item.grandparentRatingKey,"no-style":""}},[n("h2",[e._v(e._s(e.item.grandparentTitle))])]),n("router-link",{staticClass:"ellipsis",attrs:{to:"/episode/"+e.item.ratingKey,"no-style":""}},[e._v(e._s(e.item.title))]),n("div",[n("episode-link",{attrs:{item:e.item}})],1)],1):n("router-link",{staticClass:"ellipsis",attrs:{to:"/movie/"+e.item.ratingKey,"no-style":""}},[n("h2",[e._v(e._s(e.item.title))])]),n("data-header",{staticClass:"main-header",attrs:{"hide-ratings":"",item:e.item}}),n("p",{staticClass:"main-summary",style:{height:"calc(var(--imgHeight) - "+("episode"===e.item.type?228:188)+"px)"}},[e._v(" "+e._s(e.item.summary)+" ")]),n("div",{staticClass:"data-bottom"},[e.item?n("play-fab",{attrs:{item:e.item}}):e._e(),n("media-item-menu",{attrs:{plain:"",item:e.item}})],1)],1),n("div",{staticClass:"main-img"},[e.mainThumb?n("plex-image",{staticClass:"main-plex-img",attrs:{width:e.imgWidth,height:e.imgHeight,src:e.mainThumb}}):e._e(),n("div",{staticClass:"main-img-overlay"},[e.item.viewOffset&&e.item.duration?n("v-sheet",{staticClass:"view-progress",style:{width:Math.round(1e4*e.viewProgress)/100+"%"},attrs:{color:"primary"}}):e._e()],1)],1)]):e._e()},i=[],a=(n("a9e3"),n("0aeb")),o=n("cd71"),s=n("a892"),c=n("907e"),u=n("5a1b"),l=n("2dac"),d=n("8be2"),m={name:"DataCard",components:{PlayFab:d["a"],MediaItemMenu:l["a"],EpisodeLink:u["a"],DataHeader:c["a"],ItemRow:s["a"],MediaItem:o["a"],PlexImage:a["a"]},props:{item:{type:Object,default:null},imgWidth:{type:Number,default:500}},computed:{viewProgress:function(){return this.item.viewOffset/this.item.duration},imgHeight:function(){return this.imgWidth/16*9},mainThumb:function(){var e,t,n;return"movie"===(null===(e=this.item)||void 0===e?void 0:e.type)?null===(t=this.item)||void 0===t?void 0:t.art:null===(n=this.item)||void 0===n?void 0:n.thumb}}},h=m,p=(n("54f8"),n("2877")),f=n("6544"),v=n.n(f),y=n("8dd9"),g=Object(p["a"])(h,r,i,!1,null,"507beb3b",null);t["a"]=g.exports;v()(g,{VSheet:y["a"]})},"2dac":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.canPlay||e.isParent||e.canWatch?n("v-menu",{attrs:{attach:e.attach,"nudge-top":e.nudgeTop},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,i=t.attrs;return[n("v-btn",e._g(e._b({attrs:{small:e.small,plain:e.plain,icon:"",dark:e.darkButton||e.dark},on:{click:function(t){return t.preventDefault(),e.test(t)}}},"v-btn",i,!1),r),[n("v-icon",{attrs:{small:e.small}},[e._v("mdi-dots-horizontal")])],1)]}}],null,!1,1620908206)},[n("v-list",{attrs:{dense:"",dark:e.dark}},[e.canPlay?n("v-list-item",{on:{click:e.togglePlay}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-play-outline")])],1),n("v-list-item-title",[e._v("Play")])],1):e._e(),e.isParent?n("v-list-item",{on:{click:e.shuffle}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-shuffle")])],1),n("v-list-item-title",[e._v("Shuffle")])],1):e._e(),e.canWatch?n("v-list-item",{on:{click:function(t){return e.toggleWatched(e.item)}}},[n("v-list-item-icon",[e.watched?n("v-icon",[e._v("mdi-checkbox-marked-circle-outline")]):n("v-icon",[e._v("mdi-checkbox-blank-circle-outline")])],1),n("v-list-item-title",[e._v("Mark "),e.watched?n("span",[e._v("un")]):e._e(),e._v("watched")])],1):e._e(),e.canPlay?n("v-list-item",{on:{click:e.itemDelete}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-delete-outline")])],1),n("v-list-item-title",[e._v("Delete")])],1):e._e(),null!==e.playlist?n("v-list-item",{on:{click:function(t){return e.removeFrom(e.playlist)}}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-playlist-minus")])],1),n("v-list-item-title",[e._v("Remove from playlist")])],1):e._e(),e.canWatch?n("v-menu",{attrs:{"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,i=t.attrs;return[n("v-list-item",e._g(e._b({on:{click:e.updatePlaylists}},"v-list-item",i,!1),r),[n("v-list-item-icon",[n("v-icon",[e._v("mdi-playlist-plus")])],1),n("v-list-item-title",[e._v("Add to playlist")])],1)]}}],null,!1,2927523578)},[n("v-list",{attrs:{dense:""}},[n("v-list-item",{on:{click:e.promptCreatePlaylist}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-playlist-plus")])],1),n("v-list-item-title",[e._v("Add to new playlist")])],1),n("v-subheader",[e._v("Add to existing playlist")]),e._l(e.playlists,(function(t){return n("v-list-item",{key:t.key,on:{click:function(n){return e.addToExisting(t)}}},[n("v-list-item-title",[e._v(e._s(t.title))])],1)}))],2)],1):e._e()],1)],1):e._e()},i=[],a=(n("caad"),n("a9e3"),n("96cf"),n("1da1")),o=n("5530"),s=n("2f62"),c={name:"MediaItemMenu",props:{item:{type:Object,default:null},darkButton:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},small:{type:Boolean,default:!1},plain:{type:Boolean,default:!1},playlist:{type:Object,default:null},attach:{type:String,default:void 0},nudgeTop:{type:Number,default:0}},methods:Object(o["a"])({removeFrom:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.removeFromPlaylist({playlistKey:e.ratingKey,playlistItemID:t.item.playlistItemID});case 2:case"end":return n.stop()}}),n)})))()},addToExisting:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.addToPlaylist({key:t.item.ratingKey,playlistKey:e.ratingKey});case 2:return r=n.sent,console.log("add result",r),n.next=6,t.addSnack({text:"Added to playlist",to:"/playlist/".concat(e.ratingKey)});case 6:case"end":return n.stop()}}),n)})))()},promptCreatePlaylist:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.showTextPrompt({title:"Create a playlist",subtitle:e.item.title,value:e.item.title,label:"Playlist name",confirmText:"Create"});case 2:if(n=t.sent,r=n.confirmed,i=n.value,!r){t.next=12;break}return t.next=8,e.createPlaylist({key:e.item.ratingKey,title:i});case 8:return a=t.sent,console.log("Playlist created",a),t.next=12,e.addSnack({text:"Playlist created",to:"/playlist/".concat(a.ratingKey)});case 12:case"end":return t.stop()}}),t)})))()},test:function(){console.log("test")},togglePlay:function(){console.log("togglePlay")},shuffle:function(){console.log("shuffle")},itemDelete:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.showPrompt({title:"Are you sure you want to delete this ".concat(null!==(n=e.item.type)&&void 0!==n?n:"item","?"),subtitle:e.item.title});case 2:if(r=t.sent,!r){t.next=6;break}return t.next=6,e.deleteItem(e.item);case 6:case"end":return t.stop()}}),t)})))()}},Object(s["b"])(["toggleWatched","updatePlaylists","showPrompt","addToPlaylist","removeFromPlaylist","showTextPrompt","deleteItem","createPlaylist","addSnack"])),computed:Object(o["a"])(Object(o["a"])({playlists:function(){var e;return null===(e=this.$store.state.plex.content)||void 0===e?void 0:e["playlists"]},watched:function(){var e=this.watchedKeys[this.item.ratingKey];return void 0!==e?e:this.itemWatched(this.item)},canPlay:function(){return this.itemCanPlay(this.item)},canWatch:function(){return["show","season","movie","episode"].includes(this.item.type)},isParent:function(){return["playlist","show","season"].includes(this.item.type)}},Object(s["c"])(["itemWatched","itemCanPlay"])),Object(s["d"])({watchedKeys:function(e){return e.plex.watchedKeys}}))},u=c,l=n("2877"),d=n("6544"),m=n.n(d),h=n("8336"),p=n("132d"),f=n("8860"),v=n("da13"),y=n("34c3"),g=n("5d23"),b=n("e449"),w=n("e0c7"),k=Object(l["a"])(u,r,i,!1,null,"d6d10346",null);t["a"]=k.exports;m()(k,{VBtn:h["a"],VIcon:p["a"],VList:f["a"],VListItem:v["a"],VListItemIcon:y["a"],VListItemTitle:g["c"],VMenu:b["a"],VSubheader:w["a"]})},"2f7d":function(e,t,n){},3:function(e,t){},"38b9":function(e,t,n){"use strict";n("2f7d")},4:function(e,t){},"4b7f":function(e,t,n){"use strict";n("7cf7")},"4e99":function(e,t,n){},5:function(e,t){},"52b3":function(e,t,n){},5306:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.item?n("div",{ref:"playerContainer",class:{electron:"electron"===e.platformType,"big-screen":e.bigScreen,"small-screen":!e.bigScreen,"hide-controls":e.hideControls&&e.bigScreen&&!e.mouseOnControls&&e.playing},style:{"--controlsHeight":e.controlsHeight+"px","--videoWidth":e.videoWidth+"px","--videoHeight":e.videoHeight+"px","--seekProgress":Math.round(1e4*e.progress)/100+"%"}},[e.bigScreen&&!e.fullscreen?n("div",{staticClass:"player-app-bar"},[n("div",{staticClass:"player-app-bar-content"},[n("v-btn",{staticClass:"no-drag",attrs:{icon:"",dark:"",small:""},on:{click:e.exitBigScreen}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-down")])],1),"electron"===e.platformType?[n("v-spacer"),n("v-btn",{staticClass:"no-drag",attrs:{icon:"",dark:"",small:""},on:{click:e.minimizeWindow}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-minus")])],1),n("v-btn",{staticClass:"no-drag ml-2",attrs:{icon:"",dark:"",small:""},on:{click:e.closeWindow}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-close")])],1)]:e._e()],2)]):e._e(),e.item?n("plex-video",{key:e.item.key,ref:"video",staticClass:"video-container",nativeOn:{click:function(t){return e.enterBigScreen(t)},dblclick:function(t){return e.toggleFullscreen(t)}}}):e._e(),null!==e.item?n("v-sheet",{ref:"controls",staticClass:"plex-player",style:e.controlsStyle,attrs:{color:e.bigScreen?"transparent":"default",dark:e.bigScreen,elevation:"4"},on:{mouseenter:function(t){e.mouseOnControls=!0},mouseleave:function(t){e.mouseOnControls=!1},mousedown:e.handleControlDown}},[n("div",{staticClass:"top-controls ml-4 mt-4"},[n("div",{staticClass:"plex-media-info",on:{mousedown:function(t){return t.stopPropagation(),e.empty(t)}}},["episode"===e.item.type?[n("router-link",{attrs:{to:"/show/"+e.item.grandparentRatingKey,"no-style":""}},[e._v(" "+e._s(e.item.grandparentTitle)+" ")]),n("router-link",{attrs:{to:"/episode/"+e.item.ratingKey,"no-style":""}},[e._v(e._s(e.item.title))]),n("episode-link",{attrs:{item:e.item}})]:[n("router-link",{attrs:{to:"/movie/"+e.item.ratingKey,"no-style":""}},[e._v(e._s(e.item.title))]),n("router-link",{attrs:{to:"/library/"+e.item.librarySectionID+"/all?filter=year~"+e.item.ratingKey,"no-style":""}},[e._v(e._s(e.item.year)+" ")])]],2),n("div",{staticClass:"plex-volume mr-5",on:{mousedown:function(t){return t.stopPropagation(),e.empty(t)},wheel:function(t){return t.preventDefault(),e.volumeWheel(t)}}},[n("v-slider",{staticClass:"plex-volume-slider",attrs:{max:"vlc"===e.usePlayer?2:1,min:0,step:.01,dense:"",color:e.bigScreen?"softForeground":"primary","prepend-icon":e.volumeIcon,"hide-details":"auto"},on:{"click:prepend":e.toggleMute},model:{value:e.$store.state.media.volume,callback:function(t){e.$set(e.$store.state.media,"volume",t)},expression:"$store.state.media.volume"}})],1)]),n("div",{staticClass:"middle-controls ml-4"},[n("span",[e._v(e._s(e.niceCurrentTime)+" / "+e._s(e.niceDuration))]),n("div",{staticClass:"seek-controls",on:{mousedown:function(t){return t.stopPropagation(),e.handleMouseDown(t)},wheel:function(t){return t.preventDefault(),e.seekWheel(t)}}},[n("v-sheet",{ref:"seekBg",staticClass:"plex-seek-bg",attrs:{color:e.bigScreen?"#292929":"softerBackground"}},[n("v-sheet",{staticClass:"plex-seek-progress",attrs:{color:e.bigScreen?"white":"primary"}}),e._l(e.progressBuffers,(function(e,t){return n("v-sheet",{key:t,staticClass:"plex-buffer",style:{left:Math.round(1e3*e[0])/10+"%",width:Math.round(1e3*(e[1]-e[0]))/10+"%"},attrs:{color:"#868686"}})})),n("v-sheet",{staticClass:"plex-seek-thumb",attrs:{color:e.bigScreen?"white":"primary"}})],2)],1)]),n("div",{staticClass:"bottom-controls ml-4 mt-1"},[n("div",{staticClass:"left-control-buttons",on:{mousedown:function(t){return t.stopPropagation(),e.empty(t)}}},[n("v-btn",{attrs:{icon:"",small:"",disabled:!e.canSkipBackwards},on:{click:function(t){return e.skip(!1)}}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-skip-previous")])],1),n("v-btn",{attrs:{icon:"",small:"",disabled:!e.canSeekLeft},on:{click:function(t){return e.seekBy(-10)}}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-skip-backward")])],1),n("v-btn",{attrs:{icon:"",loading:e.srcLoading},on:{click:e.togglePlay}},[e.playing?n("v-icon",[e._v("mdi-pause")]):n("v-icon",[e._v("mdi-play")])],1),n("v-btn",{attrs:{icon:"",small:"",disabled:!e.canSeekRight},on:{click:function(t){return e.seekBy(10)}}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-skip-forward")])],1),n("v-btn",{attrs:{icon:"",small:"",disabled:!e.canSkipForwards},on:{click:function(t){return e.skip(!0)}}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-skip-next")])],1),n("v-btn",{attrs:{icon:"",small:""},on:{click:e.stopPlaying}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-close")])],1)],1),n("div",{staticClass:"right-control-buttons mr-5",on:{mousedown:function(t){return t.stopPropagation(),e.empty(t)}}},[n("v-btn",{attrs:{icon:"",small:"",plain:""}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-repeat")])],1),n("v-btn",{attrs:{icon:"",color:e.shuffle?"primary":"default",small:"",plain:""},on:{click:e.toggleShuffle}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-shuffle")])],1),n("v-btn",{attrs:{icon:"",small:"",plain:""}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-playlist-play")])],1),n("media-item-menu",{attrs:{attach:".plex-player",dark:e.bigScreen,item:e.item,"nudge-top":140}})],1)])]):e._e()],1):e._e()},i=[],a=(n("99af"),n("d81d"),n("3835")),o=n("5530"),s=(n("96cf"),n("1da1")),c=n("a123"),u=n("2f62"),l=n("5a1b"),d=n("2dac"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"plex-video"},["vlc"===e.usePlayer?n("vlc-video",{ref:"vlc",staticClass:"video",attrs:{src:e.src,width:e.bigScreen?0:"auto","hide-buffering":"","disable-auto-hide-cursor":"","enable-context-menu":"",autoplay:"",poster:e.artUrl,"cover-poster":"",dark:e.$vuetify.theme.dark},on:{loadeddata:e.loadedData,timeupdate:e.timeUpdate,volumechange:e.volumeChange,durationchange:e.durationChange,canplay:e.canPlay,playing:e.canPlay,waiting:e.buffering,play:e.playEvent,pause:e.pauseEvent}}):"hls"===e.usePlayer?n("video",{ref:"hls",staticClass:"video",style:{backgroundImage:e.hidePoster?"":"url("+e.artUrl+")"},attrs:{autoplay:e.playOnLoad},on:{loadeddata:e.loadedData,timeupdate:e.timeUpdate,durationchange:e.durationChange,volumechange:e.volumeChange,canplay:e.canPlay,playing:e.canPlay,waiting:e.buffering,play:e.playEvent,pause:e.pauseEvent,progress:e.updateBuffers}}):e._e(),"vlc"===e.usePlayer?n("audio",{ref:"audioPlayer",attrs:{src:"empty.mp3",loop:"",muted:""},on:{play:e.updateMediaData}}):e._e()],1)},h=[],p=n("ba56"),f=n.n(p),v=c["a"].isElectron?{VlcVideo:n("5985").default}:{},y={name:"PlexVideo",components:Object(o["a"])({},v),data:function(){return{lastTimelineUpdate:0,hlsPlayer:null,player:null,hidePoster:!1,dontWatchTime:!1,dontWatchPlaying:!1,dontWatchVolume:!1,markedWatched:!1,destroyed:!1,playbackInterval:-1}},beforeDestroy:function(){this.$store.commit("currentTime",0),this.$store.commit("duration",0),this.$store.commit("buffers",[]),clearInterval(this.playbackInterval),"hls"===this.usePlayer&&this.hlsPlayer.destroy()},mounted:function(){var e,t,n,r,i,a,o,s=this;this.player=this.getPlayer(),this.player.muted=this.muted,this.player.volume=this.volume,this.$store.commit("playbackTime",0),this.playbackInterval=setTimeout((function(){s.playing&&s.$store.commit("playbackTime",s.playbackTime+1)}),1e3),console.log("current time at mount",this.currentTime),console.log("Mounted plex video"),console.log("HLS SUPPORTED",f.a.isSupported()),console.log("Ratio from item",null===(e=this.item)||void 0===e||null===(t=e.Media)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.aspectRatio),this.$store.commit("videoRatio",null!==(r=null===(i=this.item)||void 0===i||null===(a=i.Media)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.aspectRatio)&&void 0!==r?r:16/9),console.log({item:this.item,src:this.src,usedPlayer:this.usePlayer,platform:this.platformType,player:this.player,hlsPlayer:this.hlsPlayer}),this.player&&this.volumeChange(),this.initSrc()},methods:Object(o["a"])({updateAudioPlayer:function(){if("vlc"===this.usePlayer){var e=this.$refs.audioPlayer,t=this.playing&&!this.srcLoading;t&&e.paused?e.play():t||e.paused||e.pause()}},getPlayer:function(){return"vlc"===this.usePlayer?this.$refs.vlc:this.$refs.hls},initSrc:function(){var e,t=this;if(this.$store.commit("duration",null!==(e=this.item.duration/1e3)&&void 0!==e?e:0),""!==this.src&&(this.$store.commit("srcLoading",!0),"hls"===this.usePlayer)){null!==this.hlsPlayer&&console.warn("this shouldnt happen",this.hlsPlayer,"hlsplayer is NOT null");var n=this.item.viewOffset/1e3;isNaN(n)&&(n=this.currentTime),this.hlsPlayer=new f.a({startPosition:n,progressive:!0,lowLatencyMode:!0,maxBufferLength:120,maxBufferSize:500}),console.log("Attaching",this.$refs.hls),this.hlsPlayer.attachMedia(this.$refs.hls),this.hlsPlayer.once(f.a.Events.MEDIA_ATTACHED,(function(){console.log("Init src",t.src),"hls"===t.usePlayer&&(t.hlsPlayer.loadSource(t.src),t.hlsPlayer.once(f.a.Events.MANIFEST_PARSED,(function(e,t){console.log("hls manifest loaded",t)})))})),this.hlsPlayer.on(f.a.Events.ERROR,(function(e,n){if(n.fatal)switch(n.type){case f.a.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover"),t.hlsPlayer.startLoad();break;case f.a.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),t.hlsPlayer.recoverMediaError();break;default:console.warn("hls fatal error, cannot recover"),t.hlsPlayer.destroy();break}}))}},playEvent:function(){this.playing||(this.dontWatchPlaying=!0,this.$store.commit("playing",!0),this.updateTimeline())},pauseEvent:function(){this.playing&&(this.dontWatchPlaying=!0,this.$store.commit("playing",!1),this.updateTimeline())},canPlay:function(){this.$store.commit("srcLoading",!1)},buffering:function(){this.$store.commit("srcLoading",!0)},loadedData:function(){var e,t,n,r=this;if(void 0===(null===(e=this.player)||void 0===e?void 0:e.duration)||isNaN(null===(t=this.player)||void 0===t?void 0:t.duration)||this.$store.commit("duration",null===(n=this.player)||void 0===n?void 0:n.duration),console.log("duration",this.duration),this.$store.commit("videoRatio",this.player.videoWidth/this.player.videoHeight),this.hidePoster=!0,console.log("VIEW OFFSET",this.item,this.item.viewOffset),"vlc"===this.usePlayer){var i,a,o,s,c=this.item.viewOffset/1e3;if(isNaN(c)&&(c=this.currentTime),this.$store.commit("currentTime",c),this.playOnLoad)null===(i=this.$refs.audioPlayer)||void 0===i||null===(a=i.play)||void 0===a||a.call(i),this.player.play();else null===(o=this.$refs.audioPlayer)||void 0===o||null===(s=o.pause)||void 0===s||s.call(o),this.player.pause()}setTimeout((function(){return r.$store.commit("playOnLoad",!1)}),100)},volumeChange:function(){var e;this.dontWatchVolume=!0,this.$store.commit("volume",null===(e=this.player)||void 0===e?void 0:e.volume)},timeUpdate:function(){var e,t,n;void 0===(null===(e=this.player)||void 0===e?void 0:e.currentTime)||isNaN(null===(t=this.player)||void 0===t?void 0:t.currentTime)||(this.dontWatchTime=!0,this.$store.commit("currentTime",null===(n=this.player)||void 0===n?void 0:n.currentTime))},durationChange:function(){var e,t,n;void 0===(null===(e=this.player)||void 0===e?void 0:e.duration)||isNaN(null===(t=this.player)||void 0===t?void 0:t.duration)||this.$store.commit("duration",null===(n=this.player)||void 0===n?void 0:n.duration)},updateBuffers:function(){for(var e=[],t=0;t<(null===(n=this.player)||void 0===n||null===(r=n.buffered)||void 0===r?void 0:r.length);t++){var n,r,i,a,o,s,c=null===(i=this.player)||void 0===i||null===(a=i.buffered)||void 0===a?void 0:a.start(t),u=null===(o=this.player)||void 0===o||null===(s=o.buffered)||void 0===s?void 0:s.end(t);e.push([c,u])}this.$store.commit("buffers",e)}},Object(u["b"])(["markWatched","updateTimeline","updateMediaData"])),computed:Object(o["a"])(Object(o["a"])({artUrl:function(){var e,t,n,r;if(!this.canQuery||null===this.item)return"";var i="episode"===this.item.type&&null!==(e=this.item.thumb)&&void 0!==e?e:this.item.art;return this.transcodeImage({url:null!==(t=null!==(n=null!==(r=null!==i&&void 0!==i?i:this.item.parentArt)&&void 0!==r?r:this.item.parentThumb)&&void 0!==n?n:this.item.grandparentArt)&&void 0!==t?t:this.item.grandparentThumb,width:this.bigScreen?1920:this.videoWidth,height:this.bigScreen?1080:this.videoHeight})},src:function(){var e;return e=null!==this.item&&this.canQuery?"vlc"===this.usePlayer?this.originalMkv(this.item):this.originalHls(this.item):"",console.log("src",e),e},bigScreen:function(){return"1"===this.$route.query.player}},Object(u["c"])(["originalHls","originalMkv","originalDash","canQuery","transcodeImage","usePlayer","videoWidth","videoHeight","itemWatched"])),Object(u["d"])({platformType:function(e){return e.platform.type},item:function(e){return e.media.context.item},playing:function(e){return e.media.playing},currentTime:function(e){return e.media.currentTime},duration:function(e){return e.media.duration},volume:function(e){return e.media.volume},muted:function(e){return e.media.muted},playOnLoad:function(e){return e.media.playOnLoad},playbackTime:function(e){return e.media.playbackTime},srcLoading:function(e){return e.media.srcLoading}})),watch:{player:function(){this.volumeChange()},currentTime:function(e,t){!this.markedWatched&&this.currentTime/this.duration>.75&&(this.markedWatched=!0,this.markWatched(this.item.ratingKey)),Math.abs(this.lastTimelineUpdate-this.currentTime)>10&&(this.lastTimelineUpdate=this.currentTime,console.log("set timeline"),this.updateTimeline()),this.dontWatchTime?this.dontWatchTime=!1:e!==t&&(this.player.currentTime=this.currentTime)},srcLoading:function(){this.updateAudioPlayer()},playing:function(e,t){if(this.updateAudioPlayer(),this.dontWatchPlaying)return this.dontWatchPlaying=!1;var n,r,i,a;e!==t&&(e?(null===(n=this.$refs.audioPlayer)||void 0===n||null===(r=n.play)||void 0===r||r.call(n),this.player.play()):(null===(i=this.$refs.audioPlayer)||void 0===i||null===(a=i.pause)||void 0===a||a.call(i),this.player.pause()))},volume:function(e,t){if(this.dontWatchVolume)return this.dontWatchVolume=!1;e!==t&&(this.player.volume=e)},muted:function(e,t){e!==t&&(this.player.muted=this.muted)}}},g=y,b=(n("173c"),n("2877")),w=Object(b["a"])(g,m,h,!1,null,"dc4606ca",null),k=w.exports,x={name:"PlexPlayer",components:{PlexVideo:k,MediaItemMenu:d["a"],EpisodeLink:l["a"]},data:function(){return{dragControls:!1,mouseDown:!1,seekBounds:null,drag:null,fullscreen:!1,mouseOnControls:!1,moveTimeout:-1,hideControls:!1,controlsOffset:{x:0,y:0}}},beforeDestroy:function(){document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("fullscreenchange",this.changeFullscreen)},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.restored;case 2:document.addEventListener("mousemove",e.handleMouseMove,!1),document.addEventListener("mouseup",e.handleMouseUp,!1),document.addEventListener("fullscreenchange",e.changeFullscreen,!1);case 5:case"end":return t.stop()}}),t)})))()},methods:Object(o["a"])({seekWheel:function(e){this.seekBy(e.deltaY/-10)},volumeWheel:function(e){var t="vlc"===this.usePlayer?2:1,n=this.volume-e.deltaY/2e3;this.$store.commit("volume",Math.max(0,Math.min(n,t)))},empty:function(){},toggleFullscreen:function(){if(this.fullscreen)document.exitFullscreen();else{var e=this.$refs.playerContainer;e.requestFullscreen()}},changeFullscreen:function(){this.fullscreen=document.fullscreenElement===this.$refs.playerContainer},enterBigScreen:function(){this.bigScreen||this.$router.push({query:Object(o["a"])(Object(o["a"])({},this.$route.query),{},{player:1})})},exitBigScreen:function(){this.bigScreen&&this.$router.push({query:Object(o["a"])(Object(o["a"])({},this.$route.query),{},{player:0})})},togglePlay:function(){this.playing?this.$store.commit("playing",!1):this.$store.commit("playing",!0)},seekTo:function(e){this.$store.commit("currentTime",e)},seekBy:function(e){this.seekTo(Math.max(0,Math.min(this.duration,this.currentTime+e)))},handleControlDown:function(e){this.drag={startX:e.clientX-this.controlsOffset.x,startY:e.clientY-this.controlsOffset.y},this.dragControls=!0},handleMouseDown:function(e){this.seekBounds=this.$refs.seekBg.$el.getBoundingClientRect(),this.mouseDown=!0,this.handleMouseMove(e)},handleMouseMove:function(e){var t=this;if(null!==this.item){if(this.dragControls&&this.bigScreen&&this.windowWidth>700&&(this.controlsOffset={x:e.clientX-this.drag.startX,y:e.clientY-this.drag.startY}),this.mouseDown){var n=e.pageX-this.seekBounds.left,r=Math.min(1,Math.max(0,n/this.seekBounds.width));this.seekTo(this.duration*r)}(e.movementX>0||e.movementY>0)&&(this.hideControls=!1,clearTimeout(this.moveTimeout),this.moveTimeout=setTimeout((function(){t.hideControls=!0}),2500))}},handleMouseUp:function(){this.mouseDown&&(this.mouseDown=!1),this.dragControls&&(this.dragControls=!1)},toggleMute:function(){this.$store.commit("muted",!this.muted)}},Object(u["b"])(["markWatched","skip","stopPlaying","minimizeWindow","closeWindow","toggleShuffle"])),computed:Object(o["a"])(Object(o["a"])({progressBuffers:function(){var e=this;return 0===this.duration?[]:this.buffers.map((function(t){var n=Object(a["a"])(t,2),r=n[0],i=n[1];return[r/e.duration,i/e.duration]}))},controlsStyle:function(){var e={};return this.bigScreen&&this.windowWidth>700&&(e.transform="translate(".concat(this.controlsOffset.x,"px, ").concat(this.controlsOffset.y,"px)")),e},niceCurrentTime:function(){return c["a"].msToTime(1e3*this.currentTime,!1)},niceDuration:function(){return c["a"].msToTime(1e3*this.duration,!1)},progress:function(){return 0===this.duration?0:Math.min(1,this.currentTime/this.duration)},volumeIcon:function(){return this.muted?"mdi-volume-mute":this.volume<.5?"mdi-volume-low":"mdi-volume-high"},bigScreen:function(){return"1"===this.$route.query.player}},Object(u["c"])(["usePlayer","videoWidth","videoHeight","canSkipBackwards","canSkipForwards","canSeekLeft","canSeekRight"])),Object(u["d"])({controlsHeight:function(e){return e.media.controlsHeight},windowWidth:function(e){return e.windowWidth},platformType:function(e){return e.platform.type},playing:function(e){return e.media.playing},volume:function(e){return e.media.volume},muted:function(e){return e.media.muted},buffers:function(e){return e.media.buffers},duration:function(e){return e.media.duration},currentTime:function(e){return e.media.currentTime},srcLoading:function(e){return e.media.srcLoading},item:function(e){return e.media.context.item},shuffle:function(e){return e.media.shuffle}})),watch:{"$route.query.player":function(){!this.bigScreen&&this.fullscreen&&document.exitFullscreen()}}},C=x,T=(n("8101"),n("6544")),R=n.n(T),_=n("8336"),O=n("132d"),P=n("8dd9"),S=n("ba0d"),I=n("2fa4"),j=Object(b["a"])(C,r,i,!1,null,"cdf0f1bc",null);t["a"]=j.exports;R()(j,{VBtn:_["a"],VIcon:O["a"],VSheet:P["a"],VSlider:S["a"],VSpacer:I["a"]})},"54f8":function(e,t,n){"use strict";n("8bed")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"app",class:{"big-screen":e.bigScreen,"player-active":null!==e.activeItem},style:{fontWeight:e.$vuetify.theme.dark?300:500,"--primary":e.themeColors.primary,"--foreground":e.themeColors.foreground,"--softForeground":e.themeColors.softForeground,"--hardBackground":e.themeColors.hardBackground,"--softBackground":e.themeColors.softBackground,"--softerBackground":e.themeColors.softerBackground,"--secondary":e.themeColors.secondary}},[n("div",[n("div",{staticClass:"background",style:{backgroundImage:"url("+e.bgImg[e.$vuetify.theme.dark?"dark":"light"]+")",transition:"background-image "+e.bgTransition,maskImage:"linear-gradient(to bottom, rgba(0, 0, 0, "+(e.$vuetify.theme.dark?.3:.2)+") 10%, rgba(0, 0, 0, "+(e.$vuetify.theme.dark?.7:.6)+") 95%)"}}),n("div",{staticClass:"blur"}),n("div",{staticClass:"gradient",attrs:{scrolled:e.scrollY>50}})]),n("app-bar",{staticClass:"appbar"}),n("v-main",[n("router-view")],1),n("plex-player"),n("custom-dialog"),n("custom-prompt"),e._l(e.$store.state.snackbars,(function(t){return n("v-snackbar",{key:t.id,attrs:{app:"",timeout:t.timeout,color:"secondary"},scopedSlots:e._u([{key:"action",fn:function(r){var i=r.attrs;return[t.to?n("v-btn",e._b({attrs:{to:t.to,text:"",color:e.$vuetify.theme.dark?"default":"primary"}},"v-btn",i,!1),[e._v(" "+e._s(t.linkText)+" ")]):e._e(),n("v-btn",e._b({attrs:{text:"",color:e.$vuetify.theme.dark?"default":"primary"},on:{click:function(e){t.open=!1}}},"v-btn",i,!1),[e._v(" Dismiss ")])]}}],null,!0),model:{value:t.open,callback:function(n){e.$set(t,"open",n)},expression:"snack.open"}},[e._v(" "+e._s(t.text)+" ")])}))],2)},a=[],o=(n("caad"),n("ac1f"),n("2532"),n("841c"),n("5530")),s=(n("96cf"),n("1da1")),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{staticClass:"app-bar",attrs:{dense:"",prominent:"",app:"",elevation:"0",color:"transparent"}},[n("div",{staticClass:"app-bar-content"},[n("router-link",{staticClass:"text-logo",style:{backgroundImage:"url(img/plex-text-"+(e.$vuetify.theme.dark?"white":"black")+".png)"},attrs:{to:"/"}}),e.canQuery?n("div",{staticClass:"links ml-2 mr-2"},[n("v-btn",{staticClass:"no-drag no-cap",attrs:{plain:"Home"!==e.$route.name||"/"===e.$route.fullPath,text:"Home"===e.$route.name,to:"/",exact:""}},[e._v("Home")]),e._l(e.sections,(function(t){return n("v-btn",{staticClass:"no-drag no-cap",attrs:{plain:"",to:"/explore/"+t.key+"?player=0"}},[e._v(" "+e._s(t.title)+" ")])})),n("v-menu",{attrs:{"open-on-hover":"","offset-y":"","content-class":"elevation-0"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,i=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"no-drag no-cap",attrs:{plain:!e.highlightLibrary,text:e.highlightLibrary}},"v-btn",i,!1),r),[e._v(" Library "),n("v-icon",[e._v("mdi-chevron-down")])],1)]}}],null,!1,3079364563)},[n("v-list",{staticClass:"no-drag",attrs:{rounded:"",dense:""}},[e._l(e.sections,(function(t){return n("v-list-item",{key:t.key,attrs:{to:"/library/"+t.key}},[n("v-list-item-icon",["show"===t.type?n("v-icon",[e._v("mdi-television-classic")]):n("v-icon",[e._v("mdi-movie-open-outline")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.title))])],1)],1)})),n("v-list-item",{attrs:{to:"/playlists?player=0"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-playlist-play")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Playlists")])],1)],1)],2)],1)],2):e._e(),n("div",{staticClass:"header-right"},[e.canQuery?n("search-field",{staticClass:"no-drag mr-2"}):e._e(),n("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,i=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"no-drag",attrs:{color:"primary",icon:""}},"v-btn",i,!1),r),[n("v-icon",[e._v("mdi-account-circle")])],1)]}}])},[n("v-list",{attrs:{dense:""}},[null!==e.$store.state.plex.server&&e.canQuery?n("v-list-item",{attrs:{"two-line":""}},[n("v-list-item-avatar",[n("v-img",{attrs:{src:e.$store.state.plex.user.image}})],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(e.$store.state.plex.user.username))]),n("v-list-item-title",[n("v-btn",{staticClass:"logout-button",attrs:{small:"",plain:""},on:{click:e.logoutAndRedirect}},[e._v("Log out")])],1)],1)],1):e._e(),n("v-list-item",{attrs:{to:"/settings"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-cog-outline")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Settings")])],1)],1),n("v-list-item",{staticClass:"center-list-item",attrs:{color:"primary"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-relative-scale")])],1),n("v-list-item-content",[n("v-list-item-title",[n("span",[e._v("UI Scale")])])],1),n("v-list-item-action",[n("v-slider",{staticClass:"ui-slider",attrs:{"hide-details":"",min:.5,max:2,step:.1,dense:""},model:{value:e.$store.state.uiScale,callback:function(t){e.$set(e.$store.state,"uiScale",t)},expression:"$store.state.uiScale"}})],1)],1),n("v-list-item",{staticClass:"center-list-item",attrs:{color:"primary"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-brightness-6")])],1),n("v-list-item-content",[n("v-list-item-title",[n("span",[e._v("Dark theme")])])],1),n("v-list-item-action",[n("v-switch",{attrs:{"hide-details":"",dense:"",inset:""},model:{value:e.$vuetify.theme.dark,callback:function(t){e.$set(e.$vuetify.theme,"dark",t)},expression:"$vuetify.theme.dark"}})],1)],1)],1)],1),"electron"===e.platform?n("div",[n("v-btn",{staticClass:"no-drag",attrs:{icon:""},on:{click:e.minimizeWindow}},[n("v-icon",[e._v("mdi-minus")])],1),n("v-btn",{staticClass:"no-drag",attrs:{icon:""},on:{click:e.closeWindow}},[n("v-icon",[e._v("mdi-close")])],1)],1):e._e()],1)],1)])},u=[],l=(n("2ca0"),n("2f62")),d=n("0aeb"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{staticClass:"search-form",on:{submit:function(t){return t.preventDefault(),e.goToSearchPage(t)}}},[n("v-text-field",{directives:[{name:"click-outside",rawName:"v-click-outside",value:{handler:e.hideResults,include:e.include},expression:"{\n                      handler: hideResults,\n                      include: include,\n                  }"}],ref:"searchInput",attrs:{rounded:"",filled:"",dense:"","hide-details":"auto","prepend-icon":"mdi-magnify",clearable:"",autocomplete:"off",placeholder:"Search"},on:{focus:function(t){e.showResults=!0},"click:clear":e.clearQuery},model:{value:e.$store.state.search.query,callback:function(t){e.$set(e.$store.state.search,"query",t)},expression:"$store.state.search.query"}}),n("blur-card",{directives:[{name:"show",rawName:"v-show",value:e.showResults&&(""!==e.query||e.recentSearches.length>0),expression:"showResults && (query !== '' || recentSearches.length > 0)"}],staticClass:"search-results"},[""===e.query||null===e.query?n("div",[n("h5",{staticClass:"recent-title"},[e._v("Recent searches")]),n("v-list",{attrs:{dense:"",color:"transparent"}},e._l(e.recentSearches,(function(t){return n("v-list-item",{staticClass:"recent-list-item",attrs:{disabled:t===e.query,exact:"",to:"/search?query="+t}},[n("v-list-item-title",[e._v(" "+e._s(t)+" ")]),n("v-list-item-action",[n("v-btn",{attrs:{icon:"",plain:"",small:""},on:{click:function(n){return n.preventDefault(),e.removeRecent(t)}}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-close")])],1)],1)],1)})),1)],1):0===e.filteredResults.length?n("div",{staticClass:"not-found"},[n("p",[e._v("No results found")])]):n("v-list",{attrs:{color:"transparent",dense:""}},e._l(e.filteredResults,(function(t){return n("div",{key:t.hubIdentifier},[n("v-subheader",{attrs:{inset:""}},[e._v(e._s(t.title))]),e._l(e.getChildren(t),(function(e){return n("media-list-item",{key:e.ratingKey,staticClass:"result-item mb-2",attrs:{item:e}})}))],2)})),0)],1)],1)},h=[],p=(n("4de4"),n("712c")),f=n("7295"),v={name:"SearchField",components:{BlurCard:f["a"],MediaListItem:p["a"]},data:function(){return{showResults:!1}},mounted:function(){},methods:Object(o["a"])({include:function(){return[document.querySelector(".search-results")]},hideResults:function(){this.showResults=!1},getChildren:function(e){var t;return null!==(t=e.Metadata)&&void 0!==t?t:e.Directory},clearQuery:function(){this.$store.commit("query","")},removeRecent:function(e){this.$store.commit("removeRecentSearch",e)},goToSearchPage:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.searchInput.blur(),e.$store.commit("saveResults",{query:e.query,results:e.results}),e.$store.commit("addRecentSearch",e.query),console.log(e.filteredResults),0!==e.results.length){t.next=7;break}return t.next=7,e.search({sectionId:e.sectionKey});case 7:if(console.log(e.$route.path,e.$route.query.query,e.query),"/search"===e.$route.path&&e.$route.query.query===e.query){t.next=11;break}return t.next=11,e.$router.push({path:"/search",query:{query:e.query}});case 11:case"end":return t.stop()}}),t)})))()}},Object(l["b"])(["search"])),computed:Object(o["a"])({filteredResults:function(){var e,t;return null!==(e=null===(t=this.results)||void 0===t?void 0:t.filter((function(e){return e.size>0})))&&void 0!==e?e:[]},sectionKey:function(){var e;return null!==(e=this.$route.params.sectionKey)&&void 0!==e?e:void 0}},Object(l["d"])({query:function(e){return e.search.query},results:function(e){return e.search.results},recentSearches:function(e){return e.search.recentSearches}})),watch:{$route:function(){this.showResults=!1,this.clearQuery()},"$store.state.search.query":function(){this.search({sectionId:this.sectionKey})}}},y=v,g=(n("5e4a"),n("2877")),b=n("6544"),w=n.n(b),k=n("8336"),x=n("4bd4"),C=n("132d"),T=n("8860"),R=n("da13"),_=n("1800"),O=n("5d23"),P=n("e0c7"),S=n("8654"),I=n("269a"),j=n.n(I),M=n("a293"),$=Object(g["a"])(y,m,h,!1,null,"7c961446",null),L=$.exports;w()($,{VBtn:k["a"],VForm:x["a"],VIcon:C["a"],VList:T["a"],VListItem:R["a"],VListItemAction:_["a"],VListItemTitle:O["c"],VSubheader:P["a"],VTextField:S["a"]}),j()($,{ClickOutside:M["a"]});var D={name:"AppBar",components:{SearchField:L,PlexImage:d["a"]},methods:Object(o["a"])({logoutAndRedirect:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.logout().then(),t.next=3,e.$router.push("/settings");case 3:case"end":return t.stop()}}),t)})))()}},Object(l["b"])(["closeWindow","minimizeWindow","logout"])),computed:Object(o["a"])(Object(o["a"])({highlightLibrary:function(){return this.$route.fullPath.startsWith("/library")||this.$route.fullPath.startsWith("/playlists")}},Object(l["c"])(["canQuery"])),Object(l["d"])({platform:function(e){return e.platform.type},sections:function(e){return e.plex.content.sections}}))},W=D,E=(n("0c10"),n("40dc")),A=n("adda"),B=n("8270"),q=n("34c3"),V=n("e449"),K=n("ba0d"),H=n("b73d"),N=Object(g["a"])(W,c,u,!1,null,"361b4554",null),F=N.exports;w()(N,{VAppBar:E["a"],VBtn:k["a"],VIcon:C["a"],VImg:A["a"],VList:T["a"],VListItem:R["a"],VListItemAction:_["a"],VListItemAvatar:B["a"],VListItemContent:O["a"],VListItemIcon:q["a"],VListItemTitle:O["c"],VMenu:V["a"],VSlider:K["a"],VSwitch:H["a"]});var U=n("a123"),z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"500"},model:{value:e.$store.state.prompt.show,callback:function(t){e.$set(e.$store.state.prompt,"show",t)},expression:"$store.state.prompt.show"}},[n("v-card",[n("v-card-title",[e._v(e._s(e.prompt.title))]),n("v-card-text",[e._v(e._s(e.prompt.subtitle))]),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.dialogCancel}},[e._v(" "+e._s(e.prompt.cancelText)+" ")]),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.dialogConfirm}},[e._v(" "+e._s(e.prompt.confirmText)+" ")])],1)],1)],1)},Q=[],X={name:"CustomDialog",methods:{dialogCancel:function(){this.$store.commit("hidePrompt")},dialogConfirm:function(){this.$store.commit("hidePrompt"),this.prompt.onConfirm()}},watch:{"prompt.show":function(){this.prompt.show||this.prompt.onCancel()}},computed:Object(o["a"])({},Object(l["d"])({prompt:function(e){return e.prompt}}))},Y=X,G=n("b0af"),J=n("99d9"),Z=n("169a"),ee=n("ce7e"),te=n("2fa4"),ne=Object(g["a"])(Y,z,Q,!1,null,"4f3a49bc",null),re=ne.exports;w()(ne,{VBtn:k["a"],VCard:G["a"],VCardActions:J["a"],VCardText:J["c"],VCardTitle:J["d"],VDialog:Z["a"],VDivider:ee["a"],VSpacer:te["a"]});var ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"500"},model:{value:e.$store.state.textPrompt.show,callback:function(t){e.$set(e.$store.state.textPrompt,"show",t)},expression:"$store.state.textPrompt.show"}},[n("v-card",[n("v-card-title",[e._v(e._s(e.prompt.title))]),""!==e.prompt.subtitle?n("v-card-subtitle",{domProps:{innerHTML:e._s(e.prompt.subtitle)}}):e._e(),n("v-form",{on:{submit:function(t){return t.preventDefault(),e.dialogConfirm(t)}}},[n("v-text-field",{staticClass:"mr-2 ml-2",attrs:{filled:"",label:e.prompt.label,autofocus:"",dense:""},model:{value:e.$store.state.textPrompt.value,callback:function(t){e.$set(e.$store.state.textPrompt,"value",t)},expression:"$store.state.textPrompt.value"}})],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.dialogCancel}},[e._v(" "+e._s(e.prompt.cancelText)+" ")]),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.dialogConfirm}},[e._v(" "+e._s(e.prompt.confirmText)+" ")])],1)],1)],1)},ae=[],oe={name:"CustomPrompt",methods:{dialogCancel:function(){this.$store.commit("hideTextPrompt")},dialogConfirm:function(){this.$store.commit("hideTextPrompt"),this.prompt.onConfirm()}},watch:{"prompt.show":function(){this.prompt.show||this.prompt.onCancel()}},computed:Object(o["a"])({},Object(l["d"])({prompt:function(e){return e.textPrompt}}))},se=oe,ce=Object(g["a"])(se,ie,ae,!1,null,"3dcaa513",null),ue=ce.exports;w()(ce,{VBtn:k["a"],VCard:G["a"],VCardActions:J["a"],VCardSubtitle:J["b"],VCardTitle:J["d"],VDialog:Z["a"],VDivider:ee["a"],VForm:x["a"],VSpacer:te["a"],VTextField:S["a"]});var le=n("5306"),de={name:"App",components:{PlexPlayer:le["a"],CustomPrompt:ue,CustomDialog:re,AppBar:F},data:function(){return{bgTransition:"0s",bgImg:{dark:"",light:""},resizeInterval:-1}},beforeDestroy:function(){document.removeEventListener("keypress",this.devListener),window.removeEventListener("scroll",this.updateScroll),clearInterval(this.resizeInterval)},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("store",e.$store),console.log("route",e.$route),e.resizeInterval=setInterval((function(){return e.updateResize()}),100),e.handleCode(),e.updatePublicIp().then(),document.addEventListener("online",(function(){return e.updatePublicIp()})),document.addEventListener("keypress",e.devListener),window.addEventListener("scroll",e.updateScroll,!1),setTimeout((function(){return e.bgTransition=".6s"}),500),U["a"].getCachedBackgrounds().then((function(t){e.bgImg=null!==t?t:{dark:"img/darkbg.png",light:"img/lightbg.png"}})),e.$store.restored.then((function(){"/settings"!==e.$route.path&&null===e.server&&e.$router.push("/settings"),e.canQuery&&(e.activeItem&&e.setMetadata(e.activeItem),e.updateSections(),e.updatePlaylists())}));case 11:case"end":return t.stop()}}),t)})))()},methods:Object(o["a"])({updateResize:function(){var e=window.innerWidth;this.$store.state.windowWidth!==e&&this.$store.commit("windowWidth",e)},handleCode:function(){if(location.search.includes("?plex_auth=")){var e=new BroadcastChannel("loginCode");e.postMessage("Plex auth completed"),e.close(),window.close()}},updateScroll:function(){this.$store.commit("scrollY",window.scrollY)},devListener:function(e){"`"===e.key&&"electron"===this.platform&&this.$store.dispatch("openDevTools"),"r"===e.key&&e.ctrlKey&&location.reload()}},Object(l["b"])(["updateUserInfo","updateServices","updatePublicIp","updateSections","updatePlaylists","setMetadata"])),computed:Object(o["a"])(Object(o["a"])({bigScreen:function(){return null!==this.activeItem&&"1"===this.$route.query.player}},Object(l["c"])(["themeColors","canQuery"])),Object(l["d"])({sections:function(e){return e.plex.content.sections},platform:function(e){return e.platform.type},server:function(e){return e.plex.server},scrollY:function(e){return e.scrollY},windowWidth:function(e){return e.windowWidth},activeItem:function(e){return e.media.context.item}})),watch:{bigScreen:function(){this.bigScreen?document.documentElement.style.overflowY="hidden":document.documentElement.style.overflowY="auto"},"$vuetify.theme.dark":function(){localStorage.darkTheme=this.$vuetify.theme.dark}}},me=de,he=(n("034f"),n("7496")),pe=n("f6c4"),fe=n("2db4"),ve=Object(g["a"])(me,i,a,!1,null,null,null),ye=ve.exports;w()(ve,{VApp:he["a"],VBtn:k["a"],VMain:pe["a"],VSnackbar:fe["a"]});var ge=n("9483");Object(ge["a"])("".concat("/plex/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("d3b7");var be=n("8c4f"),we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-lazy",[e.onDeck?n("div",{staticClass:"home"},[n("div",{staticClass:"on-deck"},[n("data-card",{staticClass:"main-card",attrs:{"img-width":e.imgWidth,item:e.mainDeck}}),n("item-row",{staticClass:"sub-deck mt-10",attrs:{title:"On deck","vertical-episode":"","show-context":"",size:150*e.uiScale,items:e.subDeck}})],1),n("item-row",{staticClass:"mt-10",attrs:{"show-context":"","horizontal-movie":"",size:250*e.uiScale,title:e.continueWatching.title,items:e.continueWatching.Metadata}}),n("item-row",{staticClass:"mt-7",attrs:{"show-context":"",size:150*e.uiScale,title:"Recently Added",items:e.recentlyAdded}})],1):e._e()])},ke=[],xe=(n("fb6a"),n("a892")),Ce=n("2c55"),Te={name:"Home",components:{DataCard:Ce["a"],ItemRow:xe["a"]},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.restored;case 2:e.updateOnDeck().then(),e.updateContinueWatching().then(),e.updateRecentlyAdded().then(),console.log({deck:e.onDeck,continueWatching:e.continueWatching,recentlyAdded:e.recentlyAdded});case 6:case"end":return t.stop()}}),t)})))()},methods:Object(o["a"])({},Object(l["b"])(["updateOnDeck","updateContinueWatching","updateRecentlyAdded"])),computed:Object(o["a"])({recentlyAdded:function(){var e;return null!==(e=this.$store.state.plex.content.recentlyAdded)&&void 0!==e?e:[]},continueWatching:function(){var e;return null!==(e=this.$store.state.plex.content.continueWatching)&&void 0!==e?e:[]},onDeck:function(){var e;return null!==(e=this.$store.state.plex.content.onDeck)&&void 0!==e?e:[]},largeWindow:function(){return this.windowWidth>1600},imgWidth:function(){return this.largeWindow?750:550},mainDeck:function(){var e;return null===(e=this.onDeck)||void 0===e?void 0:e[0]},subDeck:function(){var e;return null===(e=this.onDeck)||void 0===e?void 0:e.slice(1)}},Object(l["d"])({windowWidth:function(e){return e.windowWidth},uiScale:function(e){return e.uiScale}}))},Re=Te,_e=(n("a846"),n("b687")),Oe=Object(g["a"])(Re,we,ke,!1,null,"4f522266",null),Pe=Oe.exports;w()(Oe,{VLazy:_e["a"]}),r["a"].use(be["a"]);var Se=[{path:"/",name:"Home",component:Pe},{path:"/settings",name:"Settings",component:function(){return n.e("chunk-19813994").then(n.bind(null,"26d3"))}},{path:"/library/:sectionKey/:directory?",name:"Library",component:function(){return n.e("chunk-8b182660").then(n.bind(null,"55a5"))}},{path:"/show/:key",name:"Show",component:function(){return Promise.all([n.e("chunk-19469fa3"),n.e("chunk-3dbc7e81")]).then(n.bind(null,"e915"))}},{path:"/season/:key",name:"Season",component:function(){return n.e("chunk-15871142").then(n.bind(null,"7b18"))}},{path:"/episode/:key",name:"Episode",component:function(){return n.e("chunk-05aa78e7").then(n.bind(null,"5a14"))}},{path:"/movie/:key",name:"Movie",component:function(){return Promise.all([n.e("chunk-19469fa3"),n.e("chunk-4f6c082a")]).then(n.bind(null,"def6"))}},{path:"/explore/:sectionKey",name:"Explore",component:function(){return n.e("chunk-a0943e14").then(n.bind(null,"7797"))}},{path:"/search",name:"Search",component:function(){return n.e("chunk-64106f0c").then(n.bind(null,"2d3b"))}},{path:"/playlist/:key",name:"Playlist",component:function(){return n.e("chunk-46fe656a").then(n.bind(null,"2059"))}},{path:"/playlists/",name:"Playlists",component:function(){return n.e("chunk-e05c639c").then(n.bind(null,"ea2f"))}}],Ie=new be["a"]({routes:Se}),je=Ie,Me=(n("99af"),n("c975"),n("a434"),n("25f0"),n("38cf"),n("f309")),$e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;null!==localStorage.getItem("darkTheme")&&($e="true"===localStorage.darkTheme),r["a"].use(Me["a"]);var Le=new Me["a"]({theme:{dark:$e,themes:{dark:{primary:"#d46817",foreground:"#ffffff",hardBackground:"#000000",softForeground:"#d6d6d6",softBackground:"#282727",softerBackground:"#39393e",secondary:"#4a1bcf"},light:{primary:"#ff7800",foreground:"#17181a",hardBackground:"#ffffff",softForeground:"#353535",softBackground:"#f1efef",softerBackground:"#cdcdcd",secondary:"#4a1bcf"}}}}),De={state:{},mutations:{},getters:{themeColors:function(){return Le.framework.theme.themes[Le.framework.theme.isDark?"dark":"light"]}},actions:{},modules:{}},We=(n("7db0"),n("d81d"),n("b0c0"),n("3ca3"),n("466d"),n("1276"),n("ddb0"),n("2b3d"),n("8468")),Ee=n("ade3"),Ae=n("7d074"),Be=n.n(Ae),qe=n("4328"),Ve=n.n(qe),Ke=n("e336"),He=n.n(Ke),Ne={state:{deletedKeys:{},watchedKeys:{},content:{library:null,sections:null,onDeck:null,recentlyAdded:null},publicIp:"",server:null,services:[],user:{email:"",profile:null,services:null,image:"",title:"",username:"",uuid:""},auth:null},mutations:{addDeletedKey:function(e,t){return r["a"].set(e.deletedKeys,t,!0)},clearDeletedKeys:function(e){return e.deletedKeys={}},setWatchedKey:function(e,t){var n=t.key,i=t.value;return r["a"].set(e.watchedKeys,n,i)},clearWatchedKeys:function(e){return e.watchedKeys={}},resetContent:function(e){return e.content={library:null,sections:null,onDeck:null,recentlyAdded:null}},content:function(e,t){var n=t.key,i=t.content;return r["a"].set(e.content,n,i)},publicIp:function(e,t){return e.publicIp=t},services:function(e,t){return e.services=t},server:function(e,t){return e.server=t},user:function(e,t){return e.user=t},auth:function(e,t){return e.auth=t}},getters:{serverConnections:function(e,t,n){return function(e){var t,r,i,a;return null===e||void 0===e||null===(t=e.connections)||void 0===t||null===(r=t.slice())||void 0===r||null===(i=r.sort((function(e,t){return(null===e||void 0===e?void 0:e.relay)-(null===t||void 0===t?void 0:t.relay)})))||void 0===i||null===(a=i.sort((function(e,t){return(null===t||void 0===t?void 0:t.local)-(null===e||void 0===e?void 0:e.local)})))||void 0===a?void 0:a.sort((function(e,t){if("electron"===n.platform.type)return 0;var r=location.protocol.slice(0,-1);return((null===t||void 0===t?void 0:t.protocol)===r)-((null===e||void 0===e?void 0:e.protocol)===r)}))}},serverPort:function(e,t){return function(e){var n,r;return null===(n=t.serverConnections(e))||void 0===n||null===(r=n[0])||void 0===r?void 0:r.port}},port:function(e,t){return t.serverPort(e.server)},token:function(e){var t;return null===(t=e.server)||void 0===t?void 0:t.accessToken},canQuery:function(e,t){var n,r;return t.port&&e.server.publicAddress&&null!==(null===(n=e.server)||void 0===n?void 0:n.accessToken)&&void 0!==(null===(r=e.server)||void 0===r?void 0:r.accessToken)},tvServers:function(e){return e.services.filter((function(e){return e.provides.includes("server")}))},tvAuth:function(e){return e.auth},tvLoggedIn:function(e,t){return null!==t.tvAuth&&null!==t.tvAuth.authToken&&new Date(t.tvAuth.expiresAt)>new Date},plexApi:function(e,t,n){var r="electron"===n.platform.type,i=t.serverConnections(e.server);console.log("connections",i,i.map((function(e){return e.uri})));var a=null===i||void 0===i?void 0:i[0],o=r?a.address:a.uri.split("//")[1].split(":")[0];console.log("hostname",o);var s=new Be.a({hostname:o,port:null===a||void 0===a?void 0:a.port,token:t.token,https:location.protocol.startsWith("https"),options:{identifier:"RuurdPlexClient",product:r?"PleX Electron":"PleX Web",version:" 1.0",deviceName:"PleX device",platform:"Chrome"}});return console.log(s),s},plexUrl:function(e,t){return function(n){var r,i=t.plexApi._generateRelativeUrl(n);return i+=i.includes("?")?"&":"?",i+Ve.a.stringify({"X-Plex-Token":null===(r=e.server)||void 0===r?void 0:r.accessToken})}},transcodeImage:function(e,t){return function(e){var n=e.url,r=e.width,i=e.height,a=e.upscale,o=void 0===a||a;return t.plexUrl("/photo/:/transcode/?"+Ve.a.stringify({width:r,height:i,url:n,upscale:+o}))}},originalDash:function(e,t){return function(e){return t.plexUrl("/video/:/transcode/universal/start.mpd")+"&"+Ve.a.stringify({protocol:"dash",mediaIndex:0,offset:0,path:e.key,directPlay:1,directStream:1,fastSeek:1,"X-Plex-Platform":"Chrome"})}},originalHls:function(e,t){return function(e){return t.plexUrl("/video/:/transcode/universal/start.m3u8")+"&"+Ve.a.stringify({protocol:"hls",mediaIndex:0,offset:0,path:e.key,directPlay:1,directStream:1,fastSeek:1,"X-Plex-Platform":"Chrome"})}},originalMkv:function(e,t){return function(e){var n,r,i,a;return t.plexUrl(null===e||void 0===e||null===(n=e.Media)||void 0===n||null===(r=n[0])||void 0===r||null===(i=r.Part)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.key)}},itemWatched:function(){return function(e){return"show"===e.type||"season"===e.type?e.leafCount===e.viewedLeafCount:("episode"===e.type||"movie"===e.type)&&e.viewCount>0}}},actions:{deleteItem:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,i=e.dispatch,r("addDeletedKey",t.ratingKey),"playlist"!==t.type){n.next=7;break}return n.next=5,i("deletePlaylist",t.ratingKey);case 5:n.next=9;break;case 7:return n.next=9,i("deleteMetadata",t.ratingKey);case 9:case"end":return n.stop()}}),n)})))()},toggleWatched:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.dispatch,i=e.getters,a=e.state,o=a.watchedKeys[t.ratingKey],!(void 0!==o?o:i.itemWatched(t))){n.next=7;break}return n.next=5,r("markUnwatched",t.ratingKey);case 5:n.next=9;break;case 7:return n.next=9,r("markWatched",t.ratingKey);case 9:case"end":return n.stop()}}),n)})))()},updatePublicIp:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,He.a.v4();case 3:r=t.sent,n("publicIp",r);case 5:case"end":return t.stop()}}),t)})))()},shuffleQueue:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.dispatch,e.commit,r=e.getters,i=t.queueKey,a=t.shuffle,o=void 0===a||a,s=Ve.a.stringify({repeat:0,own:1,includeChapters:1,includeMarkers:1,includeGeolocation:1,includeExternalMedia:1}),!o){n.next=9;break}return n.next=6,r.plexApi.putQuery("/playQueues/".concat(i,"/shuffle?").concat(s));case 6:return n.abrupt("return",n.sent.MediaContainer);case 9:return n.next=11,r.plexApi.putQuery("/playQueues/".concat(i,"/unshuffle?").concat(s));case 11:return n.abrupt("return",n.sent.MediaContainer);case 12:case"end":return n.stop()}}),n)})))()},getQueue:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.dispatch,e.rootState,e.commit,r=e.getters,i=Ve.a.stringify({repeat:0,own:1,includeChapters:1,includeMarkers:1,includeGeolocation:1,includeExternalMedia:1}),n.next=4,r.plexApi.query("/playQueues/".concat(t,"?").concat(i));case 4:return n.abrupt("return",n.sent.MediaContainer);case 5:case"end":return n.stop()}}),n)})))()},createQueue:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.dispatch,r=e.getters,e.commit,i=e.state,a=Ve.a.stringify({type:"video",continuous:"1",uri:"server://".concat(i.server.clientIdentifier,"/com.plexapp.plugins.library").concat(t),repeat:"0",own:"1",includeChapters:"1",includeMarkers:"1",includeGeolocation:"1",includeExternalMedia:"1"}),n.next=4,r.plexApi.postQuery("/playQueues?".concat(a));case 4:return n.abrupt("return",n.sent.MediaContainer);case 5:case"end":return n.stop()}}),n)})))()},setTimeline:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u,l,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.dispatch,r=e.getters,i=t.ratingKey,a=t.key,o=t.playbackTime,s=t.duration,c=t.state,u=t.time,l=t.playQueueItemID,d=Ve.a.stringify({ratingKey:i,key:a,playbackTime:o,state:c,hasMDE:"1",time:u,duration:s,playQueueItemID:l}),n.next=5,r.plexApi.query("/:/timeline?".concat(d));case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))()},movePlaylistItem:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.dispatch,r=e.getters,i=t.playlistKey,a=t.playlistItemID,o=t.afterItemId,s=Ve.a.stringify({after:o}),n.next=5,r.plexApi.putQuery("/playlists/".concat(i,"/items/").concat(a,"/move?").concat(s));case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))()},removeFromPlaylist:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.dispatch,r=e.getters,i=t.playlistKey,a=t.playlistItemID,n.next=4,r.plexApi.deleteQuery("/playlists/".concat(i,"/items/").concat(a));case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},addToPlaylist:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,i=e.getters,a=t.key,o=t.playlistKey,s=Ve.a.stringify({type:"video",uri:"server://".concat(r.server.clientIdentifier,"/com.plexapp.plugins.library/library/metadata/").concat(a),smart:0}),n.next=5,i.plexApi.putQuery("/playlists/".concat(o,"/items?")+s);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))()},createPlaylist:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,i=e.getters,a=e.commit,o=t.title,s=t.key,c=Ve.a.stringify({type:"video",title:o,uri:"server://".concat(r.server.clientIdentifier,"/com.plexapp.plugins.library/library/metadata/").concat(s),smart:0}),n.next=5,i.plexApi.postQuery("/playlists?"+c);case 5:return u=n.sent,l=u.MediaContainer,console.log("create playlist returned",l),a("content",{key:"playlist"+s,content:l.Metadata[0]}),n.abrupt("return",l.Metadata[0]);case 10:case"end":return n.stop()}}),n)})))()},deleteMetadata:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.getters,e.dispatch,n.next=3,r.plexApi.deleteQuery("/library/metadata/".concat(t));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},deletePlaylist:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.getters,n.next=3,r.plexApi.deleteQuery("/playlists/".concat(t));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},markUnwatched:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.getters,i=e.commit,i("setWatchedKey",{key:t,value:!1}),n.next=4,r.plexApi.query("/:/unscrobble?key=".concat(t,"&identifier=com.plexapp.plugins.library"));case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},markWatched:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.getters,i=e.commit,i("setWatchedKey",{key:t,value:!0}),n.next=4,r.plexApi.query("/:/scrobble?key=".concat(t,"&identifier=com.plexapp.plugins.library"));case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},updatePlaylist:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,i=e.commit,n.next=3,r("query",{url:"/playlists/".concat(t)});case 3:return a=n.sent,i("content",{key:"playlist"+t,content:a.Metadata[0]}),n.abrupt("return",a.Metadata[0]);case 6:case"end":return n.stop()}}),n)})))()},updatePlaylistItems:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,i=e.commit,n.next=3,r("query",{url:"/playlists/".concat(t,"/items")});case 3:return a=n.sent,i("content",{key:"playlistItems"+t,content:a.Metadata}),n.abrupt("return",a.Metadata);case 6:case"end":return n.stop()}}),n)})))()},updatePlaylists:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=e.commit,t.next=3,n("query",{url:"/playlists"});case 3:return i=t.sent,r("content",{key:"playlists",content:i.Metadata}),t.abrupt("return",i.Metadata);case 6:case"end":return t.stop()}}),t)})))()},searchPlex:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,e.commit,i=t.query,a=t.sectionId,o=Ve.a.stringify({includeCollections:1,contextual:1,sectionId:a,query:i}),n.next=5,r("query",{url:"/hubs/search?".concat(o)});case 5:return n.abrupt("return",n.sent.Hub);case 6:case"end":return n.stop()}}),n)})))()},updateHub:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,i=e.commit,a=Ve.a.stringify({count:17,includeEmpty:1,includeFeaturedTags:1,includeTypeFirst:1,includeStations:1,includeExternalMetadata:1,includeRecentChannels:1,excludePlaylists:1}),n.next=4,r("query",{url:"/hubs/sections/".concat(t,"?").concat(a)});case 4:return o=n.sent,i("content",{key:"hub"+t,content:o.Hub}),n.abrupt("return",o.Hub);case 7:case"end":return n.stop()}}),n)})))()},updateContinueWatching:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=e.commit,t.next=3,n("query",{url:"/hubs?identifier=home.continue&excludeFields=summary"});case 3:return i=t.sent,r("content",{key:"continueWatching",content:i.Hub[0]}),t.abrupt("return",i.Hub[0]);case 6:case"end":return t.stop()}}),t)})))()},updateSectionFilter:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,r=e.dispatch,i=e.commit,a=t.key,o=t.filter,n.next=4,r("query",{url:"/library/sections/".concat(a,"/").concat(o)});case 4:return s=n.sent,i("content",{key:"sectionFilter"+a+"|"+o,content:s.Directory}),n.abrupt("return",s.Directory);case 7:case"end":return n.stop()}}),n)})))()},updateSectionSorts:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,r=e.dispatch,i=e.commit,n.next=3,r("query",{url:"/library/sections/".concat(t,"/sorts")});case 3:return a=n.sent,i("content",{key:"sectionSorts"+t,content:a.Directory}),n.abrupt("return",a.Directory);case 6:case"end":return n.stop()}}),n)})))()},updateSectionFilters:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,r=e.dispatch,i=e.commit,n.next=3,r("query",{url:"/library/sections/".concat(t,"/filters")});case 3:return a=n.sent,i("content",{key:"sectionFilters"+t,content:a.Directory}),n.abrupt("return",a.Directory);case 6:case"end":return n.stop()}}),n)})))()},updateMetadata:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,r=e.dispatch,i=e.commit,n.next=3,r("query",{url:"/library/metadata/".concat(t)});case 3:return a=n.sent,i("content",{key:"metadata"+t,content:a.Metadata[0]}),n.abrupt("return",a.Metadata[0]);case 6:case"end":return n.stop()}}),n)})))()},updateMetadataRelated:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,r=e.dispatch,i=e.commit,n.next=3,r("query",{url:"/library/metadata/".concat(t,"/related")});case 3:return a=n.sent,i("content",{key:"metadataRelated"+t,content:a.Hub}),n.abrupt("return",a.Hub);case 6:case"end":return n.stop()}}),n)})))()},updateMetadataChildren:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,r=e.dispatch,i=e.commit,n.next=3,r("query",{url:"/library/metadata/".concat(t,"/children")});case 3:return a=n.sent,i("content",{key:"metadataChildren"+t,content:a.Metadata}),n.abrupt("return",a.Metadata);case 6:case"end":return n.stop()}}),n)})))()},updateLibraryDirectory:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,r=e.dispatch,i=e.commit,a=t.sectionKey,o=t.directory,s=t.sort,c=t.filter,n.next=4,r("query",{url:"/library/sections/".concat(a,"/").concat(o,"?")+Ve.a.stringify(Object(Ee["a"])({sort:s},c[0],c[1]))});case 4:return u=n.sent,i("content",{key:"sectionLibrary"+a+"|"+o+"|"+s+JSON.stringify(c),content:u.Metadata}),n.abrupt("return",u.Metadata);case 7:case"end":return n.stop()}}),n)})))()},updateSectionLibrary:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,r=e.dispatch,i=e.commit,n.next=3,r("query",{url:"/library/sections/".concat(t)});case 3:return a=n.sent,i("content",{key:"libraryChildren"+t,content:a.Directory}),n.abrupt("return",a.Directory);case 6:case"end":return n.stop()}}),n)})))()},updateRecentlyAdded:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=e.commit,t.next=3,n("query",{url:"/library/recentlyAdded"});case 3:return i=t.sent,r("content",{key:"recentlyAdded",content:i.Metadata}),t.abrupt("return",i.Metadata);case 6:case"end":return t.stop()}}),t)})))()},updateOnDeck:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=e.commit,t.next=3,n("query",{url:"/library/onDeck"});case 3:return i=t.sent,r("content",{key:"onDeck",content:i.Metadata}),t.abrupt("return",i.Metadata);case 6:case"end":return t.stop()}}),t)})))()},updateSections:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=e.commit,t.next=3,n("query",{url:"/library/sections",timeout:72e5});case 3:return i=t.sent,r("content",{key:"sections",content:i.Directory}),t.abrupt("return",i.Directory);case 6:case"end":return t.stop()}}),t)})))()},updateLibrary:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=e.commit,t.next=3,n("query",{url:"/library"});case 3:return i=t.sent,r("content",{key:"library",content:i.Directory}),t.abrupt("return",i.Directory);case 6:case"end":return t.stop()}}),t)})))()},find:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.getters,i=e.dispatch,a=t.url,o=t.criteria,r.canQuery){n.next=4;break}return n.abrupt("return",console.warn("Can't find query :(, todo, do something here (redirect to settings? tell user)"));case 4:return n.prev=4,s="find"+JSON.stringify({url:a,criteria:o}),c=r.plexApi.find(a,o),n.next=9,i("getCached",{fun:c,key:s});case 9:return n.abrupt("return",n.sent);case 12:return n.prev=12,n.t0=n["catch"](4),console.warn("Error in find to:",a,n.t0),n.abrupt("return",!1);case 16:case"end":return n.stop()}}),n,null,[[4,12]])})))()},query:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,c,u,l,d,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.state,r=e.getters,e.commit,i=e.dispatch,a=t.url,o=t.method,c=void 0===o?"GET":o,u=t.lifetime,l=void 0===u?3e3:u,r.canQuery){n.next=4;break}return n.abrupt("return",console.warn("Can't query :(, server probably null"));case 4:return n.prev=4,c=c.toUpperCase(),d="query"+c+JSON.stringify(a),m=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.plexApi[{PERFORM:"perform",GET:"query",POST:"postQuery",PUT:"putQuery",DELETE:"deleteQuery"}[c]](a);case 2:return t=e.sent,e.abrupt("return",t.MediaContainer);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.next=10,i("getCached",{fun:m,key:d,lifetime:l});case 10:return n.abrupt("return",n.sent);case 13:throw n.prev=13,n.t0=n["catch"](4),console.warn("Error in ".concat(c," query to:"),a,{e:n.t0}),new Error(n.t0);case 17:case"end":return n.stop()}}),n,null,[[4,13]])})))()},offlinePlexImg:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Object(We["a"])(e),n.next=3,caches.open("plex-img");case 3:return r=n.sent,n.next=6,r.match(t);case 6:if(i=n.sent,i){n.next=9;break}return n.abrupt("return",null);case 9:return n.t0=URL,n.next=12,i.blob();case 12:return n.t1=n.sent,n.abrupt("return",n.t0.createObjectURL.call(n.t0,n.t1));case 14:case"end":return n.stop()}}),n)})))()},onlinePlexImg:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,e.dispatch,e.commit,e.getters,n.next=3,caches.open("plex-img");case 3:return r=n.sent,n.next=6,fetch(t);case 6:return i=n.sent,n.next=9,r.put(t,i);case 9:return n.next=11,r.match(t);case 11:return a=n.sent,n.t0=URL,n.next=15,a.blob();case 15:return n.t1=n.sent,n.abrupt("return",n.t0.createObjectURL.call(n.t0,n.t1));case 17:case"end":return n.stop()}}),n)})))()},markPrimaryServer:function(e,t){var n=e.commit;e.getters;n("server",t)},updateServices:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,i,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.commit,i=e.dispatch,a=e.getters,o=location.protocol.startsWith("https"),t.next=4,i("tvQuery",{endpoint:"resources",extraQuery:{includeHttps:+o,includeRelay:+o}});case 4:return s=t.sent,r("services",s),null===n.server&&a.tvServers.length>0&&r("server",a.tvServers[0]),t.abrupt("return",s);case 8:case"end":return t.stop()}}),t)})))()},updateUserInfo:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.dispatch,t.next=3,r("tvQuery",{endpoint:"user"});case 3:return i=t.sent,a={email:i.email,profile:i.profile,services:i.services,image:i.thumb,title:i.title,username:i.username,uuid:i.uuid},n("user",a),t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))()},tvQuery:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,s,c,u,l,d,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.getters,i=t.endpoint,a=void 0===i?"user":i,s=t.method,c=void 0===s?"GET":s,u=t.extraHeaders,l=void 0===u?{}:u,d=t.extraQuery,m=void 0===d?{}:d,r.tvLoggedIn){n.next=4;break}return n.abrupt("return",console.warn("Not logged in; can't query",{endpoint:a,method:c,extraHeaders:l,extraQuery:m}));case 4:return n.next=6,fetch("https://plex.tv/api/v2/".concat(a,"?")+Ve.a.stringify(Object(o["a"])({"X-Plex-Product":r.tvAuth.product,"X-Plex-Client-Identifier":r.tvAuth.clientIdentifier,"X-Plex-Token":r.tvAuth.authToken},m)),{headers:Object(o["a"])({accept:"application/json"},l)}).then((function(e){return e.json()}));case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n)})))()},logout:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.dispatch,n("user",{email:"",profile:null,services:null,image:"",title:"",username:"",uuid:""}),n("server",null),n("auth",null),n("services",[]),n("resetContent"),n("recentSearches",[]),t.next=9,r("stopPlaying");case 9:case"end":return t.stop()}}),t)})))()},login:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,i,a,o,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=e.getters,i=e.rootState,a={clientId:"RuurdPlexClient",name:"Ruurd's Plex Client"},o="https://plex.tv//api/v2/pins?".concat(Ve.a.stringify({strong:!0,"X-Plex-Product":a.name,"X-Plex-Client-Identifier":a.clientId,"X-Plex-Platform":i.platform.type,"X-Plex-Platform-Version":"1.0.0","X-Plex-Provides":"player","X-Plex-Version":"1.0.0","X-Plex-Device":"web"===i.platform.type?"browser":"Electron","X-Plex-Device-Name":"web"===i.platform.type?"PleX (Browser)":"PleX (Electron)"})),t.next=5,r.betterFetch()(o,{method:"POST",headers:{accept:"application/json",Origin:"http://localhost:8080"}}).then((function(e){return e.json()}));case 5:return s=t.sent,t.t0=Ve.a,t.t1=a.clientId,t.t2=s.code,t.next=11,n("getRedirectUrl");case 11:return t.t3=t.sent,t.t4={device:{product:a.name}},t.t5={clientID:t.t1,code:t.t2,forwardUrl:t.t3,context:t.t4},t.t6=t.t0.stringify.call(t.t0,t.t5),c="https://app.plex.tv/auth#?"+t.t6,console.log(c),t.next=19,n("goToUrl",c);case 19:return t.abrupt("return",s);case 20:case"end":return t.stop()}}),t)})))()},ensureAuth:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.commit,r=e.dispatch,i=e.getters,console.log("ENSURING AUTH"),!i.tvLoggedIn){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,r("login");case 6:if(a=t.sent,console.log("AUTH",a),!a.errors){t.next=12;break}return t.abrupt("return",console.warn("AUTH ERROR",a));case 12:n("auth",a);case 13:return t.next=15,i.betterFetch()("https://plex.tv/api/v2/pins/".concat(a.id,"?")+Ve.a.stringify({code:a.code,"X-Plex-Client-Identifier":a.clientIdentifier}),{headers:{accept:"application/json",Origin:"http://localhost:8080"}}).then((function(e){return e.json()}));case 15:a=t.sent,a.errors?console.warn("AUTH ERROR",a):n("auth",a);case 17:case"end":return t.stop()}}),t)})))()}},modules:{}},Fe=n("2909"),Ue={state:{query:"",results:[],staticResults:{query:"",results:[]},recentSearches:[]},mutations:{removeRecentSearch:function(e,t){e.recentSearches=e.recentSearches.filter((function(e){return e!==t}))},recentSearches:function(e,t){return e.recentSearches=t},addRecentSearch:function(e,t){var n=8;e.recentSearches=[t].concat(Object(Fe["a"])(e.recentSearches.filter((function(e){return e!==t})).slice(0,n-1)))},query:function(e,t){return e.query=t},results:function(e,t){return e.results=t},saveResults:function(e,t){var n=t.query,r=t.results;return e.staticResults={query:n,results:Object(Fe["a"])(r)}}},getters:{},actions:{search:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.dispatch,i=e.commit,a=e.state,o=t.query,s=t.sectionId,o||(o=a.query),o){n.next=5;break}return n.abrupt("return",i("results",[]));case 5:return n.next=7,r("searchPlex",{query:o,sectionId:s});case 7:c=n.sent,i("results",c);case 9:case"end":return n.stop()}}),n)})))()}},modules:{}},ze=(n("c740"),{state:{context:{key:"",keys:{show:"",season:"",episode:""},type:"",item:null,queue:{index:0,length:0,loading:!1,playQueueSelectedItemID:-1,playQueueID:-1,Metadata:[]}},volume:1,muted:!1,shuffle:!1,repeat:!0,playbackTime:0,currentTime:0,duration:0,buffers:[],videoRatio:16/9,srcLoading:!1,playing:!1,playOnLoad:!1,controlsHeight:150},mutations:{playbackTime:function(e,t){return e.playbackTime=t},playOnLoad:function(e,t){return e.playOnLoad=t},clearContext:function(e){e.currentTime=0,e.duration=0,e.playing=!1,e.srcLoading=!1,e.videoRatio=16/9,e.buffers=[],e.context={key:"",keys:{show:"",season:"",episode:""},type:"",item:null,queue:{index:0,length:0,loading:!1,playQueueSelectedItemID:-1,playQueueID:-1,Metadata:[]}}},context:function(e,t){var n=t.key,r=t.type,i=t.keys,a=t.queueLoading,o=void 0===a||a;e.context.key!==n&&(e.context.queue.loading=o),i&&(e.context.keys.show=i.show,e.context.keys.season=i.season,e.context.keys.episode=i.episode),void 0!==r&&(e.context.type=r),void 0!==n&&(e.context.key=n)},item:function(e,t){var n=t.item,r=t.play,i=void 0!==r&&r;e.context.item=n,e.playOnLoad=i},queue:function(e,t){e.context.queue.loading=!1,e.context.queue.length=t.Metadata.length,e.context.queue.Metadata=t.Metadata,e.context.queue.playQueueSelectedItemID=t.playQueueSelectedItemID,e.context.queue.playQueueID=t.playQueueID,e.context.queue.index=t.Metadata.findIndex((function(e){return e.playQueueItemID===t.playQueueSelectedItemID}))},queueIndex:function(e,t){return e.context.queue.index=t},currentTime:function(e,t){var n,r,i;e.duration===1/0||isNaN(e.duration)||isNaN(t)||t===1/0||(null===(n=navigator)||void 0===n||null===(r=n.mediaSession)||void 0===r||null===(i=r.setPositionState)||void 0===i||i.call(r,{duration:e.duration,playbackRate:1,position:t}));e.currentTime=t},duration:function(e,t){return e.duration=t},volume:function(e,t){return e.volume=t},muted:function(e,t){return e.muted=t},buffers:function(e,t){return e.buffers=t},videoRatio:function(e,t){return e.videoRatio=t},srcLoading:function(e,t){return e.srcLoading=t},playing:function(e,t){return e.playing=t},shuffle:function(e,t){return e.shuffle=t},repeat:function(e,t){return e.repeat=t}},getters:{canSeekLeft:function(e){return e.currentTime>10},canSeekRight:function(e){return e.currentTime+10<e.duration},canSkipBackwards:function(e){return e.context.queue.index>0},canSkipForwards:function(e){return e.context.queue.index<e.context.queue.length-1},itemTimelineConfig:function(e){return function(t){return{ratingKey:t.ratingKey,key:t.key,playQueueItemID:t.playQueueItemID,playbackTime:Math.round(1e3*e.playbackTime),duration:Math.round(1e3*e.duration),state:e.playing?"playing":"paused",time:1e4*Math.floor(e.currentTime/10)}}},itemIsActive:function(e){return function(t){return"playlist"===t.type?t.ratingKey===e.context.key:"playlist"===e.context.type?t.ratingKey===e.context.item.ratingKey:"movie"===e.context.type||"show"===t.type?t.ratingKey===e.context.key:"season"===t.type?t.ratingKey===e.context.keys.season:"episode"===t.type?t.ratingKey===e.context.keys.episode:void 0}},itemCanPlay:function(){return function(e){return["show","season","movie","episode","playlist"].includes(e.type)}},videoWidth:function(e,t){return Math.round(t.videoHeight*e.videoRatio*100)/100},videoHeight:function(e){return e.controlsHeight-10},usePlayer:function(e,t,n){return"electron"===n.platform.type?"vlc":"hls"}},actions:{toggleShuffle:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.dispatch,i=e.commit,i("shuffle",!n.shuffle),t.next=4,r("shuffleQueue",{queueKey:n.context.queue.playQueueID,shuffle:n.shuffle});case 4:a=t.sent,console.log("toggleShuffle queue",a),i("queue",a);case 7:case"end":return t.stop()}}),t)})))()},stopPlaying:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.dispatch,i=e.state,a=i.context.item,n("clearContext"),t.next=5,r("markStop",a);case 5:case"end":return t.stop()}}),t)})))()},skip:function(e){var t=arguments;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,s,c,u,l,d,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,i=e.commit,a=e.dispatch,s=e.getters,c=!(t.length>1&&void 0!==t[1])||t[1],u=r.context.queue.index,console.log("currentIndex",u),l=u+(c?1:-1),l=(l+2*r.context.queue.length)%r.context.queue.length,d=r.context.queue.Metadata[l],console.log("next in queue",d),d){n.next=10;break}return n.abrupt("return");case 10:return a("commitItem",{item:d,play:!0}),i("queueIndex",l),n.next=14,a("setTimeline",Object(o["a"])(Object(o["a"])({},s.itemTimelineConfig(d)),{},{state:"playing",time:0,playbackTime:0,duration:d.duration}));case 14:return n.next=16,a("getQueue",r.context.queue.playQueueID);case 16:m=n.sent,console.log("nextQueue",m),i("queue",m);case 19:case"end":return n.stop()}}),n)})))()},updateTimeline:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=e.getters,i=e.state,t.abrupt("return",n("setTimeline",r.itemTimelineConfig(i.context.item)));case 2:case"end":return t.stop()}}),t)})))()},markStop:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,i=e.getters,a=e.state,s=null!==t&&void 0!==t?t:a.context.item,n.abrupt("return",r("setTimeline",Object(o["a"])(Object(o["a"])({},i.itemTimelineConfig(s)),{},{state:"stopped"})));case 3:case"end":return n.stop()}}),n)})))()},playItem:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u,l,d,m,h,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.dispatch,a=e.commit,e.state,e.getters,e.rootState,o=t.item,s=t.shuffle,void 0!==s&&s,c=t.containingPlaylist,console.log("Containing playlist",c),c?a("context",{type:"playlist",key:c.ratingKey}):"playlist"===o.type?a("context",{type:"playlist",key:o.ratingKey}):["episode","season","show"].includes(o.type)?("episode"===o.type?(d=o,l=o.grandparentRatingKey,m=o.parentRatingKey):"season"===o.type?(l=o.parentRatingKey,m=o.ratingKey):l=o.ratingKey,a("context",{type:"show",key:l,keys:{show:l,season:m,episode:null===(u=d)||void 0===u?void 0:u.key}})):"movie"===o.type&&a("context",{type:"movie",key:o.ratingKey,item:null}),n.next=6,i("createQueue",null!==(r=null===c||void 0===c?void 0:c.key)&&void 0!==r?r:o.key);case 6:h=n.sent,a("queue",h),p=h.Metadata.find((function(e){return c?e.ratingKey===o.ratingKey:e.playQueueItemID===h.playQueueSelectedItemID})),a("context",{queueLoading:!1,keys:"episode"===p.type?{show:p.grandparentRatingKey,season:p.parentRatingKey,episode:p.ratingKey}:{}}),i("commitItem",{item:p}),console.log(h);case 12:case"end":return n.stop()}}),n)})))()},commitItem:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,i=e.dispatch,a=t.item,o=t.play,s=void 0===o||o,r("item",{item:a,play:s}),n.next=5,i("setMetadata",a);case 5:case"end":return n.stop()}}),n)})))()},updateMediaData:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.dispatch,r=e.state,n("setMetadata",r.context.item);case 2:case"end":return t.stop()}}),t)})))()},setMetadata:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u,l,d,m,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.dispatch,o=e.getters,s=e.state,c=e.commit,console.log("setting metadata"),u="movie"===t.type?t.year:t.grandparentTitle,document.title="PleX  "+u+" - "+t.title,"mediaSession"in navigator){n.next=6;break}return n.abrupt("return");case 6:l=[{src:o.notFoundImg(t),type:"image/png",sizes:"512x512"}],d="movie"===t.type?null!==(r=t.thumb)&&void 0!==r?r:t.art:null!==(i=t.thumb)&&void 0!==i?i:t.art,m=[128,512,1024],l=m.map((function(e){return{src:o.transcodeImage({url:d,width:e,height:e}),sizes:"".concat(e,"x").concat(e),type:"image/png"}})),navigator.mediaSession.metadata=new MediaMetadata({title:t.title,artist:u,album:"movie"===t.type?"":t.parentTitle,artwork:l}),navigator.mediaSession.setActionHandler("previoustrack",(function(){a("skip",!1)})),navigator.mediaSession.setActionHandler("nexttrack",(function(){a("skip",!0)})),h=10,navigator.mediaSession.setActionHandler("seekbackward",(function(e){var t=e.seekOffset||h;c("currentTime",Math.max(s.currentTime-t,0))})),navigator.mediaSession.setActionHandler("seekforward",(function(e){var t=e.seekOffset||h;c("currentTime",Math.min(s.currentTime+t,s.duration))})),navigator.mediaSession.setActionHandler("play",(function(){c("playing",!0)})),navigator.mediaSession.setActionHandler("pause",(function(){c("playing",!1)}));try{navigator.mediaSession.setActionHandler("stop",(function(){a("stopPlaying")}))}catch(p){console.warn('Warning! The "stop" media session action is not supported.')}try{navigator.mediaSession.setActionHandler("seekto",(function(e){c("currentTime",e.seekTime)}))}catch(p){console.warn('Warning! The "seekto" media session action is not supported.')}case 20:case"end":return n.stop()}}),n)})))()}}}),Qe=n("bfa9"),Xe=n("a002"),Ye=n.n(Xe),Ge=U["a"].isElectron,Je=n(Ge?"bf8a":"e51b").default;console.log("is electron?",Ge);var Ze=new Qe["a"]({reducer:function(e){return{uiScale:e.uiScale,plex:{content:e.plex.content,publicIp:e.plex.publicIp,server:e.plex.server,services:e.plex.services,user:e.plex.user,auth:e.plex.auth},search:{recentSearches:e.search.recentSearches},media:{currentTime:e.media.currentTime,context:e.media.context,volume:e.media.volume,muted:e.media.muted,shuffle:e.media.shuffle,repeat:e.media.repeat}}},storage:Ye.a,asyncStorage:!0});r["a"].use(l["a"]);var et=new l["a"].Store({state:{promiseCache:{},scrollY:window.scrollY,windowWidth:window.innerWidth,uiScale:1,textPrompt:{show:!1,title:"",subtitle:"",label:"",value:"",cancelText:"",confirmText:"",onConfirm:function(){return 0},onCancel:function(){return 0}},prompt:{show:!1,title:"",subtitle:"",cancelText:"",confirmText:"",onConfirm:function(){return 0},onCancel:function(){return 0}},snackbars:[]},mutations:{windowWidth:function(e,t){return e.windowWidth=t},scrollY:function(e,t){return e.scrollY=t},removePromiseCache:function(e,t){return r["a"].delete(e.promiseCache,t)},setPromiseCache:function(e,t){var n=t.key,i=t.date,a=t.promise;return r["a"].set(e.promiseCache,n,{promise:a,date:i})},hideTextPrompt:function(e){return e.textPrompt.show=!1},showTextPrompt:function(e,t){var n=t.title,r=t.subtitle,i=t.value,a=t.label,o=t.cancelText,s=t.confirmText,c=t.onConfirm,u=t.onCancel;e.textPrompt.show=!0,e.textPrompt.title=n,e.textPrompt.subtitle=r,e.textPrompt.value=i,e.textPrompt.label=a,e.textPrompt.cancelText=o,e.textPrompt.confirmText=s,e.textPrompt.onConfirm=c,e.textPrompt.onCancel=u},hidePrompt:function(e){return e.prompt.show=!1},showPrompt:function(e,t){var n=t.title,r=t.subtitle,i=t.cancelText,a=t.confirmText,o=t.onConfirm,s=t.onCancel;e.prompt.show=!0,e.prompt.title=n,e.prompt.subtitle=r,e.prompt.cancelText=i,e.prompt.confirmText=a,e.prompt.onConfirm=o,e.prompt.onCancel=s},addSnackObject:function(e,t){return e.snackbars.push(t)},removeSnack:function(e,t){return e.snackbars.splice(e.snackbars.indexOf(t),1)}},getters:{notFoundImg:function(e,t){return function(e){var n="";switch(e.type){case"actor":n="person";break;default:n="person";break}return t.notFoundImgOfType(e,n)}},notFoundImgOfType:function(){return function(e,t){return"img/notfound/".concat(t,"/").concat(Math.floor(18*Math.random())+1,".png")}}},actions:{getCached:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,e.getters,i=e.commit,a=t.fun,o=t.key,s=t.lifeTime,c=void 0===s?3e3:s,!(r.promiseCache.hasOwnProperty(o)&&r.promiseCache[o].date+c>new Date)){n.next=7;break}return u=r.promiseCache[o].promise,n.next=6,u;case 6:return n.abrupt("return",n.sent);case 7:return l=a(),i("setPromiseCache",{key:o,date:+new Date,promise:l}),n.next=11,l;case 11:return n.abrupt("return",n.sent);case 12:case"end":return n.stop()}}),n)})))()},addSnack:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,c,u,l,d,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state,r=t.commit,i=n.text,a=n.to,o=n.linkText,s=void 0===o?"visit":o,c=n.timeout,u=void 0===c?3e3:c,l=n.id,d=void 0===l?Math.random().toString():l,m={text:i,to:a,linkText:s,open:!0,timeout:u,id:d},r("addSnackObject",m),e.abrupt("return",new Promise((function(e){setTimeout((function(){r("removeSnack",m),e()}),u+500)})));case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),showTextPrompt:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u,l,d,m,h,p,f,v;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,i=e.state,a=t.title,o=void 0===a?"Input":a,s=t.subtitle,c=void 0===s?"":s,u=t.value,l=void 0===u?"":u,d=t.label,m=void 0===d?"":d,h=t.cancelText,p=void 0===h?"Cancel":h,f=t.confirmText,v=void 0===f?"Confirm":f,n.abrupt("return",new Promise((function(e){r("showTextPrompt",{title:o,subtitle:c,label:m,value:l,cancelText:p,confirmText:v,onConfirm:function(){return e({confirmed:!0,value:i.textPrompt.value})},onCancel:function(){return e({confirmed:!1,value:i.textPrompt.value})}})})));case 3:case"end":return n.stop()}}),n)})))()},showPrompt:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,s,c,u,l,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,i=t.title,a=void 0===i?"Are you sure?":i,o=t.subtitle,s=void 0===o?"This will discard all unsaved changes":o,c=t.cancelText,u=void 0===c?"Cancel":c,l=t.confirmText,d=void 0===l?"Confirm":l,n.abrupt("return",new Promise((function(e){r("showPrompt",{title:a,subtitle:s,cancelText:u,confirmText:d,onConfirm:function(){return e(!0)},onCancel:function(){return e(!1)}})})));case 3:case"end":return n.stop()}}),n)})))()}},modules:{platform:Je,theme:De,plex:Ne,search:Ue,media:ze},plugins:[Ze.plugin]});r["a"].config.productionTip=!1,new r["a"]({router:je,store:et,vuetify:Le,render:function(e){return e(ye)}}).$mount("#app")},5985:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"player",staticClass:"vlc-video",style:e.mainStyle,attrs:{tabindex:"1"},on:{mousemove:e.moveOverPlayer,contextmenu:function(t){return e.showContext(t)},keydown:e.handleKey,wheel:e.handleScroll}},[n("div",{staticClass:"status-text",style:{opacity:e.statusOpacity,transitionDuration:e.statusAnimationDuration},domProps:{innerHTML:e._s(e.statusText)}}),n("loading-ring",{staticClass:"loading-ring",style:{opacity:e.buffering?1:0}}),n("div",{staticClass:"canvas-center",style:{backgroundImage:isNaN(e.duration)&&""!==e.poster?"url("+e.poster+")":"none",backgroundSize:e.coverPoster?"cover":"contain"}},[n("canvas",{ref:"canvas",staticClass:"canvas",style:{width:e.canvasBounds.width+"px",height:e.canvasBounds.height+"px",opacity:!isNaN(e.duration)||""===e.poster||e.firstPlayLoaded?1:0}})]),e.controls?n("controls",{style:{opacity:!e.hideControls||e.mouseOverControls||e.paused?e.readyState<2?.5:1:0,pointerEvents:e.readyState<2?"none":"all"},attrs:{"mouse-over-controls":e.mouseOverControls,"current-time":e.currentTime,duration:e.duration,muted:e.muted,paused:e.paused,bounds:e.bounds,position:e.position,"disable-fullscreen":e.controlsList.includes("nofullscreen")},on:{play:e.play,pause:e.pause,seek:function(t){e.player.position=t},toggleFullscreen:e.toggleFullscreen,toggleMute:function(t){return e.player.toggleMute()}},nativeOn:{mouseenter:function(t){e.mouseOverControls=!0},mouseleave:function(t){e.mouseOverControls=!1}},model:{value:e.volume,callback:function(t){e.volume=t},expression:"volume"}}):e._e(),e.showInformation?n("div",{staticClass:"media-information",style:{backgroundColor:e.dark?"#333333ee":"#aaaaaaee",color:e.dark?"#aaaaaaee":"#333333ee"}},[n("div",{staticClass:"toolbar"},[n("div",{staticClass:"close",on:{click:function(t){e.showInformation=!1}}},[e._v("x")])]),n("div",{staticClass:"content",domProps:{innerHTML:e._s(e.informationContent)}})]):e._e()],1)},i=[],a=(n("99af"),n("4160"),n("caad"),n("d81d"),n("fb6a"),n("b0c0"),n("a9e3"),n("b680"),n("d3b7"),n("2532"),n("3ca3"),n("159b"),n("ddb0"),n("5530")),o=n("3835"),s=(n("96cf"),n("1da1")),c=n("4176"),u=n("a8fd"),l=n.n(u),d=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},m=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lds-ring"},[n("div"),n("div"),n("div"),n("div")])}],h={name:"LoadingRing"},p=h,f=(n("1dd7"),n("2877")),v=Object(f["a"])(p,d,m,!1,null,"02687202",null),y=v.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"controls"},[n("div",{staticClass:"controls-top"},[n("div",{staticClass:"controls-left"},[e.bounds.width>55?n("div",{staticClass:"play-button",style:{backgroundImage:"url("+e.playIconUrl+")"},on:{click:function(t){e.paused?e.$emit("play"):e.$emit("pause")}}}):e._e(),e.bounds.width>95?n("div",{staticClass:"time-info"},[n("span",[e._v(e._s(e.msToTime(1e3*e.currentTime)))]),(e.bounds.width>335||e.bounds.width<275&&e.bounds.width>100)&&!isNaN(e.duration)?n("span",[e._v(" / "+e._s(e.msToTime(1e3*e.duration)))]):e._e()]):e._e()]),n("div",{staticClass:"controls-right"},[e.bounds.width>275?n("div",{staticClass:"volume"},[n("input",{staticClass:"volume-slider",attrs:{type:"range",step:"0.01",min:"0",max:"2"},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),n("div",{staticClass:"volume-icon",style:{backgroundImage:"url("+e.volumeIconUrl+")"},on:{click:function(t){return e.$emit("toggleMute")}}})]):e._e(),!e.disableFullscreen&&e.bounds.width>135?n("div",{staticClass:"fullscreen-button",on:{click:function(t){return e.$emit("toggleFullscreen")}}}):e._e()])]),n("div",{staticClass:"controls-bottom",on:{mousedown:e.controlsDown}},[n("div",{staticClass:"seek-background"},[n("div",{staticClass:"seek-progress",style:{width:Math.round(1e4*e.position)/100+"%"}}),n("div",{staticClass:"seek-thumb",style:{opacity:e.mouseOverControls?1:0,left:"calc("+Math.round(1e4*e.position)/100+"% - 6px)"}})])])])},b=[],w=(n("ac1f"),n("5319"),n("2ca0"),n("d4ec")),k=n("bee2"),x=n("bdb9"),C=function(){function e(){Object(w["a"])(this,e)}return Object(k["a"])(e,null,[{key:"msToTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(isNaN(e))return".00";var n=new Date(e).toISOString().substr(11,t?11:8).replace(/^0+/,"");return n=n.startsWith(":")?n.substr(1):n,n.startsWith("00")?n.substr(1):n}},{key:"iconUrl",value:function(e){return"https://fonts.gstatic.com/s/i/materialicons/".concat(e,"/v6/24px.svg?download=true")}},{key:"nativeIcon",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.nativeImage(e.iconUrl(n));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"nativeImage",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n){var r,i,a,o,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=!(s.length>1&&void 0!==s[1])||s[1],x["nativeImage"].cache||(x["nativeImage"].cache={}),x["nativeImage"].cache[n]){t.next=9;break}return t.next=5,e.getSvgIcon(n);case 5:i=t.sent,a=i.black,o=i.white,x["nativeImage"].cache[n]={black:x["nativeImage"].createFromDataURL(a),white:x["nativeImage"].createFromDataURL(o)};case 9:return t.abrupt("return",x["nativeImage"].cache[n][r?"white":"black"]);case 10:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"getSvgIcon",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,r,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:18,r=i.length>2&&void 0!==i[2]?i[2]:18,e.abrupt("return",new Promise((function(e,i){var a=new Image;a.src=t,a.crossOrigin="anonymous",a.onload=function(){var t=document.createElement("canvas"),i=t.getContext("2d");t.width=n,t.height=r,i.drawImage(a,0,0,n,r);for(var o=t.toDataURL(),s=i.getImageData(0,0,a.width,a.height),c=0;c<s.data.length;c+=4)s.data[c]=255-s.data[c],s.data[c+1]=255-s.data[c+1],s.data[c+2]=255-s.data[c+2];i.putImageData(s,0,0);var u=t.toDataURL();e({black:o,white:u})},a.onerror=i})));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),T={name:"Controls",props:{bounds:{type:Object,required:!0},position:{type:Number,required:!0},duration:{type:Number,required:!0},currentTime:{type:Number,required:!0},paused:{type:Boolean,required:!0},mouseOverControls:{type:Boolean,required:!0},value:{type:Number,required:!0},muted:{type:Boolean,required:!0},disableFullscreen:{type:Boolean,default:!1}},beforeDestroy:function(){document.removeEventListener("mousemove",this.controlsMove),document.removeEventListener("mouseup",this.controlsUp)},mounted:function(){document.addEventListener("mousemove",this.controlsMove,!1),document.addEventListener("mouseup",this.controlsUp,!1)},methods:{msToTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return C.msToTime(e,t)},controlsDown:function(e){this.mouseDown=!0,this.seekByEvent(e)},controlsMove:function(e){this.mouseDown&&this.seekByEvent(e)},controlsUp:function(e){this.mouseDown&&this.seekByEvent(e),this.mouseDown=!1},seekByEvent:function(e){var t=(e.pageX-this.bounds.left-25)/(this.bounds.width-50);t=Math.max(0,Math.min(1,t)),this.$emit("seek",t)}},computed:{volumeIconUrl:function(){var e=this.muted?"volume_off":this.volume<1?"volume_down":"volume_up";return C.iconUrl(e)},playIconUrl:function(){var e=this.paused?"play_arrow":"pause";return C.iconUrl(e)}}},R=T,_=(n("16b9"),Object(f["a"])(R,g,b,!1,null,"400cffa6",null)),O=_.exports,P={name:"VlcVideo",components:{Controls:O,LoadingRing:y},props:{autoplay:{type:Boolean,default:!1},controls:{type:Boolean,default:!1},src:{type:String,default:""},width:{type:[Number,String],default:0},height:{type:[Number,String],default:0},poster:{type:String,default:""},loop:{type:Boolean,default:!1},hideBuffering:{type:Boolean,default:!1},coverPoster:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},enableStatus:{type:Boolean,default:!1},enableContextMenu:{type:Boolean,default:!1},enableScroll:{type:Boolean,default:!1},enableKeys:{type:Boolean,default:!1},disableAutoHideCursor:{type:Boolean,default:!1}},data:function(){return{computedBounds:{width:0,height:0},player:null,interval:null,disposeContextMenu:null,showContextMenu:!1,showInformation:!1,buffering:!1,preventStatusUpdate:!1,informationContent:"",statusText:"",statusAnimationDuration:"0s",statusOpacity:0,statusTimeout:-1,volumeInput:1,dontWatchTime:!1,moveTimeout:-1,showBufferTimeout:-1,hideControls:!1,windowWidth:window.innerWidth,windowHeight:window.innerHeight,mouseOverControls:!1,icons:{},firstPlayLoaded:!1,resizeInterval:-1,fullscreen:!1,defaultPlaybackRate:1,playbackRate:1,duration:NaN,videoWidth:0,videoHeight:0,readyState:HTMLMediaElement.HAVE_NOTHING,volume:1,muted:!1,paused:!0,currentTime:0,controlsList:[],crossOrigin:"",defaultMuted:!1,ended:!1,error:null,networkState:HTMLMediaElement.NETWORK_EMPTY,seeking:!1,srcObject:null}},beforeDestroy:function(){var e,t,n;clearInterval(this.interval),clearInterval(this.resizeInterval),clearTimeout(this.statusTimeout),clearTimeout(this.moveTimeout),clearTimeout(this.showBufferTimeout),null===(e=this.player)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e),null===(n=this.disposeContextMenu)||void 0===n||n.call(this),window.removeEventListener("resize",this.windowResize),document.removeEventListener("fullscreenchange",this.changeFullscreen)},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=["pause","play_arrow","stop","volume_up","volume_down","volume_off","volume_off","info","info"],Promise.all(n.map(C.nativeIcon)).then((function(t){t.forEach((function(t,r){return e.icons[n[r]]=t}))})),e.init(),e.resizeInterval=setInterval((function(){e.windowResize()}),50),e.moveTimeout=setTimeout((function(){e.hideControls=!0}),1e3),e.windowResize(),window.addEventListener("resize",e.windowResize,!1),document.addEventListener("fullscreenchange",e.changeFullscreen,!1),e.disposeContextMenu=e.createContextMenu();case 9:case"end":return t.stop()}}),t)})))()},methods:{init:function(){var e=this;this.player=c["chimera"].createPlayer(),this.player.bindCanvas(this.$refs.canvas),this.player.on("play",(function(){e.paused=!1,e.$emit("play"),e.showStatusText("")})),this.player.on("pause",(function(){e.paused=!0,e.$emit("pause"),e.showStatusText("")})),this.player.on("stop",(function(){e.paused=!0,e.$emit("pause"),e.showStatusText("")})),this.player.on("mute",(function(){e.muted=!0,e.showStatusText("")})),this.player.on("unmute",(function(){e.muted=!1,e.showStatusText(" ".concat(Math.round(e.player.volume),"%"))})),this.player.on("volumeChange",(function(t){e.volume=t/100,e.$emit("volumechange",t/100),e.showStatusText("".concat(e.player.mute?"":""," ").concat(Math.round(t),"%"))})),this.player.input.on("rateChange",(function(t){e.playbackRate=t,e.$emit("ratechange",t),e.showStatusText(" ".concat(t.toFixed(2),"x"))})),this.player.on("seek",(function(){e.$emit("seeking"),e.$emit("seeked"),e.showStatusText("".concat(e.msToTime(e.player.time)," / ").concat(e.msToTime(e.player.duration)))})),this.player.on("load",(function(){e.videoResize(),e.readyState=HTMLMediaElement.HAVE_CURRENT_DATA,e.duration=e.player.duration/1e3,e.$emit("loadedmetadata"),e.$emit("loadeddata")})),this.player.on("time",(function(){var t=e.player.time/1e3;t!==e.currentTime&&(e.dontWatchTime=!0,e.currentTime=t)})),this.player.on("ended",(function(){e.loop?(e.currentTime=0,e.player.once("stop",(function(){e.player.play(),e.player.once("pause",e.player.play)}))):(e.$emit("ended"),e.ended=!0)})),this.player.on("durationChange",(function(t){e.$emit("durationchange",t/1e3),e.duration=t/1e3})),this.player.on("error",(function(t){e.error="VLC error"+t,e.$emit("stalled"),e.$emit("error",["VLC error",t])})),this.player.on("mediaChange",(function(){!0,!0;var t=function t(n){"play"!==n&&"pause"!==n||(e.player.off("stateChange",t),e.readyState=HTMLMediaElement.HAVE_FUTURE_DATA,e.$emit("canplay"),e.readyState=HTMLMediaElement.HAVE_ENOUGH_DATA,e.$emit("canplaythrough"),e.networkState=HTMLMediaElement.NETWORK_IDLE)};e.player.once("frameReady",(function(){e.autoplay||(e.player.mute=e.defaultMuted,e.player.pause(),e.player.once("pause",(function(){return e.preventStatusUpdate=!1})))})),e.player.on("stateChange",t)}));var t=this.player.state;this.player.on("stateChange",(function(n){console.log("new state",n),"buffering"!==t||"play"!==n&&"pause"!==n||e.$emit("playing"),t=n,"buffering"===n&&e.showBuffering()})),this.loadSrc()},showBuffering:function(){var e=this;this.$emit("waiting"),this.hideBuffering||(clearTimeout(this.showBufferTimeout),this.buffering=!0,this.showBufferTimeout=setTimeout((function(){e.buffering=!1}),300))},changeFullscreen:function(){var e=this;this.fullscreen=document.fullscreenElement===this.$refs.player,this.windowResize(),this.$nextTick((function(){return e.windowResize()}))},moveOverPlayer:function(e){var t=this;(e.movementX>0||e.movementY>0)&&(this.hideControls=!1,clearTimeout(this.moveTimeout),this.moveTimeout=setTimeout((function(){t.hideControls=!0}),1e3))},msToTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return C.msToTime(e,t)},showContext:function(){var e=this;this.enableContextMenu&&(this.showContextMenu=!0,setTimeout((function(){return e.showContextMenu=!1}),10))},createContextMenu:function(){var e=this;return l()({prepend:function(){return[{label:"Pause",accelerator:"Space",icon:e.icons["pause"],visible:e.showContextMenu&&e.player.playing,click:function(){e.player.pause()}},{label:"Play",accelerator:"Space",icon:e.icons["play_arrow"],visible:e.showContextMenu&&!e.player.playing,click:function(){""!==e.src&&e.player.play()}},{label:"Stop",accelerator:"MediaStop",icon:e.icons["stop"],visible:e.showContextMenu&&"Stopped"!==e.player.state,click:function(){e.player.stop()}}]},append:function(){return[{label:"Audio",visible:e.showContextMenu&&e.player.input.hasVout,enabled:e.player.input.hasVout,submenu:[{label:"Audio Track",enabled:e.player.audio.tracks.length>1,submenu:e.player.audio.tracks.map((function(t,n){return{label:t,type:"radio",checked:n===e.player.audio.track,click:function(){return e.player.audio.track=n}}}))},{label:"Stereo Mode",submenu:c["enums"].Channel.map((function(t,n){return{label:null!==t&&void 0!==t?t:"Channel ".concat(n),type:"radio",checked:t===e.player.audio.channel,click:function(){return e.player.audio.channel=t}}}))},{label:"Increase volume",accelerator:"=",icon:e.icons["volume_up"],visible:e.showContextMenu,enabled:e.player.volume<200,click:function(){return e.player.volume+=10}},{label:"Decrease volume",accelerator:"-",icon:e.icons["volume_down"],visible:e.showContextMenu,enabled:e.player.volume>0,click:function(){return e.player.volume-=10}},{label:"Mute",accelerator:"m",icon:e.icons["volume_off"],visible:e.showContextMenu&&!e.player.mute,click:function(){return e.player.mute=!0}},{label:"Unmute",accelerator:"m",icon:e.icons["volume_off"],visible:e.showContextMenu&&e.player.mute,click:function(){return e.player.mute=!1}}]},{label:"Video",visible:e.showContextMenu&&e.player.input.hasVout,enabled:"Stopped"!==e.player.state,submenu:[{label:"Video Track",enabled:e.player.video.tracks.length>1,submenu:e.player.video.tracks.map((function(t,n){return{label:t.name,type:"radio",checked:n===e.player.video.track,click:function(){return e.player.video.track=n}}}))},{label:"Fullscreen",type:"checkbox",enabled:!e.controlsList.includes("nofullscreen"),checked:e.fullscreen,click:function(){return e.toggleFullscreen()}},{label:"Deinterlace",submenu:c["enums"].DeinterlaceMode.map((function(t){return{label:t[0].toUpperCase()+t.substr(1),type:"radio",checked:t===e.player.video.deinterlace.mode,click:function(){return e.player.video.deinterlace.mode=t}}}))}]},{label:"Subtitles",visible:e.showContextMenu&&e.player.input.hasVout,enabled:"Stopped"!==e.player.state,submenu:[{label:"Sub Track",enabled:e.player.subtitles.tracks.length>0,submenu:e.player.subtitles.tracks.map((function(t,n){return{label:t,type:"radio",checked:n===e.player.subtitles.track,click:function(){return e.player.subtitles.track=n}}}))},{label:"Add subtitles file...",click:function(){return e.addSubtitles()}}]},{label:"Playback",visible:e.showContextMenu&&e.player.input.hasVout,enabled:"Stopped"!==e.player.state,submenu:[{label:"Speed",submenu:[["2x",function(){return e.player.input.rate=2}],["1.5x",function(){return e.player.input.rate=1.5}],["1x",function(){return e.player.input.rate=1}],["0.5x",function(){return e.player.input.rate=.5}],["0.2x",function(){return e.player.input.rate=.2}]].map((function(e){var t=Object(o["a"])(e,2),n=t[0],r=t[1];return{label:n,click:r}}))},{label:"Jump forward (10s)",accelerator:"Right",click:function(){return e.player.time=Math.min(e.player.time+1e4,e.player.duration)}},{label:"Jump backwards (10s)",accelerator:"Left",click:function(){return e.player.time=Math.max(e.player.time-1e4,0)}}]},{label:"Information",visible:e.showContextMenu&&e.player.input.hasVout,submenu:[{label:"Media information",icon:e.icons["info"],click:function(){e.showInformation=!0;var t=e.player.playlist.items[0];if(void 0===t)e.informationContent="No info";else{for(var n="",r=["title","mrl","duration","artist","genre","copyright","album","trackNumber","description","rating","date","URL","language","nowPlaying","publisher","encodedBy","artworkURL","trackID"],i=0,a=r;i<a.length;i++){var o=a[i],s=t[o];"duration"===o&&(s=e.msToTime(s)),n+="<div><b>".concat(o,": </b>").concat(s,"</div>")}e.informationContent=n}}}]}]}})},handleScroll:function(e){this.enableScroll&&(this.player.volume-=e.deltaY/20)},handleKey:function(e){if(this.enableKeys)switch(!0){case" "===e.key:this.player.togglePause();break;case"ArrowRight"===e.key:this.player.time+=1e4;break;case"ArrowLeft"===e.key:this.player.time-=1e4;break;case"ArrowUp"===e.key:this.player.volume+=5;break;case"ArrowDown"===e.key:this.player.volume-=5;break;case"="===e.key:var t=1.25*this.player.input.rate;this.player.input.rate=t>.5?Math.round(4*t)/4:t;break;case"-"===e.key:var n=this.player.input.rate/1.25;this.player.input.rate=n>.5?Math.round(4*n)/4:n;break;case"m"===e.key:this.player.mute=!this.player.mute;break}},addSubtitles:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.promptSubtitleFile();case 2:n=t.sent,r=n.filePath,i=n.canceled,i||e.player.subtitles.load(r);case 6:case"end":return t.stop()}}),t)})))()},promptSubtitleFile:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n("bdb9").remote.dialog,e.next=3,t.showOpenDialog({title:"Add subtitles from file",buttonLabel:"Add subtitles",filters:[{name:"Subtitle files",extensions:["cdg","idx","srt","sub","utf","ass","ssa","aqt","jss","psb","rt","sami","smi","txt","smil","stl","usf","dks","pjs","mpl2","mks","vtt","tt","ttml","dfxp","scc"]},{name:"All files",extensions:["*"]}],properties:["openFile"]});case 3:return r=e.sent,i=r.canceled,a=r.filePaths,e.abrupt("return",{canceled:i,filePath:a[0]});case 7:case"end":return e.stop()}}),e)})))()},showStatusText:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;this.enableStatus&&!this.preventStatusUpdate&&(clearTimeout(this.statusTimeout),this.statusAnimationDuration="0.1s",this.statusOpacity=1,this.statusText=e,this.statusTimeout=setTimeout((function(){t.statusOpacity=0,t.statusAnimationDuration="0.4s"}),n))},loadSrc:function(){var e=this;this.player.stop(),this.preventStatusUpdate=!0,this.duration=NaN,this.ended=!1,this.readyState=HTMLMediaElement.HAVE_NOTHING,this.networkState=HTMLMediaElement.NETWORK_LOADING,this.videoWidth=0,this.videoHeight=0,this.currentTime=0,this.error=null,this.firstPlayLoaded=!1,""===this.src&&(this.networkState=HTMLMediaElement.NETWORK_NO_SOURCE),this.player.playUrl(this.src),this.$on("play",(function(){e.firstPlayLoaded=!0})),this.$emit("loadstart")},videoResize:function(){this.videoWidth=this.player.video.width,this.videoHeight=this.player.video.height},windowResize:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight;var e=this.$refs.player;this.computedBounds={width:e.offsetWidth,height:e.offsetHeight,left:e.offsetLeft,top:e.offsetTop}},toggleFullscreen:function(){if(this.fullscreen)document.exitFullscreen();else{var e=this.$refs.player;e.requestFullscreen()}},addTextTrack:function(e){this.player.subtitles.load(e)},captureStream:function(){console.warn("Not implemented")},canPlayType:function(){return"probably"},fastSeek:function(e){this.player.time=1e3*e},load:function(){this.readyState<HTMLMediaElement.HAVE_FUTURE_DATA?this.$emit("abort"):this.$emit("emptied"),this.player.destroy(),this.init()},play:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.src){t.next=2;break}return t.abrupt("return");case 2:if(e.player.play(),"Playing"!==e.player.state){t.next=5;break}return t.abrupt("return");case 5:return t.abrupt("return",new Promise((function(t){return e.player.once("play",t)})));case 6:case"end":return t.stop()}}),t)})))()},pause:function(){this.player.pause()},seekToNextFrame:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.player.time+=1e3*e/this.player.input.fps}},computed:{mainStyle:function(){var e={"--width":"".concat(this.bounds.width,"px"),"--height":"".concat(this.bounds.height,"px"),cursor:!this.hideControls||this.mouseOverControls||this.disableAutoHideCursor||this.paused?"auto":"none"};return"auto"===this.height&&(e.height=this.bounds.height+"px"),0!==this.height&&(e.height=this.bounds.height+"px"),"auto"===this.width&&(e.width=this.bounds.width+"px"),0!==this.width&&(e.width=this.bounds.width+"px"),e},bounds:function(){return Object(a["a"])(Object(a["a"])({},this.computedBounds),{},{width:"auto"===this.width?this.canvasBounds.width:0!==this.width?+this.width:Math.max(this.computedBounds.width,this.canvasBounds.width),height:"auto"===this.height?this.canvasBounds.height:0!==this.height?+this.height:Math.max(this.computedBounds.height,this.canvasBounds.height)})},canvasBounds:function(){var e,t;if("auto"===this.height&&"auto"===this.width)return{width:this.videoWidth,height:this.videoHeight};if("auto"===this.height)e=this.computedBounds.width,t=e/this.aspectRatio;else if("auto"===this.width)t=this.computedBounds.height,e=t*this.aspectRatio;else{var n=this.computedBounds.width/this.computedBounds.height;this.aspectRatio>n?(e=this.computedBounds.width,t=e/this.aspectRatio):(t=this.computedBounds.height,e=t*this.aspectRatio)}return{width:e,height:t}},currentSrc:function(){return this.src},audioTracks:{cache:!1,get:function(){var e=this.player.audio;return e.tracks.slice(1).map((function(t,n){return{get enabled(){return e.track===n+1},set enabled(t){t?e.track=n+1:e.track===n+1&&(e.track=0)},id:n,kind:0===n?"main":"alternative",label:t,language:"",sourceBuffer:null}}))}},textTracks:{cache:!1,get:function(){var e=this.player.subtitles;return e.tracks.slice(1).map((function(t,n){return{get enabled(){return e.track===n+1},set enabled(t){t?e.track=n+1:e.track===n+1&&(e.track=0)},id:n,kind:0===n?"main":"alternative",label:t,language:"",sourceBuffer:null}}))}},videoTracks:{cache:!1,get:function(){var e=this.player.video;return e.tracks.slice(1).map((function(t,n){return{get selected(){return e.track===n+1},set selected(t){t?e.track=n+1:e.track===n+1&&(e.track=0)},id:n,kind:0===n?"main":"alternative",label:t.name,size:{width:t.width,height:t.height},language:"",sourceBuffer:null}}))}},buffered:{cache:!1,get:function(){var e=this;return{length:1,start:function(){return 0},end:function(){return e.duration}}}},seekable:function(){return this.readyState>0},position:function(){return this.duration&&0!==this.duration?this.currentTime/this.duration:0},aspectRatio:function(){return 0!==this.videoWidth&&0!==this.videoHeight?this.videoWidth/this.videoHeight:16/9},userWidth:function(){return 0===this.width?void 0:+this.width},userHeight:function(){return 0===this.height?void 0:+this.height}},watch:{muted:function(e,t){console.log("muted change",e,t,"this.muted",this.muted,"this.player.mute",this.player.mute),e!==t&&(this.player.mute=this.muted)},currentTime:function(e,t){e!==t&&this.$emit("timeupdate",e),e===t||this.dontWatchTime?this.dontWatchTime&&(this.dontWatchTime=!1):this.player.time=1e3*this.currentTime},playbackRate:function(e,t){e!==t&&(this.player.input.rate=this.playbackRate)},volume:function(e,t){e!==t&&(this.player.volume=100*this.volume)},width:function(){var e=this;this.$nextTick((function(){return e.windowResize()}))},height:function(){var e=this;this.$nextTick((function(){return e.windowResize()}))},videoWidth:function(){var e=this;this.$nextTick((function(){return e.windowResize()}))},videoHeight:function(){var e=this;this.$nextTick((function(){return e.windowResize()}))},src:function(){this.loadSrc()}}},S=P,I=(n("68de"),Object(f["a"])(S,r,i,!1,null,"1864d07f",null));t["default"]=I.exports},"5a1b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.item?n("span",[n("router-link",{attrs:{title:e.item.parentTitle,to:"/season/"+e.item.parentRatingKey,"no-style":""}},[e._v("S"+e._s(e.item.parentIndex))]),n("span",[e._v("  ")]),n("router-link",{attrs:{title:e.item.title,to:"/episode/"+e.item.ratingKey,"no-style":""}},[e._v("E"+e._s(e.item.index))])],1):e._e()},i=[],a={name:"EpisodeLink",props:{item:{type:Object,default:null}}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,"4e463ed1",null);t["a"]=c.exports},"5e4a":function(e,t,n){"use strict";n("4e99")},6:function(e,t){},"68de":function(e,t,n){"use strict";n("8158")},6989:function(e,t,n){"use strict";n("d9ad")},7:function(e,t){},"712c":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.item&&!e.deletedKeys[e.item.ratingKey]?n("v-list-item",{class:{active:e.isActive}},[isNaN(e.number)&&null===e.playlist?e._e():n("div",{staticClass:"before-square"},[isNaN(e.number)?e._e():n("div",{staticClass:"item-number"},[n("span",[e._v(e._s(e.number))])]),null!==e.playlist?n("div",{staticClass:"arrange-buttons"},[0!==e.playlistItems.indexOf(e.item)?n("v-btn",{attrs:{small:"",icon:""},on:{click:function(t){return e.move(-1)}}},[n("v-icon",[e._v("mdi-chevron-up")])],1):n("v-spacer"),e.playlistItems.indexOf(e.item)!==e.playlistItems.length-1?n("v-btn",{attrs:{small:"",icon:""},on:{click:function(t){return e.move(1)}}},[n("v-icon",[e._v("mdi-chevron-down")])],1):e._e()],1):e._e()]),n("div",{staticClass:"item-img mr-4",style:{"--imgWidth":e.imgWidth+"px","--imgHeight":e.imgHeight+"px"}},[e.isGenre?n("v-btn",{attrs:{outlined:"",icon:""}},[n("v-icon",[e._v("mdi-drama-masks")])],1):n("plex-image",{attrs:{rounding:e.itemRounding,src:e.itemThumb}}),n("router-link",{attrs:{to:e.to}},[n("div",{staticClass:"item-img-overlay"},[e.canPlay?n("play-fab",{attrs:{item:e.item,"x-small":"",playlist:e.playlist}}):e._e()],1)])],1),n("v-list-item-content",["episode"===e.itemType?n("div",[n("router-link",{attrs:{"no-style":"",to:"/show/"+e.item.grandparentRatingKey}},[n("v-list-item-title",{attrs:{title:e.item.grandparentTitle}},[e._v(e._s(e.item.grandparentTitle))])],1),n("router-link",{attrs:{"no-style":"",to:e.to}},[n("v-list-item-subtitle",{attrs:{title:e.item.title}},[e._v(e._s(e.item.title))])],1),n("v-list-item-subtitle",[n("episode-link",{staticClass:"grey-subtitle",attrs:{item:e.item}})],1)],1):"actor"===e.itemType?n("div",[n("router-link",{attrs:{"no-style":"",to:e.to}},[n("v-list-item-title",{attrs:{title:e.itemTitle}},[e._v(e._s(e.itemTitle))])],1),n("v-list-item-subtitle",{attrs:{title:e.item.reasonTitle}},[e._v(e._s(e.item.reasonTitle))])],1):n("div",[n("router-link",{attrs:{"no-style":"",to:e.to}},[n("v-list-item-title",{attrs:{title:e.itemTitle}},[e._v(e._s(e.itemTitle))])],1),n("router-link",{attrs:{"no-style":"",to:"/library/"+e.item.librarySectionID+"/all?filter=year~"+e.item.year}},[n("v-list-item-subtitle",{attrs:{title:e.item.year}},[e._v(e._s(e.item.year))])],1)],1)]),e.showDuration?n("div",{staticClass:"item-duration ml-3"},[e._v(" "+e._s(e.duration)+" ")]):e._e(),n("div",{staticClass:"ml-3"}),n("media-item-menu",{attrs:{playlist:e.playlist,plain:"",small:"",item:e.item}})],1):e._e()},i=[],a=(n("99af"),n("4de4"),n("caad"),n("c975"),n("a434"),n("a9e3"),n("ac1f"),n("2532"),n("5319"),n("5530")),o=n("0aeb"),s=n("5a1b"),c=n("a123"),u=n("2dac"),l=n("2f62"),d=n("8be2"),m={name:"MediaListItem",components:{PlayFab:d["a"],MediaItemMenu:u["a"],EpisodeLink:s["a"],PlexImage:o["a"]},props:{item:{type:Object,default:null},size:{type:Number,default:130},measureVertical:{type:Boolean,default:!1},type:{type:String,default:null},showContext:{type:Boolean,default:!1},number:{type:Number,default:NaN},showDuration:{type:Boolean,default:!1},playlist:{type:Object,default:null},playlistItems:{type:Array,default:function(){return[]}}},methods:Object(a["a"])({move:function(e){var t,n=this.playlistItems.indexOf(this.item),r=n+e;if(!(r<0||r>=this.playlistItems.length)){var i=void 0;i=null===(t=this.playlistItems[n-1+e])||void 0===t?void 0:t.playlistItemID,this.movePlaylistItem({playlistKey:this.playlist.ratingKey,playlistItemID:this.item.playlistItemID,afterItemId:i}),this.playlistItems.splice(n,1),this.playlistItems.splice(r,0,this.item)}}},Object(l["b"])(["movePlaylistItem"])),computed:Object(a["a"])(Object(a["a"])({canPlay:function(){return this.itemCanPlay(this.item)},duration:function(){return c["a"].niceTime(new Date(this.item.duration))},isGenre:function(){var e,t;return null===(e=this.item)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.includes("genre")},itemTitle:function(){var e;return null!==(e={actor:this.item.tag}[this.itemType])&&void 0!==e?e:this.item.title},to:function(){var e,t,n,r=this;return null!==(e=null===(t=(n={actor:function(){return"/library/".concat(r.item.librarySectionID,"/all?filter=").concat(r.item.filter.replace("=","~"))}})[this.itemType])||void 0===t?void 0:t.call(n))&&void 0!==e?e:"/".concat(this.itemType,"/").concat(this.item.ratingKey)},itemRounding:function(){var e;return null!==(e={actor:"50%"}[this.itemType])&&void 0!==e?e:"0.3vw"},isActive:function(){return this.itemIsActive(this.item)},itemThumb:function(){var e;return e="episode"===this.itemType?this.item.grandparentThumb:"playlist"===this.itemType?this.item.composite:this.item.thumb,""!==e&&void 0!==e||(e=this.notFoundImg(this.item)),e},itemType:function(){var e,t;return null!==(e=null!==(t=this.type)&&void 0!==t?t:"tag"===this.item.type?"actor":this.item.type)&&void 0!==e?e:"show"},imgWidth:function(){var e;return null!==(e={actor:45,playlist:45}[this.itemType])&&void 0!==e?e:40},imgHeight:function(){var e;return null!==(e={actor:45,playlist:45}[this.itemType])&&void 0!==e?e:60}},Object(l["c"])(["notFoundImg","itemCanPlay","itemIsActive"])),Object(l["d"])({deletedKeys:function(e){return e.plex.deletedKeys}}))},h=m,p=(n("6989"),n("2877")),f=n("6544"),v=n.n(f),y=n("8336"),g=n("132d"),b=n("da13"),w=n("5d23"),k=n("2fa4"),x=Object(p["a"])(h,r,i,!1,null,"30f3145b",null);t["a"]=x.exports;v()(x,{VBtn:y["a"],VIcon:g["a"],VListItem:b["a"],VListItemContent:w["a"],VListItemSubtitle:w["b"],VListItemTitle:w["c"],VSpacer:k["a"]})},7295:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"blur-card",style:{backdropFilter:"blur(60px) brightness("+(e.$vuetify.theme.dark?"70":"130")+"%) saturate(130%)",boxShadow:"0 15px 40px 0 rgba("+(e.$vuetify.theme.dark?"100,100,100":"0,0,0")+", 0.3)",backgroundImage:"linear-gradient(transparent, rgba("+(e.$vuetify.theme.dark?"50,50,50":"255,255,255")+", 0.4))"}},[e._t("default")],2)},i=[],a={name:"BlurCard"},o=a,s=(n("4b7f"),n("2877")),c=Object(s["a"])(o,r,i,!1,null,"5cb0edec",null);t["a"]=c.exports},"7cf7":function(e,t,n){},"7e37":function(e,t,n){"use strict";n("81fa")},8:function(e,t){},8101:function(e,t,n){"use strict";n("f8fb")},8158:function(e,t,n){},"81fa":function(e,t,n){},"823f":function(e,t,n){"use strict";n("fb49")},"85ec":function(e,t,n){},"8b70":function(e,t,n){},"8be2":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.item?n("v-btn",{attrs:{loading:e.isLoading,rounded:e.text,elevation:e.text?0:"",small:"","x-small":e.xSmall,fab:!e.text,color:"primary"},on:{click:function(t){return t.preventDefault(),e.togglePlay(t)}}},[e.isPlaying?n("v-icon",{class:{"mr-2":e.text}},[e._v("mdi-pause")]):n("v-icon",{class:{"mr-2":e.text}},[e._v("mdi-play")]),e.text&&e.isPlaying?n("span",[e._v("Pause")]):e.text?n("span",[e._v("Play")]):e._e()],1):e._e()},i=[],a=n("5530"),o=n("2f62"),s={name:"PlayFab",props:{item:{type:Object,default:null},text:{type:Boolean,default:!1},xSmall:{type:Boolean,default:!1},playlist:{type:Object,default:null}},methods:Object(a["a"])({togglePlay:function(){this.isActive?this.isPlaying?this.$store.commit("playing",!1):this.$store.commit("playing",!0):this.playItem({item:this.item,containingPlaylist:this.playlist})}},Object(o["b"])(["playItem"])),computed:Object(a["a"])(Object(a["a"])({isLoading:function(){return this.isActive&&(this.srcLoading||this.queueLoading)},isPlaying:function(){return this.isActive&&this.playing},isActive:function(){return this.itemIsActive(this.item)}},Object(o["c"])(["itemIsActive"])),Object(o["d"])({srcLoading:function(e){return e.media.srcLoading},playing:function(e){return e.media.playing},queueLoading:function(e){return e.media.context.queueLoading}}))},c=s,u=n("2877"),l=n("6544"),d=n.n(l),m=n("8336"),h=n("132d"),p=Object(u["a"])(c,r,i,!1,null,"b21bf7e0",null);t["a"]=p.exports;d()(p,{VBtn:m["a"],VIcon:h["a"]})},"8bed":function(e,t,n){},"8dec":function(e,t,n){"use strict";n("d8ee")},9:function(e,t){},"907e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"show-value"},[n("v-divider",{staticClass:"mt-2 mb-2"}),n("div",{staticClass:"movie-sub-header mt-2"},[e.item.year?n("router-link",{staticClass:"ml-3 mr-5",attrs:{"no-style":"",to:"/library/"+e.item.librarySectionID+"/?filter=year~"+e.item.year}},[e._v(" "+e._s(e.item.year)+" ")]):e._e(),e.item.duration?n("span",{staticClass:"ml-3 mr-5"},[e._v(e._s(e.duration))]):e._e(),e.item.contentRating?n("v-chip",{staticClass:"ml-3 mr-5",attrs:{to:"/library/"+e.item.librarySectionID+"/?filter=contentRating~"+e.item.contentRating,small:""}},[e._v(e._s(e.item.contentRating)+" ")]):e._e(),e.item.rating&&!e.hideRatings?n("div",{staticClass:"movie-sub-header",attrs:{title:"Critic rating"}},[n("span",{staticClass:"ml-3 mr-1"},[e._v(e._s(10*e.item.rating)+"% ")]),n("div",{staticClass:"tomato mr-5"})]):e._e(),e.item.audienceRating&&!e.hideRatings?n("div",{staticClass:"movie-sub-header",attrs:{title:"Audience rating"}},[n("span",{staticClass:"mr-1"},[e._v(e._s(10*e.item.audienceRating)+"% ")]),n("div",{staticClass:"popcorn mr-5"})]):e._e()],1),n("v-divider",{staticClass:"mt-2 mb-2"})],1)},i=[],a=n("a123"),o={name:"DataHeader",props:{item:{type:Object,default:null},hideRatings:{type:Boolean,default:!1}},computed:{duration:function(){return a["a"].niceTime(new Date(this.item.duration))}}},s=o,c=(n("8dec"),n("2877")),u=n("6544"),l=n.n(u),d=n("cc20"),m=n("ce7e"),h=Object(c["a"])(s,r,i,!1,null,"4fedd6b0",null);t["a"]=h.exports;l()(h,{VChip:d["a"],VDivider:m["a"]})},"935c":function(e,t,n){},a123:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n("99af"),n("d81d"),n("fb6a"),n("6b93"),n("b680"),n("d3b7"),n("ac1f"),n("25f0"),n("4d90"),n("5319"),n("2ca0");var r=n("3835"),i=(n("96cf"),n("1da1")),a=n("d4ec"),o=n("bee2"),s=n("edfe"),c=["January","February","March","April","May","June","July","August","September","October","November","December"],u=window&&void 0!==window.process&&void 0!==window.process.type,l=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,null,[{key:"msToTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(isNaN(e))return".00";var n=new Date(e).toISOString().substr(11,t?11:8).replace(/^0+/,"");return n=n.startsWith(":")?n.substr(1):n,n.startsWith("00")?n.substr(1):n}},{key:"niceTime",value:function(e){var t=e.getHours()-1;return t>0?"".concat(t,"hr ").concat(e.getMinutes(),"min"):"".concat(e.getMinutes(),"min")}},{key:"niceDate",value:function(e){var t=e.getDate(),n=c[e.getMonth()],r=e.getFullYear();return"".concat(t," ").concat(n.substr(0,3),", ").concat(r)}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}},{key:"loadImage",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()}));case 2:return n=e.sent,e.next=5,new Promise((function(e){var t=new FileReader;t.onload=function(){return e(t.result)},t.readAsDataURL(n)}));case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new Image;n.src=r,n.onload=function(){return e(n)},n.onerror=t})));case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCachedBackgrounds",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["a"])("bgsInCache");case 2:if(t.t1=n=t.sent,t.t0=null!==t.t1,!t.t0){t.next=6;break}t.t0=void 0!==n;case 6:if(!t.t0){t.next=10;break}t.t2=n,t.next=11;break;case 10:t.t2=0;case 11:if(r=t.t2,e.cacheBackground(r).then(),0!==r){t.next=15;break}return t.abrupt("return",null);case 15:return t.next=17,Object(s["a"])("background"+(r-1));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()},{key:"cacheBackground",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var r,i,a,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,r=[],i=[];case 2:if(0!==r.length&&0!==i.length){t.next=10;break}return a=Math.random()>.5?"picsum":"unsplash",t.next=6,e.getBackground(480,360,a);case 6:o=t.sent,o.dark?r.push(o):i.push(o),t.next=2;break;case 10:return c={dark:r[0].url,light:i[0].url},t.next=13,Object(s["b"])("background"+n,c);case 13:return t.next=15,Object(s["b"])("bgsInCache",n+1);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](0),console.warn("cache bg error",t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));function n(e){return t.apply(this,arguments)}return n}()},{key:"getBackground",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var n,i,a,o,s,c,u,l,d,m,h,p,f,v,y,g,b,w,k,x,C,T,R,_,O,P,S,I,j,M,$,L,D,W,E=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=E.length>0&&void 0!==E[0]?E[0]:480,i=E.length>1&&void 0!==E[1]?E[1]:360,a=E.length>2&&void 0!==E[2]?E[2]:"picsum",o="picsum"===a?"https://picsum.photos/".concat(n,"/").concat(i):"https://source.unsplash.com/random/".concat(n,"x").concat(i),t.next=6,e.loadImage(o);case 6:for(s=t.sent,c=document.createElement("canvas"),u=c.getContext("2d"),c.width=s.width,c.height=s.height,u.drawImage(s,0,0),l=u.getImageData(0,0,s.width,s.height),d=0,m=0;m<l.data.length;m+=4)h=l.data.slice(m,m+4),p=Object(r["a"])(h,4),f=p[0],v=p[1],y=p[2],p[3],g=e.rgbToHsl(f,v,y),b=Object(r["a"])(g,3),b[0],b[1],w=b[2],d+=w;for(k=d/(l.data.length/4),x=k<.4,C=x?.1:.9,T=0;T<l.data.length;T+=4)R=l.data.slice(T,T+4),_=Object(r["a"])(R,4),O=_[0],P=_[1],S=_[2],_[3],I=e.rgbToHsl(O,P,S),j=Object(r["a"])(I,3),M=j[0],$=j[1],L=j[2],L*=Math.min(1,Math.max(0,C/k)),D=e.hslToRgb(M,$,L),W=Object(r["a"])(D,3),O=W[0],P=W[1],S=W[2],l.data[T]=O,l.data[T+1]=P,l.data[T+2]=S;return u.putImageData(l,0,0),t.abrupt("return",{url:c.toDataURL(),dark:x});case 21:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()},{key:"hslToRgb",value:function(e,t,n){var r,i,a;if(0===t)r=i=a=n;else{var o=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;r=o(c,s,e+1/3),i=o(c,s,e),a=o(c,s,e-1/3)}return[Math.round(255*r),Math.round(255*i),Math.round(255*a)]}},{key:"rgbToHsl",value:function(e,t,n){e/=255,t/=255,n/=255;var r,i,a=Math.max(e,t,n),o=Math.min(e,t,n),s=(a+o)/2;if(a===o)r=i=0;else{var c=a-o;switch(i=s>.5?c/(2-a-o):c/(a+o),a){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4;break}r/=6}return[r,i,s]}},{key:"isLegible",value:function(t,n){console.log("Is",t,"legible on theme",n);var r=n.themes[n.isDark?"dark":"light"],i=r.navBackground,a=r.foreground,o=e.hexContrast(t,i),s=e.hexContrast(t,a);return console.log({contrastOnBg:o,contrastOnFg:s}),{bgLegible:o>3,fgLegible:s>2}}},{key:"hexToRgb",value:function(e){"#"===e[0]&&(e=e.slice(1));var t=e.slice(0,2),n=e.slice(2,4),r=e.slice(4,6);return[parseInt(t,16),parseInt(n,16),parseInt(r,16)]}},{key:"hexContrast",value:function(t,n){return e.contrast(e.hexToRgb(t),e.hexToRgb(n))}},{key:"luminance",value:function(e,t,n){var r=[e,t,n].map((function(e){return e/=255,e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}));return.2126*r[0]+.7152*r[1]+.0722*r[2]}},{key:"contrast",value:function(t,n){var r=e.luminance(t[0],t[1],t[2]),i=e.luminance(n[0],n[1],n[2]),a=Math.max(r,i),o=Math.min(r,i);return(a+.05)/(o+.05)}},{key:"secondsToHms",value:function(e){if(isNaN(e)||void 0===e)return"0:00";e=Math.round(e);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;return t=t.toString(),n=n.toString(),r=r.toString(),"0"!==t&&(n=n.padStart(2,"0"),r=r.padStart(2,"0")),r=r.padStart(2,"0"),"0"===t?"".concat(n,":").concat(r):"".concat(t,":").concat(n,":").concat(r)}},{key:"shuffleArray",value:function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e}},{key:"bytesToReadable",value:function(e){var t=Math.log10(e);return t<2?e+" B":t<5?(e/1024).toFixed(2)+" kB":t<8?(e/Math.pow(1024,2)).toFixed(2)+" MB":t<12?(e/Math.pow(1024,3)).toFixed(2)+" GB":t<15?(e/Math.pow(1024,4)).toFixed(2)+" TB":"very bige bytes"}},{key:"isElectron",get:function(){return u}}]),e}()},a846:function(e,t,n){"use strict";n("b3de")},a892:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item-row"},[n("div",{staticClass:"control-row"},[e.to?n("router-link",{attrs:{"no-style":"",to:e.to}},[n("h3",{staticClass:"control-title"},[e._v(e._s(e.title))])]):n("h3",{staticClass:"control-title"},[e._v(e._s(e.title))]),e.itemGroups.length>e.itemsPerPage?n("div",{staticClass:"right-control"},[n("span",{staticClass:"scroll-progress mr-2"},[e._v(" "+e._s(e.inView*e.rows+1)+" / "+e._s(e.items.length)+" ")]),n("v-btn",{staticClass:"mr-2",attrs:{disabled:!e.contentLeft,icon:"",plain:""},on:{click:function(t){return e.scrollRow(-1)},dblclick:function(t){return e.scrollRow(-5)}}},[n("v-icon",[e._v("mdi-chevron-left")])],1),n("v-btn",{attrs:{disabled:!e.contentRight,icon:"",plain:""},on:{click:function(t){return e.scrollRow(1)},dblclick:function(t){return e.scrollRow(5)}}},[n("v-icon",[e._v("mdi-chevron-right")])],1)],1):e._e()],1),n("div",{ref:"container",staticClass:"item-container",style:{maskImage:"linear-gradient(to right, rgba(0, 0, 0, "+(e.contentLeft?0:1)+") 0%, rgba(0, 0, 0, 1) 5%),\nlinear-gradient(to left, rgba(0, 0, 0, "+(e.contentRight?0:1)+") 0%, rgba(0, 0, 0, 1) 5%)"}},e._l(e.itemGroups,(function(t){return n("div",{ref:"columns",refInFor:!0,staticClass:"column"},e._l(t,(function(t){return n("media-item",{key:t.ratingKey,staticClass:"single-item",attrs:{"measure-vertical":e.measureVertical,size:e.size,type:e.type,"section-key":e.sectionKey,"sort-prop":e.sortProp,"vertical-episode":e.verticalEpisode,"horizontal-movie":e.horizontalMovie,"show-context":e.showContext,item:t}})})),1)})),0)])},i=[],a=(n("fb6a"),n("a9e3"),n("cd71")),o={name:"ItemRow",components:{MediaItem:a["a"]},props:{title:{type:String,default:""},items:{type:Array,default:function(){return[]}},rows:{type:Number,default:1},size:{type:Number,default:130},type:{type:String,default:null},to:{type:String,default:""},measureVertical:{type:Boolean,default:!1},sortProp:{type:String,default:null},showContext:{type:Boolean,default:!1},verticalEpisode:{type:Boolean,default:!1},horizontalMovie:{type:Boolean,default:!1},sectionKey:{type:Number,default:NaN}},data:function(){return{scrollWidth:0,scrollLeft:0,offsetWidth:0,resizeInterval:-1}},beforeDestroy:function(){this.$refs.container.removeEventListener("scroll",this.scrollListener),window.removeEventListener("resize",this.resizeListener),clearInterval(this.resizeInterval)},mounted:function(){var e=this;window.addEventListener("resize",this.resizeListener,!1),this.$refs.container.addEventListener("scroll",this.scrollListener,!1),this.resizeInterval=setInterval((function(){return e.resizeListener()}),1e3/3),this.resizeListener(),this.scrollListener()},methods:{resizeListener:function(){var e,t,n,r;this.scrollWidth=null!==(e=null===(t=this.$refs.container)||void 0===t?void 0:t.scrollWidth)&&void 0!==e?e:0,this.offsetWidth=null!==(n=null===(r=this.$refs.container)||void 0===r?void 0:r.offsetWidth)&&void 0!==n?n:0},scrollListener:function(){var e,t;this.scrollLeft=null!==(e=null===(t=this.$refs.container)||void 0===t?void 0:t.scrollLeft)&&void 0!==e?e:0},scrollRow:function(e){this.$refs.container.scrollTo({top:0,left:this.scrollLeft+(this.offsetWidth-this.size)*e,behavior:"smooth"})}},computed:{inView:function(){return Math.floor((this.scrollLeft+this.offsetWidth)/(this.size+30))},minIndex:function(){return Math.floor(this.itemsPerPage)-1},itemsPerPage:function(){return this.offsetWidth/(this.size+30)},contentLeft:function(){return this.scrollLeft>0},contentRight:function(){return this.scrollWidth-(this.scrollLeft+this.offsetWidth)},itemGroups:function(){for(var e=[],t=0;t<this.items.length;t+=this.rows)e.push(this.items.slice(t,t+this.rows));return e}}},s=o,c=(n("c54d"),n("2877")),u=n("6544"),l=n.n(u),d=n("8336"),m=n("132d"),h=Object(c["a"])(s,r,i,!1,null,"aeffba64",null);t["a"]=h.exports;l()(h,{VBtn:d["a"],VIcon:m["a"]})},b3de:function(e,t,n){},bf8a:function(e,t,n){"use strict";n.r(t);n("a15b"),n("d3b7");var r=n("8468"),i=(n("96cf"),n("1da1")),a=n("bdb9"),o=n("df7c"),s=n.n(o),c=n("9490"),u=n.n(c),l=window.require("node-fetch"),d=window.require("express");t["default"]={state:{httpServer:null,type:"electron",playingIcons:[],pausedIcons:[],port:29672},mutations:{httpServer:function(e,t){return e.httpServer=t},playIcons:function(e,t){var n=t.playIcon,r=t.pauseIcon,i=t.prevIcon,a=t.nextIcon;e.playingIcons=[i,r,a],e.pausedIcons=[i,n,a]}},getters:{betterFetch:function(){return function(){return l}}},actions:{initializePlatform:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,i,a,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.state,n=e.commit,r=e.dispatch,e.getters,e.rootState,i={tooltip:"Play",icon:s.a.join(__static,"/img/playicon.png"),click:function(){return r("play")}},a={tooltip:"Play",icon:s.a.join(__static,"/img/pauseicon.png"),click:function(){return r("pause")}},o={tooltip:"Previous Song",icon:s.a.join(__static,"/img/previcon.png"),click:function(){return r("skip",-1)}},c={tooltip:"Next Song",icon:s.a.join(__static,"/img/nexticon.png"),click:function(){return r("skip",1)}},n("playIcons",{playIcon:i,pauseIcon:a,prevIcon:o,nextIcon:c});case 6:case"end":return t.stop()}}),t)})))()},setPlatformPlaying:function(e,t){var n=e.state,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=a["remote"].getCurrentWindow();return i.setThumbarButtons(r?t?n.playingIcons:n.pausedIcons:[])},openDevTools:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(r["a"])(e),a["remote"].getCurrentWindow().openDevTools();case 2:case"end":return t.stop()}}),t)})))()},closeWindow:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(r["a"])(e),a["remote"].getCurrentWindow().close();case 2:case"end":return t.stop()}}),t)})))()},minimizeWindow:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(r["a"])(e),a["remote"].getCurrentWindow().minimize();case 2:case"end":return t.stop()}}),t)})))()},resetPlexLogin:function(e){var t=e.state,n=e.commit;t.server&&(t.server.close(),n("server",null))},getRedirectUrl:function(e){var t=e.state;return"http://localhost:".concat(t.port)},goToUrl:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,o,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,o=e.commit,n.next=3,a["shell"].openExternal(t);case 3:return null!==r.httpServer&&r.httpServer.close(),s=d(),c=u.a.createServer(s),n.abrupt("return",new Promise((function(e){s.get("/",function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e(),null===c||void 0===c||c.close(),a["remote"].getCurrentWindow().focus(),r.send('\n                        <html lang="en">\n                            <head><title>Logged in to Plex :)</title></head>\n                            <body>\n                                <script>\n                                    window.close();\n                                <\/script>\n                            </body>\n                        </html>\n                    ');case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),o("httpServer",c),c.listen(r.port,(function(){console.log("listening on *:"+r.port)}))})));case 7:case"end":return n.stop()}}),n)})))()}}}},c54d:function(e,t,n){"use strict";n("cf87")},cd71:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.item&&!e.deletedKeys[e.item.ratingKey]?n("div",{staticClass:"media-item",class:{active:e.isActive},style:{"--width":e.width+"px","--height":e.height+"px","--imgHeight":e.imgHeight+"px"}},[n("div",{staticClass:"image-container"},[e.isGenre?n("v-btn",{attrs:{outlined:"",icon:"",width:e.imgWidth,height:e.imgHeight}},[n("v-icon",{attrs:{"x-large":""}},[e._v("mdi-drama-masks")])],1):n("plex-image",{staticClass:"img",attrs:{rounding:e.itemRounding,width:e.imgWidth,height:e.imgHeight,src:e.itemThumb}}),n("router-link",{staticClass:"item-buttons",style:{borderRadius:e.itemRounding},attrs:{to:e.to}},[e.isActive?n("v-chip",{staticClass:"playing-chip",attrs:{label:"",small:""}},[n("v-icon",{staticClass:"mr-1 ml-neg",attrs:{small:""}},[e._v("mdi-play")]),e._v(" Playing ")],1):e._e(),e.canPlay?n("play-fab",{attrs:{item:e.item}}):n("v-spacer"),n("media-item-menu",{attrs:{dark:"",item:e.item}})],1),n("div",{staticClass:"img-overlay"},[e.item.viewOffset&&e.item.duration?n("v-sheet",{staticClass:"view-progress",style:{height:e.itemRounding,borderBottomLeftRadius:e.itemRounding,borderBottomRightRadius:e.viewProgress>.99?e.itemRounding:"0",width:Math.round(1e4*e.viewProgress)/100+"%"},attrs:{color:"primary"}}):e._e()],1)],1),e.hideTitle?e._e():n("div",{staticClass:"item-bottom",style:{textAlign:"actor"===e.itemType||"tag"===e.itemType?"center":"left"}},["folder"===e.itemType?n("v-icon",{staticClass:"mr-2"},[e._v("mdi-folder")]):e._e(),e.showContext&&"episode"===e.itemType?n("div",[n("router-link",{staticClass:"item-title",attrs:{to:"/show/"+e.item.grandparentRatingKey,title:e.item.grandparentTitle}},[e._v(" "+e._s(e.item.grandparentTitle)+" ")]),n("router-link",{staticClass:"item-grey-text",attrs:{to:e.to,"no-style":"",title:e.item.title}},[e._v(" "+e._s(e.item.title)+" ")]),n("div",{staticClass:"item-grey-text"},[n("episode-link",{attrs:{item:e.item}})],1)],1):e.showContext&&"season"===e.itemType?n("div",[n("router-link",{staticClass:"item-title",attrs:{to:"/show/"+e.item.parentRatingKey,title:e.item.parentTitle}},[e._v(" "+e._s(e.item.parentTitle)+" ")]),n("router-link",{staticClass:"item-grey-text",attrs:{to:e.to,"no-style":"",title:e.item.title}},[e._v(" "+e._s(e.item.title)+" ")])],1):n("div",[n("router-link",{staticClass:"item-title",attrs:{to:e.to,title:e.itemTitle}},[e._v(e._s(e.itemTitle))]),e._l(e.itemSubtitles,(function(t){return n("div",{staticClass:"item-grey-text",attrs:{title:t}},[e._v(" "+e._s(t)+" ")])}))],2)],1)]):e._e()},i=[],a=(n("99af"),n("4de4"),n("caad"),n("a9e3"),n("ac1f"),n("2532"),n("5319"),n("2909")),o=n("5530"),s=n("0aeb"),c=n("2eff"),u=n.n(c),l=n("a123"),d=n("2f62"),m=n("5a1b"),h=n("2dac"),p=n("8be2"),f={name:"MediaItem",components:{PlayFab:p["a"],MediaItemMenu:h["a"],EpisodeLink:m["a"],PlexImage:s["a"]},props:{item:{type:Object,default:null},size:{type:Number,default:130},measureVertical:{type:Boolean,default:!1},type:{type:String,default:null},hideTitle:{type:Boolean,default:!1},sortProp:{type:String,default:null},showContext:{type:Boolean,default:!1},verticalEpisode:{type:Boolean,default:!1},horizontalMovie:{type:Boolean,default:!1},sectionKey:{type:Number,default:NaN}},computed:Object(o["a"])(Object(o["a"])({canPlay:function(){return this.itemCanPlay(this.item)},isActive:function(){return this.itemIsActive(this.item)},viewProgress:function(){return this.item.viewOffset/this.item.duration},isGenre:function(){var e,t;return null===(e=this.item)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.includes("genre")},itemTitle:function(){var e;return null!==(e={actor:this.item.tag,tag:this.item.tag}[this.itemType])&&void 0!==e?e:this.item.title},itemSubtitles:function(){var e,t,n,r,i=this,o=[];if((e=o).push.apply(e,Object(a["a"])(null!==(t=[null===(n=(r={tag:function(){return i.item.reasonTitle},show:function(){return"".concat(i.item.childCount," season").concat(1===i.item.childCount?"":"s")},movie:function(){return i.item.year},season:function(){return"".concat(i.item.leafCount," episode").concat(1===i.item.leafCount?"":"s")},actor:function(){var e;return null===(e=i.item.role)||void 0===e?void 0:e.replaceAll("|",", ")},episode:function(){return"Episode ".concat(i.item.index)}})[this.itemType])||void 0===n?void 0:n.call(r)])&&void 0!==t?t:[])),null!==this.sortProp&&"titleSort"!==this.sortProp){var s,c,d,m=this.item[this.sortProp];o=[null!==(s=null===(c=(d={rating:function(){return" ".concat(10*m,"%")},audienceRating:function(){return" ".concat(10*m,"%")},originallyAvailableAt:function(){return l["a"].niceDate(new Date(m))},lastViewedAt:function(){return u.a.ago(new Date(1e3*m))},duration:function(){return l["a"].niceTime(new Date(m))},unviewedLeafCount:function(){return i.item.leafCount-i.item.viewedLeafCount+" unwatched episodes"},addedAt:function(){return u.a.ago(new Date(1e3*m))}})[this.sortProp])||void 0===c?void 0:c.call(d))&&void 0!==s?s:m]}return Object(a["a"])(o)},itemSection:function(){var e;return null!==(e=isNaN(this.sectionKey)?this.item.librarySectionID:this.sectionKey)&&void 0!==e?e:1},to:function(){var e,t,n,r=this;return null!==(e=null===(t=(n={actor:function(){return"/library/".concat(r.itemSection,"/all?filter=actor~").concat(r.item.id)},tag:function(){return"/library/".concat(r.itemSection,"/all?filter=").concat(r.item.filter.replace("=","~"))}})[this.itemType])||void 0===t?void 0:t.call(n))&&void 0!==e?e:"/".concat(this.itemType,"/").concat(this.item.ratingKey)},itemRounding:function(){var e;return null!==(e={actor:"50%",tag:"50%"}[this.itemType])&&void 0!==e?e:"5px"},itemThumb:function(){var e;return e=this.verticalEpisode&&"episode"===this.itemType?this.item.grandparentThumb:this.horizontalMovie&&"movie"===this.itemType?this.item.art:"playlist"===this.itemType?this.item.composite:this.item.thumb,""!==e&&void 0!==e||(e=this.notFoundImg(this.item)),e},itemType:function(){var e,t;return null!==(e=null!==(t=this.type)&&void 0!==t?t:this.item.type)&&void 0!==e?e:"show"},imgWidth:function(){return this.measureVertical?this.size*this.aspectRatio:this.size},imgHeight:function(){return this.measureVertical?this.size:this.size/this.aspectRatio},width:function(){return this.imgWidth},height:function(){return this.imgHeight+(this.showContext?72:51)},aspectRatio:function(){var e;return this.verticalEpisode&&"episode"===this.itemType?10/15:this.horizontalMovie&&"movie"===this.itemType?16/9:null!==(e={show:10/15,movie:10/15,season:10/15,playlist:1,actor:1,tag:1}[this.itemType])&&void 0!==e?e:16/9}},Object(d["c"])(["notFoundImg","itemCanPlay","itemIsActive"])),Object(d["d"])({srcLoading:function(e){return e.media.srcLoading},playing:function(e){return e.media.playing},deletedKeys:function(e){return e.plex.deletedKeys},context:function(e){return e.media.context}}))},v=f,y=(n("38b9"),n("2877")),g=n("6544"),b=n.n(g),w=n("8336"),k=n("cc20"),x=n("132d"),C=n("8dd9"),T=n("2fa4"),R=Object(y["a"])(v,r,i,!1,null,"6cf35c07",null);t["a"]=R.exports;b()(R,{VBtn:w["a"],VChip:k["a"],VIcon:x["a"],VSheet:C["a"],VSpacer:T["a"]})},cf87:function(e,t,n){},d8ee:function(e,t,n){},d9ad:function(e,t,n){},e51b:function(e,t,n){"use strict";n.r(t);n("d3b7"),n("ac1f"),n("8a79"),n("5319");var r=n("8468"),i=(n("96cf"),n("1da1"));t["default"]={state:{type:"web",channel:null},mutations:{channel:function(e,t){return e.channel=t}},getters:{betterFetch:function(){return function(){return window.fetch}}},actions:{closeWindow:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(r["a"])(e);case 1:case"end":return t.stop()}}),t)})))()},minimizeWindow:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(r["a"])(e);case 1:case"end":return t.stop()}}),t)})))()},initializePlatform:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.state,t.commit,t.dispatch,t.getters,t.rootState;case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setPlatformPlaying:function(e,t){e.state},resetPlexLogin:function(e){var t=e.state,n=e.commit;null!==t.channel&&(t.channel.close(),n("channel",null))},getRedirectUrl:function(){return location.origin+(location.pathname+(location.pathname.endsWith("/")?"":"/")).replace(/\/\//gi,"/")+"?plex_auth=yes"},goToUrl:function(e,t){var n=e.state,r=e.commit;return new Promise((function(e){console.log(t),window.open(t),n.channel&&n.channel.close();var i=new BroadcastChannel("loginCode");r("channel",i),i.onmessage=function(){console.log("received msg"),i.close(),r("channel",null),e()}}))}}}},f8fb:function(e,t,n){},fb49:function(e,t,n){}});
//# sourceMappingURL=app.717f15cf.js.map