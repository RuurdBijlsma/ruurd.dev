{"version":3,"sources":["webpack:///../../../src/components/VGrid/VSpacer.ts","webpack:///./node_modules/core-js/modules/es.set.js","webpack:///./src/views/experiment/Experiment.vue?0f04","webpack:///./src/views/experiment/Experiment.vue","webpack:///./src/views/experiment/Experiment.vue?372c","webpack:///./src/views/experiment/Experiment.vue?9b8e","webpack:///../../../src/components/VDivider/VDivider.ts","webpack:///./src/views/experiment/Experiment.vue?cd3e"],"names":["collection","collectionStrong","module","exports","init","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","style","flexDirection","$vuetify","breakpoint","mobile","alignItems","class","width","attrs","_v","game","$store","getters","flagUrl","fact","question","_e","showFeedback","userAnswer","_s","correctAnswer","answer","ref","on","$event","type","indexOf","_k","keyCode","key","answerFact","apply","model","value","callback","$$v","$set","expression","loading","nextFact","marginLeft","timeLeft","duration","toHms","encounteredFlags","size","state","factCount","Math","round","correctPercentage","stopGame","staticRenderFns","extend","name","components","data","startTime","factShownTimestamp","answerHistory","Set","timerInterval","beforeDestroy","clearInterval","document","removeEventListener","handleKey","mounted","connected","$router","push","newGame","addEventListener","methods","e","dispatch","subsetId","enablePropagation","propagationSubsetId","sessionDuration","performance","now","setInterval","elapsed","learnResult","min","history","console","log","modelStats","commit","add","userInput","$refs","focus","responseTime","countryCode","correct","correctHistory","map","a","correctCount","reduce","b","rollSize","slicedHistory","slice","rollCorrectCount","rollingAccuracy","accuracy","s","computed","$route","params","countries","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VDivider","VIcon","VImg","VProgressLinear","VSheet","VSpacer","VTextField","props","inset","vertical","Boolean","$attrs","role","orientation","h","themeClasses","$listeners"],"mappings":"2IAAA,0BAGe,sBAAuB,SAAU,MAAhD,a,yDCFA,IAAIA,EAAa,EAAQ,QACrBC,EAAmB,EAAQ,QAI/BC,EAAOC,QAAUH,EAAW,OAAO,SAAUI,GAC3C,OAAO,WAAiB,OAAOA,EAAKC,KAAMC,UAAUC,OAASD,UAAU,QAAKE,MAC3EP,I,oECRH,IAAIQ,EAAS,WAAa,IAAIC,EAAIL,KAASM,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,OAAOC,MAAM,CAC/HC,cAAeP,EAAIQ,SAASC,WAAWC,OAAS,SAAW,MAC3DC,WAAaX,EAAIQ,SAASC,WAAWC,OAAS,UAAY,eAC1D,CAACP,EAAG,SAAS,CAACE,YAAY,YAAYO,MAAMZ,EAAIQ,SAASC,WAAWI,MAAQ,KAAO,aAAe,GAAGC,MAAM,CAAC,UAAY,MAAM,CAACX,EAAG,eAAe,CAACH,EAAIe,GAAG,wBAAwBZ,EAAG,aAAcH,EAAIgB,KAAS,KAAEb,EAAG,UAAU,CAACE,YAAY,OAAOS,MAAM,CAAC,MAAQ,oBAAoB,CAACX,EAAG,QAAQ,CAACW,MAAM,CAAC,QAAU,GAAG,IAAMd,EAAIiB,OAAOC,QAAQC,QAAQnB,EAAIgB,KAAKI,KAAKC,cAAc,GAAGrB,EAAIsB,KAAKnB,EAAG,aAAaA,EAAG,cAAc,CAAGH,EAAIgB,KAAKO,aAAudpB,EAAG,MAAM,CAACE,YAAY,YAAY,CAA0B,KAAxBL,EAAIgB,KAAKQ,WAAmBrB,EAAG,KAAK,CAACH,EAAIe,GAAG,iBAAkBf,EAAIyB,GAAGzB,EAAIgB,KAAKQ,YAAY,OAAQxB,EAAIsB,KAAMtB,EAAIgB,KAAKU,eAAiB1B,EAAIgB,KAAKI,KAAM,CAACjB,EAAG,SAAS,CAACW,MAAM,CAAC,KAAO,MAAM,MAAQ,YAAY,CAACd,EAAIe,GAAG,eAAeZ,EAAG,KAAK,CAACH,EAAIe,GAAG,4BAA6Bf,EAAIyB,GAAGzB,EAAIgB,KAAKI,KAAKO,QAAQ,QAAU3B,EAAIgB,KAAS,KAAE,CAACb,EAAG,SAAS,CAACW,MAAM,CAAC,KAAO,MAAM,MAAQ,UAAU,CAACd,EAAIe,GAAG,8BAA8BZ,EAAG,KAAK,CAA0B,KAAxBH,EAAIgB,KAAKQ,WAAmBrB,EAAG,OAAO,CAACH,EAAIe,GAAG,aAAaf,EAAIsB,KAAKtB,EAAIe,GAAG,oBAAqBf,EAAIyB,GAAGzB,EAAIgB,KAAKI,KAAKO,QAAQ,QAAS3B,EAAIsB,MAAM,GAAtiCnB,EAAG,eAAe,CAACyB,IAAI,YAAYd,MAAM,CAAC,SAAW,GAAG,MAAQ,GAAG,eAAe,GAAG,MAAQ,SAAS,YAAc,8BAA8Be,GAAG,CAAC,SAAW,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQhC,EAAIiC,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOK,IAAI,SAAkB,KAAcnC,EAAIoC,WAAWC,MAAM,KAAMzC,aAAa0C,MAAM,CAACC,MAAOvC,EAAIgB,KAAe,WAAEwB,SAAS,SAAUC,GAAMzC,EAAI0C,KAAK1C,EAAIgB,KAAM,aAAcyB,IAAME,WAAW,sBAAsnB,GAAGxC,EAAG,iBAAiB,CAACA,EAAG,YAAcH,EAAIgB,KAAKO,aAAwRpB,EAAG,QAAQ,CAACW,MAAM,CAAC,QAAU,GAAG,MAAQ,UAAU,QAAUd,EAAI4C,QAAQxB,MAAMS,GAAG,CAAC,MAAQ7B,EAAI6C,WAAW,CAAC1C,EAAG,OAAO,CAACE,YAAY,aAAa,CAACL,EAAIe,GAAG,iBAAhaZ,EAAG,QAAQ,CAACW,MAAM,CAAC,QAAU,GAAG,MAAQ,UAAU,QAAUd,EAAI4C,QAAQjB,QAAQE,GAAG,CAAC,MAAQ7B,EAAIoC,aAAa,CAA0B,KAAxBpC,EAAIgB,KAAKQ,WAAmBrB,EAAG,OAAO,CAACE,YAAY,aAAa,CAACL,EAAIe,GAAG,mBAAmBZ,EAAG,OAAO,CAACE,YAAY,aAAa,CAACL,EAAIe,GAAG,qBAA4L,IAAI,GAAGZ,EAAG,SAAS,CAACE,YAAY,aAAaO,MAAMZ,EAAIQ,SAASC,WAAWI,MAAQ,KAAO,aAAe,GAAGP,MAAM,CACpkEwC,WAAY9C,EAAIQ,SAASC,WAAWC,OAAS,IAAM,OACnDG,MAAOb,EAAIQ,SAASC,WAAWC,OAAS,OAAS,SAClDI,MAAM,CAAC,UAAY,MAAM,CAACX,EAAG,eAAe,CAACH,EAAIe,GAAG,sBAAsBZ,EAAG,cAAc,CAACA,EAAG,oBAAoB,CAACW,MAAM,CAAC,MAAQ,IAAMd,EAAIgB,KAAK+B,SAAW/C,EAAIgB,KAAKgC,SAAW,OAAO7C,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,OAAO,CAACH,EAAIe,GAAGf,EAAIyB,GAAGzB,EAAIiD,MAAMjD,EAAIgB,KAAK+B,cAAc5C,EAAG,OAAO,CAACH,EAAIe,GAAGf,EAAIyB,GAAGzB,EAAIiD,MAAMjD,EAAIgB,KAAKgC,gBAAgB7C,EAAG,IAAI,CAACH,EAAIe,GAAGf,EAAIyB,GAAGzB,EAAIgB,KAAKkC,iBAAiBC,MAAM,MAAMnD,EAAIyB,GAAGzB,EAAIiB,OAAOmC,MAAMC,WAAW,wBAAwBlD,EAAG,IAAI,CAACH,EAAIe,GAAGf,EAAIyB,GAAG6B,KAAKC,MAA8B,IAAxBvD,EAAIwD,oBAA0B,gBAAgB,GAAGrD,EAAG,iBAAiB,CAACA,EAAG,QAAQ,CAAC0B,GAAG,CAAC,MAAQ7B,EAAIyD,aAAa,IAAI,IAAI,IAC9mBC,EAAkB,G,kICyEP,SAAIC,OAAO,CACtBC,KAAM,OACNC,WAAY,GACZC,KAAM,iBAAO,CACTlB,QAAS,CACLxB,MAAM,EACNO,QAAQ,GAEZX,KAAM,CACF+C,UAAW,EACXf,SAAU,EACVD,SAAU,EACV3B,KAAM,KACNI,WAAY,GACZwC,mBAAoB,EACpBtC,eAAe,EACfH,cAAc,EACd0C,cAAe,GACff,iBAAkB,IAAIgB,KAE1BC,eAAgB,IAEpBC,cAtBsB,WAuBlBC,cAAc1E,KAAKwE,eACnBG,SAASC,oBAAoB,WAAY5E,KAAK6E,YAE5CC,QA1BgB,WA0BT,2JACJ,EAAKC,UADD,gCAEQ,EAAKC,QAAQC,KAAK,eAF1B,+DAGH,EAAKC,UAHF,OAITP,SAASQ,iBAAiB,WAAY,EAAKN,WAAW,GAJ7C,8CAMbO,QAAS,CACLP,UADK,SACKQ,GACFrF,KAAKqB,KAAKO,cAA0B,UAAVyD,EAAE7C,KAC5BxC,KAAKkD,YAGPgC,QAND,WAMQ,wKACH,EAAK5D,OAAOgE,SAAS,aAAc,CACrCC,SAAU,EAAKA,SACfC,kBAAmB,EAAKD,WAAa,EAAKjE,OAAOmC,MAAMgC,sBAHlD,cAKT,EAAKpE,KAAKgC,SAAkC,GAAvB,EAAKqC,gBAC1B,EAAKrE,KAAK+B,SAAW,EAAK/B,KAAKgC,SAC/B,EAAKhC,KAAK+C,UAAYuB,YAAYC,MAPzB,SAQH,EAAK1C,WARF,OAST,EAAKsB,cAAgBqB,aAAY,WAC7B,IAAIC,GAAWH,YAAYC,MAAQ,EAAKvE,KAAK+C,WAAa,IAC1D,EAAK/C,KAAK+B,SAAW,EAAK/B,KAAKgC,SAAWyC,EACtC,EAAKzE,KAAK+B,UAAY,IACtB,EAAK/B,KAAK+B,SAAW,EACrB,EAAKU,cAEV,KAhBM,8CAkBPA,SAxBD,WAwBS,yKACVY,cAAc,EAAKF,eACfsB,GAAWH,YAAYC,MAAQ,EAAKvE,KAAK+C,WAAa,IACtD2B,EAA0B,CAC1B1C,SAAUM,KAAKqC,IAAI,EAAK3E,KAAKgC,SAAUyC,GACvCG,QAAS,EAAK5E,KAAKiD,cACnBf,iBAAkB,EAAKlC,KAAKkC,kBAEhC2C,QAAQC,IAAI,yBAA0BJ,GAR5B,SASa,EAAKzE,OAAOgE,SAAS,YATlC,cASNc,EATM,OAUVF,QAAQC,IAAI,CAACC,eACb,EAAK9E,OAAO+E,OAAO,eAAgB,CAACd,SAAU,EAAKA,SAAUa,eAC7D,EAAK9E,OAAO+E,OAAO,iBAAkB,CAACd,SAAU,EAAKA,SAAUQ,gBAZrD,UAaJ,EAAKf,QAAQC,KAAb,iCAA4C,EAAKM,WAb7C,+CAeRrC,SAvCD,WAuCS,yKACV,EAAK7B,KAAKQ,WAAa,GACvB,EAAKR,KAAKO,cAAe,EACzB,EAAKqB,QAAQxB,MAAO,EAHV,SAIa,EAAKH,OAAOgE,SAAS,YAJlC,OAIV,EAAKjE,KAAKI,KAJA,OAKV,EAAKJ,KAAKkC,iBAAiB+C,IAA3B,oBAA+B,EAAKjF,KAAKI,YAAzC,aAA+B,EAAgBC,gBAA/C,QAA2D,WAC3DwE,QAAQC,IAAI,CAAC1E,KAAM,EAAKJ,KAAKI,OAC7B,EAAKwB,QAAQxB,MAAO,EACpB,EAAKJ,KAAKgD,mBAAqBsB,YAAYC,MACvCW,EAAY,EAAKC,MAAMD,UAC3BA,EAAUE,QAVA,+CAYRhE,WAnDD,WAmDW,6LACZ,EAAKQ,QAAQjB,QAAS,EAClB0E,EAAef,YAAYC,MAAQ,EAAKvE,KAAKgD,mBAFrC,SAGQ,EAAK/C,OAAOgE,SAAS,aAAc,CACnDqB,YAAW,UAAE,EAAKtF,KAAKI,YAAZ,aAAE,EAAgBC,SAC7BM,OAAQ,EAAKX,KAAKQ,WAClB6E,iBANQ,OAGRE,EAHQ,OASRC,EATQ,yBASa,EAAKxF,KAAKiD,cAAcwC,KAAI,SAAAC,GAAC,OAAIA,EAAEH,YAThD,CAS0DA,IAClEI,EAAeH,EAAeI,QAAO,SAACF,EAAGG,GAAJ,OAAUH,GAAKG,EAAI,EAAI,KAAI,GAChErD,EAAoBmD,EAAeH,EAAe3G,OAClDiH,EAAW,EACXC,EAAgBP,EAAeQ,OAAOF,GACtCG,EAAmBF,EAAcH,QAAO,SAACF,EAAGG,GAAJ,OAAUH,GAAKG,EAAI,EAAI,KAAI,GACnEK,EAAkBD,EAAmBF,EAAclH,OAEvD,EAAKmB,KAAKiD,cAAcW,KAAK,CACzBsC,kBACAC,SAAU3D,EACV8C,YAAW,oBAAE,EAAKtF,KAAKI,YAAZ,aAAE,EAAgBC,gBAAlB,QAA8B,GACzCkF,UACAF,eACA7E,WAAY,EAAKR,KAAKQ,aAE1BqE,QAAQC,IAAI,gBAAiB,CACzBQ,YAAW,UAAE,EAAKtF,KAAKI,YAAZ,aAAE,EAAgBC,SAC7BM,OAAQ,EAAKX,KAAKQ,WAClB6E,eACAE,YAEJ,EAAKvF,KAAKU,cAAgB6E,EAC1B,EAAKvF,KAAKO,cAAe,EACzB,EAAKqB,QAAQjB,QAAS,EAjCV,+CAoChBsB,MAvFK,SAuFCmE,GACF,OAAO,eAAaA,KAG5BC,SAAU,CACNnC,SADM,WAEF,OAAQvF,KAAK2H,OAAOC,OAAOrC,UAE/BsC,UAJM,WAKF,OAAO7H,KAAKsB,OAAOmC,MAAMoE,WAE7BnC,gBAPM,WAQF,OAAO1F,KAAKsB,OAAOmC,MAAMiC,iBAE7BX,UAVM,WAWF,OAAO/E,KAAKsB,OAAOmC,MAAMsB,WAE7BlB,kBAbM,WAcF,GAAuC,IAAnC7D,KAAKqB,KAAKiD,cAAcpE,OAAc,OAAO,EACjD,IAAI8G,EAAehH,KAAKqB,KAAKiD,cAAc2C,QAAO,SAACF,EAAGG,GAAJ,OAAUH,GAAKG,EAAEN,QAAU,EAAI,KAAI,GACrF,OAAOI,EAAehH,KAAKqB,KAAKiD,cAAcpE,WC3N6V,I,qKCQnZ4H,EAAY,eACd,EACA1H,EACA2D,GACA,EACA,KACA,WACA,MAIa,aAAA+D,EAAiB,QAgBhC,IAAkBA,EAAW,CAACC,OAAA,KAAKC,QAAA,KAAMC,aAAA,OAAaC,UAAA,OAAUC,WAAA,OAAWC,WAAA,KAASC,QAAA,KAAMC,OAAA,KAAKC,kBAAA,KAAgBC,SAAA,KAAOC,UAAA,KAAQC,aAAA,Q,0EC1B/G,qBAAiB,CAC9BzE,KAD8B,YAG9B0E,MAAO,CACLC,MADK,QAELC,SAAUC,SAGZ1I,OAR8B,SAQxB,GAEJ,MAIA,OAHKJ,KAAK+I,OAAN,MAAJ,cAAyB/I,KAAK+I,OAAOC,OACnCC,EAAcjJ,KAAK6I,SAAW,WAA9B,cAEKK,EAAE,KAAM,CACbjI,MAAO,gBACL,aADK,EAEL,mBAAoBjB,KAFf,MAGL,sBAAuBA,KAHlB,UAIFA,KAAKmJ,cAEVhI,MAAO,gBACL6H,KADK,YAEL,mBAFK,GAGFhJ,KAAK+I,QAEV7G,GAAIlC,KAAKoJ,iB,kCCnCf","file":"js/chunk-fc70ce78.2c2048e1.js","sourcesContent":["import './_grid.sass'\nimport { createSimpleFunctional } from '../../util/helpers'\n\nexport default createSimpleFunctional('spacer', 'div', 'v-spacer')\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Set` constructor\n// https://tc39.es/ecma262/#sec-set-objects\nmodule.exports = collection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\",style:({\n    flexDirection: _vm.$vuetify.breakpoint.mobile ? 'column' : 'row',\n    alignItems:  _vm.$vuetify.breakpoint.mobile ? 'stretch' : 'flex-start',\n})},[_c('v-card',{staticClass:\"left-card\",class:_vm.$vuetify.breakpoint.width > 1300 ? 'rounded-xl' : '',attrs:{\"elevation\":\"2\"}},[_c('v-card-title',[_vm._v(\"What flag is this?\")]),_c('v-divider'),(_vm.game.fact)?_c('v-sheet',{staticClass:\"flag\",attrs:{\"color\":\"lightBackground\"}},[_c('v-img',{attrs:{\"contain\":\"\",\"src\":_vm.$store.getters.flagUrl(_vm.game.fact.question)}})],1):_vm._e(),_c('v-divider'),_c('v-card-text',[(!_vm.game.showFeedback)?_c('v-text-field',{ref:\"userInput\",attrs:{\"outlined\":\"\",\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Answer\",\"placeholder\":\"For example: 'Netherlands'\"},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.answerFact.apply(null, arguments)}},model:{value:(_vm.game.userAnswer),callback:function ($$v) {_vm.$set(_vm.game, \"userAnswer\", $$v)},expression:\"game.userAnswer\"}}):_c('div',{staticClass:\"feedback\"},[(_vm.game.userAnswer !== '')?_c('h4',[_vm._v(\"You answered \\\"\"+_vm._s(_vm.game.userAnswer)+\"\\\"\")]):_vm._e(),(_vm.game.correctAnswer && _vm.game.fact)?[_c('v-icon',{attrs:{\"size\":\"100\",\"color\":\"success\"}},[_vm._v(\"mdi-check\")]),_c('h2',[_vm._v(\"Correct! The answer was \\\"\"+_vm._s(_vm.game.fact.answer)+\"\\\"\")])]:(_vm.game.fact)?[_c('v-icon',{attrs:{\"size\":\"100\",\"color\":\"error\"}},[_vm._v(\"mdi-alert-circle-outline\")]),_c('h2',[(_vm.game.userAnswer !== '')?_c('span',[_vm._v(\"Wrong! \")]):_vm._e(),_vm._v(\" The answer was \\\"\"+_vm._s(_vm.game.fact.answer)+\"\\\"\")])]:_vm._e()],2)],1),_c('v-card-actions',[_c('v-spacer'),(!_vm.game.showFeedback)?_c('v-btn',{attrs:{\"rounded\":\"\",\"color\":\"primary\",\"loading\":_vm.loading.answer},on:{\"click\":_vm.answerFact}},[(_vm.game.userAnswer !== '')?_c('span',{staticClass:\"ml-4 mr-4\"},[_vm._v(\"Submit answer\")]):_c('span',{staticClass:\"ml-4 mr-4\"},[_vm._v(\"I don't know\")])]):_c('v-btn',{attrs:{\"rounded\":\"\",\"color\":\"primary\",\"loading\":_vm.loading.fact},on:{\"click\":_vm.nextFact}},[_c('span',{staticClass:\"ml-4 mr-4\"},[_vm._v(\"Next fact\")])])],1)],1),_c('v-card',{staticClass:\"right-card\",class:_vm.$vuetify.breakpoint.width > 1300 ? 'rounded-xl' : '',style:({\n        marginLeft: _vm.$vuetify.breakpoint.mobile ? '0' : '30px',\n        width: _vm.$vuetify.breakpoint.mobile ? '100%' : '300px',\n    }),attrs:{\"elevation\":\"2\"}},[_c('v-card-title',[_vm._v(\"Session progress\")]),_c('v-card-text',[_c('v-progress-linear',{attrs:{\"value\":100 - _vm.game.timeLeft / _vm.game.duration * 100}}),_c('div',{staticClass:\"time-container mb-4\"},[_c('span',[_vm._v(_vm._s(_vm.toHms(_vm.game.timeLeft)))]),_c('span',[_vm._v(_vm._s(_vm.toHms(_vm.game.duration)))])]),_c('p',[_vm._v(_vm._s(_vm.game.encounteredFlags.size)+\" / \"+_vm._s(_vm.$store.state.factCount)+\" flags encountered\")]),_c('p',[_vm._v(_vm._s(Math.round(_vm.correctPercentage * 100))+\"% correct\")])],1),_c('v-card-actions',[_c('v-btn',{on:{\"click\":_vm.stopGame}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport {secondsToHms} from \"@/ts/utils\";\r\nimport {EncounterResult, TestResult} from \"@/ts/types\";\r\n\r\nexport default Vue.extend({\r\n    name: 'Game',\r\n    components: {},\r\n    data: () => ({\r\n        loading: {\r\n            fact: false,\r\n            answer: false,\r\n        },\r\n        game: {\r\n            startTime: 0,\r\n            duration: 0,\r\n            timeLeft: 1,\r\n            fact: null as null | { fact_id: number, answer: string, question: string },\r\n            userAnswer: '',\r\n            factShownTimestamp: 0,\r\n            correctAnswer: false,\r\n            showFeedback: false,\r\n            answerHistory: [] as EncounterResult[],\r\n            encounteredFlags: new Set() as Set<string>,\r\n        },\r\n        timerInterval: -1,\r\n    }),\r\n    beforeDestroy() {\r\n        clearInterval(this.timerInterval);\r\n        document.removeEventListener('keypress', this.handleKey);\r\n    },\r\n    async mounted() {\r\n        if (!this.connected)\r\n            return await this.$router.push('/experiment');\r\n        await this.newGame();\r\n        document.addEventListener('keypress', this.handleKey, false);\r\n    },\r\n    methods: {\r\n        handleKey(e: KeyboardEvent) {\r\n            if (this.game.showFeedback && e.key === 'Enter') {\r\n                this.nextFact();\r\n            }\r\n        },\r\n        async newGame() {\r\n            await this.$store.dispatch('resetModel', {\r\n                subsetId: this.subsetId,\r\n                enablePropagation: this.subsetId === this.$store.state.propagationSubsetId,\r\n            });\r\n            this.game.duration = this.sessionDuration * 60;\r\n            this.game.timeLeft = this.game.duration;\r\n            this.game.startTime = performance.now();\r\n            await this.nextFact();\r\n            this.timerInterval = setInterval(() => {\r\n                let elapsed = (performance.now() - this.game.startTime) / 1000;\r\n                this.game.timeLeft = this.game.duration - elapsed;\r\n                if (this.game.timeLeft <= 0) {\r\n                    this.game.timeLeft = 0;\r\n                    this.stopGame();\r\n                }\r\n            }, 1000);\r\n        },\r\n        async stopGame() {\r\n            clearInterval(this.timerInterval);\r\n            let elapsed = (performance.now() - this.game.startTime) / 1000;\r\n            let learnResult: TestResult = {\r\n                duration: Math.min(this.game.duration, elapsed),\r\n                history: this.game.answerHistory,\r\n                encounteredFlags: this.game.encounteredFlags,\r\n            };\r\n            console.log('committing game result', learnResult);\r\n            let modelStats = await this.$store.dispatch('getStats');\r\n            console.log({modelStats});\r\n            this.$store.commit('setModelStat', {subsetId: this.subsetId, modelStats})\r\n            this.$store.commit('setLearnResult', {subsetId: this.subsetId, learnResult});\r\n            await this.$router.push(`/experiment/test-intro/${this.subsetId}`)\r\n        },\r\n        async nextFact() {\r\n            this.game.userAnswer = '';\r\n            this.game.showFeedback = false;\r\n            this.loading.fact = true;\r\n            this.game.fact = await this.$store.dispatch('nextFact');\r\n            this.game.encounteredFlags.add(this.game.fact?.question ?? 'Unknown');\r\n            console.log({fact: this.game.fact});\r\n            this.loading.fact = false;\r\n            this.game.factShownTimestamp = performance.now();\r\n            let userInput = this.$refs.userInput as any;\r\n            userInput.focus();\r\n        },\r\n        async answerFact() {\r\n            this.loading.answer = true;\r\n            let responseTime = performance.now() - this.game.factShownTimestamp;\r\n            let correct = await this.$store.dispatch('answerFact', {\r\n                countryCode: this.game.fact?.question,\r\n                answer: this.game.userAnswer,\r\n                responseTime,\r\n            }) as boolean;\r\n            // calculate correct percentage including this last fact\r\n            let correctHistory = [...this.game.answerHistory.map(a => a.correct), correct];\r\n            let correctCount = correctHistory.reduce((a, b) => a + (b ? 1 : 0), 0) as number;\r\n            let correctPercentage = correctCount / correctHistory.length;\r\n            let rollSize = 5;\r\n            let slicedHistory = correctHistory.slice(-rollSize);\r\n            let rollCorrectCount = slicedHistory.reduce((a, b) => a + (b ? 1 : 0), 0) as number;\r\n            let rollingAccuracy = rollCorrectCount / slicedHistory.length;\r\n            // add to history\r\n            this.game.answerHistory.push({\r\n                rollingAccuracy,\r\n                accuracy: correctPercentage,\r\n                countryCode: this.game.fact?.question ?? '',\r\n                correct,\r\n                responseTime,\r\n                userAnswer: this.game.userAnswer,\r\n            });\r\n            console.log(\"answered fact\", {\r\n                countryCode: this.game.fact?.question,\r\n                answer: this.game.userAnswer,\r\n                responseTime,\r\n                correct,\r\n            })\r\n            this.game.correctAnswer = correct;\r\n            this.game.showFeedback = true;\r\n            this.loading.answer = false;\r\n\r\n        },\r\n        toHms(s: number) {\r\n            return secondsToHms(s);\r\n        },\r\n    },\r\n    computed: {\r\n        subsetId(): number {\r\n            return +this.$route.params.subsetId;\r\n        },\r\n        countries(): { [key: string]: string }[] {\r\n            return this.$store.state.countries;\r\n        },\r\n        sessionDuration() {\r\n            return this.$store.state.sessionDuration;\r\n        },\r\n        connected() {\r\n            return this.$store.state.connected;\r\n        },\r\n        correctPercentage() {\r\n            if (this.game.answerHistory.length === 0) return 1;\r\n            let correctCount = this.game.answerHistory.reduce((a, b) => a + (b.correct ? 1 : 0), 0);\r\n            return correctCount / this.game.answerHistory.length;\r\n        },\r\n    },\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Experiment.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Experiment.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Experiment.vue?vue&type=template&id=dba03332&scoped=true&\"\nimport script from \"./Experiment.vue?vue&type=script&lang=ts&\"\nexport * from \"./Experiment.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Experiment.vue?vue&type=style&index=0&id=dba03332&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dba03332\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VSheet } from 'vuetify/lib/components/VSheet';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VDivider,VIcon,VImg,VProgressLinear,VSheet,VSpacer,VTextField})\n","// Styles\nimport './VDivider.sass'\n\n// Types\nimport { VNode } from 'vue'\n\n// Mixins\nimport Themeable from '../../mixins/themeable'\n\nexport default Themeable.extend({\n  name: 'v-divider',\n\n  props: {\n    inset: Boolean,\n    vertical: Boolean,\n  },\n\n  render (h): VNode {\n    // WAI-ARIA attributes\n    let orientation\n    if (!this.$attrs.role || this.$attrs.role === 'separator') {\n      orientation = this.vertical ? 'vertical' : 'horizontal'\n    }\n    return h('hr', {\n      class: {\n        'v-divider': true,\n        'v-divider--inset': this.inset,\n        'v-divider--vertical': this.vertical,\n        ...this.themeClasses,\n      },\n      attrs: {\n        role: 'separator',\n        'aria-orientation': orientation,\n        ...this.$attrs,\n      },\n      on: this.$listeners,\n    })\n  },\n})\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Experiment.vue?vue&type=style&index=0&id=dba03332&scoped=true&lang=css&\""],"sourceRoot":""}