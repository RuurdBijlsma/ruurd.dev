(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49da1a6c"],{"0ccb":function(e,t,r){var a=r("50c4"),n=r("577e"),s=r("1148"),o=r("1d80"),i=Math.ceil,c=function(e){return function(t,r,c){var u,d,l=n(o(t)),m=l.length,f=void 0===c?" ":n(c),g=a(r);return g<=m||""==f?l:(u=g-m,d=s.call(f,i(u/f.length)),d.length>u&&(d=d.slice(0,u)),e?l+d:d+l)}};e.exports={start:c(!1),end:c(!0)}},"14d1":function(e,t,r){"use strict";r("681a")},1889:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("d3b7"),r("25f0"),r("4d90"),r("99af");function a(e){if(isNaN(e)||void 0===e)return"0:00";e=Math.round(e);var t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60,n=t.toString(),s=r.toString(),o=a.toString();return"0"!==n&&(s=s.padStart(2,"0"),o=o.padStart(2,"0")),o=o.padStart(2,"0"),"0"===n?"".concat(s,":").concat(o):"".concat(n,":").concat(s,":").concat(o)}},"20f6":function(e,t,r){},"4d90":function(e,t,r){"use strict";var a=r("23e7"),n=r("0ccb").start,s=r("9a0c");a({target:"String",proto:!0,forced:s},{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},6062:function(e,t,r){"use strict";var a=r("6d61"),n=r("6566");e.exports=a("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n)},"681a":function(e,t,r){},"79e3":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home",style:{flexDirection:e.$vuetify.breakpoint.mobile?"column":"row",alignItems:e.$vuetify.breakpoint.mobile?"stretch":"flex-start"}},[r("v-card",{staticClass:"left-card",class:e.$vuetify.breakpoint.width>1300?"rounded-xl":"",attrs:{elevation:"2"}},[r("v-card-title",[e._v("What flag is this?")]),r("v-divider"),e.game.fact?r("v-sheet",{staticClass:"flag",attrs:{color:"lightBackground"}},[r("v-img",{attrs:{contain:"",src:e.$store.getters.flagUrl(e.game.fact.question)}})],1):e._e(),r("v-divider"),r("v-card-text",[e.game.showFeedback?r("div",{staticClass:"feedback"},[""!==e.game.userAnswer?r("h4",[e._v('You answered "'+e._s(e.game.userAnswer)+'"')]):e._e(),e.game.correctAnswer&&e.game.fact?[r("v-icon",{attrs:{size:"100",color:"success"}},[e._v("mdi-check")]),r("h2",[e._v('Correct! The answer was "'+e._s(e.game.fact.answer)+'"')])]:e.game.fact?[r("v-icon",{attrs:{size:"100",color:"error"}},[e._v("mdi-alert-circle-outline")]),r("h2",[""!==e.game.userAnswer?r("span",[e._v("Wrong! ")]):e._e(),e._v(' The answer was "'+e._s(e.game.fact.answer)+'"')])]:e._e()],2):r("v-text-field",{ref:"userInput",attrs:{outlined:"",dense:"","hide-details":"",label:"Answer",placeholder:"For example: 'Netherlands'"},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.answerFact.apply(null,arguments)}},model:{value:e.game.userAnswer,callback:function(t){e.$set(e.game,"userAnswer",t)},expression:"game.userAnswer"}})],1),r("v-card-actions",[r("v-spacer"),e.game.showFeedback?r("v-btn",{attrs:{rounded:"",color:"primary",loading:e.loading.fact},on:{click:e.nextFact}},[r("span",{staticClass:"ml-4 mr-4"},[e._v("Next fact")])]):r("v-btn",{attrs:{rounded:"",color:"primary",loading:e.loading.answer},on:{click:e.answerFact}},[""!==e.game.userAnswer?r("span",{staticClass:"ml-4 mr-4"},[e._v("Submit answer")]):r("span",{staticClass:"ml-4 mr-4"},[e._v("I don't know")])])],1)],1),r("v-card",{staticClass:"right-card",class:e.$vuetify.breakpoint.width>1300?"rounded-xl":"",style:{marginLeft:e.$vuetify.breakpoint.mobile?"0":"30px",width:e.$vuetify.breakpoint.mobile?"100%":"300px"},attrs:{elevation:"2"}},[r("v-card-title",[e._v("Session progress")]),r("v-card-text",[r("v-progress-linear",{attrs:{value:100-e.game.timeLeft/e.game.duration*100}}),r("div",{staticClass:"time-container mb-4"},[r("span",[e._v(e._s(e.toHms(e.game.timeLeft)))]),r("span",[e._v(e._s(e.toHms(e.game.duration)))])]),r("p",[e._v(e._s(e.game.encounteredFlags.size)+" / "+e._s(e.$store.state.factCount)+" flags encountered")]),r("p",[e._v(e._s(Math.round(100*e.correctPercentage))+"% correct")])],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{rounded:"",color:"primary"},on:{click:e.stopGame}},[r("span",{staticClass:"ml-4 mr-4"},[e._v("Stop session")])])],1)],1)],1)},n=[],s=r("1da1"),o=(r("96cf"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("2b0e")),i=r("1889"),c=o["a"].extend({name:"Game",components:{},data:function(){return{loading:{fact:!1,answer:!1},game:{startTime:0,duration:0,timeLeft:1,fact:null,userAnswer:"",factShownTimestamp:0,correctAnswer:!1,showFeedback:!1,answerHistory:[],encounteredFlags:new Set},randomFlags:[],timerInterval:-1}},beforeDestroy:function(){clearInterval(this.timerInterval),document.removeEventListener("keypress",this.handleKey)},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.connected){t.next=4;break}return t.next=3,e.$router.push("/");case 3:return t.abrupt("return",t.sent);case 4:return t.next=6,e.newGame();case 6:document.addEventListener("keypress",e.handleKey,!1);case 7:case"end":return t.stop()}}),t)})))()},methods:{handleKey:function(e){this.game.showFeedback&&"Enter"===e.key&&this.nextFact()},newGame:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.game.duration=60*e.sessionDuration,e.game.timeLeft=e.game.duration,e.game.startTime=performance.now(),t.next=5,e.nextFact();case 5:e.timerInterval=setInterval((function(){var t=(performance.now()-e.game.startTime)/1e3;e.game.timeLeft=e.game.duration-t,e.game.timeLeft<=0&&(e.game.timeLeft=0,e.stopGame())}),1e3);case 6:case"end":return t.stop()}}),t)})))()},stopGame:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return clearInterval(e.timerInterval),r=(performance.now()-e.game.startTime)/1e3,a={duration:Math.min(e.game.duration,r),history:e.game.answerHistory,encounteredFlags:e.game.encounteredFlags},console.log("committing game result",a),e.$store.commit("gameResult",a),t.next=7,e.$router.push("/result");case 7:case"end":return t.stop()}}),t)})))()},nextFact:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.game.userAnswer="",e.game.showFeedback=!1,e.loading.fact=!0,t.next=5,e.$store.dispatch("nextFact");case 5:e.game.fact=t.sent,e.game.encounteredFlags.add(null!==(r=null===(a=e.game.fact)||void 0===a?void 0:a.question)&&void 0!==r?r:"Unknown"),console.log({fact:e.game.fact}),e.loading.fact=!1,e.game.factShownTimestamp=performance.now(),n=e.$refs.userInput,n.focus();case 12:case"end":return t.stop()}}),t)})))()},answerFact:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading.answer=!0,o=performance.now()-e.game.factShownTimestamp,t.next=4,e.$store.dispatch("answerFact",{countryCode:null===(r=e.game.fact)||void 0===r?void 0:r.question,answer:e.game.userAnswer,responseTime:o});case 4:i=t.sent,c=e.game.answerHistory.reduce((function(e,t){return e+(t.correct?1:0)}),0),u=c/e.game.answerHistory.length,e.game.answerHistory.push({accuracy:u,countryCode:null!==(a=null===(n=e.game.fact)||void 0===n?void 0:n.question)&&void 0!==a?a:"",correct:i,responseTime:o,userAnswer:e.game.userAnswer}),console.log("answered fact",{countryCode:null===(s=e.game.fact)||void 0===s?void 0:s.question,answer:e.game.userAnswer,responseTime:o,correct:i}),e.game.correctAnswer=i,e.game.showFeedback=!0,e.loading.answer=!1;case 12:case"end":return t.stop()}}),t)})))()},toHms:function(e){return Object(i["a"])(e)}},computed:{countries:function(){return this.$store.state.countries},sessionDuration:function(){return this.$store.state.sessionDuration},connected:function(){return this.$store.state.connected},correctPercentage:function(){if(0===this.game.answerHistory.length)return 1;var e=this.game.answerHistory.reduce((function(e,t){return e+(t.correct?1:0)}),0);return e/this.game.answerHistory.length}}}),u=c,d=(r("14d1"),r("2877")),l=r("6544"),m=r.n(l),f=r("8336"),g=r("b0af"),v=r("99d9"),h=r("ce7e"),p=r("132d"),w=r("adda"),b=r("8e36"),k=r("8dd9"),x=(r("20f6"),r("80d2")),y=Object(x["g"])("spacer","div","v-spacer"),_=r("8654"),F=Object(d["a"])(u,a,n,!1,null,"5091d40f",null);t["default"]=F.exports;m()(F,{VBtn:f["a"],VCard:g["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VDivider:h["a"],VIcon:p["a"],VImg:w["a"],VProgressLinear:b["a"],VSheet:k["a"],VSpacer:y,VTextField:_["a"]})},"8ce9":function(e,t,r){},"9a0c":function(e,t,r){var a=r("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(a)},ce7e:function(e,t,r){"use strict";var a=r("5530"),n=(r("8ce9"),r("7560"));t["a"]=n["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(e){var t;return this.$attrs.role&&"separator"!==this.$attrs.role||(t=this.vertical?"vertical":"horizontal"),e("hr",{class:Object(a["a"])({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:Object(a["a"])({role:"separator","aria-orientation":t},this.$attrs),on:this.$listeners})}})}}]);
//# sourceMappingURL=chunk-49da1a6c.547c32fa.js.map