(function(e){function t(t){for(var i,o,s=t[0],l=t[1],c=t[2],h=0,f=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={app:0},r=[];function o(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d22d746":"06bdeebe"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=a[e]=[t,i]}));t.push(n[2]=i);var r,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=o(e);var c=new Error;r=function(t){l.onerror=l.onload=null,clearTimeout(h);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",c.name="ChunkLoadError",c.type=i,c.request=r,n[1](c)}a[e]=void 0}};var h=setTimeout((function(){r({type:"timeout",target:l})}),12e4);l.onerror=l.onload=r,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/minesweeper/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var h=0;h<l.length;h++)t(l[h]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("8a23"),a=n.n(i);a.a},4230:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"app"},[n("router-view")],1)},r=[],o={name:"App",components:{},data:function(){return{}}},s=o,l=(n("034f"),n("2877")),c=n("6544"),h=n.n(c),u=n("7496"),f=Object(l["a"])(s,a,r,!1,null,null,null),g=f.exports;h()(f,{VApp:u["a"]});var d=n("9483");Object(d["a"])("".concat("/minesweeper/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("d3b7");var m=n("8c4f"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("mine-sweeper")],1)},b=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mine-sweeper"},[n("div",{staticClass:"title"},[""===e.game.status?n("h1",[e._v("Mine Sweeper")]):n("h1",[e._v(e._s(e.game.status))]),n("p",{staticClass:"flag-count"},[e._v("Flags: "),n("span",{staticClass:"flag"},[e._v(e._s(e.game.flagCount))])])]),n("div",{ref:"canvasContainer",staticClass:"canvas-container-outer"},[n("div",{staticClass:"canvas-container-inner"},[n("canvas",{ref:"canvas",staticClass:"canvas",style:"pointer-events: "+(e.hold.nTouches>1?"none":"all"),on:{touchstart:e.touchStart,touchmove:e.touchMove,touchend:e.touchEnd,contextmenu:e.clickCanvas,click:e.clickCanvas}})])]),n("div",{staticClass:"controls"},[n("div",{staticClass:"text-fields"},[n("v-text-field",{attrs:{type:"number",label:"Width"},model:{value:e.grid.width,callback:function(t){e.$set(e.grid,"width",t)},expression:"grid.width"}}),n("v-text-field",{attrs:{type:"number",label:"Height"},model:{value:e.grid.height,callback:function(t){e.$set(e.grid,"height",t)},expression:"grid.height"}}),n("v-text-field",{attrs:{type:"number",label:"Bombs",rules:e.bombRules},model:{value:e.game.nBombs,callback:function(t){e.$set(e.game,"nBombs",t)},expression:"game.nBombs"}})],1),n("div",{staticClass:"buttons"},[n("v-btn",{staticClass:"new-game-button",attrs:{color:"primary"},on:{mousedown:function(t){e.computerMove(Math.ceil(e.showMoves++/10))}}},[e._v(" Move Hint ")]),n("v-btn",{staticClass:"new-game-button",attrs:{color:"primary"},on:{click:e.newGame}},[e._v("New Game")])],1)])])},w=[],y=(n("99af"),n("a623"),n("4de4"),n("c740"),n("4160"),n("caad"),n("c975"),n("d81d"),n("13d5"),n("a434"),n("2532"),n("159b"),n("2909")),C=n("3835"),x=n("53ca"),k=n("b85c"),j=window.innerWidth>600?20:12,M=20===j?60:30,O=[],B={name:"MineSweeper",data:function(){return{animation:-1,canvasRatio:1,grid:{width:null===localStorage.getItem("gridWidth")?j:+localStorage.gridWidth,height:null===localStorage.getItem("gridHeight")?j:+localStorage.gridHeight},game:{status:"",nBombs:null===localStorage.getItem("nBombs")?M:+localStorage.nBombs,actualBombs:0,isDead:!1,flagCount:0},firstClick:!0,images:{bomb:new Image,flag:new Image,cell:new Image,numbers:{1:new Image,2:new Image,3:new Image,4:new Image,5:new Image,6:new Image,7:new Image,8:new Image}},touchTime:!1,showMoves:1,hold:{timeout:-1,x:0,y:0,down:!0,nTouches:0},holdDuration:300,preventClick:!1}},mounted:function(){this.canvas=this.$refs.canvas,this.context=this.canvas.getContext("2d"),this.images.bomb.src="img/bomb.png",this.images.flag.src="img/flag.png",this.images.cell.src="img/cell.png";for(var e=1;e<=8;e++)this.images.numbers[e].src="img/".concat(e,".png");this.animation=requestAnimationFrame(this.render),window.addEventListener("resize",this.resizeCanvas,!1),this.newGame()},beforeDestroy:function(){cancelAnimationFrame(this.animation),window.removeEventListener("resize",this.resizeCanvas),clearTimeout(this.hold.timeout)},methods:{solve:function(){while(this.computerMove());},smartMove:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,i=!1,a=[],r=Object(k["a"])(O);try{for(r.s();!(e=r.n()).done;){var o=e.value;o.revealed&&o.bombNeighbours>0&&function(){var e=o.neighbours.filter((function(e){return!e.revealed&&!e.flag}));if(e.length>0){var n=o.neighbours.filter((function(e){return e.flag})),i=o.bombNeighbours-n.length,r=a.findIndex((function(n){return t.arrayEquals(n.cells,e)}));-1===r&&a.push({bombs:i,cells:e})}}()}}catch(u){r.e(u)}finally{r.f()}console.log(a);for(var s=function(){var e,r=c[l],o=a.filter((function(e){return e!==r})),s=Object(k["a"])(o);try{var h=function(){var a=e.value;if(t.arrayContains(r.cells,a.cells)){var o=r.bombs-a.bombs,s=r.cells.length-a.cells.length;if(console.log(o,s),0===s||o!==s&&0!==o)return"break";var l,c=o===s,h=r.cells.filter((function(e){return!a.cells.includes(e)})),f=Object(k["a"])(h);try{for(f.s();!(l=f.n()).done;){var g=l.value;if(c&&!g.flag){if(0===n--)return{v:{v:[!0,n]}};i=!0,console.log("Doing smart flag"),t.flagCell(g)}else if(!c&&!g.revealed){if(0===n--)return{v:{v:[!0,n]}};i=!0,console.log("Doing smart click"),t.clickCell(g)}}}catch(u){f.e(u)}finally{f.f()}}};e:for(s.s();!(e=s.n()).done;){var f=h();switch(f){case"break":break e;default:if("object"===Object(x["a"])(f))return f.v}}}catch(u){s.e(u)}finally{s.f()}},l=0,c=a;l<c.length;l++){var h=s();if("object"===Object(x["a"])(h))return h.v}return[i,n]},computerMove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,t=!1;if(O.every((function(e){return!e.revealed}))){var n=this.getCell(1+Math.floor((this.grid.width-2)*Math.random()),1+Math.floor((this.grid.height-2)*Math.random()));if(t=!0,0===e--)return;this.clickCell(n)}var i,a,r=Object(k["a"])(O);try{for(r.s();!(i=r.n()).done;){n=i.value;if(n.revealed&&n.bombNeighbours>0){var o=n.neighbours.filter((function(e){return e.flag})),s=n.neighbours.filter((function(e){return!e.revealed&&!e.flag})),l=o.length+s.length;if(s.length>0&&n.bombNeighbours===l){var c,h=Object(k["a"])(s);try{for(h.s();!(c=h.n()).done;){var u=c.value;if(t=!0,!u.flag){if(0===e--)return;this.flagCell(u)}}}catch(b){h.e(b)}finally{h.f()}}else if(o.length===n.bombNeighbours){var f,g=Object(k["a"])(s);try{for(g.s();!(f=g.n()).done;){var d=f.value;if(t=!0,!d.revealed){if(0===e--)return;this.clickCell(d)}}}catch(b){g.e(b)}finally{g.f()}}}}}catch(b){r.e(b)}finally{r.f()}var m=this.smartMove(e),v=Object(C["a"])(m,2);return a=v[0],e=v[1],t||a},arrayContains:function(e,t){return t.every((function(t){return e.includes(t)}))},arrayEquals:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},newGame:function(){localStorage.gridWidth=this.grid.width,localStorage.gridHeight=this.grid.height,localStorage.nBombs=this.game.nBombs,this.canvasRatio=this.grid.width/this.grid.height,this.resizeCanvas(),this.firstClick=!0,this.showMoves=1,O=this.getCells(),this.game.status="",this.game.isDead=!1,this.game.flagCount=0},getCells:function(){for(var e=[],t=0,n=0;n<this.grid.height;n++)for(var i=0;i<this.grid.width;i++)e.push({index:t++,x:i,y:n,revealed:!1,bomb:!1,flag:!1,bombNeighbours:0});return e},generateField:function(e){var t=this,n=this.getCells(),i=this.getNeighbours.apply(this,Object(y["a"])(e)).map((function(e){return t.getCell.apply(t,Object(y["a"])(e).concat([n]))})).filter((function(e){return void 0!==e}));i.push(this.getCell.apply(this,Object(y["a"])(e).concat([n]))),this.game.nBombs>n.length-i.length&&console.warn("There are move bombs than grid cells, clamping game.nBombs to",n.length-i.length);var a=Math.min(this.game.nBombs,n.length-i.length);this.game.actualBombs=a,i.forEach((function(e){return n.splice(n.indexOf(e),1)}));for(var r=[],o=0;o<a;o++){var s=Math.floor(Math.random()*n.length),l=n.splice(s,1)[0];l.bomb=!0,r.push(l)}n=n.concat(r),n=n.concat(i),n=n.sort((function(e,t){return e.index-t.index}));var c,h=Object(k["a"])(n);try{for(h.s();!(c=h.n()).done;){var u=c.value;u.neighbours=this.getNeighbours(u.x,u.y).map((function(e){var i=Object(C["a"])(e,2),a=i[0],r=i[1];return t.getCell(a,r,n)})).filter((function(e){return void 0!==e})),u.bombNeighbours=u.neighbours.map((function(e){return e.bomb})).reduce((function(e,t){return e+t}),0)}}catch(f){h.e(f)}finally{h.f()}return n},getNeighbours:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?[[e-1,t+0],[e+0,t-1],[e+1,t+0],[e+0,t+1],[e-1,t-1],[e+1,t-1],[e+1,t+1],[e-1,t+1]]:[[e-1,t+0],[e+0,t-1],[e+1,t+0],[e+0,t+1]]},touchStart:function(e){var t=this;this.hold.nTouches=e.touches.length;var n=this.canvas.getBoundingClientRect(),i=n.top,a=n.left,r=e.touches[0].clientX-a,o=e.touches[0].clientY-i;this.hold.down=!0,this.hold.x=r,this.hold.y=o,this.hold.timeout=setTimeout((function(){1===t.hold.nTouches&&(t.clickPos(r,o,!0),t.preventClick=!0)}),this.holdDuration)},touchMove:function(e){this.hold.nTouches=e.touches.length;var t=this.canvas.getBoundingClientRect(),n=t.top,i=t.left,a=e.touches[0].clientX-i,r=e.touches[0].clientY-n,o=Math.sqrt(Math.pow(this.hold.x-a,2)+Math.pow(this.hold.y-r,2));o>30&&this.touchEnd()},touchEnd:function(e){var t=this;e&&e.touches&&(this.hold.nTouches=e.touches.length),clearTimeout(this.hold.timeout),setTimeout((function(){t.preventClick=!1}),50)},clickCanvas:function(e){e.preventDefault();var t=2===e.button,n=this.canvas.getBoundingClientRect(),i=n.top,a=n.left,r=e.clientX-a,o=e.clientY-i;this.clickPos(r,o,t)},clickPos:function(e,t,n){if(this.preventClick)this.preventClick=!1;else if(!this.game.isDead){var i=this.canvas.getBoundingClientRect(),a=i.width,r=i.height,o=a/this.grid.width,s=r/this.grid.height,l=Math.floor(e/o),c=Math.floor(t/s),h=this.getCell(l,c);n?this.flagCell(h):this.clickCell(h)}},checkWin:function(){var e=O.filter((function(e){return e.revealed})).length;this.grid.width*this.grid.height===e+this.game.actualBombs&&(this.game.status="You win!")},flagCell:function(e){e.revealed||(e.flag=!e.flag,e.flag?this.game.flagCount++:this.game.flagCount--,this.checkWin())},clickCell:function(e){if(!e.flag)if(this.firstClick&&(O=this.generateField([e.x,e.y]),e=this.getCell(e.x,e.y),this.firstClick=!1),e.bomb)this.game.status="You die!",this.game.isDead=!0;else{if(e.revealed=!0,0===e.bombNeighbours){var t=e.neighbours;while(t.length>0){var n,i=[],a=Object(k["a"])(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;r.revealed||r.flag||(r.revealed=!0,0===r.bombNeighbours&&(i=i.concat(r.neighbours)))}}catch(o){a.e(o)}finally{a.f()}t=i}}this.checkWin()}},getCell:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.grid.width,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.grid.height;if(!(e>=i||e<0)&&!(t>=a||t<0))return n[t*i+e]},render:function(){this.animation=requestAnimationFrame(this.render),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBackground(),this.drawGridLines(),this.drawCells()},drawBackground:function(){this.context.fillStyle="#bdbdbd",this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},drawGridLines:function(){var e=16,t=16;this.context.strokeStyle="#7b7b7b",this.context.lineWidth=1,this.context.beginPath();for(var n=0;n<=this.grid.width;n++)this.context.moveTo(.5+n*e,-.5),this.context.lineTo(.5+n*e,this.canvas.height+.5);for(var i=0;i<=this.grid.height;i++)this.context.moveTo(-.5,.5+i*t),this.context.lineTo(this.canvas.width+.5,.5+i*t);this.context.stroke()},drawCells:function(){var e,t=16,n=16,i=Object(k["a"])(O);try{for(i.s();!(e=i.n()).done;){var a=e.value;a.bomb&&this.game.isDead?this.context.drawImage(this.images.bomb,a.x*t,a.y*n,t,n):a.flag?this.context.drawImage(this.images.flag,a.x*t,a.y*n,t,n):a.revealed&&a.bombNeighbours>0?this.context.drawImage(this.images.numbers[a.bombNeighbours],a.x*t,a.y*n,t,n):a.revealed||this.context.drawImage(this.images.cell,a.x*t,a.y*n,t,n)}}catch(r){i.e(r)}finally{i.f()}},resizeCanvas:function(){var e,t,n=this.$refs.canvasContainer.getBoundingClientRect(),i=n.width,a=n.height,r=i/a;r>this.canvasRatio?(e=a*this.canvasRatio,t=a):(e=i,t=i/this.canvasRatio),this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.width=16*this.grid.width+1,this.canvas.height=16*this.grid.height+1}},watch:{"grid.width":function(){this.newGame()},"grid.height":function(){this.newGame()},"game.nBombs":function(){this.newGame()}},computed:{maxBombs:function(){var e=this.grid.width*this.grid.height,t=3*Math.min(this.grid.width,this.grid.height,3);return e-t},bombRules:function(){var e=this;return[function(e){return!!e||"Required"},function(e){return e>=1||"Number of bombs must be > 0"},function(t){return t<=e.maxBombs||"Number of bombs can at most be "+e.maxBombs}]}}},S=B,T=(n("d82e"),n("8336")),N=n("8654"),_=Object(l["a"])(S,p,w,!1,null,"074181a5",null),I=_.exports;h()(_,{VBtn:T["a"],VTextField:N["a"]});var E={name:"Home",components:{MineSweeper:I}},R=E,A=(n("cccb"),Object(l["a"])(R,v,b,!1,null,null,null)),P=A.exports;i["a"].use(m["a"]);var D=[{path:"/",name:"Home",component:P},{path:"/about",name:"About",component:function(){return n.e("chunk-2d22d746").then(n.bind(null,"f820"))}}],q=new m["a"]({routes:D}),F=q,G=n("2f62");if(0===document.querySelectorAll("head link[rel='manifest']").length){var W=document.createElement("link");W.setAttribute("rel","manifest"),W.setAttribute("href","./manifest.json"),document.querySelector("head").appendChild(W)}i["a"].use(G["a"]);var $=new G["a"].Store({state:{},mutations:{},actions:{},modules:{}}),H=n("f309");i["a"].use(H["a"]);var z=new H["a"]({theme:{dark:!0,themes:{dark:{primary:"#ff0000",secondary:"#a6ff00"}}}});i["a"].config.productionTip=!1,new i["a"]({router:F,store:$,vuetify:z,render:function(e){return e(g)}}).$mount("#app")},"8a23":function(e,t,n){},cccb:function(e,t,n){"use strict";var i=n("4230"),a=n.n(i);a.a},d82e:function(e,t,n){"use strict";var i=n("ec88"),a=n.n(i);a.a},ec88:function(e,t,n){}});
//# sourceMappingURL=app.3183008f.js.map