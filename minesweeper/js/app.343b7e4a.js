(function(e){function t(t){for(var i,a,s=t[0],c=t[1],l=t[2],h=0,d=[];h<s.length;h++)a=s[h],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},r={app:0},o=[];function a(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d22d746":"06bdeebe"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=i);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=a(e);var l=new Error;o=function(t){c.onerror=c.onload=null,clearTimeout(h);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,n[1](l)}r[e]=void 0}};var h=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/minesweeper/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var h=0;h<c.length;h++)t(c[h]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("8a23"),r=n.n(i);r.a},"2fea":function(e,t,n){"use strict";var i=n("566e"),r=n.n(i);r.a},4230:function(e,t,n){},"566e":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"app"},[n("router-view")],1)},o=[],a={name:"App",components:{},data:function(){return{}}},s=a,c=(n("034f"),n("2877")),l=n("6544"),h=n.n(l),u=n("7496"),d=Object(c["a"])(s,r,o,!1,null,null,null),f=d.exports;h()(d,{VApp:u["a"]});var v=n("9483");Object(v["a"])("".concat("/minesweeper/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("d3b7");var g=n("8c4f"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("mine-sweeper")],1)},m=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mine-sweeper"},[n("h1",[e._v("Mine Sweeper "+e._s(e.status))]),n("div",{ref:"canvasContainer",staticClass:"canvas-container-outer"},[n("div",{staticClass:"canvas-container-inner"},[n("canvas",{ref:"canvas",staticClass:"canvas",on:{contextmenu:e.clickCanvas,click:e.clickCanvas}})])]),n("div",{staticClass:"controls"},[n("v-text-field",{attrs:{type:"number",label:"Grid width"},model:{value:e.grid.width,callback:function(t){e.$set(e.grid,"width",t)},expression:"grid.width"}}),n("v-text-field",{attrs:{type:"number",label:"Grid height"},model:{value:e.grid.height,callback:function(t){e.$set(e.grid,"height",t)},expression:"grid.height"}}),n("v-text-field",{attrs:{type:"number",label:"Bomb count"},model:{value:e.nBombs,callback:function(t){e.nBombs=t},expression:"nBombs"}}),n("v-btn",{on:{click:e.newGame}},[e._v("New Game")])],1)])},w=[],x=(n("99af"),n("4de4"),n("7db0"),n("4160"),n("d81d"),n("13d5"),n("a434"),n("159b"),n("3835")),y=n("b85c"),C={name:"MineSweeper",data:function(){return{animation:-1,canvasRatio:1,grid:{width:20,height:20,cells:[]},nBombs:60,status:"",showBombs:!1}},mounted:function(){this.canvas=this.$refs.canvas,this.context=this.canvas.getContext("2d"),this.animation=requestAnimationFrame(this.render),window.addEventListener("resize",this.resizeCanvas,!1),this.newGame()},beforeDestroy:function(){cancelAnimationFrame(this.animation),window.removeEventListener("resize",this.resizeCanvas)},methods:{newGame:function(){this.canvasRatio=this.grid.width/this.grid.height,this.showBombs=!1,this.resizeCanvas(),this.grid.cells=this.generateField(),console.log(this.grid.cells)},generateField:function(){for(var e=this,t=[],n=0;n<this.grid.height;n++)for(var i=0;i<this.grid.width;i++)t.push({x:i,y:n,revealed:!1,bomb:!1,flag:!1,bombNeighbours:0});this.nBombs>t.length&&console.warn("There are move bombs than grid cells, clamping nBombs to",t.length);for(var r=Math.min(this.nBombs,t.length),o=[],a=0;a<r;a++){var s=Math.floor(Math.random()*t.length),c=t.splice(s,1)[0];c.bomb=!0,o.push(c)}t=t.concat(o);var l,h=Object(y["a"])(t);try{for(h.s();!(l=h.n()).done;){var u=l.value;u.neighbours=this.getNeighbours(u.x,u.y).map((function(n){var i=Object(x["a"])(n,2),r=i[0],o=i[1];return e.getCell(r,o,t)})).filter((function(e){return void 0!==e})),u.bombNeighbours=u.neighbours.map((function(e){return e.bomb})).reduce((function(e,t){return e+t}))}}catch(d){h.e(d)}finally{h.f()}return t},getNeighbours:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?[[e-1,t+0],[e-1,t-1],[e+0,t-1],[e+1,t-1],[e+1,t+0],[e+1,t+1],[e+0,t+1],[e-1,t+1]]:[[e-1,t+0],[e+0,t-1],[e+1,t+0],[e+0,t+1]]},clickCanvas:function(e){e.preventDefault();var t=this.canvas.getBoundingClientRect(),n=t.top,i=t.left,r=e.pageX-i,o=e.pageY-n,a=this.canvas.width/this.grid.width,s=this.canvas.height/this.grid.height,c=Math.floor(r/a),l=Math.floor(o/s),h=this.getCell(c,l);2===e.button?this.flagCell(h):this.clickCell(h)},flagCell:function(e){e.flag=!e.flag;var t=this.grid.cells.filter((function(e){return e.flag}));t.length===this.nBombs&&(this.status="You win!")},clickCell:function(e){e.bomb?(this.status="You die!",this.showBombs=!0):(e.revealed=!0,0===e.bombNeighbours&&e.neighbours.filter((function(e){return!e.revealed})).forEach(this.clickCell))},getCell:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.grid.cells;return n.find((function(n){return n.x===e&&n.y===t}))},render:function(){this.animation=requestAnimationFrame(this.render),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBackground(),this.drawGridLines(),this.drawCells()},drawBackground:function(){this.context.fillStyle="black",this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},drawGridLines:function(){var e=this.canvas.width/this.grid.width,t=this.canvas.height/this.grid.height;this.context.strokeStyle="red",this.context.lineWidth=this.canvas.width/400,this.context.beginPath();for(var n=0;n<=this.grid.width;n++)this.context.moveTo(n*e,0),this.context.lineTo(n*e,this.canvas.height);for(var i=0;i<=this.grid.height;i++)this.context.moveTo(0,i*t),this.context.lineTo(this.canvas.width,i*t);this.context.stroke()},drawCells:function(){var e,t=this.canvas.width/this.grid.width,n=this.canvas.height/this.grid.height,i=this.context.lineWidth,r=Object(y["a"])(this.grid.cells);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(o.flag)this.context.fillStyle="red",this.context.fillRect(o.x*t+i,o.y*n+i,t-2*i,n-2*i);else if(o.bomb&&this.showBombs)this.context.fillStyle="blue",this.context.fillRect(o.x*t+i,o.y*n+i,t-2*i,n-2*i);else if(o.revealed&&o.bombNeighbours>0){this.context.fillStyle="white";var a=n-2*i;this.context.font="".concat(a,"px Roboto");var s=this.context.measureText(o.bombNeighbours).width;this.context.fillText(o.bombNeighbours,o.x*t+t/2-s/2,o.y*n+n/2+a/2.5)}else o.revealed&&(this.context.fillStyle="gray",this.context.fillRect(o.x*t+i,o.y*n+i,t-2*i,n-2*i))}}catch(c){r.e(c)}finally{r.f()}},resizeCanvas:function(){var e,t,n=this.$refs.canvasContainer.getBoundingClientRect(),i=n.width,r=n.height,o=i/r;o>this.canvasRatio?(e=r*this.canvasRatio,t=r):(e=i,t=i/this.canvasRatio),this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.width=e,this.canvas.height=t}},watch:{"grid.width":function(){this.newGame()},"grid.height":function(){this.newGame()},nBombs:function(){this.newGame()}}},k=C,B=(n("2fea"),n("8336")),j=n("8654"),O=Object(c["a"])(k,p,w,!1,null,"7eb914ee",null),S=O.exports;h()(O,{VBtn:B["a"],VTextField:j["a"]});var _={name:"Home",components:{MineSweeper:S}},R=_,T=(n("cccb"),Object(c["a"])(R,b,m,!1,null,null,null)),M=T.exports;i["a"].use(g["a"]);var N=[{path:"/",name:"Home",component:M},{path:"/about",name:"About",component:function(){return n.e("chunk-2d22d746").then(n.bind(null,"f820"))}}],G=new g["a"]({routes:N}),A=G,E=n("2f62");i["a"].use(E["a"]);var P=new E["a"].Store({state:{},mutations:{},actions:{},modules:{}}),F=n("f309");i["a"].use(F["a"]);var $=new F["a"]({theme:{dark:!0}});i["a"].config.productionTip=!1,new i["a"]({router:A,store:P,vuetify:$,render:function(e){return e(f)}}).$mount("#app")},"8a23":function(e,t,n){},cccb:function(e,t,n){"use strict";var i=n("4230"),r=n.n(i);r.a}});
//# sourceMappingURL=app.343b7e4a.js.map