(function(e){function t(t){for(var i,r,s=t[0],c=t[1],l=t[2],h=0,g=[];h<s.length;h++)r=s[h],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&g.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(g.length)g.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={app:0},o=[];function r(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d22d746":"06bdeebe"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=a[e]=[t,i]}));t.push(n[2]=i);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=r(e);var l=new Error;o=function(t){c.onerror=c.onload=null,clearTimeout(h);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,n[1](l)}a[e]=void 0}};var h=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/minesweeper/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var h=0;h<c.length;h++)t(c[h]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("8a23"),a=n.n(i);a.a},4230:function(e,t,n){},"4e00":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"app"},[n("router-view")],1)},o=[],r={name:"App",components:{},data:function(){return{}}},s=r,c=(n("034f"),n("2877")),l=n("6544"),h=n.n(l),u=n("7496"),g=Object(c["a"])(s,a,o,!1,null,null,null),d=g.exports;h()(g,{VApp:u["a"]});var f=n("9483");Object(f["a"])("".concat("/minesweeper/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("d3b7");var m=n("8c4f"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("mine-sweeper")],1)},b=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mine-sweeper"},[n("div",{staticClass:"title"},[""===e.game.status?n("h1",[e._v("Mine Sweeper")]):n("h1",[e._v(e._s(e.game.status))]),n("p",{staticClass:"flag-count"},[e._v("Flags: "),n("span",{staticClass:"flag"},[e._v(e._s(e.game.flagCount))])])]),n("div",{ref:"canvasContainer",staticClass:"canvas-container-outer"},[n("div",{staticClass:"canvas-container-inner"},[n("canvas",{ref:"canvas",staticClass:"canvas",style:"pointer-events: "+(e.hold.nTouches>1?"none":"all"),on:{touchstart:e.touchStart,touchmove:e.touchMove,touchend:e.touchEnd,contextmenu:e.clickCanvas,click:e.clickCanvas}})])]),n("div",{staticClass:"controls"},[n("div",{staticClass:"text-fields"},[n("v-text-field",{attrs:{type:"number",label:"Width"},model:{value:e.grid.width,callback:function(t){e.$set(e.grid,"width",t)},expression:"grid.width"}}),n("v-text-field",{attrs:{type:"number",label:"Height"},model:{value:e.grid.height,callback:function(t){e.$set(e.grid,"height",t)},expression:"grid.height"}}),n("v-text-field",{attrs:{type:"number",label:"Bombs",rules:e.bombRules},model:{value:e.game.nBombs,callback:function(t){e.$set(e.game,"nBombs",t)},expression:"game.nBombs"}})],1),n("div",{staticClass:"buttons"},[n("v-btn",{staticClass:"new-game-button",attrs:{color:"primary"},on:{mousedown:function(t){e.computerMove(Math.ceil(e.showMoves++/10))}}},[e._v(" Computer Move ")]),n("v-btn",{staticClass:"new-game-button",attrs:{color:"primary"},on:{click:e.newGame}},[e._v("New Game")])],1)])])},w=[],C=(n("99af"),n("a623"),n("4de4"),n("4160"),n("c975"),n("d81d"),n("13d5"),n("a434"),n("159b"),n("3835")),y=n("2909"),x=n("b85c"),k=window.innerWidth>600?20:12,M=20===k?60:30,B=[],j={name:"MineSweeper",data:function(){return{animation:-1,canvasRatio:1,grid:{width:null===localStorage.getItem("gridWidth")?k:+localStorage.gridWidth,height:null===localStorage.getItem("gridHeight")?k:+localStorage.gridHeight},game:{status:"",nBombs:null===localStorage.getItem("nBombs")?M:+localStorage.nBombs,actualBombs:0,isDead:!1,flagCount:0},firstClick:!0,images:{bomb:new Image,flag:new Image,cell:new Image,numbers:{1:new Image,2:new Image,3:new Image,4:new Image,5:new Image,6:new Image,7:new Image,8:new Image}},touchTime:!1,showMoves:1,hold:{timeout:-1,x:0,y:0,down:!0,nTouches:0},holdDuration:300,preventClick:!1}},mounted:function(){this.canvas=this.$refs.canvas,this.context=this.canvas.getContext("2d"),this.images.bomb.src="img/bomb.png",this.images.flag.src="img/flag.png",this.images.cell.src="img/cell.png";for(var e=1;e<=8;e++)this.images.numbers[e].src="img/".concat(e,".png");this.animation=requestAnimationFrame(this.render),window.addEventListener("resize",this.resizeCanvas,!1),this.newGame()},beforeDestroy:function(){cancelAnimationFrame(this.animation),window.removeEventListener("resize",this.resizeCanvas),clearTimeout(this.hold.timeout)},methods:{computerMove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,t=!1;if(B.every((function(e){return!e.revealed}))){var n=this.getCell(1+Math.floor((this.grid.width-2)*Math.random()),1+Math.floor((this.grid.height-2)*Math.random()));if(t=!0,0===e--)return;this.clickCell(n)}var i,a=Object(x["a"])(B);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o.revealed&&o.bombNeighbours>0){var r=o.neighbours.filter((function(e){return e.flag})),s=o.neighbours.filter((function(e){return!e.revealed&&!e.flag})),c=r.length+s.length;if(s.length>0&&o.bombNeighbours===c){var l,h=Object(x["a"])(s);try{for(h.s();!(l=h.n()).done;){var u=l.value;if(t=!0,!u.flag){if(0===e--)return;this.flagCell(u)}}}catch(m){h.e(m)}finally{h.f()}}else if(r.length===o.bombNeighbours){var g,d=Object(x["a"])(s);try{for(d.s();!(g=d.n()).done;){var f=g.value;if(t=!0,!f.revealed){if(0===e--)return;this.clickCell(f)}}}catch(m){d.e(m)}finally{d.f()}}}}}catch(m){a.e(m)}finally{a.f()}return t},newGame:function(){localStorage.gridWidth=this.grid.width,localStorage.gridHeight=this.grid.height,localStorage.nBombs=this.game.nBombs,this.canvasRatio=this.grid.width/this.grid.height,this.resizeCanvas(),this.firstClick=!0,this.showMoves=1,B=this.getCells(),this.game.status="",this.game.isDead=!1,this.game.flagCount=0},getCells:function(){for(var e=[],t=0,n=0;n<this.grid.height;n++)for(var i=0;i<this.grid.width;i++)e.push({index:t++,x:i,y:n,revealed:!1,bomb:!1,flag:!1,bombNeighbours:0});return e},generateField:function(e){var t=this,n=this.getCells(),i=this.getNeighbours.apply(this,Object(y["a"])(e)).map((function(e){return t.getCell.apply(t,Object(y["a"])(e).concat([n]))})).filter((function(e){return void 0!==e}));i.push(this.getCell.apply(this,Object(y["a"])(e).concat([n]))),this.game.nBombs>n.length-i.length&&console.warn("There are move bombs than grid cells, clamping game.nBombs to",n.length-i.length);var a=Math.min(this.game.nBombs,n.length-i.length);this.game.actualBombs=a,i.forEach((function(e){return n.splice(n.indexOf(e),1)}));for(var o=[],r=0;r<a;r++){var s=Math.floor(Math.random()*n.length),c=n.splice(s,1)[0];c.bomb=!0,o.push(c)}n=n.concat(o),n=n.concat(i),n=n.sort((function(e,t){return e.index-t.index}));var l,h=Object(x["a"])(n);try{for(h.s();!(l=h.n()).done;){var u=l.value;u.neighbours=this.getNeighbours(u.x,u.y).map((function(e){var i=Object(C["a"])(e,2),a=i[0],o=i[1];return t.getCell(a,o,n)})).filter((function(e){return void 0!==e})),u.bombNeighbours=u.neighbours.map((function(e){return e.bomb})).reduce((function(e,t){return e+t}),0)}}catch(g){h.e(g)}finally{h.f()}return n},getNeighbours:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?[[e-1,t+0],[e+0,t-1],[e+1,t+0],[e+0,t+1],[e-1,t-1],[e+1,t-1],[e+1,t+1],[e-1,t+1]]:[[e-1,t+0],[e+0,t-1],[e+1,t+0],[e+0,t+1]]},touchStart:function(e){var t=this;this.hold.nTouches=e.touches.length;var n=this.canvas.getBoundingClientRect(),i=n.top,a=n.left,o=e.touches[0].clientX-a,r=e.touches[0].clientY-i;this.hold.down=!0,this.hold.x=o,this.hold.y=r,this.hold.timeout=setTimeout((function(){1===t.hold.nTouches&&(t.clickPos(o,r,!0),t.preventClick=!0)}),this.holdDuration)},touchMove:function(e){this.hold.nTouches=e.touches.length;var t=this.canvas.getBoundingClientRect(),n=t.top,i=t.left,a=e.touches[0].clientX-i,o=e.touches[0].clientY-n,r=Math.sqrt(Math.pow(this.hold.x-a,2)+Math.pow(this.hold.y-o,2));r>30&&this.touchEnd()},touchEnd:function(e){var t=this;e&&e.touches&&(this.hold.nTouches=e.touches.length),clearTimeout(this.hold.timeout),setTimeout((function(){t.preventClick=!1}),50)},clickCanvas:function(e){e.preventDefault();var t=2===e.button,n=this.canvas.getBoundingClientRect(),i=n.top,a=n.left,o=e.clientX-a,r=e.clientY-i;this.clickPos(o,r,t)},clickPos:function(e,t,n){if(this.preventClick)this.preventClick=!1;else if(!this.game.isDead){var i=this.canvas.getBoundingClientRect(),a=i.width,o=i.height,r=a/this.grid.width,s=o/this.grid.height,c=Math.floor(e/r),l=Math.floor(t/s),h=this.getCell(c,l);n?this.flagCell(h):this.clickCell(h)}},checkWin:function(){var e=B.filter((function(e){return e.revealed})).length;this.grid.width*this.grid.height===e+this.game.actualBombs&&(this.game.status="You win!")},flagCell:function(e){e.revealed||(e.flag=!e.flag,e.flag?this.game.flagCount++:this.game.flagCount--,this.checkWin())},clickCell:function(e){if(!e.flag)if(this.firstClick&&(B=this.generateField([e.x,e.y]),e=this.getCell(e.x,e.y),this.firstClick=!1),e.bomb)this.game.status="You die!",this.game.isDead=!0;else{if(e.revealed=!0,0===e.bombNeighbours){var t=e.neighbours;while(t.length>0){var n,i=[],a=Object(x["a"])(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.revealed||o.flag||(o.revealed=!0,0===o.bombNeighbours&&(i=i.concat(o.neighbours)))}}catch(r){a.e(r)}finally{a.f()}t=i}}this.checkWin()}},getCell:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.grid.width,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.grid.height;if(!(e>=i||e<0)&&!(t>=a||t<0))return n[t*i+e]},render:function(){this.animation=requestAnimationFrame(this.render),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBackground(),this.drawGridLines(),this.drawCells()},drawBackground:function(){this.context.fillStyle="#bdbdbd",this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},drawGridLines:function(){var e=16,t=16;this.context.strokeStyle="#7b7b7b",this.context.lineWidth=1,this.context.beginPath();for(var n=0;n<=this.grid.width;n++)this.context.moveTo(.5+n*e,-.5),this.context.lineTo(.5+n*e,this.canvas.height+.5);for(var i=0;i<=this.grid.height;i++)this.context.moveTo(-.5,.5+i*t),this.context.lineTo(this.canvas.width+.5,.5+i*t);this.context.stroke()},drawCells:function(){var e,t=16,n=16,i=Object(x["a"])(B);try{for(i.s();!(e=i.n()).done;){var a=e.value;a.bomb&&this.game.isDead?this.context.drawImage(this.images.bomb,a.x*t,a.y*n,t,n):a.flag?this.context.drawImage(this.images.flag,a.x*t,a.y*n,t,n):a.revealed&&a.bombNeighbours>0?this.context.drawImage(this.images.numbers[a.bombNeighbours],a.x*t,a.y*n,t,n):a.revealed||this.context.drawImage(this.images.cell,a.x*t,a.y*n,t,n)}}catch(o){i.e(o)}finally{i.f()}},resizeCanvas:function(){var e,t,n=this.$refs.canvasContainer.getBoundingClientRect(),i=n.width,a=n.height,o=i/a;o>this.canvasRatio?(e=a*this.canvasRatio,t=a):(e=i,t=i/this.canvasRatio),this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.width=16*this.grid.width+1,this.canvas.height=16*this.grid.height+1}},watch:{"grid.width":function(){this.newGame()},"grid.height":function(){this.newGame()},"game.nBombs":function(){this.newGame()}},computed:{maxBombs:function(){var e=this.grid.width*this.grid.height,t=3*Math.min(this.grid.width,this.grid.height,3);return e-t},bombRules:function(){var e=this;return[function(e){return!!e||"Required"},function(e){return e>=1||"Number of bombs must be > 0"},function(t){return t<=e.maxBombs||"Number of bombs can at most be "+e.maxBombs}]}}},O=j,S=(n("d439"),n("8336")),T=n("8654"),_=Object(c["a"])(O,p,w,!1,null,"2738b40e",null),I=_.exports;h()(_,{VBtn:S["a"],VTextField:T["a"]});var N={name:"Home",components:{MineSweeper:I}},R=N,E=(n("cccb"),Object(c["a"])(R,v,b,!1,null,null,null)),A=E.exports;i["a"].use(m["a"]);var P=[{path:"/",name:"Home",component:A},{path:"/about",name:"About",component:function(){return n.e("chunk-2d22d746").then(n.bind(null,"f820"))}}],D=new m["a"]({routes:P}),F=D,G=n("2f62");if(0===document.querySelectorAll("head link[rel='manifest']").length){var W=document.createElement("link");W.setAttribute("rel","manifest"),W.setAttribute("href","./manifest.json"),document.querySelector("head").appendChild(W)}i["a"].use(G["a"]);var $=new G["a"].Store({state:{},mutations:{},actions:{},modules:{}}),q=n("f309");i["a"].use(q["a"]);var z=new q["a"]({theme:{dark:!0,themes:{dark:{primary:"#ff0000",secondary:"#a6ff00"}}}});i["a"].config.productionTip=!1,new i["a"]({router:F,store:$,vuetify:z,render:function(e){return e(d)}}).$mount("#app")},"8a23":function(e,t,n){},cccb:function(e,t,n){"use strict";var i=n("4230"),a=n.n(i);a.a},d439:function(e,t,n){"use strict";var i=n("4e00"),a=n.n(i);a.a}});
//# sourceMappingURL=app.06e27455.js.map