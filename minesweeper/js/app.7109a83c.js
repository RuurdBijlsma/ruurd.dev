(function(e){function t(t){for(var i,r,s=t[0],c=t[1],l=t[2],h=0,g=[];h<s.length;h++)r=s[h],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&g.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(g.length)g.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={app:0},a=[];function r(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d22d746":"06bdeebe"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=o[e]=[t,i]}));t.push(n[2]=i);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=r(e);var l=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(h);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,n[1](l)}o[e]=void 0}};var h=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/minesweeper/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var h=0;h<c.length;h++)t(c[h]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("8a23"),o=n.n(i);o.a},4230:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"app"},[n("router-view")],1)},a=[],r={name:"App",components:{},data:function(){return{}}},s=r,c=(n("034f"),n("2877")),l=n("6544"),h=n.n(l),u=n("7496"),g=Object(c["a"])(s,o,a,!1,null,null,null),d=g.exports;h()(g,{VApp:u["a"]});var f=n("9483");Object(f["a"])("".concat("/minesweeper/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("d3b7");var m=n("8c4f"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("mine-sweeper")],1)},b=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mine-sweeper"},[n("div",{staticClass:"title"},[""===e.game.status?n("h1",[e._v("Mine Sweeper")]):n("h1",[e._v(e._s(e.game.status))]),n("p",{staticClass:"flag-count"},[e._v("Flags: "),n("span",{staticClass:"flag"},[e._v(e._s(e.grid.cells.filter((function(e){return e.flag})).length))])])]),n("div",{ref:"canvasContainer",staticClass:"canvas-container-outer"},[n("div",{staticClass:"canvas-container-inner"},[n("canvas",{ref:"canvas",staticClass:"canvas",on:{touchstart:e.touchStart,touchmove:e.touchMove,touchend:e.touchEnd,contextmenu:e.clickCanvas,click:e.clickCanvas}})])]),n("div",{staticClass:"controls"},[n("div",{staticClass:"text-fields"},[n("v-text-field",{attrs:{type:"number",label:"Width"},model:{value:e.grid.width,callback:function(t){e.$set(e.grid,"width",t)},expression:"grid.width"}}),n("v-text-field",{attrs:{type:"number",label:"Height"},model:{value:e.grid.height,callback:function(t){e.$set(e.grid,"height",t)},expression:"grid.height"}}),n("v-text-field",{attrs:{type:"number",label:"Bombs",rules:e.bombRules},model:{value:e.game.nBombs,callback:function(t){e.$set(e.game,"nBombs",t)},expression:"game.nBombs"}})],1),n("v-btn",{staticClass:"new-game-button",attrs:{color:"primary"},on:{click:e.newGame}},[e._v("New Game")])],1)])},w=[],y=(n("99af"),n("a623"),n("4de4"),n("7db0"),n("4160"),n("c975"),n("d81d"),n("13d5"),n("a434"),n("159b"),n("3835")),C=n("b85c"),x=n("2909"),k=window.innerWidth>600?20:12,B=20===k?60:30,S={name:"MineSweeper",data:function(){return{animation:-1,canvasRatio:1,grid:{width:null===localStorage.getItem("gridWidth")?k:+localStorage.gridWidth,height:null===localStorage.getItem("gridHeight")?k:+localStorage.gridHeight,cells:[]},game:{status:"",nBombs:null===localStorage.getItem("nBombs")?B:+localStorage.nBombs,actualBombs:0,showBombs:!1,isDead:!1},firstClick:!0,images:{bomb:new Image,flag:new Image,cell:new Image,numbers:{1:new Image,2:new Image,3:new Image,4:new Image,5:new Image,6:new Image,7:new Image,8:new Image}},touchTime:!1,hold:{timeout:-1,x:0,y:0,down:!0},holdDuration:300,preventClick:!1}},mounted:function(){this.canvas=this.$refs.canvas,this.context=this.canvas.getContext("2d"),this.images.bomb.src="img/bomb.png",this.images.flag.src="img/flag.png",this.images.cell.src="img/cell.png";for(var e=1;e<=8;e++)this.images.numbers[e].src="img/".concat(e,".png");this.animation=requestAnimationFrame(this.render),window.addEventListener("resize",this.resizeCanvas,!1),this.newGame()},beforeDestroy:function(){cancelAnimationFrame(this.animation),window.removeEventListener("resize",this.resizeCanvas),clearTimeout(this.hold.timeout)},methods:{newGame:function(){localStorage.gridWidth=this.grid.width,localStorage.gridHeight=this.grid.height,localStorage.nBombs=this.game.nBombs,console.log(localStorage.nBombs,this.game.nBombs),this.canvasRatio=this.grid.width/this.grid.height,this.resizeCanvas(),this.firstClick=!0,this.grid.cells=this.getCells(),this.game.status="",this.game.showBombs=!1,this.game.isDead=!1},getCells:function(){for(var e=[],t=0;t<this.grid.height;t++)for(var n=0;n<this.grid.width;n++)e.push({x:n,y:t,revealed:!1,bomb:!1,flag:!1,bombNeighbours:0});return e},generateField:function(e){var t=this,n=this.getCells(),i=this.getNeighbours.apply(this,Object(x["a"])(e)).map((function(e){return t.getCell.apply(t,Object(x["a"])(e).concat([n]))})).filter((function(e){return void 0!==e}));i.push(this.getCell.apply(this,Object(x["a"])(e).concat([n]))),console.log(i),this.game.nBombs>n.length-i.length&&console.warn("There are move bombs than grid cells, clamping game.nBombs to",n.length-i.length);var o=Math.min(this.game.nBombs,n.length-i.length);this.game.actualBombs=o,i.forEach((function(e){return n.splice(n.indexOf(e),1)}));for(var a=[],r=0;r<o;r++){var s=Math.floor(Math.random()*n.length),c=n.splice(s,1)[0];c.bomb=!0,a.push(c)}n=n.concat(a),n=n.concat(i);var l,h=Object(C["a"])(n);try{for(h.s();!(l=h.n()).done;){var u=l.value;u.neighbours=this.getNeighbours(u.x,u.y).map((function(e){var i=Object(y["a"])(e,2),o=i[0],a=i[1];return t.getCell(o,a,n)})).filter((function(e){return void 0!==e})),u.bombNeighbours=u.neighbours.map((function(e){return e.bomb})).reduce((function(e,t){return e+t}),0)}}catch(g){h.e(g)}finally{h.f()}return n},getNeighbours:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?[[e-1,t+0],[e+0,t-1],[e+1,t+0],[e+0,t+1],[e-1,t-1],[e+1,t-1],[e+1,t+1],[e-1,t+1]]:[[e-1,t+0],[e+0,t-1],[e+1,t+0],[e+0,t+1]]},touchStart:function(e){var t=this,n=this.canvas.getBoundingClientRect(),i=n.top,o=n.left,a=e.touches[0].clientX-o,r=e.touches[0].clientY-i;this.hold.down=!0,this.hold.x=a,this.hold.y=r,this.hold.timeout=setTimeout((function(){t.clickPos(a,r,!0),t.preventClick=!0}),this.holdDuration)},touchMove:function(e){var t=this.canvas.getBoundingClientRect(),n=t.top,i=t.left,o=e.touches[0].clientX-i,a=e.touches[0].clientY-n,r=Math.sqrt(Math.pow(this.hold.x-o,2)+Math.pow(this.hold.y-a,2));r>30&&(console.log("Cancelling hold"),this.touchEnd())},touchEnd:function(){var e=this;clearTimeout(this.hold.timeout),setTimeout((function(){e.preventClick=!1}),50)},clickCanvas:function(e){e.preventDefault();var t=2===e.button,n=this.canvas.getBoundingClientRect(),i=n.top,o=n.left,a=e.clientX-o,r=e.clientY-i;this.clickPos(a,r,t)},clickPos:function(e,t,n){if(this.preventClick)this.preventClick=!1;else if(!this.game.isDead){var i=this.canvas.getBoundingClientRect(),o=i.width,a=i.height,r=o/this.grid.width,s=a/this.grid.height,c=Math.floor(e/r),l=Math.floor(t/s),h=this.getCell(c,l);n?this.flagCell(h):this.clickCell(h)}},checkWin:function(){var e=this.grid.cells.filter((function(e){return e.flag})),t=e.filter((function(e){return e.bomb}));console.log(t,e,this.game.nBombs,this.grid.cells.every((function(e){return e.revealed||e.flag}))),t.length===+this.game.actualBombs&&t.length===e.length&&this.grid.cells.every((function(e){return e.revealed||e.flag}))&&(this.game.status="You win!")},flagCell:function(e){e.revealed||(e.flag=!e.flag,this.checkWin())},clickCell:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.flag||(this.firstClick&&(this.grid.cells=this.generateField([e.x,e.y]),e=this.getCell(e.x,e.y),console.log("First click, continuing?"),this.firstClick=!1),e.bomb?(this.game.status="You die!",this.game.isDead=!0,this.game.showBombs=!0):(e.revealed=!0,0===e.bombNeighbours&&e.neighbours.filter((function(e){return!e.revealed})).forEach((function(e){return t.clickCell(e,!1)})),n&&this.checkWin()))},getCell:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.grid.cells,o=Object(C["a"])(i);try{for(o.s();!(n=o.n()).done;){var a=n.value;void 0===a&&console.log(i,a)}}catch(r){o.e(r)}finally{o.f()}return i.find((function(n){return n.x===e&&n.y===t}))},render:function(){this.animation=requestAnimationFrame(this.render),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBackground(),this.drawGridLines(),this.drawCells()},drawBackground:function(){this.context.fillStyle="#bdbdbd",this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},drawGridLines:function(){var e=16,t=16;this.context.strokeStyle="#7b7b7b",this.context.lineWidth=1,this.context.beginPath();for(var n=0;n<=this.grid.width;n++)this.context.moveTo(.5+n*e,-.5),this.context.lineTo(.5+n*e,this.canvas.height+.5);for(var i=0;i<=this.grid.height;i++)this.context.moveTo(-.5,.5+i*t),this.context.lineTo(this.canvas.width+.5,.5+i*t);this.context.stroke()},drawCells:function(){var e,t=16,n=16,i=Object(C["a"])(this.grid.cells);try{for(i.s();!(e=i.n()).done;){var o=e.value;o.bomb&&this.game.showBombs?this.context.drawImage(this.images.bomb,o.x*t,o.y*n,t,n):o.flag?this.context.drawImage(this.images.flag,o.x*t,o.y*n,t,n):o.revealed&&o.bombNeighbours>0?this.context.drawImage(this.images.numbers[o.bombNeighbours],o.x*t,o.y*n,t,n):o.revealed||this.context.drawImage(this.images.cell,o.x*t,o.y*n,t,n)}}catch(a){i.e(a)}finally{i.f()}},resizeCanvas:function(){console.log("Resize");var e,t,n=this.$refs.canvasContainer.getBoundingClientRect(),i=n.width,o=n.height,a=i/o;a>this.canvasRatio?(e=o*this.canvasRatio,t=o):(e=i,t=i/this.canvasRatio),this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.width=16*this.grid.width+1,this.canvas.height=16*this.grid.height+1}},watch:{"grid.width":function(){this.newGame()},"grid.height":function(){this.newGame()},"game.nBombs":function(){this.newGame()}},computed:{maxBombs:function(){var e=this.grid.width*this.grid.height,t=3*Math.min(this.grid.width,this.grid.height,3);return console.log(e-t),e-t},bombRules:function(){var e=this;return[function(e){return!!e||"Required"},function(e){return e>=1||"Number of bombs must be > 0"},function(t){return t<=e.maxBombs||"Number of bombs can at most be "+e.maxBombs}]}}},j=S,O=(n("69da"),n("8336")),_=n("8654"),I=Object(c["a"])(j,p,w,!1,null,"05ca2dad",null),M=I.exports;h()(I,{VBtn:O["a"],VTextField:_["a"]});var R={name:"Home",components:{MineSweeper:M}},T=R,E=(n("cccb"),Object(c["a"])(T,v,b,!1,null,null,null)),N=E.exports;i["a"].use(m["a"]);var A=[{path:"/",name:"Home",component:N},{path:"/about",name:"About",component:function(){return n.e("chunk-2d22d746").then(n.bind(null,"f820"))}}],P=new m["a"]({routes:A}),F=P,G=n("2f62");if(0===document.querySelectorAll("head link[rel='manifest']").length){var W=document.createElement("link");W.setAttribute("rel","manifest"),W.setAttribute("href","./manifest.json"),document.querySelector("head").appendChild(W)}i["a"].use(G["a"]);var $=new G["a"].Store({state:{},mutations:{},actions:{},modules:{}}),q=n("f309");i["a"].use(q["a"]);var D=new q["a"]({theme:{dark:!0,themes:{dark:{primary:"#ff0000",secondary:"#a6ff00"}}}});i["a"].config.productionTip=!1,new i["a"]({router:F,store:$,vuetify:D,render:function(e){return e(d)}}).$mount("#app")},"69da":function(e,t,n){"use strict";var i=n("cace"),o=n.n(i);o.a},"8a23":function(e,t,n){},cace:function(e,t,n){},cccb:function(e,t,n){"use strict";var i=n("4230"),o=n.n(i);o.a}});
//# sourceMappingURL=app.7109a83c.js.map