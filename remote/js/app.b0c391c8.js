(function(e){function t(t){for(var r,i,o=t[0],u=t[1],c=t[2],h=0,v=[];h<o.length;h++)i=o[h],s[i]&&v.push(s[i][0]),s[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(v.length)v.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==s[u]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},s={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("64a9"),s=n.n(r);s.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"pages"},[0===e.page?n("remote-page",{attrs:{server:e.server}}):1===e.page?n("input-page",{attrs:{server:e.server}}):n("power-page",{attrs:{server:e.server}})],1),n("div",{staticClass:"bottom-bar"},[n("div",{attrs:{active:0===e.page},on:{click:function(t){e.page=0}}},[n("i",{staticClass:"material-icons"},[e._v("settings_remote")]),0===e.page?n("a",[e._v("Remote")]):e._e()]),n("div",{attrs:{active:1===e.page},on:{click:function(t){e.page=1}}},[n("i",{staticClass:"material-icons"},[e._v("mouse")]),1===e.page?n("a",[e._v("Input")]):e._e()]),n("div",{attrs:{active:2===e.page},on:{click:function(t){e.page=2}}},[n("i",{staticClass:"material-icons"},[e._v("power_settings_new")]),2===e.page?n("a",[e._v("Power")]):e._e()])])])},a=[],i=(n("96cf"),n("3b8d")),o=n("5d73"),u=n.n(o),c=n("f499"),l=n.n(c),h=n("795b"),v=n.n(h),p=n("d225"),f=n("b0b4"),d=function(){function e(t){var n=this;Object(p["a"])(this,e),this.ip=t,this.socket=new WebSocket(this.ip),this.socket.onmessage=function(e){return n.fire("rawMessage",e)},this.socket.onopen=function(){return n.fire("open")},this.events={}}return Object(f["a"])(e,[{key:"send",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n,r=this,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"",e.abrupt("return",new v.a(function(e){var s,a=r.getId(),i=l()({id:a,action:t,value:n});s=function(t){var n=JSON.parse(t.data);n.id===a&&(r.off("rawMessage",s),e(n.data))},r.on("rawMessage",s),r.socket.send(i)}));case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"fire",value:function(e){if(this.events.hasOwnProperty(e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s=!0,a=!1,i=void 0;try{for(var o,c=u()(this.events[e]);!(s=(o=c.next()).done);s=!0){var l=o.value;l.apply(void 0,n)}}catch(h){a=!0,i=h}finally{try{s||null==c.return||c.return()}finally{if(a)throw i}}}}},{key:"on",value:function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}},{key:"off",value:function(e,t){if(this.events.hasOwnProperty(e)){var n=this.events[e];n.splice(n.indexOf(t),1)}}},{key:"getId",value:function(){return this.i||(this.i=0),this.i++}}]),e}(),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input"},[n("canvas",{staticClass:"trackpad",on:{click:e.touchClick,touchmove:e.touchMove,touchstart:e.touchStart,touchend:e.touchEnd}})])},w=[],g=n("768b"),b={name:"InputPage",props:{server:d},data:function(){return{mouseIsDown:!1,lastTouchPos:[0,0],lastScroll:0,lastSend:0,delta:[0,0],scrollDelta:0,sendRate:15,context:null,canvas:null}},methods:{getTouchPosition:function(e){var t=e.pageX-e.target.offsetLeft,n=e.pageY-e.target.offsetTop;return[t,n]},touchClick:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=this.getTouchPosition(t)[0],r=n>t.target.offsetWidth/2,r?this.server.send("rightClick"):this.server.send("leftClick");case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),touchEnd:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.mouseIsDown=!1;case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),touchStart:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.mouseIsDown=!0,t.touches&&1===t.touches.length?this.lastTouchPos=this.getTouchPosition(t.touches[0]):t.touches&&2===t.touches.length&&(this.lastScroll=this.getTouchPosition(t.touches[0])[1]);case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),touchMove:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.mouseIsDown&&(t.touches&&1===t.touches.length?this.moveCursor(t):t.touches&&2===t.touches.length&&this.scroll(t));case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),scroll:function(e){var t=this.getTouchPosition(e.touches[0]),n=Object(g["a"])(t,2),r=(n[0],n[1]),s=this.lastScroll-r;this.lastScroll=r,this.server.send("scroll",Math.round(-12*s))},moveCursor:function(e){var t=this.getTouchPosition(e.touches[0]),n=Object(g["a"])(t,2),r=n[0],s=n[1],a=[this.lastTouchPos[0]-r,this.lastTouchPos[1]-s];this.lastTouchPos=[r,s],this.delta[0]+=a[0],this.delta[1]+=a[1];var i=performance.now();i-this.lastSend>this.sendRate&&(this.server.send("moveMouse",this.delta.map(function(e){var t=e<0;return e=Math.pow(Math.abs(e),1.5),t||(e*=-1),Math.round(e)}).join(",")),this.delta=[0,0],this.lastSend=i)}},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.canvas=document.querySelector(".trackpad"),this.context=this.canvas.getContext("2d");case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},y=b,k=(n("a2e4"),n("2877")),_=Object(k["a"])(y,m,w,!1,null,"6cb56115",null),R=_.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"power"},[n("div",{staticClass:"power-buttons"},[n("div",{on:{click:function(t){return e.server.send("shutdown")}}},[n("i",{staticClass:"material-icons"},[e._v("power_settings_new")]),n("a",[e._v("Shut down")])]),n("div",{on:{click:function(t){return e.server.send("restart")}}},[n("i",{staticClass:"material-icons"},[e._v("autorenew")]),n("a",[e._v("Restart")])]),n("div",{on:{click:function(t){return e.server.send("sleep")}}},[n("i",{staticClass:"material-icons"},[e._v("hotel")]),n("a",[e._v("Sleep")])])])])},C=[],O={name:"PowerPage",props:{server:d}},j=O,P=(n("f1e9"),Object(k["a"])(j,x,C,!1,null,"6951dd58",null)),S=P.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"remote"},[n("div",{staticClass:"arrows"},[n("div",{staticClass:"invisible-cell"}),n("div",{staticClass:"arrow-up",on:{click:function(t){return e.sendKey("{UP}")}}},[n("i",{staticClass:"material-icons"},[e._v("keyboard_arrow_up")])]),n("div",{staticClass:"invisible-cell"}),n("div",{staticClass:"arrow-left",on:{click:function(t){return e.sendKey("{LEFT}")}}},[n("i",{staticClass:"material-icons"},[e._v("keyboard_arrow_left")])]),n("div",{staticClass:"ok-button",on:{click:function(t){return e.sendKey(" ")}}},[n("i",{staticClass:"material-icons"},[e._v("pause")])]),n("div",{staticClass:"arrow-right",on:{click:function(t){return e.sendKey("{RIGHT}")}}},[n("i",{staticClass:"material-icons"},[e._v("keyboard_arrow_right")])]),n("div",{staticClass:"invisible-cell"}),n("div",{staticClass:"arrow-down",on:{click:function(t){return e.sendKey("{DOWN}")}}},[n("i",{staticClass:"material-icons"},[e._v("keyboard_arrow_down")])]),n("div",{staticClass:"invisible-cell"})]),n("div",{staticClass:"media-controls"},[n("div",{staticClass:"media-previous",on:{click:function(t){return e.server.send("mediaPrevious")}}},[n("i",{staticClass:"material-icons"},[e._v("skip_previous")])]),n("div",{staticClass:"media-playpause",on:{click:function(t){return e.server.send("mediaPlayPause")}}},[n("i",{staticClass:"material-icons"},[e._v("play_arrow")])]),n("div",{staticClass:"media-next",on:{click:function(t){return e.server.send("mediaNext")}}},[n("i",{staticClass:"material-icons"},[e._v("skip_next")])])]),n("div",{staticClass:"volume-slider"},[n("div",{staticClass:"volume-status",on:{click:e.toggleMute}},[0===e.volume?n("i",{staticClass:"material-icons"},[e._v("volume_off")]):e.volume<50?n("i",{staticClass:"material-icons"},[e._v("volume_down")]):n("i",{staticClass:"material-icons"},[e._v("volume_up")])]),n("div",{staticClass:"volume-progress-container",on:{touchmove:e.mouseMove,mousemove:e.mouseMove,touchstart:e.mouseDown,mousedown:e.mouseDown,touchend:e.mouseUp,mouseup:e.mouseUp}},[n("div",{staticClass:"volume-progress",style:{width:Math.round(e.volume)+"%"}})])])])},T=[],I={name:"RemotePage",props:{server:d},data:function(){return{volume:0,interval:-1,lastSend:0,mouseIsDown:!1,lastTouch:void 0,volumeSendRate:200,volumeRefreshRate:250,prevPeak:50}},methods:{sendKey:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.server.send("pressKey",t);case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),toggleMute:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(performance.now()-this.lastSend>=this.volumeSendRate)){e.next=5;break}return this.lastSend=performance.now(),0!==this.volume?(t=0,this.prevPeak=this.volume):t=this.prevPeak,e.next=5,this.server.send("setVolume",t);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),mouseUp:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.lastTouch&&(t=this.lastTouch,t.touches&&(t=t.touches[0]),n=t.pageX-t.target.offsetLeft,this.volume=100*Math.min(Math.max(n/t.target.offsetWidth,0),1),setTimeout(function(){r.mouseIsDown=!1,r.setVolumeByEvent(t)},this.volumeSendRate),this.lastTouch=void 0);case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),mouseDown:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.mouseIsDown=!0,this.setVolumeByEvent(t);case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),mouseMove:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.lastTouch=t,this.mouseIsDown&&this.setVolumeByEvent(t);case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),setVolumeByEvent:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=document.querySelector(".volume-progress"),n.style.transition="0s",t.touches&&(t=t.touches[0]),r=t.pageX-t.target.offsetLeft,this.volume=100*Math.min(Math.max(r/t.target.offsetWidth,0),1),!(performance.now()-this.lastSend>=this.volumeSendRate)){e.next=11;break}return this.lastSend=performance.now(),e.next=9,this.server.send("setVolume",Math.round(100*this.volume)/100);case 9:n.style.transition="width 0.1s",n.style.transitionTimingFunction="linear";case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),updateVolume:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.server.send("getVolume");case 2:this.volume=e.sent,this.interval=setInterval(Object(i["a"])(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.mouseIsDown){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.server.send("getVolume");case 4:if(n=e.sent,!t.mouseIsDown){e.next=7;break}return e.abrupt("return");case 7:t.volume=n;case 8:case"end":return e.stop()}},e)})),this.volumeRefreshRate);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log("Remote mounted",this.server.socket.readyState),1!==this.server.socket.readyState?this.server.on("open",Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.updateVolume());case 1:case"end":return e.stop()}},e)}))):this.updateVolume();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){-1!==this.interval&&clearInterval(this.interval)}},D=I,E=(n("8296"),Object(k["a"])(D,M,T,!1,null,"bb8d44d8",null)),V=E.exports,K=new d("ws://192.168.178.15:8005");console.log(K);var W={name:"app",components:{RemotePage:V,PowerPage:S,InputPage:R},data:function(){return{page:0,server:K}},mounted:function(){var e=this;K.on("open",Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.debugSend("ping");case 2:case"end":return t.stop()}},t)})))},methods:{debugSend:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n,r,s,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"",r=performance.now(),e.next=4,K.send(t,n);case 4:s=e.sent,console.log({responseTime:performance.now()-r,response:s});case 6:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}},$=W,B=(n("034f"),Object(k["a"])($,s,a,!1,null,null,null)),L=B.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(L)}}).$mount("#app")},"5df2":function(e,t,n){},"64a9":function(e,t,n){},8296:function(e,t,n){"use strict";var r=n("dfd9"),s=n.n(r);s.a},a2e4:function(e,t,n){"use strict";var r=n("5df2"),s=n.n(r);s.a},d8c9:function(e,t,n){},dfd9:function(e,t,n){},f1e9:function(e,t,n){"use strict";var r=n("d8c9"),s=n.n(r);s.a}});
//# sourceMappingURL=app.b0c391c8.js.map