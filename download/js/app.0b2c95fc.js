(function(e){function t(t){for(var n,i,o=t[0],u=t[1],c=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,o=1;o<r.length;o++){var u=r[o];0!==s[u]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},s={app:0},a=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),s=r.n(n);s.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),s=r("43f9"),a=r.n(s),i=(r("51de"),r("e094"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("md-app",[r("md-app-toolbar",{staticClass:"md-primary"},[r("span",{staticClass:"md-title"},[e._v("Media Download")])]),r("md-app-content",[r("router-view")],1)],1)],1)}),o=[],u=(r("d3b7"),r("96cf"),r("d4ec")),c=r("bee2"),l=function(){function e(){Object(u["a"])(this,e)}return Object(c["a"])(e,[{key:"setEndpoint",value:function(e){this.endPoint=e,this.user=null,this.password=null}},{key:"getDirectory",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==this.user&&null!==this.password){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,regeneratorRuntime.awrap(this.json(this.endPoint+e,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:this.user,password:this.password})}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),null,this)}},{key:"json",value:function(e,t){var r,n;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(fetch(e,t));case 2:return r=s.sent,s.next=5,regeneratorRuntime.awrap(r.text());case 5:return n=s.sent,s.prev=6,s.abrupt("return",JSON.parse(n));case 10:return s.prev=10,s.t0=s["catch"](6),console.warn("Could not parse server response",n),s.abrupt("return",!1);case 14:case"end":return s.stop()}}),null,null,[[6,10]])}},{key:"auth",value:function(e,t){var r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.json(this.endPoint+"/auth",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e,password:t})}));case 2:return r=n.sent,!0===r&&(this.user=e,this.password=t),n.abrupt("return",r);case 5:case"end":return n.stop()}}),null,this)}}]),e}(),d=new l;d.setEndpoint("https://ruurd.dev:3000");var p={name:"app"},m=p,f=(r("034f"),r("2877")),h=Object(f["a"])(m,i,o,!1,null,null,null),v=h.exports,g=r("8c4f"),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("form",{staticClass:"md-layout",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.validateUser(t)}}},[r("md-card",{staticClass:"md-layout-item md-size-50 md-small-size-100"},[r("md-card-header",[r("div",{staticClass:"md-title"},[e._v("Log-in")])]),r("md-card-content",[r("div",{staticClass:"md-layout md-gutter"},[r("div",{staticClass:"md-layout-item md-small-size-100"},[r("md-field",{class:e.getValidationClass("user")},[r("label",{attrs:{for:"user"}},[e._v("Username")]),r("md-input",{attrs:{name:"user",id:"user",autocomplete:"username",disabled:e.sending},model:{value:e.form.user,callback:function(t){e.$set(e.form,"user",t)},expression:"form.user"}}),e.$v.form.user.required?e.$v.form.user.minlength?e._e():r("span",{staticClass:"md-error"},[e._v("Invalid user name")]):r("span",{staticClass:"md-error"},[e._v("The user name is required")])],1)],1),r("div",{staticClass:"md-layout-item md-small-size-100"},[r("md-field",{class:e.getValidationClass("password")},[r("label",{attrs:{for:"password"}},[e._v("Password")]),r("md-input",{attrs:{name:"password",id:"password",type:"password",disabled:e.sending},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e.$v.form.password.required?e.$v.form.password.minlength?e._e():r("span",{staticClass:"md-error"},[e._v("Invalid password")]):r("span",{staticClass:"md-error"},[e._v("The password is required")])],1)],1)])]),e.sending?r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):e._e(),r("md-card-actions",[r("md-button",{staticClass:"md-primary",attrs:{type:"submit",disabled:e.sending}},[e._v("Save user")])],1)],1),r("md-snackbar",{attrs:{"md-active":e.userSaved},on:{"update:mdActive":function(t){e.userSaved=t},"update:md-active":function(t){e.userSaved=t}}},[e._v("The user "+e._s(e.lastUser)+" was logged in with success!")]),r("md-snackbar",{attrs:{"md-active":e.loginFail},on:{"update:mdActive":function(t){e.loginFail=t},"update:md-active":function(t){e.loginFail=t}}},[e._v("Credentials don't match any records!")])],1)])},b=[],y=r("1dce"),x=r("b5ae"),_={name:"Login",mixins:[y["validationMixin"]],data:function(){return{form:{user:null,password:null},userSaved:!1,loginFail:!1,sending:!1,lastUser:null}},validations:{form:{user:{required:x["required"],minLength:Object(x["minLength"])(3)},password:{required:x["required"],minLength:Object(x["minLength"])(3)}}},methods:{getValidationClass:function(e){var t=this.$v.form[e];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},clearForm:function(){this.$v.$reset(),this.form.user=null,this.form.password=null},saveUser:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return this.sending=!0,t.next=3,regeneratorRuntime.awrap(d.auth(this.form.user,this.form.password));case 3:e=t.sent,this.sending=!1,e?(localStorage.auth=JSON.stringify({user:this.form.user,password:this.form.password}),this.lastUser="".concat(this.form.user),this.userSaved=!0,this.clearForm(),location.href="#/",location.reload()):this.loginFail=!0;case 6:case"end":return t.stop()}}),null,this)},validateUser:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:this.$v.$touch(),this.$v.$invalid||this.saveUser();case 2:case"end":return e.stop()}}),null,this)}}},k=_,$=Object(f["a"])(k,w,b,!1,null,"7002817a",null),O=$.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("md-list",[r("md-list-item",{on:{click:e.goUp}},[r("md-icon",[e._v("keyboard_arrow_up")])],1),e._l(e.files,(function(t){return r("md-list-item",{key:t.path,on:{click:function(r){return e.loadItem(t)}}},[t.directory?r("md-icon",[e._v("folder")]):r("md-icon",[e._v("cloud_download")]),r("span",{staticClass:"md-list-item-text"},[e._v(" "+e._s(t.path)+" ")])],1)}))],2)],1)},C=[],S=(r("caad"),r("a15b"),r("fb6a"),r("ac1f"),r("2532"),r("1276"),{name:"home",components:{},data:function(){return{files:[]}},mounted:function(){var e,t,r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(null!==localStorage.getItem("auth")||this.$route.path.includes("/login")){n.next=5;break}return n.next=3,regeneratorRuntime.awrap(this.$router.push("/login"));case 3:n.next=9;break;case 5:return e=JSON.parse(localStorage.auth),t=e.user,r=e.password,n.next=8,regeneratorRuntime.awrap(d.auth(t,r));case 8:this.initialize(this.$route.path);case 9:case"end":return n.stop()}}),null,this)},methods:{goUp:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.path.split("/"),e=e.slice(0,e.length-1),t.next=4,regeneratorRuntime.awrap(this.$router.push(e.join("/")));case 4:case"end":return t.stop()}}),null,this)},initialize:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(d.getDirectory(e));case 2:this.files=t.sent;case 3:case"end":return t.stop()}}),null,this)},loadItem:function(e){var t,r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.directory){n.next=5;break}return n.next=3,regeneratorRuntime.awrap(this.$router.push(e.path));case 3:n.next=12;break;case 5:t=document.createElement("a"),t.href=d.endPoint+"/file?token="+e.token,r=e.path.split("/"),t.setAttribute("target","_blank"),r=r[r.length-1],t.setAttribute("download",r),t.click();case 12:case"end":return n.stop()}}),null,this)}},beforeDestroy:function(){clearInterval(this.interval)},watch:{$route:function(e,t){console.log("to",e),this.initialize(this.$route.path)}}}),R=S,P=Object(f["a"])(R,j,C,!1,null,"6b8f11f0",null),T=P.exports;n["default"].use(g["a"]);var U=[{path:"/",redirect:"/media"},{path:"/login",name:"login",component:O},{path:"/*",name:"home",component:T}],q=new g["a"]({routes:U}),F=q,N=r("9483");Object(N["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),n["default"].config.productionTip=!1,n["default"].use(a.a),new n["default"]({router:F,render:function(e){return e(v)}}).$mount("#app")},"85ec":function(e,t,r){}});
//# sourceMappingURL=app.0b2c95fc.js.map