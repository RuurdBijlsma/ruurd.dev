(function(e){function t(t){for(var n,o,i=t[0],c=t[1],u=t[2],p=0,d=[];p<i.length;p++)o=i[p],a[o]&&d.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},s=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/pesten/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("64a9"),a=r.n(n);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},s=[],o=(r("034f"),r("2877")),i={},c=Object(o["a"])(i,a,s,!1,null,null,null),u=c.exports,l=r("8c4f"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("md-content",{key:e.updateKey,staticClass:"content"},[r("h1",[e._v("Pesten!")]),r("div",{staticClass:"deck"},[r("h2",[e._v("Deck")]),r("p",[e._v("Top card:")]),r("card-view",{attrs:{card:e.pesten.state.activeDeck[e.pesten.state.activeDeck.length-1]}}),r("p",[e._v("Opponent deck size: "+e._s(e.pesten.state.players[e.computerTurn].deck.length))])],1),r("div",{staticClass:"my-cards"},[r("h2",[e._v("My Cards")]),e._l(e.pesten.state.players[e.playerTurn].deck,function(t){return r("div",{staticClass:"move"},[r("card-view",{attrs:{card:t}}),e.possibleMoves.filter(function(e){return!!e.card}).find(function(e){return e.card.type===t.type&&e.card.color===t.color})?r("md-button",{staticClass:"md-dense md-primary",on:{click:function(r){e.playerMove(e.possibleMoves.filter(function(e){return!!e.card}).find(function(e){return e.card.type===t.type&&e.card.color===t.color}))}}},[e._v("Do move\n                ")]):e._e()],1)})],2),e.pesten.state.turn===e.playerTurn&&e.possibleMoves.filter(function(e){return!e.card}).length>0?r("div",{staticClass:"possible-moves"},[r("h2",[e._v("Possible Moves")]),e._l(e.possibleMoves.filter(function(e){return!e.card}),function(t){return r("div",{staticClass:"move"},[r("move-view",{attrs:{move:t}}),r("md-button",{staticClass:"md-dense md-primary",on:{click:function(r){return e.playerMove(t)}}},[e._v("Do move")])],1)})],2):e._e()]),r("md-content",[r("h2",[e._v("Moves log")]),r("p",[e._v("Computer is player "+e._s(e.computerTurn)+", human is player "+e._s(e.playerTurn))]),e._l(e.gameMoves,function(t){var n=t.move,a=t.turn;return r("div",{attrs:{move:n}},[r("h3",[e._v("Player: "+e._s(a))]),r("move-view",{attrs:{move:n}})],1)})],2)],1)},d=[],h=(r("96cf"),r("3b8d")),v=(r("7514"),r("6762"),r("2fdb"),r("ac4d"),r("8a81"),r("ac6a"),r("8615"),r("75fc")),f=r("d225"),y=r("b0b4"),k=function e(t,r){Object(f["a"])(this,e),this.color=t,this.type=r},m=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(f["a"])(this,e),this.type=t,this.value=r,this.card=n},b=function e(){Object(f["a"])(this,e),this.deck=[],this.takeIfNoMoves=!0,this.takeCards=0,this.canPlayAfterTake=!0,this.changeColor=!1},g=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;Object(f["a"])(this,e),this.activeDeck=[],this.backupDeck=[],this.players=Object(v["a"])(new Array(t)).map(function(){return new b}),this.turn=0,this.direction=1},C=function(){function e(){Object(f["a"])(this,e),this.rules={allColors:["hearts","spades","clubs","diamonds"],allowedAnywhere:["J","Joker"],allTypes:["2","3","4","5","6","7","8","9","10","J","Q","K","A","Joker"],changeColorCards:["J","Joker"],bounceCards:["2","Joker"],reverseDirectionCards:["A"],pestCards:["2","7","8","J","K","A","Joker"],skipCards:{7:-1,8:1,K:-1},takeCards:{2:2,Joker:5},jokerAmount:2,takeCardsWhenNoMove:1,playerStartCardAmount:8,playerCount:2},this.newGame()}return Object(y["a"])(e,[{key:"newGame",value:function(){this.maxPossibleTake=Math.max.apply(Math,Object(v["a"])(Object.values(this.rules.takeCards))),this.state=new g(this.rules.playerCount);var e=!0,t=!1,r=void 0;try{for(var n,a=this.rules.allTypes[Symbol.iterator]();!(e=(n=a.next()).done);e=!0)for(var s=n.value,o="Joker"===s?this.rules.jokerAmount:this.rules.allColors.length,i=0;i<o;i++)this.state.backupDeck.push(new k(this.rules.allColors[i],s))}catch(f){t=!0,r=f}finally{try{e||null==a.return||a.return()}finally{if(t)throw r}}this.shuffle(this.state.backupDeck),this.state.activeDeck.push(this.state.backupDeck.pop());var c=!0,u=!1,l=void 0;try{for(var p,d=this.state.players[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var h=p.value;h.deck=this.state.backupDeck.splice(0,this.rules.playerStartCardAmount)}}catch(f){u=!0,l=f}finally{try{c||null==d.return||d.return()}finally{if(u)throw l}}}},{key:"randomMove",value:function(e){var t=this.possibleMoves(e),r=t[Math.floor(Math.random()*t.length)];return this.doMove(e,r),r}},{key:"gameWinner",value:function(e){var t=!0,r=!1,n=void 0;try{for(var a,s=e.players[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var o=a.value;if(0===o.deck.length){var i=e.players.indexOf(o);if(e.players.reduce(function(e,t){return e.takeCards+t.takeCards})>0)continue;return i}}}catch(c){r=!0,n=c}finally{try{t||null==s.return||s.return()}finally{if(r)throw n}}return!1}},{key:"doMove",value:function(e,t){e.players.forEach(function(e){e.canPlayAfterTake&&(e.takeIfNoMoves=!0)});var r=e.players[e.turn],n=!1,a=!1;if("card"===t.type)this.playCard(e,t);else if("take"===t.type){var s=r.deck,o=e.backupDeck.splice(0,t.value);if(o.forEach(function(e){return s.push(e)}),r.takeIfNoMoves=!1,r.takeCards=0,r.canPlayAfterTake||(n=!0),r.canPlayAfterTake=!0,a=!0,e.backupDeck.length<=this.maxPossibleTake){var i=e.activeDeck.splice(0,e.activeDeck.length-1);this.shuffle(i),i.forEach(function(t){return e.backupDeck.push(t)})}}else if("bounce"===t.type)e.players[this.nextTurn(e)].takeCards=t.value.take,r.takeCards=0,t.value=t.value.cardIndex,this.playCard(e,t);else if("color"===t.type){r.changeColor=!1;var c=e.activeDeck[e.activeDeck.length-1];c.color=t.value}else t.type;n?e.turn=this.nextTurn(e):a||0!==r.takeCards||r.changeColor||(e.turn=this.nextTurn(e))}},{key:"playCard",value:function(e,t){var r=e.players[e.turn].deck,n=r[t.value],a=e.players[e.turn];this.rules.reverseDirectionCards.includes(n.type)&&(e.direction*=-1),n.type in this.rules.takeCards&&(e.players[this.nextTurn(e)].takeCards+=this.rules.takeCards[n.type]),1===r.length&&this.rules.pestCards.includes(r[0].type)?(a.takeCards+=2,a.canPlayAfterTake=!1,n.type in this.rules.skipCards&&this.isNextTurnMyTurn(e,e.turn+this.rules.skipCards[n.type]*e.direction,a)&&(a.canPlayAfterTake=!0)):n.type in this.rules.skipCards&&(e.turn+=this.rules.skipCards[n.type]*e.direction),this.rules.changeColorCards.includes(n.type)&&(a.changeColor=!0),e.activeDeck.push(n),r.splice(t.value,1)}},{key:"possibleMoves",value:function(e){var t=this,r=e.players[e.turn];if(r.changeColor)return this.rules.allColors.map(function(e){return new m("color",e)});if(r.takeCards>0)return r.deck.find(function(e){return t.rules.bounceCards.includes(e.type)})?r.deck.filter(function(e){return t.rules.bounceCards.includes(e.type)}).map(function(e){return new m("bounce",{cardIndex:r.deck.indexOf(e),take:r.takeCards})}):[new m("take",r.takeCards)];var n=r.deck,a=e.activeDeck[e.activeDeck.length-1],s=[];if(void 0===a)s=n;else{var o=!0,i=!1,c=void 0;try{for(var u,l=n[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var p=u.value;(p.type===a.type||p.color===a.color||this.rules.allowedAnywhere.includes(p.type))&&s.push(p)}}catch(h){i=!0,c=h}finally{try{o||null==l.return||l.return()}finally{if(i)throw c}}}var d=s.map(function(e){return new m("card",n.indexOf(e),e)});return 1===d.length&&"Joker"===s[0].type&&d.push(new m("take",1)),0===d.length&&r.takeIfNoMoves&&d.push(new m("take",this.rules.takeCardsWhenNoMove)),0===d.length&&d.push(new m("switch",!1)),d}},{key:"isNextTurnMyTurn",value:function(e,t,r){var n=e.players.indexOf(r);return n===this.nextTurn(e,t)}},{key:"nextTurn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!1===t&&(t=e.turn),(t+10*e.players.length+e.direction)%e.players.length}},{key:"previousTurn",value:function(e){return(e.turn+e.players.length-e.direction)%e.players.length}},{key:"shuffle",value:function(e){var t,r,n=e.length;while(n)r=Math.floor(Math.random()*n--),t=e[n],e[n]=e[r],e[r]=t;return e}}]),e}(),w=new C,M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"move-view"},[null!==e.move.card?r("card-view",{attrs:{card:e.move.card}}):r("div",[r("p",[e._v(e._s(e.move.type)+" "+e._s(e.move.value))])])],1)},_=[],T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card-view"},[r("p",[r("span",{style:"color: "+e.symbol.color},[e._v(e._s(e.symbol.string))]),e._v(" "+e._s(e.card.type))])])},x=[],O={name:"CardView",props:{card:k},computed:{symbol:function(){switch(this.card.color){case"spades":return{color:"black",string:"♠"};case"clubs":return{color:"black",string:"♣"};case"hearts":return{color:"red",string:"♥"};case"diamonds":return{color:"red",string:"♦"}}return"X"}}},j=O,D=Object(o["a"])(j,T,x,!1,null,"3825a821",null),P=D.exports,A={name:"MoveView",components:{CardView:P},props:{move:m}},J=A,S=Object(o["a"])(J,M,_,!1,null,"720f815d",null),N=S.exports;console.log(w);var E={name:"home",components:{MoveView:N,CardView:P},data:function(){return{playerTurn:0,computerTurn:1,gamePlay:[],possibleMoves:[],pesten:w,gameMoves:[],updateKey:0}},mounted:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:w.newGame(),t=1,w.state.turn=t,t===this.computerTurn&&this.computerPlay(),this.possibleMoves=w.possibleMoves(w.state),this.checkWin(),this.forceUpdate();case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{playerMove:function(e){w.state.turn===this.playerTurn&&(w.doMove(w.state,e),this.gameMoves.push({turn:this.playerTurn,move:e}),w.state.turn===this.computerTurn&&this.computerPlay(),w.state.turn===this.playerTurn&&(this.possibleMoves=w.possibleMoves(w.state)),this.forceUpdate(),this.checkWin())},computerPlay:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=[];while(!1===w.gameWinner(w.state)&&w.state.turn===this.computerTurn)r.push(w.randomMove(w.state,t));return r.forEach(function(t){return e.gameMoves.push({turn:e.computerTurn,move:t})}),console.log("computer",r),r},checkWin:function(){var e=w.gameWinner(w.state);!1!==e&&alert("Player "+e+" is winner!")},forceUpdate:function(){this.updateKey++}}},W=E,I=(r("fd5d"),Object(o["a"])(W,p,d,!1,null,"382b7cc2",null)),K=I.exports;n["default"].use(l["a"]);var V=new l["a"]({routes:[{path:"/",name:"home",component:K}]}),$=r("9483");Object($["a"])("".concat("/pesten/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var G=r("43f9"),U=r.n(G);r("51de"),r("d69d");n["default"].use(U.a),n["default"].config.productionTip=!1,new n["default"]({router:V,render:function(e){return e(u)}}).$mount("#app")},"64a9":function(e,t,r){},f35e:function(e,t,r){},fd5d:function(e,t,r){"use strict";var n=r("f35e"),a=r.n(n);a.a}});
//# sourceMappingURL=app.967304e5.js.map