{"version":3,"sources":["webpack:///./src/views/Game.vue?4be6","webpack:///./src/views/Game.vue?4a62","webpack:///src/views/Game.vue","webpack:///./src/views/Game.vue?e3b9","webpack:///./src/views/Game.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","user","attrs","avatar","_v","_s","name","Math","round","rounds","map","r","points","reduce","a","b","secondsLeft","activePlayer","me","guessWord","wordHint","settings","ceil","currentRound","everyone","length","_e","style","timeLeft","time","key","id","slice","otherChoosing","choosingWord","word","on","$event","startRound","ref","domProps","stream","directives","rawName","value","showEndRound","expression","sendChat","message","stringToColor","type","text","model","callback","$$v","chatText","staticRenderFns","console","log","params","interval","setInterval","clearTimeout","component","VBtn","VForm","VIcon","VTextField"],"mappings":"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","file":"js/chunk-4787d5c4.f6e98d9e.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=style&index=0&id=2ebf138b&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=style&index=0&id=2ebf138b&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"game\"},[_c('div',{staticClass:\"game-content\"},[_c('div',{staticClass:\"users\"},_vm._l((_vm.everyone),function(user){return _c('div',[_c('img',{attrs:{\"src\":user.avatar,\"alt\":\"User avatar\"}}),(user.name)?_c('p',[_vm._v(_vm._s(user.name)+\": \"+_vm._s(Math.round(user.rounds.map(function (r){ return r.points; }).reduce(function (a,b){ return a+b; }, 0))))]):_c('p',[_c('i',[_vm._v(\"Unnamed\")])])])}),0),_c('div',{staticClass:\"center-content\"},[_c('div',{staticClass:\"top-info\"},[_c('div',{staticClass:\"time-left\"},[_c('span',[_vm._v(_vm._s(_vm.secondsLeft)+\" second\"+_vm._s(_vm.secondsLeft !== 1 ? 's' : '')+\" left\")])]),_c('div',{staticClass:\"word\"},[(_vm.activePlayer === _vm.me)?_c('span',[_vm._v(_vm._s(_vm.guessWord))]):_c('span',[_vm._v(_vm._s(_vm.wordHint))])]),_c('div',{staticClass:\"round-info\"},[(_vm.settings && _vm.settings.rounds)?_c('span',[_vm._v(\"Round \"+_vm._s(Math.ceil(_vm.currentRound / _vm.everyone.length))+\" / \"+_vm._s(_vm.settings.rounds))]):_vm._e()])]),(_vm.settings)?_c('div',{staticClass:\"time-left-bar\",style:((\"width:calc(\" + (Math.ceil(_vm.timeLeft / _vm.settings.time * 1000)/10) + \"% - 20px)\"))}):_vm._e(),_c('div',{staticClass:\"draw-content\"},[(_vm.otherChoosing)?_c('div',{staticClass:\"other-choosing\"},[_vm._v(\" A player is choosing a word to draw \")]):_vm._e(),(_vm.showEndRound)?_c('div',{staticClass:\"round-end\"},[_c('p',{staticClass:\"round-info-reveal\"},[_vm._v(\"The word was\")]),_c('p',{staticClass:\"round-info-guess-word\"},[_vm._v(_vm._s(_vm.guessWord))]),_c('p',{staticClass:\"round-info-reveal\"},[_vm._v(\"Scores\")]),_vm._l((_vm.everyoneSorted),function(user){return _c('div',{key:user.id,staticClass:\"round-info-user\"},[_c('img',{staticClass:\"round-info-avatar\",attrs:{\"src\":user.avatar,\"alt\":\"User avatar\"}}),_c('span',{staticClass:\"round-info-name\"},[_vm._v(_vm._s(user.name)+\":\")]),_c('span',{staticClass:\"round-info-total\"},[_vm._v(\" \"+_vm._s(Math.round(user.rounds.slice(0, _vm.currentRound - 1).map(function (r){ return r.points; }).reduce(function (a,b){ return a+b; }, 0)))+\" \")]),_c('span',{staticClass:\"round-info-plus\"},[_vm._v(\"+\")]),_c('span',{staticClass:\"round-info-new\"},[_vm._v(_vm._s(Math.round(user.rounds[_vm.currentRound-1].points)))])])})],2):(_vm.activePlayer !== _vm.me && !_vm.otherChoosing)?_c('video',{ref:\"streamViewer\",staticClass:\"stream-viewer\",attrs:{\"autoplay\":\"\",\"width\":\"800\",\"height\":\"500\"},domProps:{\"srcObject\":_vm.activePlayer !== null ? _vm.activePlayer.stream : null}}):(_vm.choosingWord && _vm.activePlayer === _vm.me)?_c('div',{staticClass:\"choose-word\"},[_c('p',{staticClass:\"headline\"},[_vm._v(\"Choose a word to draw\")]),_c('div',{staticClass:\"word-choices\"},_vm._l((_vm.wordChoices),function(word){return _c('div',[_c('v-btn',{attrs:{\"x-large\":\"\",\"dark\":\"\",\"text\":\"\"},on:{\"click\":function($event){return _vm.startRound(word)}}},[_vm._v(_vm._s(word))])],1)}),0)]):_vm._e(),_c('simple-draw',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activePlayer === _vm.me && !_vm.choosingWord && !_vm.showEndRound && !_vm.otherChoosing),expression:\"activePlayer === me && !choosingWord && !showEndRound && !otherChoosing\"}],ref:\"draw\",staticClass:\"draw\",attrs:{\"updateCanvas\":_vm.activePlayer === _vm.me && !_vm.choosingWord && !_vm.showEndRound && !_vm.otherChoosing}})],1)]),_c('div',{staticClass:\"chat\"},[_c('v-form',{attrs:{\"autocomplete\":\"off\"},on:{\"submit\":_vm.sendChat}},[_c('div',{ref:\"chatContent\",staticClass:\"chat-content\"},_vm._l((_vm.chatMessages),function(message){return _c('p',{key:message.id,staticClass:\"chat-message\"},[_c('span',{staticClass:\"chat-message-user\",style:((\"color: \" + (_vm.stringToColor(message.user.id))))},[_vm._v(_vm._s(message.user.name))]),(message.type==='guess')?_c('span',{staticClass:\"chat-message-text\"},[_vm._v(_vm._s(message.text))]):(message.type==='correct')?_c('span',{staticClass:\"chat-message-correct\"},[_vm._v(\"Guessed correctly!\")]):_vm._e()])}),0),_c('v-text-field',{staticClass:\"chat-field\",attrs:{\"placeholder\":\"Make guess\",\"auto\":\"\",\"filled\":\"\"},model:{value:(_vm.chatText),callback:function ($$v) {_vm.chatText=$$v},expression:\"chatText\"}}),_c('v-btn',{staticClass:\"chat-icon\",attrs:{\"type\":\"submit\",\"icon\":\"\"}},[_c('v-icon',[_vm._v(\"mdi-send\")])],1)],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"game\">\n        <div class=\"game-content\">\n            <div class=\"users\">\n                <div v-for=\"user in everyone\">\n                    <img :src=\"user.avatar\" alt=\"User avatar\">\n                    <p v-if=\"user.name\">{{user.name}}: {{Math.round(user.rounds.map(r=>r.points).reduce((a,b)=>a+b,\n                        0))}}</p>\n                    <p v-else><i>Unnamed</i></p>\n                </div>\n            </div>\n            <div class=\"center-content\">\n                <div class=\"top-info\">\n                    <div class=\"time-left\">\n                        <span>{{secondsLeft}} second{{secondsLeft !== 1 ? 's' : ''}} left</span>\n                    </div>\n                    <div class=\"word\">\n                        <span v-if=\"activePlayer === me\">{{guessWord}}</span>\n                        <span v-else>{{wordHint}}</span>\n                    </div>\n                    <div class=\"round-info\">\n                        <span v-if=\"settings && settings.rounds\">Round {{Math.ceil(currentRound / everyone.length)}} / {{settings.rounds}}</span>\n                    </div>\n                </div>\n                <div class=\"time-left-bar\"\n                     v-if=\"settings\"\n                     :style=\"`width:calc(${Math.ceil(timeLeft / settings.time * 1000)/10}% - 20px)`\"></div>\n                <div class=\"draw-content\">\n                    <div class=\"other-choosing\" v-if=\"otherChoosing\">\n                        A player is choosing a word to draw\n                    </div>\n\n                    <div class=\"round-end\" v-if=\"showEndRound\">\n                        <p class=\"round-info-reveal\">The word was</p>\n                        <p class=\"round-info-guess-word\">{{guessWord}}</p>\n                        <p class=\"round-info-reveal\">Scores</p>\n                        <div v-for=\"user in everyoneSorted\"\n                             class=\"round-info-user\" :key=\"user.id\">\n                            <img :src=\"user.avatar\" class=\"round-info-avatar\" alt=\"User avatar\">\n                            <span class=\"round-info-name\">{{user.name}}:</span>\n                            <span class=\"round-info-total\">\n                            {{Math.round(user.rounds.slice(0, currentRound - 1).map(r=>r.points).reduce((a,b)=>a+b, 0))}}\n                            </span>\n                            <span class=\"round-info-plus\">+</span>\n                            <span class=\"round-info-new\">{{Math.round(user.rounds[currentRound-1].points)}}</span>\n                        </div>\n                    </div>\n\n                    <video :srcObject.prop=\"activePlayer !== null ? activePlayer.stream : null\"\n                           v-else-if=\"activePlayer !== me && !otherChoosing\"\n                           ref=\"streamViewer\"\n                           autoplay class=\"stream-viewer\"\n                           width=\"800\"\n                           height=\"500\"/>\n\n                    <div class=\"choose-word\" v-else-if=\"choosingWord && activePlayer === me\">\n                        <p class=\"headline\">Choose a word to draw</p>\n                        <div class=\"word-choices\">\n                            <div v-for=\"word in wordChoices\">\n                                <v-btn @click=\"startRound(word)\" x-large dark text>{{word}}</v-btn>\n                            </div>\n                        </div>\n                    </div>\n\n                    <simple-draw v-show=\"activePlayer === me && !choosingWord && !showEndRound && !otherChoosing\"\n                                 class=\"draw\"\n                                 ref=\"draw\"\n                                 :updateCanvas=\"activePlayer === me && !choosingWord && !showEndRound && !otherChoosing\"/>\n                </div>\n            </div>\n            <div class=\"chat\">\n                <v-form @submit=\"sendChat\" autocomplete=\"off\">\n                    <div class=\"chat-content\" ref=\"chatContent\">\n                        <p v-for=\"message in chatMessages\" :key=\"message.id\" class=\"chat-message\">\n                            <span :style=\"`color: ${stringToColor(message.user.id)}`\"\n                                  class=\"chat-message-user\">{{message.user.name}}</span>\n                            <span class=\"chat-message-text\" v-if=\"message.type==='guess'\">{{message.text}}</span>\n                            <span class=\"chat-message-correct\"\n                                  v-else-if=\"message.type==='correct'\">Guessed correctly!</span>\n                        </p>\n                    </div>\n                    <v-text-field placeholder=\"Make guess\" class=\"chat-field\" auto filled v-model=\"chatText\"/>\n                    <v-btn type=\"submit\" icon class=\"chat-icon\">\n                        <v-icon>mdi-send</v-icon>\n                    </v-btn>\n                </v-form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import SimpleDraw from \"@/components/SimpleDraw\";\n    import User from \"@/js/User\";\n    import words from '@/assets/words.json';\n\n    export default {\n        name: 'Game',\n        components: {SimpleDraw},\n        data: () => ({\n            host: false,\n            settings: null,\n            me: new User({}),\n            others: [],\n            everyone: [],\n            mesh: null,\n            activePlayer: null,\n            currentRound: 0,\n            guessWord: '',\n            wordHint: '',\n            chatText: '',\n            chatMessages: [],\n            roundTimeouts: [],\n            roundIntervals: [],\n            timeLeft: 0,\n            choosingWord: false,\n            wordChoices: [],\n            chooseTimeout: -1,\n            showEndRound: false,\n            roundStartTime: 0,\n            otherChoosing: false,\n        }),\n        async mounted() {\n            console.log('-------------{MOUNTED}--------------');\n            //debug\n            if (false) {\n                this.$store.commit('game', {\n                    host: true,\n                    me: new User({\n                        avatar: 'data:image/png;base64,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',\n                        name: 'RuteNL',\n                        id: '12308950175',\n                        host: true,\n                        me: true,\n                    }),\n                    others: [],\n                    settings: {rounds: 5, time: 10, language: 'English'},\n                });\n            }\n\n            this.mesh = this.$store.state.mesh;\n            this.settings = this.$store.state.game.settings;\n            this.me = this.$store.state.game.me;\n            this.others = this.$store.state.game.others;\n            this.everyone = [this.me, ...this.others].sort((a, b) => a > b ? 1 : -1);\n\n            this.everyone.forEach(u => u.rounds = [...new Array(this.settings.rounds * this.everyone.length)].map(() => ({\n                done: false,\n                guessTime: -1,\n                points: 0\n            })));\n            console.log(this.everyone);\n\n            let loadRemaining = this.others.length;\n            if (loadRemaining === 0)\n                this.hostStart();\n\n            this.mesh.on('data', (id, data) => {\n                let user = this.everyone.find(user => user.id === id);\n                let [type, ...params] = JSON.parse(data);\n                console.log(\"Received data\", type, params);\n                switch (type) {\n                    case 'loaded':\n                        if (!this.me.host)\n                            break;\n                        if (--loadRemaining <= 0) {\n                            //done loading\n                            this.hostStart();\n                        }\n                        console.log('id', id, 'user', user, 'loaded', params, 'loadRemaining', loadRemaining);\n                        break;\n                    case 'start':\n                        this.clientStart();\n                        break;\n                    case 'startRound':\n                        let player = this.everyone.find(user => user.id === params[0]);\n                        this.generalStartRound(player);\n                        break;\n                    case 'word':\n                        this.setGuessWord(params[0]);\n                        this.generalStartRoundAfterWordChoice();\n                        break;\n                    case 'wordHint':\n                        this.setWordHint(params[0]);\n                        break;\n                    case 'chat':\n                        this.submitChatText(user, params[0]);\n                        break;\n                    case 'endRound':\n                        console.log(\"Endround\", params[0]);\n                        for (let {id: userId, rounds} of params[0]) {\n                            let user = this.everyone.find(u => u.id === userId);\n                            user.rounds = rounds;\n                        }\n                        this.endRound();\n                        break;\n                }\n            });\n            this.mesh.on('disconnect', id => {\n                let user = this.everyone.findIndex(u => u.id === id);\n                this.everyone.splice(this.everyone.indexOf(user), 1);\n                this.others.splice(this.others.indexOf(user), 1);\n                this.chooseNewHost();\n            });\n            this.mesh.on('stream', (id, stream) => {\n                console.log(\"Received stream\", id, stream);\n                let user = this.everyone.find(user => user.id === id);\n                user.stream = stream;\n            });\n            if (this.me.host) {\n                console.log(\"me is host\", this.me, this.me.host);\n                //send start signal to peers now to make sure the host is first on this page\n                this.mesh.broadcast(['start', this.settings]);\n            } else {\n                //Tell host that this peer is loaded\n                let hostUser = this.others.find(user => user.host);\n                console.log(\"me is not host\", this.me, this.me.host, 'found host:', hostUser);\n                this.mesh.send(hostUser.id, ['loaded']);\n            }\n            // let wordHint;\n            // let chosenWord = 'ladder';\n            // for (let i = 0; i < 10; i++) {\n            //     wordHint = this.getWordHint(chosenWord, 1 / 4, wordHint);\n            // }\n        },\n        methods: {\n            hostStart() {\n                console.log(\"[HOST START]\");\n                //All users are loaded in at this point\n                this.generalStart();\n                this.generalStartRound(this.everyone[0]);\n\n                this.mesh.broadcast(['start']);\n                this.mesh.broadcast(['startRound', this.activePlayer.id]);\n            },\n            clientStart() {\n                console.log(\"[clientStart]\");\n                this.generalStart();\n            },\n            generalStart() {\n                console.log(\"[generalStart]\");\n                this.mesh.broadcastStream(this.$refs.draw.getStream());\n            },\n            async generalStartRound(player) {\n                this.showEndRound = false;\n                console.log(\"[generalStartRound]\");\n                this.currentRound++;\n                this.activePlayer = player;\n                this.timeLeft = this.settings.time;\n\n                if (this.activePlayer === this.me) {\n                    this.chooseWord();\n                } else {\n                    this.otherChoosing = true;\n                }\n            },\n            async generalStartRoundAfterWordChoice() {\n                this.otherChoosing = false;\n                this.$refs.draw.resetCanvas();\n                this.roundStartTime = performance.now();\n                let interval;\n                interval = setInterval(() => {\n                    let timePassed = performance.now() - this.roundStartTime;\n                    this.timeLeft = this.settings.time - timePassed / 1000;\n                    if (this.timeLeft < 0) {\n                        this.timeLeft = 0;\n                        this.endRound();\n                        clearInterval(interval);\n                    }\n                }, 1000 / 30);\n                this.roundIntervals.push(interval);\n            },\n            //Only call this on the person that is drawing this round\n            async startRound(chosenWord) {\n                clearTimeout(this.chooseTimeout);\n                this.generalStartRoundAfterWordChoice();\n                this.choosingWord = false;\n                console.log(\"[startRound]\");\n                this.mesh.broadcast(['word', chosenWord]);\n\n                this.setGuessWord(chosenWord);\n\n                let wordHint = this.getWordHint(chosenWord, 1 / 20);\n                this.mesh.broadcast(['wordHint', wordHint]);\n                //After 1/4 of the total time give the first hint\n                this.roundTimeouts.push(setTimeout(() => {\n                    wordHint = this.getWordHint(chosenWord, 1 / 5, wordHint);\n                    this.setWordHint(wordHint);\n                    this.mesh.broadcast(['wordHint', wordHint]);\n                }, this.settings.time * 1000 * (1 / 5)));\n                //After 2/4 of the total time give the second hint\n                this.roundTimeouts.push(setTimeout(() => {\n                    wordHint = this.getWordHint(chosenWord, 1 / 5, wordHint);\n                    this.setWordHint(wordHint);\n                    this.mesh.broadcast(['wordHint', wordHint]);\n                }, this.settings.time * 1000 * (2 / 5)));\n                //After 3/4 of the total time give the third hint\n                this.roundTimeouts.push(setTimeout(() => {\n                    wordHint = this.getWordHint(chosenWord, 1 / 5, wordHint);\n                    this.setWordHint(wordHint);\n                    this.mesh.broadcast(['wordHint', wordHint]);\n                }, this.settings.time * 1000 * (3 / 5)));\n                //After 3/4 of the total time give the third hint\n                this.roundTimeouts.push(setTimeout(() => {\n                    wordHint = this.getWordHint(chosenWord, 1 / 5, wordHint);\n                    this.setWordHint(wordHint);\n                    this.mesh.broadcast(['wordHint', wordHint]);\n                }, this.settings.time * 1000 * (4 / 5)));\n            },\n            endRound() {\n                for (let timeout of this.roundTimeouts)\n                    clearTimeout(timeout);\n                for (let interval of this.roundIntervals)\n                    clearInterval(interval);\n                this.showEndRound = true;\n                if (this.me.host) {\n                    this.roundTimeouts.push(setTimeout(() => {\n                        let currentPlayerIndex = this.everyone.indexOf(this.activePlayer);\n                        let nextPlayerIndex = (currentPlayerIndex + 1) % this.everyone.length;\n                        if (nextPlayerIndex < 0)\n                            nextPlayerIndex += this.everyone.length;\n                        this.generalStartRound(this.everyone[nextPlayerIndex]);\n                        this.mesh.broadcast(['startRound', this.activePlayer.id]);\n                    }, 1000 * 10));\n                }\n            },\n            getRandom(arr, n) {\n                const result = new Array(n);\n                let len = arr.length;\n                const taken = new Array(len);\n                if (n > len)\n                    throw new RangeError(\"getRandom: more elements taken than available\");\n                while (n--) {\n                    const x = Math.floor(Math.random() * len);\n                    result[n] = arr[x in taken ? taken[x] : x];\n                    taken[x] = --len in taken ? taken[len] : len;\n                }\n                return result;\n            },\n            chooseWord() {\n                this.choosingWord = true;\n                this.wordChoices = this.getRandom(words, 4);\n                this.chooseTimeout = setTimeout(() => {\n                    let choice = this.wordChoices[Math.floor(Math.random() * this.wordChoices.length)];\n                    this.startRound(choice);\n                }, 15000);\n            },\n            getWordHint(word, revealPercentage, hiddenWord = '_'.repeat(word.length)) {\n                revealPercentage = Math.max(0, Math.min(1, revealPercentage));\n\n                if (word.length !== hiddenWord.length)\n                    return console.warn(\"word.length does not match hiddenWord.length\", {word, hiddenWord});\n\n                const hiddenChar = '_';\n                let letterBag = word.split('').map((letter, index) => ({letter, index}));\n                let removeLetters = hiddenWord.split('').map((letter, index) => ({\n                    letter,\n                    index\n                })).filter(l => l.letter !== hiddenChar);\n                for (let letter of removeLetters)\n                    letterBag.splice(letterBag.findIndex(l => l.index === letter.index), 1);\n\n                const amountOfLettersToReveal = Math.round(letterBag.length * revealPercentage);\n                let revealedLetters = [];\n                for (let i = 0; i < amountOfLettersToReveal; i++) {\n                    let letter = letterBag[Math.floor(Math.random() * letterBag.length)];\n                    revealedLetters.push(letter);\n                }\n                let wordHint = hiddenWord.split('');\n                for (let {letter, index} of revealedLetters)\n                    wordHint[index] = letter;\n\n                return wordHint.join('');\n            },\n            setGuessWord(word) {\n                this.guessWord = word;\n            },\n            setWordHint(wordHint) {\n                this.wordHint = wordHint;\n            },\n            calculateScore(isArtist, guessTime, totalTime, rank, guesses, total) {\n                //Rank 1 to total, rank of guess\n                //Total is amount of users with correct guesses there are\n                if (isArtist) {\n                    return (total / guesses) * 10;\n                } else {\n                    let timeScore = guessTime / totalTime;\n                    let rankScore = rank / total;\n                    return 1 / (timeScore * rankScore);\n                }\n            },\n            sendChat(e) {\n                e.preventDefault();\n                this.mesh.broadcast(['chat', this.chatText]);\n                this.submitChatText(this.me, this.chatText);\n                this.chatText = '';\n            },\n            submitChatText(user, text) {\n                if (text.toLowerCase() === this.guessWord.toLowerCase() && user !== this.activePlayer) {\n                    this.chatMessages.push({\n                        id: Math.floor(Math.random() * 1000000),\n                        type: 'correct',\n                        user,\n                    });\n                    //todo record time of completion for the user\n                    if (this.me.host) {\n                        let roundI = this.currentRound - 1;\n                        let guessTime = (performance.now() - this.roundStartTime) / 1000;\n                        user.rounds[roundI].guessTime = guessTime;\n                        user.rounds[roundI].done = true;\n                        // if no one is not done:\n                        if (!this.everyone.filter(u => u !== this.activePlayer).some(u => !u.rounds[roundI].done)) {\n                            this.everyone.forEach(user => {\n                                let userGuessTime = user.rounds[roundI].guessTime;\n                                //How many users guessed right before me + 1:\n                                let userRank = this.everyone.filter(u => u.rounds[roundI].guessTime < userGuessTime).length + 1;\n                                let totalGuesses = this.everyone.filter(u => u.rounds[roundI].done).length;\n                                user.rounds[roundI].points = this.calculateScore(user === this.activePlayer, guessTime, this.settings.time, userRank, totalGuesses, this.everyone.length);\n                            });\n                            let usersInfo = this.everyone.map(u => ({id: u.id, rounds: u.rounds}));\n                            console.log(\"Broadcast endround\", usersInfo);\n                            this.mesh.broadcast(['endRound', usersInfo]);\n                            this.endRound();\n                        }\n                    }\n                } else {\n                    this.chatMessages.push({\n                        id: Math.floor(Math.random() * 1000000),\n                        type: 'guess',\n                        text,\n                        user,\n                    });\n                }\n\n                const chat = this.$refs.chatContent;\n                setTimeout(() => {\n                    chat.scrollTo({\n                        top: chat.scrollHeight,\n                        left: 0,\n                        behavior: \"smooth\",\n                    });\n                }, 50);\n            },\n            stringToColor(str) {\n                const hashCode = str => {\n                    let hash = 0;\n                    for (let i = 0; i < str.length; i++) {\n                        hash = str.charCodeAt(i) + ((hash << 5) - hash);\n                    }\n                    return hash;\n                };\n                const intToRGB = i => {\n                    const c = (i & 0x00FFFFFF)\n                        .toString(16)\n                        .toUpperCase();\n\n                    return \"00000\".substring(0, 6 - c.length) + c;\n                };\n                return '#' + intToRGB(hashCode(str));\n            },\n            chooseNewHost() {\n                if (this.everyone.findIndex(user => user.host) === -1 && this.mesh.isFullyConnected()) {\n                    console.log(this.everyone, JSON.stringify(this.everyone));\n                    let newHost = this.everyone.sort((a, b) => a.id > b.id ? 1 : -1)[0];\n                    newHost.host = true;\n                    console.log(\"Host disconnected, migrating host\", newHost);\n                }\n            },\n        },\n        computed: {\n            secondsLeft() {\n                return Math.round(this.timeLeft);\n            },\n            everyoneSorted() {\n                return this.everyone.sort((a, b) => b.rounds[this.currentRound - 1].points - a.rounds[this.currentRound - 1].points);\n            }\n        },\n        beforeDestroy() {\n            clearTimeout(this.chooseTimeout);\n            for (let timeout of this.roundTimeouts)\n                clearTimeout(timeout);\n            for (let interval of this.roundIntervals)\n                clearInterval(interval);\n        }\n    }\n</script>\n<style scoped>\n    .time-left-bar {\n        height: 8px;\n        background-color: lime;\n        border-top-right-radius: 8px;\n        border-top-left-radius: 8px;\n        margin: 0 auto;\n    }\n\n    .top-info {\n        display: flex;\n        justify-content: space-evenly;\n        font-family: 'Fredoka One', cursive !important;\n        padding: 15px 15px 5px;\n        margin-top: 25px;\n        font-size: 20px;\n        color: white;\n    }\n\n    .top-info > div {\n        width: 160px;\n        text-align: center;\n    }\n\n    .word {\n        font-size: 30px;\n        letter-spacing: 3px;\n        flex-grow: 1;\n        display: inline-block;\n        word-wrap: break-word;\n    }\n\n    .time-left, .round-info {\n        padding-top: 10px;\n    }\n\n    .game-content[data-v-3614b62c] {\n        /*min-width: 1237px;*/\n        margin: auto 10px;\n        display: flex;\n        justify-content: center;\n    }\n\n    .game-content > div {\n        display: inline-block;\n    }\n\n    .users {\n        background-color: rgba(255, 255, 255, 0.5);\n        vertical-align: top;\n        padding: 20px;\n        text-align: center;\n        border-top-left-radius: 10px;\n        border-bottom-left-radius: 10px;\n        margin-top: 110px;\n        max-height: 460px;\n    }\n\n    .users img {\n        border-radius: 50%;\n        width: 70px;\n        height: 70px;\n    }\n\n    .center-content {\n        display: flex;\n        flex-direction: column;\n    }\n\n    .other-choosing {\n        height: 500px;\n        width: 800px;\n        background-color: rgba(0, 0, 0, 0.8);\n        border-radius: 10px;\n        box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.3);\n        padding: 50px;\n        font-size: 40px;\n        font-family: 'Fredoka One', cursive !important;\n        color: white;\n        text-align: center;\n        overflow-y: auto;\n    }\n\n    .choose-word {\n        width: 800px;\n        height: 500px;\n        background-color: rgba(0, 0, 0, 0.8);\n        border-radius: 10px;\n        box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.3);\n        padding: 50px;\n        font-size: 40px;\n        font-family: 'Fredoka One', cursive !important;\n        color: white;\n        text-align: center;\n        overflow-y: auto;\n    }\n\n    .draw-content {\n        /*width: 800px;*/\n        /*height: 500px;*/\n    }\n\n    .round-end {\n        width: 800px;\n        height: 500px;\n        background-color: rgba(0, 0, 0, 0.8);\n        border-radius: 10px;\n        box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.3);\n        padding: 50px;\n        font-size: 30px;\n        font-family: 'Fredoka One', cursive !important;\n        color: white;\n        text-align: center;\n        overflow-y: auto;\n    }\n\n    .round-info-reveal {\n        color: rgba(255, 255, 255, 0.6);\n        font-size: 20px;\n    }\n\n    .round-info-guess-word {\n        color: white;\n        font-size: 40px;\n    }\n\n    .round-info-avatar {\n        width: 30px;\n        height: 30px;\n        border-radius: 50%;\n        margin-right: 10px;\n        display: inline-block;\n    }\n\n    .round-info-name {\n        color: rgba(255, 255, 255, 0.6);\n    }\n\n    .round-info-total {\n        color: rgba(255, 255, 255, 0.6);\n    }\n\n    .round-info-plus {\n        color: lime;\n    }\n\n    .round-info-new {\n        color: lime;\n    }\n\n    .choose-word p {\n        font-family: 'Fredoka One', cursive !important;\n        color: white;\n    }\n\n    .word-choices {\n        display: flex;\n        justify-content: space-evenly;\n    }\n\n    .draw {\n        width: 800px;\n        height: 580px;\n        background-color: rgba(255, 255, 255, 0.25);\n        border-radius: 10px;\n        overflow: hidden;\n        box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.3);\n    }\n\n    .stream-viewer {\n        width: 800px;\n        height: 500px;\n        background-color: rgba(255, 255, 255, 0.25);\n        border-radius: 10px;\n        overflow: hidden;\n        box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.3);\n    }\n\n    .chat {\n        background-color: rgba(255, 255, 255, 0.5);\n        height: 460px;\n        width: 300px;\n        border-top-right-radius: 10px;\n        border-bottom-right-radius: 10px;\n        margin-top: 110px;\n        vertical-align: top;\n        overflow: hidden;\n    }\n\n    .chat-content {\n        height: calc(100% - 57px);\n        width: 100%;\n        padding: 10px;\n        overflow-y: auto;\n    }\n\n    .chat-field {\n        width: 100%;\n        margin-right: -45px;\n        display: inline-block;\n    }\n\n    .chat-icon {\n        display: inline-block;\n    }\n\n    .chat-message {\n        margin: 5px 0;\n    }\n\n    .chat-message-user {\n        font-weight: bold;\n        margin-right: 6px;\n        background-color: white;\n        border-radius: 4px;\n        padding: 3px 7px;\n    }\n\n    .chat-message-text {\n\n    }\n\n    .chat-message-correct {\n        font-style: italic;\n        color: lime;\n        background-color: white;\n        border-radius: 4px;\n        padding: 3px 7px;\n    }\n\n    form.v-form {\n        height: 100%;\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Game.vue?vue&type=template&id=2ebf138b&scoped=true&\"\nimport script from \"./Game.vue?vue&type=script&lang=js&\"\nexport * from \"./Game.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Game.vue?vue&type=style&index=0&id=2ebf138b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ebf138b\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VForm,VIcon,VTextField})\n"],"sourceRoot":""}