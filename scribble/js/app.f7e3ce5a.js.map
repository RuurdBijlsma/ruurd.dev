{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?4cf4","webpack:///./src/components/SimpleDraw.vue?363b","webpack:///./src/js/CommandStack.js","webpack:///./src/js/Command.js","webpack:///./src/js/DrawableCommand.js","webpack:///./src/js/ClearCommand.js","webpack:///src/components/SimpleDraw.vue","webpack:///./src/components/SimpleDraw.vue?7920","webpack:///./src/components/SimpleDraw.vue","webpack:///./src/components/LobbyUsers.vue?1d05","webpack:///./src/App.vue?1de1","webpack:///src/App.vue","webpack:///./src/App.vue?d328","webpack:///./src/App.vue","webpack:///./src/registerServiceWorker.js","webpack:///./src/plugins/store.js","webpack:///./src/views/Home.vue?ef46","webpack:///./src/components/CreateUser.vue?e2bb","webpack:///src/components/CreateUser.vue","webpack:///./src/components/CreateUser.vue?2002","webpack:///./src/components/CreateUser.vue","webpack:///./src/components/LobbySettings.vue?4300","webpack:///src/components/LobbySettings.vue","webpack:///./src/components/LobbySettings.vue?2b2e","webpack:///./src/components/LobbySettings.vue","webpack:///./src/components/LobbyUsers.vue?9d0b","webpack:///src/components/LobbyUsers.vue","webpack:///./src/components/LobbyUsers.vue?d8d7","webpack:///./src/components/LobbyUsers.vue","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?6f06","webpack:///./src/views/Home.vue","webpack:///./src/plugins/router.js","webpack:///./src/plugins/vuetify.js","webpack:///./src/main.js","webpack:///./src/js/SimplePeerMesh.js","webpack:///./src/components/SimpleDraw.vue?5cf5","webpack:///./src/components/LobbySettings.vue?40cd","webpack:///./src/views/Home.vue?9b4f","webpack:///./src/components/CreateUser.vue?71ae"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","style","showControls","on","handleKey","ref","attrs","canvasWidth","canvasHeight","startTouch","startMove","canvasResize","preventContext","_v","activeRgb","_l","row","g","b","a","$event","selectColor","activeTool","selectTool","size","activeBrush","selectBrush","clearCanvas","_e","staticRenderFns","CommandStack","reset","command","commands","stackPosition","addCommand","execute","undo","log","Command","DrawableCommand","drawables","drawable","indexOf","ClearCommand","drawablesBackup","component","VApp","VContent","register","process","ready","registered","cached","updatefound","updated","offline","Vue","use","Vuex","Store","state","gameSettings","userInfo","mesh","SimplePeerMesh","socket","mutations","actions","_s","$route","query","game","host","updateUserName","settings","updateSettings","users","createLobby","model","callback","$$v","user","expression","VTextField","readOnly","roundOptions","$set","timeOptions","languageOptions","VForm","VSelect","id","refInFor","domProps","stream","playVideo","params","VBtn","VueRouter","routes","path","Home","router","Vuetify","theme","dark","config","productionTip","store","vuetify","render","h","App","$mount","appName","trickle","wrtc","url","peers","printDebug","roomCount","room","socketId","broadcastedStream","hidden","roomCountEventCallback","emit","off","once","webSocketOnly","transports","socketIo","checkFullConnect","mySocketId","createPeer","destroy","getConnectedPeerCount","signal","peer","send","JSON","stringify","addStream","removeStream","initiator","options","Peer","warn","peerCount","track","count","connected","close","fetch","response","json","EventEmitter"],"mappings":"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","file":"js/app.f7e3ce5a.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-4582a88e\":\"dcfeb225\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-4582a88e\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-4582a88e\":\"8158a702\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/scribble/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"simple-draw\"},[_c('div',{staticClass:\"canvas-container\",style:((\"height: calc(100% - \" + (_vm.showControls ? 80 : 0) + \"px)\")),on:{\"keypress\":_vm.handleKey}},[_c('canvas',{ref:\"canvas\",staticClass:\"canvas\",attrs:{\"width\":_vm.canvasWidth,\"height\":_vm.canvasHeight},on:{\"touchstart\":_vm.startTouch,\"mousedown\":_vm.startMove,\"resize\":_vm.canvasResize,\"contextmenu\":_vm.preventContext}},[_vm._v(\" Canvas is not supported \")])]),(_vm.showControls)?_c('div',{staticClass:\"controls\"},[_c('div',{staticClass:\"colors\"},[_c('div',{staticClass:\"selected-color\",style:((\"background-color: \" + _vm.activeRgb))}),_c('div',{staticClass:\"color-grid\"},_vm._l((_vm.colors),function(row,i){return _c('div',{key:i,staticClass:\"color-row\"},_vm._l((row),function(ref){\nvar r = ref[0];\nvar g = ref[1];\nvar b = ref[2];\nvar a = ref[3];\nreturn _c('div',{key:r+g+b+a,staticClass:\"single-color\",style:((\"background-color: rgb(\" + r + \",\" + g + \",\" + b + \")\")),on:{\"click\":function($event){return _vm.selectColor(r,g,b,a)}}})}),0)}),0)]),_c('div',{staticClass:\"tools\"},[_c('div',{staticClass:\"brush\",attrs:{\"active\":this.activeTool === 'brush'},on:{\"click\":function($event){return _vm.selectTool('brush')}}}),_c('div',{staticClass:\"fill\",attrs:{\"active\":this.activeTool === 'fill'},on:{\"click\":function($event){return _vm.selectTool('fill')}}}),_c('div',{staticClass:\"erase\",attrs:{\"active\":this.activeTool === 'eraser'},on:{\"click\":function($event){return _vm.selectTool('eraser')}}})]),_c('div',{staticClass:\"brush-sizes\"},_vm._l((_vm.brushSizes),function(size){return _c('div',{key:size,style:((\"\\n                    height: \" + size + \"px;\\n                    width: \" + size + \"px;\\n                    background-color: \" + _vm.activeRgb + \";\\n                    margin-top: \" + (5 + 25 - size / 2) + \"px;\\n                \")),attrs:{\"active\":_vm.activeBrush === size},on:{\"click\":function($event){return _vm.selectBrush(size)}}})}),0),_c('div',{staticClass:\"clear-canvas\",on:{\"click\":_vm.clearCanvas}})]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","class CommandStack {\r\n    constructor() {\r\n        this.reset();\r\n    }\r\n\r\n    addCommand(command) {\r\n        this.commands.splice(this.stackPosition + 1, this.commands.length);\r\n        this.commands.push(command);\r\n        this.stackPosition = this.commands.length - 1;\r\n    }\r\n\r\n    executeCommand(command) {\r\n        this.addCommand(command);\r\n        command.execute();\r\n    }\r\n\r\n    undo() {\r\n        if (this.commands.length > 0 && this.stackPosition >= 0)\r\n            this.commands[this.stackPosition--].undo();\r\n        else\r\n            console.log(\"Cant undo\");\r\n    }\r\n\r\n    redo() {\r\n        if (this.stackPosition + 1 < this.commands.length)\r\n            this.commands[++this.stackPosition].execute();\r\n        else\r\n            console.log(\"Cant redo\");\r\n    }\r\n\r\n    reset() {\r\n        this.commands = [];\r\n        this.stackPosition = -1;//Stack position refers to the last executed command\r\n    }\r\n}\r\n\r\nexport default new CommandStack();","export default class Command {\r\n    undo() {\r\n\r\n    }\r\n\r\n    execute() {\r\n\r\n    }\r\n}","import Command from \"@/js/Command\";\r\n\r\nexport default class DrawableCommand extends Command {\r\n    constructor(drawables, drawable) {\r\n        super();\r\n        this.drawables = drawables;\r\n        this.drawable = drawable;\r\n    }\r\n\r\n    undo() {\r\n        this.drawables.splice(this.drawables.indexOf(this.drawable), 1);\r\n    }\r\n\r\n    execute() {\r\n        this.drawables.push(this.drawable);\r\n    }\r\n}","import Command from \"@/js/Command\";\r\n\r\nexport default class ClearCommand extends Command {\r\n    constructor(drawables) {\r\n        super();\r\n        this.drawables = drawables;\r\n        this.drawablesBackup = [...drawables];\r\n    }\r\n\r\n    undo() {\r\n        this.drawables.push(...this.drawablesBackup);\r\n    }\r\n\r\n    execute() {\r\n        this.drawables.splice(0, this.drawables.length);\r\n    }\r\n}","<template>\n    <div class=\"simple-draw\">\n        <div class=\"canvas-container\"\n             @keypress=\"handleKey\"\n             :style=\"`height: calc(100% - ${showControls ? 80 : 0}px)`\"\n        >\n            <canvas class=\"canvas\"\n                    ref=\"canvas\"\n                    :width=\"canvasWidth\"\n                    :height=\"canvasHeight\"\n                    @touchstart=\"startTouch\"\n                    @mousedown=\"startMove\"\n                    @resize=\"canvasResize\"\n                    @contextmenu=\"preventContext\"\n            >\n                Canvas is not supported\n            </canvas>\n        </div>\n        <div class=\"controls\" v-if=\"showControls\">\n            <div class=\"colors\">\n                <div class=\"selected-color\" :style=\"`background-color: ${activeRgb}`\"></div>\n                <div class=\"color-grid\">\n                    <div v-for=\"(row, i) in colors\" class=\"color-row\" :key=\"i\">\n                        <div v-for=\"[r,g,b,a] in row\"\n                             class=\"single-color\"\n                             :style=\"`background-color: rgb(${r},${g},${b})`\"\n                             @click=\"selectColor(r,g,b,a)\"\n                             :key=\"r+g+b+a\"></div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"tools\">\n                <div class=\"brush\" :active=\"this.activeTool === 'brush'\" @click=\"selectTool('brush')\"></div>\n                <div class=\"fill\" :active=\"this.activeTool === 'fill'\" @click=\"selectTool('fill')\"></div>\n                <div class=\"erase\" :active=\"this.activeTool === 'eraser'\" @click=\"selectTool('eraser')\"></div>\n            </div>\n            <div class=\"brush-sizes\">\n                <div v-for=\"size in brushSizes\" :key=\"size\"\n                     :active=\"activeBrush === size\"\n                     @click=\"selectBrush(size)\"\n                     :style=\"`\n                        height: ${size}px;\n                        width: ${size}px;\n                        background-color: ${activeRgb};\n                        margin-top: ${5 + 25 - size / 2}px;\n                    `\"\n                ></div>\n            </div>\n            <div class=\"clear-canvas\" @click=\"clearCanvas\">\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import CommandStack from \"@/js/CommandStack\";\n    import DrawableCommand from \"@/js/DrawableCommand\";\n    import ClearCommand from \"@/js/ClearCommand\";\n\n\n    export default {\n        name: 'SimpleDraw',\n        props: {\n            readOnly: {\n                type: Boolean,\n                default: false,\n            },\n            updateCanvas: {\n                type: Boolean,\n                default: false,\n            },\n            showControls: {\n                type: Boolean,\n                default: true,\n            },\n            brushSize: {\n                type: Number,\n                default: 13,\n            },\n        },\n        data: () => ({\n            activeTool: 'brush',\n            activeColor: [0, 0, 0, 255],\n            activeBrush: 13,\n            colors: [\n                [\n                    [255, 255, 255, 255],\n                    [193, 193, 193, 255],\n                    [239, 19, 11, 255],\n                    [255, 113, 0, 255],\n                    [255, 228, 0, 255],\n                    [0, 204, 0, 255],\n                    [0, 178, 255, 255],\n                    [35, 31, 211, 255],\n                    [163, 0, 186, 255],\n                    [211, 124, 170, 255],\n                    [160, 82, 45]\n                ], [\n                    [0, 0, 0, 255],\n                    [76, 76, 76, 255],\n                    [116, 11, 7, 255],\n                    [194, 56, 0, 255],\n                    [232, 162, 0, 255],\n                    [0, 85, 16, 255],\n                    [0, 86, 158, 255],\n                    [14, 8, 101, 255],\n                    [85, 0, 105, 255],\n                    [167, 85, 116, 255],\n                    [99, 48, 13, 255],\n                ]\n                ,],\n            brushSizes: [7, 13, 25, 50],\n            fingers: {},\n            context: null,\n            drawables: [],\n            animationId: -1,\n            canvasWidth: 10,\n            canvasHeight: 10,\n            commands: [],\n            commandIndex: 0,\n        }),\n        mounted() {\n            console.log(CommandStack);\n            this.activeBrush = this.brushSize;\n\n            let canvas = this.$refs.canvas;\n            this.context = canvas.getContext('2d');\n            this.animationId = requestAnimationFrame(this.render);\n\n            window.addEventListener('resize', this.canvasResize, false);\n            document.addEventListener('keyup', this.handleKey, false);\n            document.addEventListener('mousemove', this.move, false);\n            document.addEventListener('touchmove', this.moveTouch, false);\n            document.addEventListener('mouseup', this.endMove, false);\n            document.addEventListener('touchend', this.endTouch, false);\n\n            this.updateCursor(this.activeBrush, this.activeColor, this.activeTool);\n            this.canvasResize();\n        },\n        beforeDestroy() {\n            console.log(\"Destroying\");\n            window.removeEventListener('resize', this.canvasResize);\n            document.removeEventListener('keyup', this.handleKey);\n            document.removeEventListener('mousemove', this.move);\n            document.removeEventListener('touchmove', this.moveTouch);\n            document.removeEventListener('mouseup', this.endMove);\n            document.removeEventListener('touchend', this.endTouch);\n            cancelAnimationFrame(this.animationId);\n            CommandStack.reset();\n        },\n        methods: {\n            preventContext(e) {\n                e.preventDefault();\n                return false;\n            },\n            render() {\n                // console.log('render', this.readOnly);\n                this.context.fillStyle = 'rgb(255,255,255)';\n                this.context.fillRect(0, 0, this.canvasWidth, this.canvasHeight);\n                this.context.lineCap = 'round';\n                this.context.lineJoin = 'round';\n                // this.context.imageSmoothingEnabled = false;\n\n                for (let drawable of this.drawables) {\n                    switch (drawable.type) {\n                        case 'line':\n                            this.context.beginPath();\n                            this.context.strokeStyle = this.toRgb(...drawable.color);\n                            this.context.lineWidth = drawable.brush;\n                            for (let [x, y] of drawable.line)\n                                this.context.lineTo(x, y);\n                            this.context.stroke();\n                            break;\n                        case 'square':\n                            this.context.fillStyle = this.toRgb(...drawable.color);\n                            this.context.fillRect(...drawable.position, ...drawable.shape);\n                            break;\n                        case 'fill':\n                            this.context.drawImage(drawable.canvas, 0, 0);\n                            break;\n                        default:\n                            console.warn(\"No case set\");\n                            break;\n                    }\n                }\n                this.animationId = requestAnimationFrame(this.render);\n            },\n            startTool(x, y, finger, tool = this.activeTool, brushSize = this.activeBrush) {\n                if (tool === 'brush') {\n                    let line = [[x, y]];\n                    let drawable = {\n                        type: 'line',\n                        brush: brushSize,\n                        color: this.activeColor,\n                        line,\n                    };\n                    finger.drawable = drawable;\n                    this.drawables.push(drawable);\n                } else if (tool === 'eraser') {\n                    let line = [[x, y]];\n                    let drawable = {\n                        type: 'line',\n                        brush: brushSize,\n                        color: [255, 255, 255, 255],\n                        line,\n                    };\n                    finger.drawable = drawable;\n                    this.drawables.push(drawable);\n                } else if (tool === 'fill') {\n                    let now = performance.now();\n                    this.fill3(x, y, this.activeColor);\n                    console.log(\"fill done\", performance.now() - now);\n                }\n            },\n            moveTool(x, y, finger, tool = this.activeTool) {\n                if (tool === 'brush' || this.activeTool === 'eraser') {\n                    finger.drawable.line.push([x, y]);\n                } else if (tool === 'fill') {\n                    console.log(\"fill move\");\n                }\n            },\n            endTool(x, y, finger, tool = this.activeTool) {\n                if (tool === 'brush' || this.activeTool === 'eraser') {\n                    finger.drawable.line.push([x, y]);\n                    CommandStack.addCommand(new DrawableCommand(this.drawables, finger.drawable));\n                    delete finger.drawable;\n                } else if (tool === 'fill') {\n                    console.log(\"fill end\");\n                }\n            },\n            getNeighbours(width, height, x, y, n8 = false, dist = 1) {\n                let neighbours;\n                if (n8) {\n                    neighbours = [\n                        [x - dist, y + 0],//left\n                        [x + dist, y + 0],//right\n                        [x + 0, y - dist],//top\n                        [x + 0, y + dist],//bottom\n                        [x - dist, y + dist],//bottom left\n                        [x + dist, y + dist],//bottom right\n                        [x + dist, y - dist],//top right\n                        [x - dist, y - dist],//top left\n                    ];\n\n                } else {\n                    neighbours = [\n                        [x - dist, y + 0],//left\n                        [x + dist, y + 0],//right\n                        [x + 0, y - dist],//top\n                        [x + 0, y + dist],//bottom\n                    ];\n                }\n                return neighbours.filter(([nX, nY]) =>\n                    !(nX === x && nY === y) &&\n                    nX >= 0 && nX < width &&\n                    nY >= 0 && nY < height\n                );\n            },\n            colorEquals(colorA, colorB) {\n                return colorA[0] === colorB[0] &&\n                    colorA[1] === colorB[1] &&\n                    colorA[2] === colorB[2] &&\n                    colorA[3] === colorB[3];\n            },\n            colorDistance(colorA, colorB) {\n                return Math.abs(colorA[0] - colorB[0]) +\n                    Math.abs(colorA[1] - colorB[1]) +\n                    Math.abs(colorA[2] - colorB[2]) +\n                    Math.abs(colorA[3] - colorB[3]);\n            },\n            fill3(startX, startY, replacementColor = this.activeColor) {\n                //Create duplicate canvas to draw on\n                let image = this.context.getImageData(0, 0, this.canvasWidth, this.canvasHeight);\n\n                //Create canvas where only the filled pixels are colored\n                let fillCanvas = document.createElement('canvas');\n                fillCanvas.width = this.canvasWidth;\n                fillCanvas.height = this.canvasHeight;\n                let fillContext = fillCanvas.getContext('2d');\n                let fillImage = fillContext.getImageData(0, 0, this.canvasWidth, this.canvasHeight);\n\n                let pixelPos = (startY * this.canvasWidth + startX) * 4;\n                let targetColor = image.data.slice(pixelPos, pixelPos + 4);\n\n                if (this.colorEquals(targetColor, replacementColor))\n                    return;\n\n                let drawable = {\n                    type: 'fill',\n                    canvas: fillCanvas,\n                    color: replacementColor,\n                };\n                CommandStack.executeCommand(new DrawableCommand(this.drawables, drawable));\n\n                if (this.drawables.filter(d => d.type === 'line').length === 0) {\n                    fillContext.fillStyle = `rgba(${replacementColor[0]},${replacementColor[1]},${replacementColor[2]},${replacementColor[3]})`;\n                    fillContext.fillRect(0, 0, this.canvasWidth, this.canvasHeight);\n                    return;\n                }\n\n                // \"Inspired\" by https://github.com/1j01/jspaint\n                // https://github.com/1j01/jspaint/blob/1712cddd27ef3e0a2a611aae221303e9592c7d75/src/image-manipulation.js#L259\n                const isTargetColor = i =>\n                    // matches start color (i.e. region to fill)\n                    image.data[i + 0] === targetColor[0] &&\n                    image.data[i + 1] === targetColor[1] &&\n                    image.data[i + 2] === targetColor[2] &&\n                    image.data[i + 3] === targetColor[3];\n\n                const cw4 = this.canvasWidth * 4;\n                const fillPixel = i => {\n                    let neighbours = [\n                        i, //Also have center pixel in neighbours\n                        i + cw4,//Down\n                        i - cw4,//Up\n                        i + 4,//Right\n                        i - 4,//Left\n                        i + cw4 + 4,//Down right\n                        i - cw4 + 4,//Up right\n                        i + cw4 - 4,//Down left\n                        i - cw4 - 4,//Up left\n                    ].filter(n =>\n                        n < image.data.length &&\n                        n >= 0\n                    );\n                    for (let n of neighbours) {\n                        fillImage.data[n + 0] = replacementColor[0];\n                        fillImage.data[n + 1] = replacementColor[1];\n                        fillImage.data[n + 2] = replacementColor[2];\n                        fillImage.data[n + 3] = replacementColor[3];\n                    }\n                    //down\n\n                    image.data[i + 0] = replacementColor[0];\n                    image.data[i + 1] = replacementColor[1];\n                    image.data[i + 2] = replacementColor[2];\n                    image.data[i + 3] = replacementColor[3];\n                };\n\n                const stack = [[startX, startY]];\n\n                while (stack.length) {\n                    let reachedLeft;\n                    let reachedRight;\n                    let [x, y] = stack.pop();\n\n                    pixelPos = (y * this.canvasWidth + x) * 4;\n                    while (isTargetColor(pixelPos)) {\n                        y--;\n                        pixelPos = (y * this.canvasWidth + x) * 4;\n                    }\n                    reachedLeft = false;\n                    reachedRight = false;\n\n                    while (true) {\n                        y++;\n                        pixelPos = (y * this.canvasWidth + x) * 4;\n\n                        //If y is out of bounds or the pixel isn't the targetColor break this loop\n                        if (!(y < this.canvasHeight && isTargetColor(pixelPos)))\n                            break;\n\n                        fillPixel(pixelPos);\n\n\n                        //Scan to our left\n                        if (x > 0)\n                            //Is pixel to the left target color\n                            if (isTargetColor(pixelPos - 4)) {\n                                if (!reachedLeft) {\n                                    stack.push([x - 1, y]);\n                                    reachedLeft = true;\n                                }\n                            } else if (reachedLeft)\n                                reachedLeft = false;\n\n                        //Scan to our right\n                        if (x < this.canvasWidth - 1)\n                            //Is pixel to the right target color\n                            if (isTargetColor(pixelPos + 4)) {\n                                if (!reachedRight) {\n                                    stack.push([x + 1, y]);\n                                    reachedRight = true;\n                                }\n                            } else if (reachedRight)\n                                reachedRight = false;\n\n                        //Go down one line\n                        pixelPos += cw4;\n                    }\n                }\n                fillContext.putImageData(fillImage, 0, 0);\n            },\n            clearCanvas() {\n                CommandStack.executeCommand(new ClearCommand(this.drawables));\n            },\n            selectColor(r, g, b, a = 255) {\n                this.activeColor = [r, g, b, a];\n                this.updateCursor(this.activeBrush, this.activeColor, this.activeTool);\n            },\n            selectTool(tool) {\n                this.activeTool = tool;\n                this.updateCursor(this.activeBrush, this.activeColor, this.activeTool);\n            },\n            selectBrush(brushSize) {\n                this.activeBrush = brushSize;\n                this.updateCursor(this.activeBrush, this.activeColor, this.activeTool);\n            },\n            updateCursor(brushSize, color, tool) {\n                if (this.readOnly) {\n                    this.$refs.canvas.style.cursor = `auto`;\n                    return\n                }\n                if (tool === 'eraser')\n                    color = [255, 255, 255, 255];\n                if (tool === 'fill')\n                    brushSize = 2;\n                let canvas = document.createElement('canvas');\n                let context = canvas.getContext('2d');\n                let strokeWidth = 10;\n                canvas.width = brushSize + strokeWidth * 2;\n                canvas.height = brushSize + strokeWidth * 2;\n                console.log(canvas.width, canvas.height);\n                context.fillStyle = this.toRgb(...color);\n                context.lineWidth = strokeWidth;\n                context.arc(canvas.width / 2, canvas.height / 2, brushSize / 2, 0, 2 * Math.PI);\n                context.strokeStyle = 'rgba(128,128,128,0.5)';\n                context.stroke();\n                context.fill();\n                let url = canvas.toDataURL('image/png');\n                this.$refs.canvas.style.cursor = `url(${url}) ${Math.floor(canvas.width / 2)} ${Math.floor(canvas.height / 2)}, auto`;\n            },\n            handleKey(e) {\n                if (this.readOnly || !this.showControls) return;\n\n                if (e.code === 'KeyZ' && e.ctrlKey && e.shiftKey)\n                    CommandStack.redo();\n                else if (e.code === 'KeyZ' && e.ctrlKey)\n                    CommandStack.undo();\n                else if (e.code === 'KeyF')\n                    this.selectTool('fill');\n                else if (e.code === 'KeyE')\n                    this.selectTool('eraser');\n                else if (e.code === 'KeyB')\n                    this.selectTool('brush');\n                else if (e.code === 'Delete')\n                    this.clearCanvas()\n            },\n            startMove(e, fingerIndex = 0) {\n                if (this.readOnly) return;\n\n                if (!this.fingers[fingerIndex])\n                    this.fingers[fingerIndex] = {};\n                let finger = this.fingers[fingerIndex];\n                finger.down = true;\n                let {top, left} = this.$refs.canvas.getBoundingClientRect();\n                let x = e.pageX - left;\n                let y = e.pageY - top;\n                let tool = e.button === 2 ? 'eraser' : this.activeTool;\n                this.startTool(x, y, finger, tool, e.button === 2 ? this.activeBrush * 3 : this.activeBrush);\n            },\n            move(e, fingerIndex = 0) {\n                if (this.readOnly) return;\n\n                if (this.fingers[fingerIndex] && this.fingers[fingerIndex].down) {\n                    let {top, left} = this.$refs.canvas.getBoundingClientRect();\n                    let x = e.pageX - left;\n                    let y = e.pageY - top;\n                    let tool = e.button === 2 ? 'eraser' : this.activeTool;\n                    this.moveTool(x, y, this.fingers[fingerIndex], tool);\n                }\n            },\n            endMove(e, fingerIndex = 0) {\n                if (this.readOnly) return;\n\n                if (this.fingers[fingerIndex]) {\n                    if (this.fingers[fingerIndex].down) {\n                        let {top, left} = this.$refs.canvas.getBoundingClientRect();\n                        let x = e.pageX - left;\n                        let y = e.pageY - top;\n                        let tool = e.button === 2 ? 'eraser' : this.activeTool;\n                        this.endTool(x, y, this.fingers[fingerIndex], tool);\n                    }\n                    this.fingers[fingerIndex].down = false;\n                }\n            },\n            startTouch(e) {\n                if (this.readOnly) return;\n\n                for (let touch of e.touches)\n                    this.startMove(touch, touch.identifier)\n            },\n            moveTouch(e) {\n                if (this.readOnly) return;\n\n                for (let touch of e.touches)\n                    this.move(touch, touch.identifier)\n            },\n            endTouch(e) {\n                if (this.readOnly) return;\n\n                for (let touch of e.changedTouches)\n                    this.endMove(touch, touch.identifier)\n            },\n            canvasResize() {\n                console.log('resize');\n                let canvas = this.$refs.canvas;\n                let {width, height} = canvas.getBoundingClientRect();\n                this.canvasWidth = width;\n                this.canvasHeight = height;\n            },\n            toRgb(r, g, b, a) {\n                return `rgba(${r},${g},${b},${a})`\n            }\n        },\n        watch: {\n            readOnly() {\n                this.updateCursor(this.activeBrush, this.activeColor, this.activeTool);\n            },\n            updateCanvas() {\n                this.canvasResize();\n            },\n            brushSize() {\n                this.activeBrush = this.brushSize;\n            },\n        },\n        computed: {\n            activeRgb() {\n                return this.toRgb(...this.activeColor);\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .simple-draw {\n        /*min-width: 610px;*/\n    }\n\n    .canvas {\n        width: 100%;\n        height: 100%;\n    }\n\n    .canvas-container {\n        background-color: white;\n        width: 100%;\n        height: calc(100% - 80px);\n    }\n\n    .controls {\n        padding: 10px;\n        display: flex;\n        justify-content: space-between;\n        /*background-color:rgba(0,0,0,0.3)*/\n    }\n\n    .colors {\n        display: flex;\n    }\n\n    .selected-color {\n        height: 50px;\n        width: 50px;\n        border-radius: 11px;\n        margin: 5px 0;\n    }\n\n    .color-grid {\n        display: flex;\n        flex-direction: column;\n        margin: 5px 10px;\n    }\n\n    .color-row {\n        display: flex;\n    }\n\n    .single-color {\n        width: 21px;\n        height: 21px;\n        border-radius: 50%;\n        margin: 2px;\n        cursor: pointer;\n    }\n\n\n    .tools {\n        display: flex;\n        margin-right: 10px;\n    }\n\n    .tools > div {\n        margin: 10px 5px;\n        height: 40px;\n        width: 40px;\n        background-size: cover;\n        background-repeat: no-repeat;\n        background-position: center;\n        border-radius: 50%;\n        cursor: pointer;\n        transition: background-color 0.2s;\n    }\n\n    .tools > div:hover {\n        background-color: rgba(255, 255, 255, 0.3);\n    }\n\n    .tools > div:active {\n        box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.5);\n    }\n\n    .tools > div[active=\"true\"] {\n        box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.7);\n    }\n\n    .brush {\n        background-image: url(../assets/brush.png);\n    }\n\n    .fill {\n        background-image: url(../assets/fill.png);\n    }\n\n    .erase {\n        background-image: url(../assets/eraser.png);\n    }\n\n    .brush-sizes {\n        display: flex;\n    }\n\n    .brush-sizes > div {\n        margin: 5px;\n        border-radius: 50%;\n        cursor: pointer;\n    }\n\n    .brush-sizes > div[active=\"true\"] {\n        box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.7);\n    }\n\n    .clear-canvas {\n        margin: 5px;\n        height: 50px;\n        width: 50px;\n        background-size: cover;\n        background-repeat: no-repeat;\n        background-position: center;\n        border-radius: 50%;\n        cursor: pointer;\n        transition: background-color 0.2s;\n        background-image: url(../assets/trash.png);\n    }\n\n    .clear-canvas:hover {\n        background-color: rgba(255, 255, 255, 0.3);\n    }\n\n    .clear-canvas:active {\n        background-color: maroon;\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleDraw.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleDraw.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SimpleDraw.vue?vue&type=template&id=098cb558&scoped=true&\"\nimport script from \"./SimpleDraw.vue?vue&type=script&lang=js&\"\nexport * from \"./SimpleDraw.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SimpleDraw.vue?vue&type=style&index=0&id=098cb558&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"098cb558\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LobbyUsers.vue?vue&type=style&index=0&id=65523eac&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LobbyUsers.vue?vue&type=style&index=0&id=65523eac&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{staticClass:\"app\"},[_c('v-content',{staticClass:\"app-content\"},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <v-app class=\"app\">\n        <v-content class=\"app-content\">\n            <router-view/>\n        </v-content>\n    </v-app>\n</template>\n\n<script>\n    //todo:\n    //* A lot\n    //* Flow: go to domain.com\n    // -> click join game or start game\n    // -> click start game (go to domain.com/lobby) / click join game, fill in code (and go to domain.com/lobby?game=)\n    // -> you instantly start a party\n    // -> share link, someone joins as non-host\n    // -> you change settings, you both change avatar and username\n    // -> host starts game, everyone goes to domain.com/play (vuex will remember game id)\n    // -> everyone plays game :)\n    //* Play game page\n\n    export default {\n        name: 'App',\n\n        components: {},\n\n        data: () => ({\n            //\n        }),\n    };\n</script>\n<style>\n    html, body {\n        overflow-y: auto;\n    }\n\n    .app-content {\n        background: linear-gradient(0deg, rgba(63, 215, 206, 1) 0%, rgba(244, 0, 255, 1) 100%);\n    }\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=35771509&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VContent } from 'vuetify/lib/components/VContent';\ninstallComponents(component, {VApp,VContent})\n","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker'\n\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready () {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n        'For more details, visit https://goo.gl/AFskqB'\n      )\n    },\n    registered () {\n      console.log('Service worker has been registered.')\n    },\n    cached () {\n      console.log('Content has been cached for offline use.')\n    },\n    updatefound () {\n      console.log('New content is downloading.')\n    },\n    updated () {\n      console.log('New content is available; please refresh.')\n    },\n    offline () {\n      console.log('No internet connection found. App is running in offline mode.')\n    },\n    error (error) {\n      console.error('Error during service worker registration:', error)\n    }\n  })\n}\n","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport SimplePeerMesh from \"@/js/SimplePeerMesh\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n    state: {\n        gameSettings: {},\n        userInfo: {},\n        mesh: new SimplePeerMesh('scribble'),\n        socket: null,\n    },\n    mutations: {\n        socket(state, socket) {\n            state.socket = socket;\n        },\n        gameSettings(state, gameSettings) {\n            state.gameSettings = gameSettings;\n        },\n        userInfo(state, userInfo) {\n            state.gameSettings = userInfo;\n        },\n    },\n    actions: {},\n    modules: {}\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('h1',[_vm._v(\"Game lobby - \"+_vm._s(_vm.$route.query.game))]),_c('p',[_vm._v(\"Share the link with others to invite them\")]),_c('div',{staticClass:\"settings\"},[_c('create-user',{ref:\"createUser\",attrs:{\"read-only\":!_vm.host},on:{\"userChange\":_vm.updateUserName}}),_c('lobby-settings',{ref:\"settings\",attrs:{\"read-only\":!_vm.host,\"updateSettings\":_vm.settings},on:{\"change\":_vm.updateSettings}}),_c('lobby-users',{attrs:{\"users\":_vm.users}})],1),(_vm.host)?_c('v-btn',{on:{\"click\":_vm.createLobby}},[_vm._v(\"Create lobby\")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"create-user\"},[_c('p',{staticClass:\"caption\"},[_vm._v(\"Draw your avatar (right click to erase):\")]),_c('simple-draw',{ref:\"draw\",staticClass:\"draw-avatar\",attrs:{\"show-controls\":false,\"brush-size\":7}}),_c('v-text-field',{attrs:{\"label\":\"Username\",\"name\":\"username\"},model:{value:(_vm.user),callback:function ($$v) {_vm.user=$$v},expression:\"user\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"create-user\">\n        <p class=\"caption\">Draw your avatar (right click to erase):</p>\n        <simple-draw class=\"draw-avatar\" :show-controls=\"false\" :brush-size=\"7\" ref=\"draw\"/>\n        <v-text-field label=\"Username\" v-model=\"user\" name=\"username\"/>\n    </div>\n</template>\n\n<script>\n    import SimpleDraw from \"@/components/SimpleDraw\";\n\n    export default {\n        name: 'CreateUser',\n        components: {SimpleDraw},\n        props: {\n            readOnly: {\n                type: Boolean,\n                default: false,\n            },\n        },\n        data: () => ({\n            user: '',\n        }),\n        methods: {\n            getUser() {\n                return {\n                    image: this.$refs.draw.$refs.canvas.toDataURL(),\n                    user: this.user,\n                    stream: this.$refs.draw.$refs.canvas.captureStream()\n                };\n            },\n        },\n        watch: {\n            user() {\n                console.log('emitting change', this.user);\n                this.$emit('userChange', this.user);\n            }\n        }\n    }\n</script>\n<style scoped>\n    .create-user {\n        padding: 20px;\n    }\n\n    .draw-avatar {\n        height: 200px;\n        width: 200px;\n        border-radius: 50%;\n        overflow: hidden;\n        box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.3);\n        margin: 20px 0;\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateUser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateUser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreateUser.vue?vue&type=template&id=92e44f74&scoped=true&\"\nimport script from \"./CreateUser.vue?vue&type=script&lang=js&\"\nexport * from \"./CreateUser.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CreateUser.vue?vue&type=style&index=0&id=92e44f74&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"92e44f74\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"lobby-settings\"},[_c('p',{staticClass:\"caption\"},[_vm._v(\"Game settings:\")]),_c('v-form',[_c('v-select',{attrs:{\"readonly\":_vm.readOnly,\"label\":\"Rounds\",\"items\":_vm.roundOptions},model:{value:(_vm.settings.rounds),callback:function ($$v) {_vm.$set(_vm.settings, \"rounds\", $$v)},expression:\"settings.rounds\"}}),_c('v-select',{attrs:{\"readonly\":_vm.readOnly,\"label\":\"Time limit\",\"items\":_vm.timeOptions},model:{value:(_vm.settings.time),callback:function ($$v) {_vm.$set(_vm.settings, \"time\", $$v)},expression:\"settings.time\"}}),_c('v-select',{attrs:{\"readonly\":_vm.readOnly,\"label\":\"Language\",\"items\":_vm.languageOptions},model:{value:(_vm.settings.language),callback:function ($$v) {_vm.$set(_vm.settings, \"language\", $$v)},expression:\"settings.language\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"lobby-settings\">\r\n        <p class=\"caption\">Game settings:</p>\r\n        <v-form>\r\n            <v-select :readonly=\"readOnly\" label=\"Rounds\" v-model=\"settings.rounds\" :items=\"roundOptions\"/>\r\n            <v-select :readonly=\"readOnly\" label=\"Time limit\" v-model=\"settings.time\" :items=\"timeOptions\"/>\r\n            <v-select :readonly=\"readOnly\" label=\"Language\" v-model=\"settings.language\" :items=\"languageOptions\"/>\r\n        </v-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"LobbySettings\",\r\n        props: {\r\n            readOnly: {\r\n                type: Boolean,\r\n                default: false,\r\n            },\r\n            updateSettings: {\r\n                type: Object,\r\n                default: null,\r\n            },\r\n        },\r\n        data: () => ({\r\n            roundOptions: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\r\n            timeOptions: [\r\n                {text: '10 seconds', value: 10,},\r\n                {text: '30 seconds', value: 30,},\r\n                {text: '50 seconds', value: 50,},\r\n                {text: '70 seconds', value: 70,},\r\n                {text: '90 seconds', value: 90,},\r\n                {text: '100 seconds', value: 100,},\r\n                {text: '120 seconds', value: 120,},\r\n                {text: '140 seconds', value: 140,},\r\n                {text: '160 seconds', value: 160,},\r\n                {text: '180 seconds', value: 180,},\r\n                {text: '200 seconds', value: 200,},\r\n            ],\r\n            languageOptions: ['English', 'Dutch'],\r\n            settings: {\r\n                rounds: 5,\r\n                time: 100,\r\n                language: 'English',\r\n            },\r\n        }),\r\n        methods: {\r\n            getSettings() {\r\n                let {rounds, time, language} = this.settings;\r\n                return {rounds, time, language};\r\n            }\r\n        },\r\n        watch: {\r\n            updateSettings() {\r\n                if (this.updateSettings !== null) {\r\n                    this.settings = this.updateSettings;\r\n                }\r\n            },\r\n            settings: {\r\n                deep: true,\r\n                handler() {\r\n                    this.$emit('change', this.settings);\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .lobby-settings {\r\n        padding: 20px;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LobbySettings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LobbySettings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LobbySettings.vue?vue&type=template&id=2372b15b&scoped=true&\"\nimport script from \"./LobbySettings.vue?vue&type=script&lang=js&\"\nexport * from \"./LobbySettings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LobbySettings.vue?vue&type=style&index=0&id=2372b15b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2372b15b\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\ninstallComponents(component, {VForm,VSelect})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"users\"},[_c('p',{staticClass:\"caption\"},[_vm._v(\"Users in lobby:\")]),_vm._l((_vm.users),function(user){return _c('div',{key:user.id,staticClass:\"user\"},[_c('video',{ref:\"videos\",refInFor:true,staticClass:\"video\",attrs:{\"autoplay\":\"\"},domProps:{\"srcObject\":user.stream},on:{\"canplay\":function($event){return _vm.playVideo($event)}}}),(user.name)?_c('p',[_vm._v(_vm._s(user.name))]):_c('p',[_c('i',[_vm._v(\"Unnamed\")])])])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"users\">\r\n        <p class=\"caption\">Users in lobby:</p>\r\n        <div class=\"user\" v-for=\"user in users\" :key=\"user.id\">\r\n            <video class=\"video\"\r\n                   :srcObject.prop=\"user.stream\"\r\n                   ref=\"videos\"\r\n                   @canplay=\"playVideo($event)\"\r\n                   autoplay/>\r\n            <p v-if=\"user.name\">{{user.name}}</p>\r\n            <p v-else><i>Unnamed</i></p>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"LobbyUsers\",\r\n        props: {\r\n            users: {\r\n                type: Array,\r\n                default: [],\r\n            },\r\n        },\r\n        data: () => ({}),\r\n        mounted() {\r\n        },\r\n        methods: {\r\n            async playVideo(e) {\r\n                let video = e.target;\r\n                try {\r\n                    await video.play();\r\n                } catch (e) {\r\n                    //interact first -.-\r\n                    let interval;\r\n                    interval = setInterval(async () => {\r\n                        try {\r\n                            await video.play();\r\n                            clearInterval(interval);\r\n                            console.log(\"Video is playing\")\r\n                        } catch (e) {\r\n                            //try again\r\n                        }\r\n                    }, 300);\r\n                }\r\n            }\r\n        },\r\n        watch: {\r\n            users: {\r\n                deep: true,\r\n                handler() {\r\n                    console.log(\"users change\")\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .users {\r\n        padding: 20px;\r\n    }\r\n\r\n    .user {\r\n        display: inline-block;\r\n        margin: 10px;\r\n        text-align: center;\r\n    }\r\n\r\n    .video {\r\n        border-radius: 50%;\r\n        height: 120px;\r\n        width: 120px;\r\n        background-color: white;\r\n        box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.3);\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LobbyUsers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LobbyUsers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LobbyUsers.vue?vue&type=template&id=65523eac&scoped=true&\"\nimport script from \"./LobbyUsers.vue?vue&type=script&lang=js&\"\nexport * from \"./LobbyUsers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LobbyUsers.vue?vue&type=style&index=0&id=65523eac&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"65523eac\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"home\">\n        <h1>Game lobby - {{$route.query.game}}</h1>\n        <p>Share the link with others to invite them</p>\n        <div class=\"settings\">\n            <create-user :read-only=\"!host\" ref=\"createUser\" @userChange=\"updateUserName\"/>\n            <lobby-settings :read-only=\"!host\" ref=\"settings\" @change=\"updateSettings\" :updateSettings=\"settings\"/>\n            <lobby-users :users=\"users\"/>\n        </div>\n        <v-btn v-if=\"host\" @click=\"createLobby\">Create lobby</v-btn>\n    </div>\n</template>\n\n<script>\n    import SimpleDraw from \"@/components/SimpleDraw\";\n    import CreateUser from \"@/components/CreateUser\";\n    import LobbySettings from \"@/components/LobbySettings\";\n    import LobbyUsers from \"@/components/LobbyUsers\";\n\n    export default {\n        name: 'Home',\n        components: {LobbyUsers, LobbySettings, CreateUser, SimpleDraw},\n        data: () => ({\n            host: false,\n            users: [],\n            meInfo: {name: ''},\n            settings: null,\n        }),\n        async mounted() {\n            let socket = await this.$store.state.mesh.connect('https://api.ruurd.dev');\n            this.$store.commit('socket', socket);\n            console.log(socket);\n\n            this.meInfo.id = socket.id;\n            this.meInfo.stream = this.$refs.createUser.getUser().stream;\n            this.users.push(this.meInfo);\n\n            if (this.$route.query.hasOwnProperty('game')) {\n                this.host = false;\n            } else {\n                console.log(\"HOST\");\n                this.host = true;\n                let gameId = (Math.floor(Math.random() * 1679616)).toString(36).padStart(4, '0').toUpperCase();\n                await this.$router.push({query: {game: gameId}});\n            }\n            //TEMP::::\n            this.host = this.$route.query.host === 'true';\n            let gameId = this.$route.query.game;\n\n            let users = {};\n            this.$store.state.mesh.on('connect', id => {\n                if (!users[id]) {\n                    users[id] = {id, stream: null, name: ''};\n                    this.users.push(users[id]);\n                }\n                console.log(\"userinfo\", id, 'connect');\n\n                let user = this.$refs.createUser.getUser();\n                this.$store.state.mesh.send(id, ['user', user.name]);\n                let settings = this.$refs.settings.getSettings();\n                this.$store.state.mesh.send(id, ['settings', settings]);\n            });\n\n            this.$store.state.mesh.on('disconnect', id => {\n                delete users[id];\n                let userInfo = this.users.find(u => u.id === id);\n                this.users.splice(this.users.indexOf(userInfo), 1);\n            });\n\n            this.$store.state.mesh.on('stream', (id, stream) => {\n                if (!users[id]) {\n                    users[id] = {id, stream: null, name: ''};\n                    this.users.push(users[id]);\n                }\n                users[id].stream = stream;\n                console.log(\"userinfo\", id, 'stream', stream);\n            });\n\n            this.$store.state.mesh.on('data', (id, data) => {\n                if (!users[id]) {\n                    users[id] = {id, stream: null, name: ''};\n                    this.users.push(users[id]);\n                }\n                let [type, ...params] = JSON.parse(data);\n                console.log(\"userinfo\", id, 'data', type, params);\n                if (type === 'user') {\n                    users[id].name = params[0];\n                } else if (type === 'settings') {\n                    if (!this.host)\n                        this.settings = params[0];\n                }\n                console.log(\"userinfo\", id, 'data', type, params);\n            });\n\n            await this.$store.state.mesh.join(gameId, true);\n            console.log(\"Joined room\", gameId);\n            this.$store.state.mesh.broadcastStream(this.meInfo.stream);\n        },\n        methods: {\n            updateSettings(settings) {\n                if (this.host)\n                    this.$store.state.mesh.broadcast(['settings', settings]);\n            },\n            updateUserName(user) {\n                this.meInfo.name = user;\n                this.$store.state.mesh.broadcast(['user', user]);\n            },\n            createLobby() {\n                let user = this.$refs.createUser.getUser();\n                let settings = this.$refs.settings.getSettings();\n                this.$store.commit('userInfo', user);\n                this.$store.commit('gameSettings', settings);\n                // console.log(gameId);\n            }\n        },\n    }\n</script>\n<style scoped>\n    .home {\n        width: 100%;\n        max-width: 1500px;\n        margin: 0 auto;\n        padding: 30px;\n    }\n\n    .settings {\n        display: flex;\n    }\n\n    .create-user {\n        padding: 20px;\n        width: 300px;\n    }\n\n    .lobby-settings {\n        width: 300px;\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=03c807de&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=03c807de&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"03c807de\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\ninstallComponents(component, {VBtn})\n","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Home from '../views/Home.vue'\n\nVue.use(VueRouter);\n\nconst routes = [\n    {\n        path: '/',\n        name: 'Home',\n        component: Home\n    },\n    {\n        path: '/game',\n        name: 'Game',\n        component: () => import( '../views/Game')\n    }\n];\n\nconst router = new VueRouter({\n    routes\n});\n\nexport default router\n","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib';\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n    theme: {\n        dark: true\n    }\n});\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport './registerServiceWorker'\r\nimport store from './plugins/store'\r\nimport router from './plugins/router'\r\nimport vuetify from './plugins/vuetify';\r\n\r\nVue.config.productionTip = false;\r\n\r\nnew Vue({\r\n    router,\r\n    store,\r\n    vuetify,\r\n    render: h => h(App)\r\n}).$mount('#app');\r\n","import Peer from 'simple-peer'\r\nimport socketIo from 'socket.io-client'\r\nimport EventEmitter from 'events';\r\n\r\nexport default class SimplePeerMesh extends EventEmitter {\r\n    constructor(appName, trickle = true, wrtc = false) {\r\n        super();\r\n        this.wrtc = wrtc;\r\n        this.appName = appName;\r\n        this.trickle = trickle;\r\n        this.socket = null;\r\n        this.url = '';\r\n        this.peers = {};\r\n        this.printDebug = false;\r\n        this.roomCount = -1;\r\n        this.room = '';\r\n        this.socketId = '';\r\n        this.broadcastedStream = null;\r\n    }\r\n\r\n    static async getServerRooms(url) {\r\n        if (url[url.length - 1] !== '/')\r\n            url += '/';\r\n\r\n        try {\r\n            let response = await fetch(url + 'rooms');\r\n            return await response.json()\r\n        } catch (e) {\r\n            return null\r\n        }\r\n    }\r\n\r\n    join(room, hidden = false) {\r\n        this.room = room;\r\n        // Waiting for this promise is dangerous, room count might be incorrect on the server due to bad disconnect\r\n        return new Promise(resolve => {\r\n            this.socket.emit('join', room, this.appName, hidden);\r\n            let roomCountEventCallback;\r\n            roomCountEventCallback = () => {\r\n                this.off('roomCount', roomCountEventCallback);\r\n\r\n                if (this.roomCount === 1)  // Alone in the room\r\n                    resolve();\r\n                else // Wait until all peer connections are complete\r\n                    this.once('fullConnect', () => resolve());\r\n            };\r\n            this.on('roomCount', roomCountEventCallback)\r\n        })\r\n    }\r\n\r\n    // On node/electron webSocketOnly might be necessary\r\n    connect(url, webSocketOnly = false) {\r\n        return new Promise((resolve, reject) => {\r\n            this.url = url;\r\n            let transports = ['websocket'];\r\n            if (!webSocketOnly) {\r\n                transports.push('polling')\r\n            }\r\n\r\n            this.socket = socketIo(url, {transports});\r\n\r\n            this.socket.on('roomCount', roomCount => {\r\n                this.roomCount = roomCount;\r\n                this.log('New room count: ' + roomCount + ' users');\r\n                this.emit('roomCount', roomCount);\r\n                this.checkFullConnect()\r\n            });\r\n\r\n            this.socket.on('connect', () => {\r\n                resolve(this.socket);\r\n                this.log('Connected to socket server')\r\n            });\r\n\r\n            this.socket.on('connect_error', e => {\r\n                this.log('Error connecting to socket server', e);\r\n                reject(e)\r\n            });\r\n\r\n            this.socket.on('socketId', mySocketId => {\r\n                this.log(`My socket id = ${mySocketId}`);\r\n                this.emit('socketId', mySocketId);\r\n                this.socketId = mySocketId;\r\n            });\r\n\r\n            this.socket.on('initialize', socketId => {\r\n                this.log('Initializing with ', socketId);\r\n                this.peers[socketId] = this.createPeer(socketId, true)\r\n            });\r\n\r\n            this.socket.on('destroy', socketId => {\r\n                if (this.peers.hasOwnProperty(socketId)) {\r\n                    try {\r\n                        this.peers[socketId].destroy();\r\n                    } catch (e) {\r\n                        //ignored, peer might already be destroyed error\r\n                    }\r\n                    delete this.peers[socketId];\r\n                    this.emit('disconnect', socketId);\r\n                    this.log('Destroying peer', socketId, 'peer count:', this.getConnectedPeerCount())\r\n                } else {\r\n                    this.log('Unable to destroy peer, it does not exist')\r\n                }\r\n            });\r\n            this.socket.on('signal', ([socketId, signal]) => {\r\n                this.log('Receiving signal from ', socketId);\r\n\r\n                if (!this.peers.hasOwnProperty(socketId)) {\r\n                    this.log(`${socketId} is initializing with me`);\r\n                    this.peers[socketId] = this.createPeer(socketId, false)\r\n                }\r\n\r\n                this.log(`Signalling ${socketId}`, signal);\r\n                this.peers[socketId].signal(signal)\r\n            })\r\n        })\r\n    }\r\n\r\n    broadcast(message) {\r\n        this.log(`Broadcasting to ${this.getConnectedPeerCount()} peers: ${message}`);\r\n        for (let peer in this.peers)\r\n            if (this.peers.hasOwnProperty(peer) && this.peers[peer] !== null) {\r\n                console.log('broadcasting ', message);\r\n                if (typeof message === 'string')\r\n                    this.peers[peer].send(message);\r\n                else\r\n                    this.peers[peer].send(JSON.stringify(message));\r\n            }\r\n    }\r\n\r\n    send(id, message) {\r\n        this.log(`Sending to ${id}: ${message}`);\r\n\r\n        if (this.peers.hasOwnProperty(id) && this.peers[id] !== null) {\r\n            console.log('broadcasting ', message);\r\n            if (typeof message === 'string')\r\n                this.peers[id].send(message);\r\n            else\r\n                this.peers[id].send(JSON.stringify(message));\r\n        }\r\n    }\r\n\r\n    broadcastStream(stream) {\r\n        this.broadcastedStream = stream;\r\n        this.log(`Broadcasting stream to ${this.getConnectedPeerCount()} peers: ${stream}`);\r\n        for (let peer in this.peers) {\r\n            if (this.peers.hasOwnProperty(peer)) {\r\n                if (this.peers[peer] !== null) {\r\n                    this.peers[peer].addStream(stream)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    sendStream(id, stream) {\r\n        this.log(`Sending stream to ${id}: ${stream}`);\r\n        if (this.peers.hasOwnProperty(id && this.peers[id] !== null))\r\n            this.peers[id].addStream(stream);\r\n    }\r\n\r\n    removeStream(id, stream) {\r\n        this.log(`Removing stream to ${id}: ${stream}`);\r\n        if (this.peers.hasOwnProperty(id && this.peers[id] !== null))\r\n            this.peers[id].removeStream(stream);\r\n    }\r\n\r\n    broadcastRemoveStream(stream) {\r\n        this.broadcastedStream = null;\r\n        this.log(`broadcastRemoveStream to ${this.getConnectedPeerCount()} peers: ${stream}`);\r\n        for (let peer in this.peers)\r\n            if (this.peers.hasOwnProperty(peer) && this.peers[peer] !== null)\r\n                this.peers[peer].removeStream(stream);\r\n    }\r\n\r\n    createPeer(socketId, initiator) {\r\n        let options = {initiator, trickle: this.trickle};\r\n        if (this.wrtc) {\r\n            options.wrtc = this.wrtc;\r\n            this.log('Using wrtc', options)\r\n        }\r\n        if (this.broadcastedStream !== null) {\r\n            options.stream = this.broadcastedStream;\r\n            console.log(\"Appending my stream to the new peer!\");\r\n        }\r\n        let peer = new Peer(options);\r\n        peer.on('error', err => {\r\n            console.warn(err);\r\n            this.emit('error', peer, socketId, {peer, error: err, initiator});\r\n            this.log('error', err)\r\n        });\r\n\r\n        peer.on('signal', data => {\r\n            this.log(`Emitting signal to socket: ${socketId}`);\r\n            // if (data.renegotiate) {\r\n            //     this.peers[socketId].destroy();\r\n            //     delete this.peers[socketId]\r\n            // }\r\n            this.socket.emit('message', [socketId, 'signal', data])\r\n        });\r\n\r\n        peer.on('connect', () => {\r\n            let peerCount = this.getConnectedPeerCount();\r\n            this.log('New peer connection, peer count: ', peerCount);\r\n            // console.log(peer, 'connect');\r\n            this.emit('connect', socketId);\r\n            this.checkFullConnect();\r\n        });\r\n\r\n        peer.on('data', data => {\r\n            this.emit('data', socketId, data);\r\n            this.log('data: ' + data)\r\n        });\r\n\r\n        peer.on('stream', stream => {\r\n            console.log(\"Stream received!\");\r\n            this.emit('stream', socketId, stream);\r\n            this.log('stream: ', stream)\r\n        });\r\n\r\n        peer.on('track', (track, stream) => {\r\n            this.emit('track', track, socketId, stream);\r\n            this.log('track: ', track, 'stream', stream)\r\n        });\r\n\r\n        peer.on('close', () => this.log('Peer connection closed', peer));\r\n\r\n        return peer\r\n    }\r\n\r\n    getConnectedPeerCount() {\r\n        let count = 0;\r\n        for (let peer in this.peers) {\r\n            if (this.peers.hasOwnProperty(peer)) {\r\n                if (this.peers[peer].connected) count++\r\n            }\r\n        }\r\n        return count\r\n    }\r\n\r\n    checkFullConnect() {\r\n        let peerCount = this.getConnectedPeerCount();\r\n        if (peerCount + 1 >= this.roomCount) {\r\n            this.log('Fully connected to room, peer count: ', peerCount, 'room count: ', this.roomCount);\r\n            this.emit('fullConnect')\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.socket.close();\r\n        for (let peer in this.peers)\r\n            if (this.peers.hasOwnProperty(peer)) {\r\n                try {\r\n                    this.peers[peer].destroy();\r\n                } catch (e) {\r\n                    //ignored, peer might already be destroyed error\r\n                }\r\n                delete this.peers[peer];\r\n            }\r\n    }\r\n\r\n    log(...msg) {\r\n        if (this.printDebug) {\r\n            console.log(...msg)\r\n        }\r\n    }\r\n}","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleDraw.vue?vue&type=style&index=0&id=098cb558&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleDraw.vue?vue&type=style&index=0&id=098cb558&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LobbySettings.vue?vue&type=style&index=0&id=2372b15b&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LobbySettings.vue?vue&type=style&index=0&id=2372b15b&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=03c807de&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=03c807de&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateUser.vue?vue&type=style&index=0&id=92e44f74&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateUser.vue?vue&type=style&index=0&id=92e44f74&scoped=true&lang=css&\""],"sourceRoot":""}